function e(t){function i(e){if(Object(e)!==e)return Promise.reject(new TypeError(e+" is not an object."));var t=e.done;return Promise.resolve(e.value).then((function(e){return{value:e,done:t}}))}return(e=function(e){this.s=e,this.n=e.next}).prototype={s:null,n:null,next:function(){return i(this.n.apply(this.s,arguments))},return:function(e){var t=this.s.return;return void 0===t?Promise.resolve({value:e,done:!0}):i(t.apply(this.s,arguments))},throw:function(e){var t=this.s.return;return void 0===t?Promise.reject(e):i(t.apply(this.s,arguments))}},new e(t)}function t(){return(t=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r])}return e}).apply(this,arguments)}function i(e,t){return t||(t=e.slice(0)),e.raw=t,e}
/*! typestate - v1.0.6 - 2018-05-17
* https://github.com/eonarheim/TypeState
* Copyright (c) 2018 Erik Onarheim; Licensed BSD-2-Clause*/var r;"undefined"==typeof globalThis&&(window.globalThis=window),function(e){var t=function(){function e(e){this.fsm=e}return e.prototype.to=function(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];this.toStates=e,this.fsm.addTransitions(this)},e.prototype.toAny=function(e){var t=[];for(var i in e)e.hasOwnProperty(i)&&t.push(e[i]);this.toStates=t,this.fsm.addTransitions(this)},e}();e.Transitions=t;var i=function(e,t,i){this.fsm=e,this.from=t,this.to=i};e.TransitionFunction=i;var r=function(){function e(e,t){void 0===t&&(t=!1),this._transitionFunctions=[],this._onCallbacks={},this._exitCallbacks={},this._enterCallbacks={},this._invalidTransitionCallback=null,this.currentState=e,this._startState=e,this._allowImplicitSelfTransition=t}return e.prototype.addTransitions=function(e){var t=this;e.fromStates.forEach((function(r){e.toStates.forEach((function(e){t._canGo(r,e)||t._transitionFunctions.push(new i(t,r,e))}))}))},e.prototype.on=function(e,t){var i=e.toString();return this._onCallbacks[i]||(this._onCallbacks[i]=[]),this._onCallbacks[i].push(t),this},e.prototype.onEnter=function(e,t){var i=e.toString();return this._enterCallbacks[i]||(this._enterCallbacks[i]=[]),this._enterCallbacks[i].push(t),this},e.prototype.onExit=function(e,t){var i=e.toString();return this._exitCallbacks[i]||(this._exitCallbacks[i]=[]),this._exitCallbacks[i].push(t),this},e.prototype.onInvalidTransition=function(e){return this._invalidTransitionCallback||(this._invalidTransitionCallback=e),this},e.prototype.from=function(){for(var e=[],i=0;i<arguments.length;i++)e[i-0]=arguments[i];var r=new t(this);return r.fromStates=e,r},e.prototype.fromAny=function(e){var i=[];for(var r in e)e.hasOwnProperty(r)&&i.push(e[r]);var n=new t(this);return n.fromStates=i,n},e.prototype._validTransition=function(e,t){return this._transitionFunctions.some((function(i){return i.from===e&&i.to===t}))},e.prototype._canGo=function(e,t){return this._allowImplicitSelfTransition&&e===t||this._validTransition(e,t)},e.prototype.canGo=function(e){return this._canGo(this.currentState,e)},e.prototype.go=function(e,t){if(this.canGo(e))this._transitionTo(e,t);else if(!this._invalidTransitionCallback||!this._invalidTransitionCallback(this.currentState,e))throw new Error("Error no transition function exists from state "+this.currentState.toString()+" to "+e.toString())},e.prototype.onTransition=function(e,t){},e.prototype.reset=function(){this.currentState=this._startState},e.prototype.is=function(e){return this.currentState===e},e.prototype._transitionTo=function(e,t){var i=this;this._exitCallbacks[this.currentState.toString()]||(this._exitCallbacks[this.currentState.toString()]=[]),this._enterCallbacks[e.toString()]||(this._enterCallbacks[e.toString()]=[]),this._onCallbacks[e.toString()]||(this._onCallbacks[e.toString()]=[]);var r=this._exitCallbacks[this.currentState.toString()].reduce((function(t,r){return t&&r.call(i,e)}),!0),n=this._enterCallbacks[e.toString()].reduce((function(e,r){return e&&r.call(i,i.currentState,t)}),!0);if(r&&n){var s=this.currentState;this.currentState=e,this._onCallbacks[this.currentState.toString()].forEach((function(e){e.call(i,s,t)})),this.onTransition(s,e)}},e}();e.FiniteStateMachine=r}(r||(r={}));var n=r,s={"application/dash+xml":["mpd"],"application/ogg":["ogx"],"application/vnd.apple.mpegurl":["m3u8"],"audio/flac":["flac"],"audio/midi":["mid","midi","kar","rmi"],"audio/mp4":["mp4a","m4a"],"audio/mpeg":["mpga","mp2","mp2a","mp3","m2a","m3a"],"audio/ogg":["oga","ogg","spx"],"audio/ogg; codecs=opus":["opus"],"audio/wav":["wav"],"audio/webm":["weba"],"audio/x-matroska":["mka"],"audio/x-mpegurl":["m3u"],"video/3gpp":["3gp"],"video/3gpp2":["3g2"],"video/mp4":["mp4","mp4v","mpg4"],"video/mpeg":["mpeg","mpg","mpe","m1v","m2v"],"video/ogg":["ogv"],"video/quicktime":["qt","mov"],"video/webm":["webm"],"video/x-f4v":["f4v"],"video/x-fli":["fli"],"video/x-flv":["flv"],"video/x-m4v":["m4v"],"video/x-matroska":["mkv","mk3d","mks"]};function a(e){return"application/vnd.apple.mpegurl"===e.type}function o(e){return e.type.startsWith("audio/")}function l(e){var t=function(e){var t=/\.(\w{2,4})(\?.*)?(#.*)?$/.exec(e);return t?t[1]:void 0}(e);return t?h(t):void 0}function h(e){var t=e.replace(/^\./,"").toLowerCase(),i=Object.keys(s).find((e=>s[e].includes(t)));if(i)return{type:i}}function d(e){var t=/^(\w+\/[\w-.+]+)(?:.*;\s*codecs=([^;]+))?/.exec(e);if(t&&t.length>1){var i={type:t[1]};return t.length>2&&(i.codecs=t[2]),i}}function u(e){var t=e.codecs?";codecs="+e.codecs:"";return""+e.type+t}function c(){var e=self.MediaSource||self.WebKitMediaSource;if(!e)return!1;var t=self.SourceBuffer||self.WebKitSourceBuffer,i=e&&"function"==typeof e.isTypeSupported&&e.isTypeSupported('video/mp4; codecs="avc1.42E01E,mp4a.40.2"'),r=!t||t.prototype&&"function"==typeof t.prototype.appendBuffer&&"function"==typeof t.prototype.remove;return!!i&&!!r}function p(e){var t="string"==typeof e?d(e):e;return!!t&&a(t)&&c()}function v(e){var t="string"==typeof e?e:u(e);return!!document.createElement("video").canPlayType(t)}
/**
 * @license
 * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at
 * http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at
 * http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at
 * http://polymer.github.io/PATENTS.txt
 */var g=new WeakMap,m=e=>function(){var t=e(...arguments);return g.set(t,!0),t},f=e=>"function"==typeof e&&g.has(e),y="undefined"!=typeof window&&null!=window.customElements&&void 0!==window.customElements.polyfillWrapFlushCallback,b=function(e,t,i){for(void 0===i&&(i=null);t!==i;){var r=t.nextSibling;e.removeChild(t),t=r}},_={},P={},E="{{lit-"+String(Math.random()).slice(2)+"}}",S="\x3c!--"+E+"--\x3e",w=new RegExp(E+"|"+S);class R{constructor(e,t){this.parts=[],this.element=t;for(var i=[],r=[],n=document.createTreeWalker(t.content,133,null,!1),s=0,a=-1,o=0,{strings:l,values:{length:h}}=e;o<h;){var d=n.nextNode();if(null!==d){if(a++,1===d.nodeType){if(d.hasAttributes()){for(var u=d.attributes,{length:c}=u,p=0,v=0;v<c;v++)T(u[v].name,"$lit$")&&p++;for(;p-- >0;){var g=l[o],m=A.exec(g)[2],f=m.toLowerCase()+"$lit$",y=d.getAttribute(f);d.removeAttribute(f);var b=y.split(w);this.parts.push({type:"attribute",index:a,name:m,strings:b}),o+=b.length-1}}"TEMPLATE"===d.tagName&&(r.push(d),n.currentNode=d.content)}else if(3===d.nodeType){var _=d.data;if(_.indexOf(E)>=0){for(var P=d.parentNode,S=_.split(w),R=S.length-1,k=0;k<R;k++){var x=void 0,O=S[k];if(""===O)x=C();else{var L=A.exec(O);null!==L&&T(L[2],"$lit$")&&(O=O.slice(0,L.index)+L[1]+L[2].slice(0,-"$lit$".length)+L[3]),x=document.createTextNode(O)}P.insertBefore(x,d),this.parts.push({type:"node",index:++a})}""===S[R]?(P.insertBefore(C(),d),i.push(d)):d.data=S[R],o+=R}}else if(8===d.nodeType)if(d.data===E){var M=d.parentNode;null!==d.previousSibling&&a!==s||(a++,M.insertBefore(C(),d)),s=a,this.parts.push({type:"node",index:a}),null===d.nextSibling?d.data="":(i.push(d),a--),o++}else for(var N=-1;-1!==(N=d.data.indexOf(E,N+1));)this.parts.push({type:"node",index:-1}),o++}else n.currentNode=r.pop()}for(var I of i)I.parentNode.removeChild(I)}}var T=(e,t)=>{var i=e.length-t.length;return i>=0&&e.slice(i)===t},k=e=>-1!==e.index,C=()=>document.createComment(""),A=/([ \x09\x0a\x0c\x0d])([^\0-\x1F\x7F-\x9F "'>=/]+)([ \x09\x0a\x0c\x0d]*=[ \x09\x0a\x0c\x0d]*(?:[^ \x09\x0a\x0c\x0d"'`<>=]*|"[^"]*|'[^']*))$/;
/**
 * @license
 * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at
 * http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at
 * http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at
 * http://polymer.github.io/PATENTS.txt
 */
class x{constructor(e,t,i){this.__parts=[],this.template=e,this.processor=t,this.options=i}update(e){var t=0;for(var i of this.__parts)void 0!==i&&i.setValue(e[t]),t++;for(var r of this.__parts)void 0!==r&&r.commit()}_clone(){for(var e,t=y?this.template.element.content.cloneNode(!0):document.importNode(this.template.element.content,!0),i=[],r=this.template.parts,n=document.createTreeWalker(t,133,null,!1),s=0,a=0,o=n.nextNode();s<r.length;)if(e=r[s],k(e)){for(;a<e.index;)a++,"TEMPLATE"===o.nodeName&&(i.push(o),n.currentNode=o.content),null===(o=n.nextNode())&&(n.currentNode=i.pop(),o=n.nextNode());if("node"===e.type){var l=this.processor.handleTextExpression(this.options);l.insertAfterNode(o.previousSibling),this.__parts.push(l)}else this.__parts.push(...this.processor.handleAttributeExpressions(o,e.name,e.strings,this.options));s++}else this.__parts.push(void 0),s++;return y&&(document.adoptNode(t),customElements.upgrade(t)),t}}
/**
 * @license
 * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at
 * http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at
 * http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at
 * http://polymer.github.io/PATENTS.txt
 */var O=window.trustedTypes&&trustedTypes.createPolicy("lit-html",{createHTML:e=>e}),L=" "+E+" ";class M{constructor(e,t,i,r){this.strings=e,this.values=t,this.type=i,this.processor=r}getHTML(){for(var e=this.strings.length-1,t="",i=!1,r=0;r<e;r++){var n=this.strings[r],s=n.lastIndexOf("\x3c!--");i=(s>-1||i)&&-1===n.indexOf("--\x3e",s+1);var a=A.exec(n);t+=null===a?n+(i?L:S):n.substr(0,a.index)+a[1]+a[2]+"$lit$"+a[3]+E}return t+=this.strings[e]}getTemplateElement(){var e=document.createElement("template"),t=this.getHTML();return void 0!==O&&(t=O.createHTML(t)),e.innerHTML=t,e}}
/**
 * @license
 * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at
 * http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at
 * http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at
 * http://polymer.github.io/PATENTS.txt
 */var N=e=>null===e||!("object"==typeof e||"function"==typeof e),I=e=>Array.isArray(e)||!(!e||!e[Symbol.iterator]);class D{constructor(e,t,i){this.dirty=!0,this.element=e,this.name=t,this.strings=i,this.parts=[];for(var r=0;r<i.length-1;r++)this.parts[r]=this._createPart()}_createPart(){return new B(this)}_getValue(){var e=this.strings,t=e.length-1,i=this.parts;if(1===t&&""===e[0]&&""===e[1]){var r=i[0].value;if("symbol"==typeof r)return String(r);if("string"==typeof r||!I(r))return r}for(var n="",s=0;s<t;s++){n+=e[s];var a=i[s];if(void 0!==a){var o=a.value;if(N(o)||!I(o))n+="string"==typeof o?o:String(o);else for(var l of o)n+="string"==typeof l?l:String(l)}}return n+=e[t]}commit(){this.dirty&&(this.dirty=!1,this.element.setAttribute(this.name,this._getValue()))}}class B{constructor(e){this.value=void 0,this.committer=e}setValue(e){e===_||N(e)&&e===this.value||(this.value=e,f(e)||(this.committer.dirty=!0))}commit(){for(;f(this.value);){var e=this.value;this.value=_,e(this)}this.value!==_&&this.committer.commit()}}class V{constructor(e){this.value=void 0,this.__pendingValue=void 0,this.options=e}appendInto(e){this.startNode=e.appendChild(C()),this.endNode=e.appendChild(C())}insertAfterNode(e){this.startNode=e,this.endNode=e.nextSibling}appendIntoPart(e){e.__insert(this.startNode=C()),e.__insert(this.endNode=C())}insertAfterPart(e){e.__insert(this.startNode=C()),this.endNode=e.endNode,e.endNode=this.startNode}setValue(e){this.__pendingValue=e}commit(){if(null!==this.startNode.parentNode){for(;f(this.__pendingValue);){var e=this.__pendingValue;this.__pendingValue=_,e(this)}var t=this.__pendingValue;t!==_&&(N(t)?t!==this.value&&this.__commitText(t):t instanceof M?this.__commitTemplateResult(t):t instanceof Node?this.__commitNode(t):I(t)?this.__commitIterable(t):t===P?(this.value=P,this.clear()):this.__commitText(t))}}__insert(e){this.endNode.parentNode.insertBefore(e,this.endNode)}__commitNode(e){this.value!==e&&(this.clear(),this.__insert(e),this.value=e)}__commitText(e){var t=this.startNode.nextSibling,i="string"==typeof(e=null==e?"":e)?e:String(e);t===this.endNode.previousSibling&&3===t.nodeType?t.data=i:this.__commitNode(document.createTextNode(i)),this.value=e}__commitTemplateResult(e){var t=this.options.templateFactory(e);if(this.value instanceof x&&this.value.template===t)this.value.update(e.values);else{var i=new x(t,e.processor,this.options),r=i._clone();i.update(e.values),this.__commitNode(r),this.value=i}}__commitIterable(e){Array.isArray(this.value)||(this.value=[],this.clear());var t,i=this.value,r=0;for(var n of e)void 0===(t=i[r])&&(t=new V(this.options),i.push(t),0===r?t.appendIntoPart(this):t.insertAfterPart(i[r-1])),t.setValue(n),t.commit(),r++;r<i.length&&(i.length=r,this.clear(t&&t.endNode))}clear(e){void 0===e&&(e=this.startNode),b(this.startNode.parentNode,e.nextSibling,this.endNode)}}class H{constructor(e,t,i){if(this.value=void 0,this.__pendingValue=void 0,2!==i.length||""!==i[0]||""!==i[1])throw new Error("Boolean attributes can only contain a single expression");this.element=e,this.name=t,this.strings=i}setValue(e){this.__pendingValue=e}commit(){for(;f(this.__pendingValue);){var e=this.__pendingValue;this.__pendingValue=_,e(this)}if(this.__pendingValue!==_){var t=!!this.__pendingValue;this.value!==t&&(t?this.element.setAttribute(this.name,""):this.element.removeAttribute(this.name),this.value=t),this.__pendingValue=_}}}class j extends D{constructor(e,t,i){super(e,t,i),this.single=2===i.length&&""===i[0]&&""===i[1]}_createPart(){return new U(this)}_getValue(){return this.single?this.parts[0].value:super._getValue()}commit(){this.dirty&&(this.dirty=!1,this.element[this.name]=this._getValue())}}class U extends B{}var F=!1;(()=>{try{var e={get capture(){return F=!0,!1}};window.addEventListener("test",e,e),window.removeEventListener("test",e,e)}catch(e){}})();class G{constructor(e,t,i){this.value=void 0,this.__pendingValue=void 0,this.element=e,this.eventName=t,this.eventContext=i,this.__boundHandleEvent=e=>this.handleEvent(e)}setValue(e){this.__pendingValue=e}commit(){for(;f(this.__pendingValue);){var e=this.__pendingValue;this.__pendingValue=_,e(this)}if(this.__pendingValue!==_){var t=this.__pendingValue,i=this.value,r=null==t||null!=i&&(t.capture!==i.capture||t.once!==i.once||t.passive!==i.passive),n=null!=t&&(null==i||r);r&&this.element.removeEventListener(this.eventName,this.__boundHandleEvent,this.__options),n&&(this.__options=z(t),this.element.addEventListener(this.eventName,this.__boundHandleEvent,this.__options)),this.value=t,this.__pendingValue=_}}handleEvent(e){"function"==typeof this.value?this.value.call(this.eventContext||this.element,e):this.value.handleEvent(e)}}var z=e=>e&&(F?{capture:e.capture,passive:e.passive,once:e.once}:e.capture)
/**
 * @license
 * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at
 * http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at
 * http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at
 * http://polymer.github.io/PATENTS.txt
 */;var W=new class{handleAttributeExpressions(e,t,i,r){var n=t[0];return"."===n?new j(e,t.slice(1),i).parts:"@"===n?[new G(e,t.slice(1),r.eventContext)]:"?"===n?[new H(e,t.slice(1),i)]:new D(e,t,i).parts}handleTextExpression(e){return new V(e)}};
/**
 * @license
 * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at
 * http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at
 * http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at
 * http://polymer.github.io/PATENTS.txt
 */function q(e){var t=K.get(e.type);void 0===t&&(t={stringsArray:new WeakMap,keyString:new Map},K.set(e.type,t));var i=t.stringsArray.get(e.strings);if(void 0!==i)return i;var r=e.strings.join(E);return void 0===(i=t.keyString.get(r))&&(i=new R(e,e.getTemplateElement()),t.keyString.set(r,i)),t.stringsArray.set(e.strings,i),i}var K=new Map,Y=new WeakMap,J=(e,t,i)=>{var r=Y.get(t);void 0===r&&(b(t,t.firstChild),Y.set(t,r=new V(Object.assign({templateFactory:q},i))),r.appendInto(t)),r.setValue(e),r.commit()};
/**
 * @license
 * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at
 * http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at
 * http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at
 * http://polymer.github.io/PATENTS.txt
 */
/**
 * @license
 * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at
 * http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at
 * http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at
 * http://polymer.github.io/PATENTS.txt
 */
"undefined"!=typeof window&&(window.litHtmlVersions||(window.litHtmlVersions=[])).push("1.4.1");var $=function(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),r=1;r<t;r++)i[r-1]=arguments[r];return new M(e,i,"html",W)},X={};function Q(e){for(var t=e;t&&t!==document.body;){if((t.hasAttribute("action")||"action"in t)&&"form"!==t.tagName&&!t.hasAttribute("disabled"))return t;t=t.parentElement}}Object.defineProperty(X,"__esModule",{value:!0}),X.getActionElement=Q;var Z=X.getActionFromEvent=function(e){var t,i,r=Q(e.target);if(!r)return[void 0,void 0];var n=r.getAttribute("action")||r.action,s=null!=(t=null==(i=r.getAttribute("action:events"))?void 0:i.split(/,\s?/g))?t:r.actionEvents;return s&&!s.includes(e.type)?[void 0,void 0]:[n,r.value]},ee=X.getElementOfType=function(e,t){void 0===t&&(t="player");for(var i=e;i&&i!==document.body;){if(i.getAttribute("type")===t)return i;i=i.parentElement}throw Error("no parent <xx-"+t+'> element found. Ensure that "element" is a child of a <xx-'+t+">, and that <xx-"+t+'> has a type="'+t+'" attribute')};X.getFontSize=function(e){var t=getComputedStyle(e);return t.fontSize&&/\d+(\.\d+)?px/.test(t.fontSize)?parseFloat(t.fontSize):0},X.getKeyActionsFromEvent=function(e){var t=document.activeElement;if(t){var i=t.getAttribute("keyaction:"+e.key.toLowerCase());if(i)return[i,t.value]}return[void 0,void 0]},X.getPositionFromEvent=function(e,t){var i="touches"in t?t.changedTouches[0].clientX:t.clientX,{left:r,width:n}=e.getBoundingClientRect(),s=(i-r)/n;return Math.min(1,Math.max(0,s))};
/**
 * @license
 * Copyright (c) 2018 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at
 * http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at
 * http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at
 * http://polymer.github.io/PATENTS.txt
 */
var te=new WeakMap,ie=m((e=>t=>{var i=te.get(t);if(void 0===e&&t instanceof B){if(void 0!==i||!te.has(t)){var r=t.committer.name;t.committer.element.removeAttribute(r)}}else e!==i&&t.setValue(e);te.set(t,e)}));function re(e,t){if(e===t)return!0;var i=se(e),r=se(t);return i===r&&("array"===i?function(e,t){var i=e.length,r=t.length;if(i!==r)return!1;for(var n=0;n<i;n++)if(!re(e[n],t[n]))return!1;return!0}(e,t):"object"===i?ne(e,t):"date"===i?e.getTime()===t.getTime():"error"===i?!!(e.message===t.message)&&ne(e,t):"nan"===i&&"nan"===r||e===t)}function ne(e,t){var i=ae(e),r=ae(t);if(i.length!=r.length)return!1;for(var n of i){if(!re(e[n],t[n]))return!1}return!0}function se(e){var t=typeof e;return"object"===t?e instanceof Date?t="date":e instanceof Error?t="error":Array.isArray(e)?t="array":null===e&&(t="null"):"number"===t&&isNaN(e)&&(t="nan"),t}function ae(e){var t=[];for(var i in e)"function"!=typeof e[i]&&t.push(i);return t}var oe,le=/[\t\n\r ]/,he=new Map;function de(){for(var[e,t]of he)ce(e)&&(he.delete(e),t())}function ue(){for(var e of(window.removeEventListener("DOMContentLoaded",ue),clearInterval(oe),oe=void 0,he.values()))e();he.clear()}function ce(e){for(var t=e;t&&t!==document.body;){var i=t.nextSibling;if(null!==i&&3===i.nodeType&&(null===i.textContent||le.test(i.textContent)))return!0;t=t.parentElement}return!1}function pe(e){return class extends e{constructor(){super(...arguments),this.isReady=!1,this._readyCompleteResolve,this._readyCompleteReject,this.readyComplete=new Promise(((e,t)=>{this._readyCompleteResolve=e,this._readyCompleteReject=t}))}connectedCallback(){if(super.connectedCallback&&super.connectedCallback(),!this.isConnected)try{this.isConnected=!0}catch(e){}var e;(e=this,new Promise((t=>{if("loading"!==document.readyState||ce(e))return t();if(void 0===oe&&(oe=window.setInterval(de,100),window.addEventListener("DOMContentLoaded",ue)),he.has(e)){var i=he.get(e);he.set(e,(()=>{i(),t()}))}else he.set(e,t)}))).then((()=>{this.isConnected&&(this.isReady=!0,this._readyCompleteResolve(),this.readyCallback(),this.dispatchEvent(new Event("ready",{bubbles:!1,cancelable:!0})))}))}readyCallback(){}disconnectedCallback(){if(!this.isReady){var e=Error("element disconnected before ready");e.code="ENOTREADY",this._readyCompleteReject(e)}if(this.isReady=!1,super.disconnectedCallback&&super.disconnectedCallback(),this.isConnected)try{this.isConnected=!1}catch(e){}}}}class ve{constructor(){this._subscribers=new Set,this._reactiveProperties=[]}subscribe(e){if(!this._reactiveProperties.length){var t=Object.getOwnPropertyDescriptors(this);for(var i in t)if(!i.startsWith("_")){var{value:r}=t[i];this._defineReactiveProperty(i,r),this._reactiveProperties.push(i)}}this._subscribers.add(e);return()=>{this._subscribers.delete(e)}}toJSON(){var e={};for(var t of this._reactiveProperties)e[t]=this[t];return e}destroy(){this._subscribers.clear()}_defineReactiveProperty(e,t){var i="__"+e;this[i]=t,Object.defineProperty(this,e,{get(){return this[i]},set(t){var r=this[i];if(!re(r,t))for(var n of(this[i]=t,this._subscribers))n(e,r)},configurable:!0,enumerable:!0})}}var ge=["accesskey","autocapitalize","class","contenteditable","contextmenu","dir","draggable","dropzone","id","itemprop","lang","slot","spellcheck","style","tabindex","title","translate"],me={string:String,boolean:Boolean,number:Number,object:Object},fe=!/param/.test((function(e){}));class ye extends(pe(HTMLElement)){static get reactiveAttributes(){return{}}static get reactiveProperties(){return{}}static get observedAttributes(){this._reactiveAttributes=this.reactiveAttributes,this._reactiveProperties=this.reactiveProperties;var e=[];for(var t in"hidden"in this._reactiveAttributes||(this._reactiveAttributes.hidden=Boolean),"isConnected"in this._reactiveProperties||(this._reactiveProperties.isConnected=Boolean),this._reactiveAttributes){var i=t.toLowerCase();if(ge.includes(i))throw Error('"'+i+'" is a reserved global attribute name and cannot be made reactive');var r=this._reactiveAttributes[t];if(r===ve)throw Error("ReactiveState instances cannot be set as attributes");this._attributeToPropertyMap.set(i,t),e.push(i),Object.defineProperty(this.prototype,t,this._getReactivePropertyDescription(t,r))}for(var n in this._reactiveProperties)Object.defineProperty(this.prototype,n,this._getReactivePropertyDescription(n,this._reactiveProperties[n]));return Promise.resolve().then((()=>this.whenDefinedCallback())),e}static whenDefinedCallback(){}static _getReactivePropertyDescription(e,t){var i="__"+e;return{get(){return this[i]},set(r){(this.isBootstrapped||(this[i]=void 0,void 0!==r))&&(this._executeHook(r,t)||this.setReactiveProperty(e,r)&&this._isReactiveAttribute(e)&&this._reflectingProperties.add(e.toLowerCase()))},configurable:!0,enumerable:!0}}constructor(){super(),this.isBootstrapped=!1,this._changedProperties=new Map,this._reflectingProperties=new Set,this._reactiveStateSubscriptions={},this._executingHook=!1,this._reflecting=!1,this._updating=!1,void 0!==this.handleEvent&&(this.handleEvent=this.handleEvent.bind(this));var e=this.constructor,i=t({},e._reactiveAttributes,e._reactiveProperties),r={};for(var n in i)this.hasOwnProperty(n)&&(r[n]=this[n]);Promise.resolve().then((()=>{for(var t in i){if(this.hasOwnProperty(t)){if(!(t in r)){var n="__"+t;r[t]=this.hasAttribute(t.toLowerCase())&&null!=this[n]?this[n]:this[t]}}else this._validateReactiveProperty(t);t in r&&(Object.defineProperty(this,t,e._getReactivePropertyDescription(t,i[t])),this[t]=r[t])}})),this.updatePromise=this.readyComplete.then((()=>{for(var[e,t]of this._changedProperties){if(this[e]instanceof ve){var i=t;for(var[r,n]of i)this.updating(e+"."+r,n)}this.updating(e,t)}this._invalidate()})).catch((e=>{if(!e.code||e.code&&"ENOTREADY"!==e.code)throw e}))}attributeChangedCallback(e,t,i){var r=this.constructor,n=r._attributeToPropertyMap.get(e);if(!this._reflecting&&void 0!==n&&t!==i){this.isBootstrapped||this._validateReactiveProperty(n);var s=r._reactiveAttributes[n],a=function(e,t){_e(t)&&(t=function(e){return e instanceof Date?Date:Array.isArray(e)?Array:me[typeof e]||Object}(e));if(t===Object||t===Array)try{return JSON.parse(e)}catch(e){return}else{if(t===Date)return new Date(e);if(t===Boolean)return null!==e;if(t===String)return null===e?void 0:e;if(t===Number)return null===e?void 0:Number(e)}return t(e)}(i,s);this._executingHook||this._executeHook(a,s)||this.setReactiveProperty(n,a)}}setAttribute(e,t){this._validateAttributeName(e),super.setAttribute(e,t)}setReactiveAttribute(e,t){var i=this.constructor._reactiveAttributes,r=this._validateAttributeName(e);if(!r)throw Error('"'+e+'" is not a registered reactive attribute');if(void 0!==t){var n=function(e,t){if(t===Object||t===Array){try{e=JSON.stringify(e)}catch(t){e=""}return e}if(t===Date)return e.toJSON();return(t===Boolean?be:String)(e)}(t,i[r]);void 0!==n&&void 0!==e&&(null===n?super.removeAttribute(e):super.setAttribute(e,n))}}setReactiveProperty(e,t){var i=this.constructor,r=i._reactiveAttributes,n=i._reactiveProperties;if(e in n||e in r){var s=n[e],a="__"+e,o=this[a],l=!0,h=!re(o,t);if(h){if(this[a]=t,s===ve&&(o&&this._reactiveStateSubscriptions[e]&&(this._reactiveStateSubscriptions[e](),delete this._reactiveStateSubscriptions[e]),t instanceof ve))for(var d of(this._reactiveStateSubscriptions[e]=t.subscribe(((t,i)=>{this._changedProperties.has(e)||this._changedProperties.set(e,new Map),this._changedProperties.get(e).set(t,i),this.updating(e+"."+t,i),this._invalidate()})),l=!1,o=new Map,t._reactiveProperties))o.set(d,void 0),this.isBootstrapped&&this.updating(e+"."+d,void 0);this._changedProperties.has(e)||this._changedProperties.set(e,o),this.isBootstrapped&&(l&&this.updating(e,o),this._invalidate())}return h}throw Error('"'+e+'" is not a registered reactive property')}updating(e,t){}updated(e){}firstUpdated(e){}forceUpdate(){this._invalidate()}get updateComplete(){return this.updatePromise}logChangedProperties(e){console.log(Array.from(e.keys()).map((t=>t+": "+e.get(t)+" => "+this[t])).join("\n"))}_validateAttributeName(e){if(fe)return e;var t=this.constructor,i=t._reactiveAttributes,r=t._attributeToPropertyMap.get(e);if(r&&r in i)return r;var n=e.toLowerCase();if(e!==n&&t._attributeToPropertyMap.get(n))throw Error("ReactiveElement attribute names must be lowercase: "+e)}_validateReactiveProperty(e){if(!fe){var t=Object.getPrototypeOf(this).hasOwnProperty(e),i="__"+e in this,r=this.hasOwnProperty(e);!t||i||r||"hidden"===e||"isConnected"===e||console.warn("missing ReactiveElement ("+this.nodeName+") instance property definition for: "+e)}}_isReactiveAttribute(e){return void 0!==e&&e in this.constructor._reactiveAttributes}_executeHook(e,t){return!!_e(t)&&(this._executingHook=!0,"string"==typeof t?t in this&&"function"==typeof this[t]&&this[t].call(this,e):"function"==typeof t&&t.call(this,this,e),this._executingHook=!1,!0)}async _invalidate(){if(!this._updating){this._updating=!0;var e,t=this.updatePromise;this.updatePromise=new Promise((t=>e=t)),await t;var i=this._changedProperties,r=this.constructor;for(var n of(this._reflecting=!0,this._reflectingProperties))this.setReactiveAttribute(n,this[r._attributeToPropertyMap.get(n)]);this._reflecting=!1,this._changedProperties=new Map,this._reflectingProperties.clear(),this._updating=!1,this.updated(i),e(),this.isBootstrapped||(this.isBootstrapped=!0,this.firstUpdated(i))}}}function be(e){return e?"":null}function _e(e){if(e!==String&&e!==Boolean&&e!==Number&&e!==Object&&e!==Array&&e!==Date&&e!==ve){var t=typeof e;if("string"===t||"function"===t)return!0}return!1}ye._reactiveAttributes,ye._reactiveProperties,ye._attributeToPropertyMap=new Map;var Pe=Object.freeze({__proto__:null,ReactiveElement:ye,ReactiveState:ve,isEquivalent:re}),Ee=new Map,Se="IntersectionObserver"in window&&"IntersectionObserverEntry"in window;var we,Re,Te='<svg viewBox="0 0 24 24" class="nrk-check" width="1.500em" height="1.500em" aria-hidden="true" focusable="false"><path fill="currentColor" d="M19.7072 7.70731L9.30492 18.1095l-4.88195-5.6331 1.51138-1.3098 3.4752 4.0098L18.293 6.29309l1.4142 1.41422z"/></svg>',ke='<svg viewBox="0 0 24 24" class="nrk-chevron-right" width="1.500em" height="1.500em" aria-hidden="true" focusable="false"><path fill="currentColor" d="M10.88 4l5.6 8-5.6 8H9l5.6-8L9 4h1.88z"/></svg>',Ce='<svg viewBox="0 0 24 24" class="nrk-close" width="1.500em" height="1.500em" aria-hidden="true" focusable="false"><path fill="currentColor" fill-rule="evenodd" clip-rule="evenodd" d="M12 10.5858l6.2929-6.29289 1.4142 1.41421L13.4142 12l6.2929 6.2929-1.4142 1.4142L12 13.4142l-6.29288 6.2929-1.41421-1.4142L10.5858 12 4.29291 5.70712l1.41421-1.41421L12 10.5858z"/></svg>',Ae='<svg viewBox="0 0 24 24" class="nrk-fullscreen--active" width="1.500em" height="1.500em" aria-hidden="true" focusable="false"><path fill="currentColor" fill-rule="evenodd" clip-rule="evenodd" d="M16.4142 9.00001l6.7929-6.79289L21.7929.792908 15 7.5858V1.00001h-2V11h10V9.00001h-6.5858zM9.00001 16.4142V23H11V13H1.00001v2H7.5858L.792908 21.7929l1.414212 1.4142 6.79289-6.7929z"/></svg>',xe='<svg viewBox="0 0 24 24" class="nrk-fullscreen" width="1.500em" height="1.500em" aria-hidden="true" focusable="false"><path fill="currentColor" fill-rule="evenodd" clip-rule="evenodd" d="M12 4h6.5858l-5.2929 5.29289 1.4142 1.41421L20 5.41423V12h2V2H12v2zM4 18.5858l5.29288-5.2929 1.41422 1.4142L5.4142 20H12v2H2V12h2v6.5858z"/></svg>',Oe='<svg viewBox="0 0 24 24" class="nrk-link" width="1.500em" height="1.500em" aria-hidden="true" focusable="false"><path fill="currentColor" fill-rule="evenodd" clip-rule="evenodd" d="M10.59 9.17L3.5 16.24l4.25 4.25 2.83-2.83L12 19.07l-4.24 4.24-7.07-7.07 9.9-9.9 4.24 4.25L13.4 12 10.6 9.17zm5.65-5.66l-2.83 2.83L12 4.93 16.24.69l7.07 7.07-9.9 9.9-4.24-4.25L10.6 12l2.82 2.83 7.08-7.07-4.25-4.25z"/></svg>',Le='<svg viewBox="0 0 24 24" class="nrk-media-pause" width="1.500em" height="1.500em" aria-hidden="true" focusable="false"><path fill="currentColor" fill-rule="evenodd" clip-rule="evenodd" d="M10 3H3v18h7V3zm11 0h-7v18h7V3z"/></svg>',Me='<svg viewBox="0 0 24 24" class="nrk-media-picture-in-picture--active" width="1.500em" height="1.500em" aria-hidden="true" focusable="false"><path fill="currentColor" fill-rule="evenodd" clip-rule="evenodd" d="M10 11v10h13V11H10zm11 8h-9v-6h9v6z"/><path fill="currentColor" opacity=".5" d="M3 17V5h18v4h2V3H1v16h7v-2H3z"/></svg>',Ne='<svg viewBox="0 0 24 24" class="nrk-media-picture-in-picture" width="1.500em" height="1.500em" aria-hidden="true" focusable="false"><path fill="currentColor" opacity=".5" fill-rule="evenodd" clip-rule="evenodd" d="M10 11v10h13V11H10zm11 8h-9v-6h9v6z"/><path fill="currentColor" d="M3 17V5h18v4h2V3H1v16h7v-2H3z"/></svg>',Ie='<svg viewBox="0 0 24 24" class="nrk-media-play" width="1.500em" height="1.500em" aria-hidden="true" focusable="false"><path fill="currentColor" d="M6 2h8l5.5 10L14 22H6l5.5-10L6 2z"/></svg>',De='<svg viewBox="0 0 24 24" class="nrk-media-subtitles--active" width="1.500em" height="1.500em" aria-hidden="true" focusable="false"><path fill="currentColor" fill-rule="evenodd" clip-rule="evenodd" d="M1 3h22v17H1V3zm4 13h9v-2H5v2zm14 0h-3v-2h3v2z"/><path fill="currentColor" fill-rule="evenodd" clip-rule="evenodd" d="M8.03806 19l1.78201.908-1.57541 3.0919H6.00001L8.03806 19z"/></svg>',Be='<svg viewBox="0 0 24 24" class="nrk-media-subtitles" width="1.500em" height="1.500em" aria-hidden="true" focusable="false"><path fill="currentColor" fill-rule="evenodd" clip-rule="evenodd" d="M1 3h22v17H9.77318l-1.52852 2.9999H6.00001L7.52853 20H1V3zm2 2v13h18V5H3zm11 11H5v-2h9v2zm2 0h3v-2h-3v2z"/></svg>',Ve='<svg viewBox="0 0 24 24" class="nrk-media-volume--1" width="1.500em" height="1.500em" aria-hidden="true" focusable="false"><path fill="currentColor" fill-rule="evenodd" clip-rule="evenodd" d="M7.53163 17l4.99997 6H15V1h-2.4684L7.53163 7H1v10h6.53163zM3 9h5.46838L13 3.56205V20.438L8.46838 15H3V9zm16 0v6h-2V9h2z"/></svg>',He='<svg viewBox="0 0 24 24" class="nrk-media-volume--2" width="1.500em" height="1.500em" aria-hidden="true" focusable="false"><path fill="currentColor" fill-rule="evenodd" clip-rule="evenodd" d="M12.5316 23l-4.99997-6H1V7h6.53163l4.99997-6H15v22h-2.4684zM8.46838 9H3v6h5.46838L13 20.438V3.56205L8.46838 9zM19 15V9h-2v6h2zm4-8v10h-2V7h2z"/></svg>',je='<svg viewBox="0 0 24 24" class="nrk-media-volume--3" width="1.500em" height="1.500em" aria-hidden="true" focusable="false"><path fill="currentColor" fill-rule="evenodd" clip-rule="evenodd" d="M12.5316 23l-4.99997-6H1V7h6.53163l4.99997-6H15v22h-2.4684zM8.46838 9H3v6h5.46838L13 20.438V3.56205L8.46838 9zM19 17V7h-2v10h2zm4-13v16h-2V4h2z"/></svg>',Ue='<svg viewBox="0 0 24 24" class="nrk-media-volume--muted" width="1.500em" height="1.500em" aria-hidden="true" focusable="false"><path fill="currentColor" fill-rule="evenodd" clip-rule="evenodd" d="M7.53163 17l4.99997 6H15V1h-2.4684L7.53163 7H1v10h6.53163zM3 9h5.46838L13 3.56205V20.438L8.46838 15H3V9zm18.9 3L24 9.9l-1.4-1.4-2.1 2.1-2.1-2.1L17 9.9l2.1 2.1-2.1 2.1 1.4 1.4 2.1-2.1 2.1 2.1 1.4-1.4-2.1-2.1z"/></svg>',Fe='<svg viewBox="0 0 24 24" class="nrk-open-in-new" width="1.500em" height="1.500em" aria-hidden="true" focusable="false"><path fill="currentColor" fill-rule="evenodd" clip-rule="evenodd" d="M19 19H5V5h4V3H3v18h18v-6h-2v4zm0-12.58576V11h2V3h-8v2h4.5858L7.58582 15h2.82838L19 6.41424z"/></svg>',Ge='<svg viewBox="0 0 24 24" class="nrk-reload" width="1.500em" height="1.500em" aria-hidden="true" focusable="false"><path fill="currentColor" fill-rule="evenodd" clip-rule="evenodd" d="M12.5205 0h-2.4413L7.27924 4l2.79996 4h2.4413l-2.0999-2.99998h1.5793c3.866 0 7 3.13401 7 6.99998 0 3.866-3.134 7-7 7-3.86595 0-6.99996-3.134-6.99996-7 0-1.5987.53509-3.07132 1.43737-4.25011L5.20157 6.10223C3.83091 7.68111 2.99994 9.74415 2.99994 12c0 4.9706 4.02944 9 8.99996 9 4.9706 0 9-4.0294 9-9 0-4.97054-4.0294-8.99998-9-8.99998h-1.5794L12.5205 0z"/></svg>',ze='<svg viewBox="0 0 24 24" class="nrk-some-share" width="1.500em" height="1.500em" aria-hidden="true" focusable="false"><path fill="currentColor" fill-rule="evenodd" clip-rule="evenodd" d="M20.6023 9l-4.9-7H13.43l4.2 6H12c-3.86599 0-7 3.134-7 7v7.2929l2-2V15c0-2.7614 2.23858-5 5-5h5.63l-4.2 6h2.2723l4.9-7z"/></svg>',We={},qe={};Object.defineProperty(qe,"__esModule",{value:!0});var Ke=["weeks","years","months","days","hours","minutes","seconds"],Ye=Object.freeze({years:0,months:0,weeks:0,days:0,hours:0,minutes:0,seconds:0}),Je=qe.pattern=new RegExp("P(?:(\\d+(?:[\\.,]\\d+)?W)|(\\d+(?:[\\.,]\\d+)?Y)?(\\d+(?:[\\.,]\\d+)?M)?(\\d+(?:[\\.,]\\d+)?D)?(?:T(\\d+(?:[\\.,]\\d+)?H)?(\\d+(?:[\\.,]\\d+)?M)?(\\d+(?:[\\.,]\\d+)?S)?)?)"),$e=Re=qe.parse=function(e){return e.match(Je).slice(1).reduce((function(e,t,i){return e[Ke[i]]=parseFloat(t)||0,e}),{})},Xe=qe.end=function(e,t){e=Object.assign({},Ye,e);var i=t?t.getTime():Date.now(),r=new Date(i);return r.setFullYear(r.getFullYear()+e.years),r.setMonth(r.getMonth()+e.months),r.setDate(r.getDate()+e.days),r.setHours(r.getHours()+e.hours),r.setMinutes(r.getMinutes()+e.minutes),r.setMilliseconds(r.getMilliseconds()+1e3*e.seconds),r.setDate(r.getDate()+7*e.weeks),r},Qe=we=qe.toSeconds=function(e,t){e=Object.assign({},Ye,e);var i=t?t.getTime():Date.now(),r=new Date(i);return(Xe(e,r).getTime()-r.getTime())/1e3};qe.default={end:Xe,toSeconds:Qe,pattern:Je,parse:$e};var Ze={};Object.defineProperty(Ze,"__esModule",{value:!0});Ze.WEEK_DAYS=["Søndag","Mandag","Tirsdag","Onsdag","Torsdag","Fredag","Lørdag"];var et=Ze.datesAreSameDay=function(e,t){return e.getFullYear()===t.getFullYear()&&e.getMonth()===t.getMonth()&&e.getDate()===t.getDate()};Object.defineProperty(We,"__esModule",{value:!0});var tt=Ze;function it(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var rt=it(qe),nt={hour:["time","r"],minute:["minutt","er"],second:["sekund","er"]};function st(e){return ht(e)?e:e instanceof Date?{hours:e.getHours(),minutes:e.getMinutes(),seconds:e.getSeconds()}:"number"==typeof e?(e=Math.abs(e),{hours:Math.floor(e/3600),minutes:Math.floor(e/60%60),seconds:Math.floor(e%60)}):"string"==typeof e?rt.default.parse(e):{hours:0,minutes:0,seconds:0}}function at(e){return"function"!=typeof e.getHours?"":(e.getDate()<10?"0"+e.getDate():e.getDate())+"."+(e.getMonth()+1<10?"0"+(e.getMonth()+1):e.getMonth()+1)+"."+e.getFullYear()+", "+ot(e)}function ot(e){return"function"!=typeof e.getHours?"":(e.getHours()<10?"0"+e.getHours():e.getHours())+":"+(e.getMinutes()<10?"0"+e.getMinutes():e.getMinutes())}function lt(e,t){if(0!==t){var[i,r]=nt[e];return t+" "+i+(1!==t?r:"")}}function ht(e){return null!=e&&"object"==typeof e&&("hours"in e||"minutes"in e||"seconds"in e)}function dt(e){return e<10?"0"+e:String(e)}We.dateToReadableDateString=function(e){return"function"!=typeof e.getHours?"":(e.getDate()<10?"0"+e.getDate():e.getDate())+"."+(e.getMonth()+1<10?"0"+(e.getMonth()+1):e.getMonth()+1)+"."+e.getFullYear()};var ut=We.dateToReadableShortString=function(e,t){return tt.datesAreSameDay(e,t)?""+ot(e):Math.abs(t.getTime()-e.getTime())/1e3/60/60/24<5?tt.WEEK_DAYS[e.getDay()]+" "+ot(e):at(e)};We.dateToReadableString=at;var ct=We.dateToReadableTimeString=ot,pt=We.durationToReadableString=function(e){e=st(e);var{hours:t=0,minutes:i=0,seconds:r=0}=e;return t||i||r?[lt("hour",t),lt("minute",i),!t&&lt("second",r)].filter(Boolean).join(" og "):"0 sekunder"};We.durationToSeconds=function(e){return ht(e)||(e=st(e)),rt.default.toSeconds(e)};var vt=We.formatDuration=function(e){ht(e)||(e=st(e));var{hours:t=0,minutes:i=0,seconds:r=0}=e,n=dt(i)+":"+dt(r);return t>0?dt(t)+":"+n:n};We.parseDuration=st;var gt="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function mt(e){if(e.__esModule)return e;var t=Object.defineProperty({},"__esModule",{value:!0});return Object.keys(e).forEach((function(i){var r=Object.getOwnPropertyDescriptor(e,i);Object.defineProperty(t,i,r.get?r:{enumerable:!0,get:function(){return e[i]}})})),t}var ft,yt,bt,_t,Pt,Et,St,wt,Rt,Tt={},kt=mt(Pe);!function(e){e.OnDemand="on-demand",e.Live="live",e.Event="event"}(ft||(ft={})),function(e){e.NO_PLAYBACK_NETWORK_ERROR="NO_PLAYBACK_NETWORK_ERROR",e.NO_PLAYBACK_DECODE_ERROR="NO_PLAYBACK_DECODE_ERROR",e.PLAYBACK_STOPPED_NETWORK_ERROR="PLAYBACK_STOPPED_NETWORK_ERROR",e.PLAYBACK_STOPPED_DECODE_ERROR="PLAYBACK_STOPPED_DECODE_ERROR",e.UNSUPPORTED_FORMAT_ERROR="UNSUPPORTED_FORMAT_ERROR",e.UNKNOWN_ERROR="UNKNOWN_ERROR"}(yt||(yt={})),function(e){e.NO_PLAYBACK_NETWORK_ERROR="Failed to load the media.",e.NO_PLAYBACK_DECODE_ERROR="Failed to decode the media.",e.PLAYBACK_STOPPED_NETWORK_ERROR="Failed to load more of the media.",e.PLAYBACK_STOPPED_DECODE_ERROR="Failed to decode the next segment of media.",e.UNSUPPORTED_FORMAT_ERROR="Unsupported media format.",e.UNKNOWN_ERROR="Unknown error."}(bt||(bt={}));class Ct extends Error{constructor(e,t,i,r){void 0===r&&(r=!0),super(bt[e]),this.type=e,this.cause=t,this.causeSummary=i,this.fatal=r,Object.setPrototypeOf(this,Ct.prototype),this.name="PlaybackSessionError"}getCauseAsString(){return"message"in this.cause?JSON.stringify(this.cause,Object.getOwnPropertyNames(this.cause)):JSON.stringify(this.cause)}}!function(e){e.Portrait="portrait",e.Landscape="landscape"}(_t||(_t={})),function(e){e.Idle="idle",e.Playing="playing",e.Paused="paused",e.Broken="broken"}(Pt||(Pt={})),function(e){e.Starting="starting",e.Seeking="seeking",e.Rebuffering="rebuffering"}(Et||(Et={})),function(e){e.AutoplayBlocked="autoplayblocked",e.Ended="ended"}(St||(St={})),function(e){e.SessionCreated="playercore.sessioncreated",e.SessionClosed="playercore.sessionclosed",e.PlayingChange="playercore.playingchange",e.WaitingChange="playercore.waitingchange",e.TimeRunningChange="playercore.timerunningchange",e.Broken="playercore.broken",e.MediaInfoLoaded="playercore.mediainfoloaded",e.LiveStreamEnded="playercore.livestreamended",e.RateChange="playercore.ratechange",e.VolumeChange="playercore.volumechange",e.MutedChange="playercore.mutedchange",e.TimeUpdate="playercore.timeupdate",e.ScrubberUpdate="playercore.scrubberupdate",e.MediaRangeChange="playercore.mediarangechange",e.QualityChange="playercore.qualitychange",e.FullscreenStateChange="playercore.fullscreenstatechange",e.PiPStateChange="playercore.pipstatechange",e.RemotePlaybackStateChange="playercore.remoteplaybackstatechange",e.SubtitlesChange="playercore.subtitleschange",e.SubtitlesCueUpdate="playercore.subtitlescueupdate"}(wt||(wt={})),function(e){e.Starting="starting",e.Replay="replay"}(Rt||(Rt={}));var At,xt="5.0.0",Ot=mt(Object.freeze({__proto__:null,version:"5.0.0",PlaybackSessionError:Ct,get PlaybackSessionErrorType(){return yt},get SegmentListType(){return ft},get Orientation(){return _t},get CoreEvent(){return wt},get PausedReason(){return St},get PlaybackState(){return Pt},get PlayingChangeType(){return Rt},get WaitingReason(){return Et}}));class Lt extends Error{constructor(e){super(e),Object.setPrototypeOf(this,Lt.prototype),this.name="AbortError"}}At=Symbol.toStringTag;class Mt{constructor(){this.__resolved=!1,this.__resolvedValue=void 0,this.__resolve=void 0,this.__rejected=!1,this.__rejectedReason=void 0,this.__reject=void 0,this.then=void 0,this.catch=void 0,this[At]="ExposedPromise";var e=new Promise(((e,t)=>{this.__resolve=e,this.__reject=t,this.__resolved&&e(this.__resolvedValue),this.__rejected&&t(this.__rejectedReason)}));this.then=e.then.bind(e),this.catch=e.catch.bind(e)}resolve(e){var t;this.__resolved=!this.__rejected,this.__resolvedValue=e,null==(t=this.__resolve)||t.call(this,e)}reject(e){var t;this.__rejected=!this.__resolved,this.__rejectedReason=e,null==(t=this.__reject)||t.call(this,e)}}var Nt,It="undefined"!=typeof VTTCue?VTTCue:"undefined"!=typeof TextTrackCue?TextTrackCue:class{constructor(e,t,i){this.startTime=void 0,this.endTime=void 0,this.text=void 0,this.id=void 0,this.vertical="",this.snapToLines=!0,this.line="auto",this.lineAlign="start",this.position="auto",this.positionAlign="auto",this.size=100,this.align="center",this.startTime=e,this.endTime=t,this.text=i}getCueAsHTML(){var e=document.createDocumentFragment();return e.textContent=this.text.replace(/<[/\w][^<]*>/g,""),e}};function Dt(e){var t=new It(e.startTime,e.endTime,e.text);return t.id=e.id,t.vertical=e.vertical,t.snapToLines=e.snapToLines,t.line=e.line,t.lineAlign=e.lineAlign,t.position=e.position,t.positionAlign=e.positionAlign,t.size=e.size,t.align=e.align,t}function Bt(e){var t=e.split(":");return t.map((e=>Number.parseFloat(e))).reduce(((e,i,r)=>e+i*60**(t.length-1-r)),0)}function Vt(e){var t=Array.isArray(e)?e:e.split(/\s+/),i={vertical:"",snapToLines:!0,line:"auto",lineAlign:"start",position:"auto",positionAlign:"auto",align:"center",size:100};for(var r of t){var n=r.indexOf(":"),s=n>0?r.substr(0,n):r,a=n>0?r.substr(n+1):"";if("vertical"===s)"lr"!==a&&"rl"!==a||(i.vertical=a);else if("line"===s){var[o,l]=a.split(","),h=void 0;"%"===o.charAt(o.length-1)?(i.snapToLines=!1,h=Number.parseFloat(o)):h=Number.parseInt(o,10),Number.isNaN(h)||(i.line=h),void 0!==l&&["start","center","end"].includes(l)&&(i.lineAlign=l)}else if("position"===s){var[d,u]=a.split(","),c=Number.parseFloat(d);Number.isNaN(c)||(i.position=c),void 0!==u&&["line-left","center","line-right"].includes(u)&&(i.positionAlign=u)}else if("size"===s){var p=Number.parseFloat(a);Number.isNaN(p)||(i.size=p)}else"align"===s&&["start","center","end","left","right"].includes(a)&&(i.align=a)}return i}!function(e){e.Debug="debug",e.Log="log",e.Info="info",e.Warn="warn",e.Error="error"}(Nt||(Nt={}));var Ht=[];function jt(e){Ht.push(e)}function Ut(e){function t(e,t,i){for(var r=arguments.length,n=new Array(r>3?r-3:0),s=3;s<r;s++)n[s-3]=arguments[s];Ht.forEach((r=>r.log(e,t,i,...n)))}return{[Nt.Debug]:t.bind(t,e,Nt.Debug),[Nt.Log]:t.bind(t,e,Nt.Log),[Nt.Info]:t.bind(t,e,Nt.Info),[Nt.Warn]:t.bind(t,e,Nt.Warn),[Nt.Error]:t.bind(t,e,Nt.Error),metric:t.bind(t,"Metric",Nt.Log)}}function Ft(e){return"object"==typeof e&&null!==e&&"name"in e&&"message"in e}function Gt(e,t){return Ft(e)?e:t?new Error(t+": "+e):new Error(""+e)}function zt(e,t){if(e&&t&&e!==t)return e>t?_t.Landscape:_t.Portrait}function Wt(e,t){return new Promise(((i,r)=>{var n;void 0!==(null==t?void 0:t.timeout)&&(n=setTimeout((()=>{r(new Error("Request to "+e+" timed out ("+t.timeout+" ms)."))}),t.timeout)),fetch(e,{signal:null==t?void 0:t.signal}).then((t=>{if(!t.ok)throw new Error("Request to "+e+" returned unexpected status: "+t.status);return t.text()})).then((e=>{n&&clearTimeout(n),i(e)})).catch((e=>{n&&clearTimeout(n),r(e)}))}))}var qt=Ut("UnlockMediaElement"),Kt=new WeakMap;class Yt{constructor(e){this.cues=void 0,this.cues=e}static async load(e,i){var r=function(e){var i=e.replace(/\0/g,"�").replace(/\r\n/g,"\n").replace(/\r/g,"\n").split("\n");if(0===i.length||!/^WEBVTT\b/.exec(i[0]))throw new Error("Not WebVTT data.");for(var r=[],n=0;++n<i.length;)if(/[\d:.]+\s+-->\s+[\d:.]+/.exec(i[n])){for(var s=""!==i[n-1]?i[n-1]:void 0,a=i[n].split(/\s+/),o=Bt(a[0]),l=Bt(a[2]),h=Vt(a.slice(3)),d=[];++n<i.length&&""!==i[n];)d.push(i[n]);r.push(Dt(t({id:s,startTime:o,endTime:l,text:d.join("\n")},h)))}return{cues:r}}(await Wt(e)).cues.map((e=>{var t=e;return t.data=null==i?void 0:i(e),t}));return new Yt(r)}static async loadUrlCues(e){return Yt.load(e,(t=>({url:new URL(t.text,e).toString()})))}search(e){var t=this.searchIndex(e);return this.getCue(t)}searchCues(e,t,i){var r=this.searchIndex(e),n=2*i+1;if(!r)return(new Array).fill(void 0,0,n);var s=this.cues[r].startTime,a=new Array,o=1;for(a.push(this.getCue(r));a.length<n;){var l=this.searchIndex(s-t*o),h=this.searchIndex(s+t*o);a=[this.getCue(l),...a,this.getCue(h)],o++}return a}getCue(e){if(e)return this.cues[e]?this.cues[e]:void 0}searchIndex(e){for(var t=0,i=this.cues.length;t<i;){var r=t+i>>>1;this.cues[r].startTime>e?i=r:t=r+1}var n=this.cues[t-1];return n&&n.endTime>e?t-1:void 0}}var Jt=mt(Object.freeze({__proto__:null,AbortError:Lt,get LogLevel(){return Nt},addLogHandler:jt,getLogger:Ut,isErrorLike:Ft,toErrorLike:Gt,guessMediaType:h,guessMediaTypeOfUrl:l,toMediaTypeString:u,ConsoleLogHandler:class{constructor(e){var t,i,r,n;this.prefixLength=void 0,this.prefixFiller=void 0,this.prefixDelimiter=void 0,this.color=void 0,this.goldenRatio=1.618033988749895,this.prefixCache={},this.prefixLength=null!=(t=null==e?void 0:e.prefixLength)?t:20,this.prefixFiller=null!=(i=null==e?void 0:e.prefixFiller)?i:" ",this.prefixDelimiter=null!=(r=null==e?void 0:e.prefixDelimiter)?r:" |",this.color=null!=(n=null==e?void 0:e.color)?n:this.isColorSupported()}log(e,t,i){if(!(e in this.prefixCache)){var r=[this.createPrefix(e)];this.color&&(r[0]="%c"+r[0],r.push("color:hsl("+360*this.nextHue()+",99%,40%);font-weight:bold;")),this.prefixCache[e]=r}for(var n=arguments.length,s=new Array(n>3?n-3:0),a=3;a<n;a++)s[a-3]=arguments[a];console[t](...this.prefixCache[e],i,...s)}createPrefix(e){return(""+e+Array(this.prefixLength).join(this.prefixFiller)).slice(0,this.prefixLength)+""+this.prefixDelimiter}nextHue(){return Object.keys(this.prefixCache).length*this.goldenRatio}isColorSupported(){if("undefined"!=typeof window&&"chrome"in window)return!0;if("undefined"!=typeof navigator&&/firefox/i.test(navigator.userAgent)){var e=/Firefox\/(\d+\.\d+)/.exec(navigator.userAgent);if(e&&e[1]&&parseFloat(e[1])>=31)return!0}return!1}},InternalLogHandler:class{constructor(e){var t,i;this.firstEntry=void 0,this.lastEntry=void 0,this.numEntries=void 0,this.logToConsoleEnabled=!1,this.consolePrefixLength=void 0,this.historyCount=void 0,this.historyCount=null!=(t=null==e?void 0:e.historyCount)?t:1e3,this.consolePrefixLength=null!=(i=null==e?void 0:e.consolePrefixLength)?i:20;var r={timestamp:Date.now(),namespace:"InternalLogHandler",level:Nt.Log,messages:["Initialized"],next:new Mt};this.firstEntry=r,this.lastEntry=r,this.numEntries=1,null!=e&&e.logToConsole&&this.enableLogToConsole(),this.keepHistoryCount().catch(console.error)}log(e,t,i){for(var r=arguments.length,n=new Array(r>3?r-3:0),s=3;s<r;s++)n[s-3]=arguments[s];this.addLogEntry({timestamp:Date.now(),namespace:e,level:t,messages:[this.serialize(i)].concat(n.map((e=>this.serialize(e)))),next:new Mt})}getEntries(e){var t={current:null!=e?e:this.firstEntry,returnFirst:!e};return{async next(){if(t.returnFirst)return t.returnFirst=!1,{done:!1,value:t.current};try{t.current=await t.current.next}catch(e){return"end"!==e&&console.log("Log entry chain crashed: "+e),{done:!0,value:void 0}}return{done:!1,value:t.current}},[Symbol.asyncIterator](){return this}}}enableLogToConsole(){this.logToConsoleEnabled||(this.logToConsoleEnabled=!0,this.logToConsole().catch((e=>{this.logToConsoleEnabled=!1,console.error(e)})))}end(){this.lastEntry.next.reject("end")}async logToConsole(){for(var e=this.getEntries();;){var t=await e.next();if(t.done)break;var i=t.value;console[i.level](this.toConsolePrefix(i.namespace),...i.messages,"("+new Date(i.timestamp).toLocaleTimeString()+")")}}async keepHistoryCount(){for(var e=this.getEntries();;){if((await e.next()).done)break;this.numEntries>this.historyCount&&await this.removeFirstLogEntry()}}addLogEntry(e){++this.numEntries,this.lastEntry.next.resolve(e),this.lastEntry=e}async removeFirstLogEntry(){try{this.firstEntry=await this.firstEntry.next,--this.numEntries}catch(e){}}serialize(e){var t=""+e;if("[object Object]"!==t)return t;var i=[];return JSON.stringify(e,((e,t)=>{if("string"!=typeof e||"_"!==e.charAt(0)){if("object"==typeof t&&null!==t){if(i.includes(t))return"...";i.push(t)}return t}}),2)}toConsolePrefix(e){return(""+e+Array(this.consolePrefixLength).join(" ")).slice(0,this.consolePrefixLength)+"|"}},ScreenOrientationObserver:class{constructor(e){this.callback=void 0,this.observing=!1,this.currentEntry=void 0,this.boundHandleEvent=void 0,this.callback=e,this.boundHandleEvent=this.handleEvent.bind(this)}observe(e){var t;this.observing||(null==(t=window.screen.orientation)||t.addEventListener("change",this.boundHandleEvent),document.addEventListener("orientationchange",this.boundHandleEvent),this.observing=!0);null!=e&&e.immediateUpdate&&(this.currentEntry?this.callback([this.currentEntry],this):this.handleEvent())}disconnect(){var e;this.observing&&(null==(e=window.screen.orientation)||e.removeEventListener("change",this.boundHandleEvent),document.removeEventListener("orientationchange",this.boundHandleEvent),this.observing=!1)}handleEvent(){var e,t,i=this.getEntryByStandard();i||(i=this.getEntryByLegacy()),!i||(null==(e=this.currentEntry)?void 0:e.orientation)===i.orientation&&(null==(t=this.currentEntry)?void 0:t.primary)===i.primary||(this.currentEntry=i,this.callback([i],this))}getEntryByStandard(){var e,t=null==(e=window.screen.orientation)?void 0:e.type;if(t)return{orientation:/^portrait/.exec(t)?_t.Portrait:_t.Landscape,primary:!/secondary$/.exec(t)}}getEntryByLegacy(){var e=zt(window.innerWidth,window.innerHeight),t=window.orientation;if(e&&"number"==typeof t)return{orientation:e,primary:0===t||90===t}}},WebVTTDataFile:Yt,unlockMediaElement:function(e){Kt.has(e)?qt.log("Element already unlocked."):e.currentSrc?qt.log("Element has source. No need to unlock."):e.querySelector("track")?qt.log("Element has tracks but no source. Not touching."):(Kt.set(e,!0),qt.log("Calling load on media element to unlock it."),e.load())}}));class $t extends Error{constructor(e,t,i){var r=((e.status||0===e.status?e.status:"")+" "+(e.statusText||"")).trim();super("Request failed with "+(r?"status code "+r:"an unknown error")),this.name="HTTPError",this.response=e,this.request=t,this.options=i}}class Xt extends Error{constructor(e){super("Request timed out"),this.name="TimeoutError",this.request=e}}var Qt=e=>null!==e&&"object"==typeof e,Zt=function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];for(var r of t)if((!Qt(r)||Array.isArray(r))&&void 0!==r)throw new TypeError("The `options` argument must be an object");return ti({},...t)},ei=function(e,t){void 0===e&&(e={}),void 0===t&&(t={});var i=new globalThis.Headers(e),r=t instanceof globalThis.Headers,n=new globalThis.Headers(t);for(var[s,a]of n.entries())r&&"undefined"===a||void 0===a?i.delete(s):i.set(s,a);return i},ti=function e(){for(var i={},r={},n=arguments.length,s=new Array(n),a=0;a<n;a++)s[a]=arguments[a];for(var o of s)if(Array.isArray(o))Array.isArray(i)||(i=[]),i=[...i,...o];else if(Qt(o)){for(var[l,h]of Object.entries(o))Qt(h)&&l in i&&(h=e(i[l],h)),i=t({},i,{[l]:h});Qt(o.headers)&&(r=ei(r,o.headers),i.headers=r)}return i},ii="function"==typeof globalThis.AbortController,ri="function"==typeof globalThis.ReadableStream,ni="function"==typeof globalThis.FormData,si=["get","post","put","patch","head","delete"],ai={json:"application/json",text:"text/*",formData:"multipart/form-data",arrayBuffer:"*/*",blob:"*/*"},oi=Symbol("stop"),li=e=>si.includes(e)?e.toUpperCase():e,hi=[413,429,503],di={limit:2,methods:["get","put","head","delete","options","trace"],statusCodes:[408,413,429,500,502,503,504],afterStatusCodes:hi,maxRetryAfter:Number.POSITIVE_INFINITY},ui=function(e){if(void 0===e&&(e={}),"number"==typeof e)return t({},di,{limit:e});if(e.methods&&!Array.isArray(e.methods))throw new Error("retry.methods must be an array");if(e.statusCodes&&!Array.isArray(e.statusCodes))throw new Error("retry.statusCodes must be an array");return t({},di,e,{afterStatusCodes:hi})};class ci{constructor(e,i){var r,n;if(void 0===i&&(i={}),this._retryCount=0,this._input=e,this._options=t({credentials:this._input.credentials||"same-origin"},i,{headers:ei(this._input.headers,i.headers),hooks:ti({beforeRequest:[],beforeRetry:[],afterResponse:[]},i.hooks),method:li(null!==(r=i.method)&&void 0!==r?r:this._input.method),prefixUrl:String(i.prefixUrl||""),retry:ui(i.retry),throwHttpErrors:!1!==i.throwHttpErrors,timeout:void 0===i.timeout?1e4:i.timeout,fetch:null!==(n=i.fetch)&&void 0!==n?n:globalThis.fetch.bind(globalThis)}),"string"!=typeof this._input&&!(this._input instanceof URL||this._input instanceof globalThis.Request))throw new TypeError("`input` must be a string, URL, or Request");if(this._options.prefixUrl&&"string"==typeof this._input){if(this._input.startsWith("/"))throw new Error("`input` must not begin with a slash when using `prefixUrl`");this._options.prefixUrl.endsWith("/")||(this._options.prefixUrl+="/"),this._input=this._options.prefixUrl+this._input}if(ii&&(this.abortController=new globalThis.AbortController,this._options.signal&&this._options.signal.addEventListener("abort",(()=>{this.abortController.abort()})),this._options.signal=this.abortController.signal),this.request=new globalThis.Request(this._input,this._options),this._options.searchParams){var s="?"+("string"==typeof this._options.searchParams?this._options.searchParams.replace(/^\?/,""):new URLSearchParams(this._options.searchParams).toString()),a=this.request.url.replace(/(?:\?.*?)?(?=#|$)/,s);!(ni&&this._options.body instanceof globalThis.FormData||this._options.body instanceof URLSearchParams)||this._options.headers&&this._options.headers["content-type"]||this.request.headers.delete("content-type"),this.request=new globalThis.Request(new globalThis.Request(a,this.request),this._options)}void 0!==this._options.json&&(this._options.body=JSON.stringify(this._options.json),this.request.headers.set("content-type","application/json"),this.request=new globalThis.Request(this.request,{body:this._options.body}))}static create(e,t){var i=new ci(e,t),r=async()=>{if(i._options.timeout>2147483647)throw new RangeError("The `timeout` option cannot be greater than 2147483647");await Promise.resolve();var e=await i._fetch();for(var t of i._options.hooks.afterResponse){var r=await t(i.request,i._options,i._decorateResponse(e.clone()));r instanceof globalThis.Response&&(e=r)}if(i._decorateResponse(e),!e.ok&&i._options.throwHttpErrors)throw new $t(e,i.request,i._options);if(i._options.onDownloadProgress){if("function"!=typeof i._options.onDownloadProgress)throw new TypeError("The `onDownloadProgress` option must be a function");if(!ri)throw new Error("Streams are not supported in your environment. `ReadableStream` is missing.");return i._stream(e.clone(),i._options.onDownloadProgress)}return e},n=i._options.retry.methods.includes(i.request.method.toLowerCase())?i._retry(r):r(),s=function(e,r){n[e]=async()=>{i.request.headers.set("accept",i.request.headers.get("accept")||r);var s=(await n).clone();if("json"===e){if(204===s.status)return"";if(t.parseJson)return t.parseJson(await s.text())}return s[e]()}};for(var[a,o]of Object.entries(ai))s(a,o);return n}_calculateRetryDelay(e){if(this._retryCount++,this._retryCount<this._options.retry.limit&&!(e instanceof Xt)){if(e instanceof $t){if(!this._options.retry.statusCodes.includes(e.response.status))return 0;var t=e.response.headers.get("Retry-After");if(t&&this._options.retry.afterStatusCodes.includes(e.response.status)){var i=Number(t);return Number.isNaN(i)?i=Date.parse(t)-Date.now():i*=1e3,void 0!==this._options.retry.maxRetryAfter&&i>this._options.retry.maxRetryAfter?0:i}if(413===e.response.status)return 0}return.3*2**(this._retryCount-1)*1e3}return 0}_decorateResponse(e){return this._options.parseJson&&(e.json=async()=>this._options.parseJson(await e.text())),e}async _retry(e){try{return await e()}catch(r){var t=Math.min(this._calculateRetryDelay(r),2147483647);if(0!==t&&this._retryCount>0){for(var i of(await(async e=>new Promise((t=>{setTimeout(t,e)})))(t),this._options.hooks.beforeRetry)){if(await i({request:this.request,options:this._options,error:r,retryCount:this._retryCount})===oi)return}return this._retry(e)}throw r}}async _fetch(){for(var e of this._options.hooks.beforeRequest){var t=await e(this.request,this._options);if(t instanceof Request){this.request=t;break}if(t instanceof Response)return t}return!1===this._options.timeout?this._options.fetch(this.request.clone()):(async(e,t,i)=>new Promise(((r,n)=>{var s=setTimeout((()=>{t&&t.abort(),n(new Xt(e))}),i.timeout);i.fetch(e).then(r).catch(n).then((()=>{clearTimeout(s)}))})))(this.request.clone(),this.abortController,this._options)}_stream(e,t){var i=Number(e.headers.get("content-length"))||0,r=0;return new globalThis.Response(new globalThis.ReadableStream({async start(n){var s=e.body.getReader();t&&t({percent:0,transferredBytes:0,totalBytes:i},new Uint8Array),await async function e(){var{done:a,value:o}=await s.read();if(a)n.close();else{if(t)r+=o.byteLength,t({percent:0===i?0:r/i,transferredBytes:r,totalBytes:i},o);n.enqueue(o),await e()}}()}}))}}
/*! MIT License © Sindre Sorhus */var pi=e=>{var t=(t,i)=>ci.create(t,Zt(e,i)),i=function(i){t[i]=(t,r)=>ci.create(t,Zt(e,r,{method:i}))};for(var r of si)i(r);return t.create=e=>pi(Zt(e)),t.extend=t=>pi(Zt(e,t)),t.stop=oi,t},vi=pi(),gi=[[["id",void 0]],[["scheme",void 0],["id",void 0]],[["scheme","nrk"],["type","podcast"],["episode",void 0]],[["scheme",void 0],["type",void 0],["id",void 0]],[["scheme","nrk"],["type","podcast"],["series",void 0],["episode",void 0]],[["scheme","nrk"],["type","radioclip"],["clipType",void 0],["id",void 0]]];class mi{constructor(e){var t;this.scheme=void 0,this.type=void 0,this.series=void 0,this.clipType=void 0,this.episode=void 0,this.id=void 0,this.scheme=null!=(t=e.scheme)?t:"nrk",this.type=e.type,this.series=e.series,this.clipType=e.clipType,this.episode=e.episode,this.id=e.id}static parse(e){if(mi.isValidFormat(e)){var t=e.split(":"),i=gi.filter((e=>e.length===t.length)).map((e=>e.reduce(((e,i,r)=>void 0===e?e:void 0===i[1]||i[1]===t[r]?(e[i[0]]=t[r],e):void 0),{}))).find((e=>void 0!==e));return i?new mi(i):void 0}}static isValidFormat(e){return null!==/^[\w-]+(:[\wÆØÅæøå-]+){0,3}$/.exec(e)}asPath(){return"/"+[this.type,this.series,this.episode,this.clipType,this.id].filter((e=>e)).join("/")}toString(){return[this.scheme,this.type,this.series,this.episode,this.clipType,this.id].filter((e=>e)).join(":")}}var fi,yi,bi=e=>e<10?"0"+e:e;class _i{constructor(e,t){this.utc=void 0,this.tzOffset=void 0,this.utc=e,this.tzOffset=t}static parse(e){var t=/^\/Date\((\d+)(?:([+-]\d{2})(\d{2}))?\)\/$/.exec(e);if(t){var i=parseInt(t[1],10),r=t.length>2?60*parseInt(t[2],10)+parseInt(t[3],10):0;return new _i(i,r)}throw new Error("Unknown format: "+e)}toModernPSAPIFormat(){var e=new Date(this.utc+60*this.tzOffset*1e3);return[e.getUTCFullYear(),"-",bi(e.getUTCMonth()+1),"-",bi(e.getUTCDate()),"T",bi(e.getUTCHours()),":",bi(e.getUTCMinutes()),":",bi(e.getUTCSeconds()),this.tzOffset<0?"-":"+",bi(Math.floor(this.tzOffset/60)),":",bi(this.tzOffset%60)].join("")}toCompactLocalDate(){var e=new Date(this.utc+60*this.tzOffset*1e3);return[e.getUTCFullYear(),bi(e.getUTCMonth()+1),bi(e.getUTCDate())].join("")}toDateObject(){return new Date(this.utc)}}class Pi{constructor(e,t){this.loader=void 0,this.scheduleResponse=void 0,this.mediaURI=void 0,this.metadata=void 0,this.manifest=void 0,this.epg=[],this.loader=e;var i=mi.parse(t);if(!i)throw new Error("Failed to parse "+t);this.mediaURI=i}static isSupported(e){if(!mi.isValidFormat(e))return!1;var t=mi.parse(e);return void 0!==t&&"nrk"===t.scheme&&(void 0===t.type||["channel","clip","podcast","program","radioclip"].includes(t.type))}get schedule(){if(this.scheduleResponse)return t({},this.scheduleResponse,{playableInSeconds:Math.max(0,(new Date(this.scheduleResponse.playableAt).getTime()-Date.now())/1e3)})}async updateMetadata(){var e=await this.loader.fetchMetadata(this.mediaURI);return this.metadata=e.data,!this.mediaURI.type&&this.metadata&&(this.mediaURI.type=function(e){var t=e._links.self.href.replace(/^\/playback\/metadata\/|\/.*/g,"");if(["channel","clip","program","podcast"].includes(t))return t;return}(this.metadata)),e}async updateSchedule(){if(!this.metadata)throw new Error("Must load metadata first.");var e=await this.loader.fetchSchedule(this.metadata);return this.scheduleResponse=e.data,t({},e,{data:this.schedule})}async updateManifest(e){if(!this.metadata)throw new Error("Must load metadata first.");var t=await this.loader.fetchManifest(this.metadata,e);return this.manifest=t.data,t}async updateEPG(){var e=await this.loader.fetchEPG(this.mediaURI);this.epg=e.data.map((e=>{var t=_i.parse(e.plannedStart),i=_i.parse(e.actualStart),r=we(Re(e.duration)),n=new _i(i.utc+1e3*r,i.tzOffset),{programId:s,title:a,partNumber:o}=e;return{programId:s,part:o,title:a,plannedStart:t,actualStart:i,actualEnd:n}}));var i=this.epg.length-1;return this.epg.forEach(((e,t)=>{t!==i&&(e.actualEnd.utc=Math.min(e.actualEnd.utc,this.epg[t+1].actualStart.utc))})),t({},e,{data:this.epg})}abort(){this.loader.abort()}}function Ei(e){var t=e._links.manifests,i=e._embedded.manifests;return t&&i?i.map((e=>{var i=e._links.self.name;return{id:e.id,href:t.find((e=>e.name===i)).href,type:i,availabilityLabel:e.availabilityLabel}})):[]}!function(e){e.BAD_RESPONSE_ERROR="BAD_RESPONSE_ERROR",e.NETWORK_ERROR="NETWORK_ERROR",e.NOT_FOUND_ERROR="NOT_FOUND_ERROR",e.TIMEOUT_ERROR="TIMEOUT_ERROR"}(fi||(fi={})),function(e){e.CHANNEL_AVAILABLE_NORWEGIAN_RESIDENT_CLAIM_ERROR="CHANNEL_AVAILABLE_NORWEGIAN_RESIDENT_CLAIM_ERROR",e.CHANNEL_GEOBLOCKED_ERROR="CHANNEL_GEOBLOCKED_ERROR",e.CHANNEL_UNAVAILABLE_ERROR="CHANNEL_UNAVAILABLE_ERROR",e.PROGRAM_AVAILABLE_NORWEGIAN_RESIDENT_CLAIM_ERROR="PROGRAM_AVAILABLE_NORWEGIAN_RESIDENT_CLAIM_ERROR",e.PROGRAM_GEOBLOCKED_ERROR="PROGRAM_GEOBLOCKED_ERROR",e.PROGRAM_IN_LIVE_BUFFER_ERROR="PROGRAM_IN_LIVE_BUFFER_ERROR",e.PROGRAM_NOT_TRANSCODED_ERROR="PROGRAM_NOT_TRANSCODED_ERROR",e.PROGRAM_RIGHTS_EXPIRED_ERROR="PROGRAM_RIGHTS_EXPIRED_ERROR",e.PROGRAM_RIGHTS_NOT_STARTED_ERROR="PROGRAM_RIGHTS_NOT_STARTED_ERROR",e.PROGRAM_UNAVAILABLE_ERROR="PROGRAM_UNAVAILABLE_ERROR",e.UNPLAYABLE_ERROR="UNPLAYABLE_ERROR"}(yi||(yi={}));class Si extends Error{constructor(e){super(e),Error.captureStackTrace&&Error.captureStackTrace(this,Si),this.name="AbortError"}}class wi extends Error{constructor(e,t){super(e),this.type=t,Error.captureStackTrace&&Error.captureStackTrace(this,wi),this.name="PSAPIRequestError"}}class Ri extends Error{constructor(e,t){super(e),this.type=t,Error.captureStackTrace&&Error.captureStackTrace(this,Ri),this.name="NonPlayableError"}}class Ti{constructor(e,t){var i,r;this.authTokenFunction=void 0,this.enableEeaPortability=void 0,this.origin=void 0,this.playerName=void 0,this.playerFamily=void 0,this.abortController=void 0,this.globalParams=void 0,this.authTokenFunction=t&&t.authTokenFunction?t.authTokenFunction:()=>Promise.resolve(""),this.enableEeaPortability=null==t?void 0:t.enableEeaPortability,this.origin=null!=(i=null==t?void 0:t.origin)?i:"https://psapi.nrk.no",this.playerName=e,this.playerFamily=null!=(r=null==t?void 0:t.playerFamily)?r:"player-core",this.abortController=new AbortController,this.globalParams=null==t?void 0:t.params}async fetchMetadata(e){var t="/playback/metadata"+e.asPath(),i={};return this.enableEeaPortability&&(i["eea-portability"]="true"),await this.load(t,i)}async fetchSchedule(e){var t,i=null==(t=e._links.schedule)?void 0:t.href;if(!i)throw new Error("Schedule is not available.");return await this.load(i)}async fetchManifest(e,t){if(void 0===t&&(t="default"),!e.playable)throw new Error("The metadata must contain playable information before loading the manifest.");var i=Ei(e).find((e=>e.type===t));if(!i||!i.href)throw new Error("Unable to load unknown manifest type "+t+".");var r={};return this.enableEeaPortability&&(r["eea-portability"]="true"),await this.load(i.href,r)}async fetchEPG(e){if("channel"!==e.type)throw new Error("Unsupported media type for the EPG API. Got '"+e.type+"'");var t="/channels/"+e.id+"/epglivebuffer";return await this.load(t,{},(async e=>(ki(e,[200,204]),204===e.status?[]:await xi(e))))}async fetchNielsenStatsConfig(e,t){var i,r=null==(i=e._links.statistics)?void 0:i.find((e=>"nielsen"===e.name));if(!r)throw new Error("This media doesn't have Nielsen statistics.");if(!/{\?plannedStart}$/.test(r.href))throw new Error("Expected Nielsen URL to contain a plannedStart templated argument: "+r.href);var n=r.href.replace("{?plannedStart}",""),s=t?{plannedStart:t.toModernPSAPIFormat()}:{};return await this.load(n,s)}getPlaybackAcceptHeader(){return"application/vnd.nrk.psapi+json; version=9; player="+this.playerName+"; device="+this.playerFamily}async load(e,i,r){var n,s=new URL(e,this.origin).href,a=t({},this.globalParams,i),o={accept:this.getPlaybackAcceptHeader()},l=await this.authTokenFunction();i&&i["eea-portability"]&&l&&(o.Authorization="Bearer "+l);try{n=await vi.get(s,{signal:this.abortController.signal,headers:o,searchParams:0===Object.keys(a).length?void 0:a,mode:"cors",throwHttpErrors:!r})}catch(e){if("AbortError"===Gt(e).name)throw e;e instanceof $t&&Ci(e.response);var h=e instanceof Xt?fi.TIMEOUT_ERROR:fi.NETWORK_ERROR;throw new wi(""+e,h)}var d=r?await r(n):await this.defaultResponseHandler(n);return{maxAge:Ai(n),data:d}}async defaultResponseHandler(e){return ki(e,200),await xi(e)}abort(){this.abortController.abort(),this.abortController=new AbortController}}function ki(e,t){(Array.isArray(t)?t.includes(e.status):e.status===t)||Ci(e)}function Ci(e){if(404===e.status||410===e.status)throw new wi(e.url+" doesn't exist.",fi.NOT_FOUND_ERROR);throw new wi("Bad response: "+e.status+" "+e.statusText,fi.BAD_RESPONSE_ERROR)}function Ai(e){var t,i=e.headers.get("Cache-Control");if(i&&(t=i.match(/max-age=(\d+)/)))return Number.parseInt(t[1],10)}async function xi(e){try{return await e.json()}catch(e){var t=Gt(e);if("TypeError"===t.name||"SyntaxError"===t.name)throw new wi("Response content problem: "+e,fi.BAD_RESPONSE_ERROR);throw new wi(""+e,fi.NETWORK_ERROR)}}var Oi=Ut("PSAPIClient");async function Li(e,t){return new Promise(((i,r)=>{var n=setTimeout((()=>{t.removeEventListener("abort",s),i()}),e),s=()=>{clearTimeout(n),t.removeEventListener("abort",s),r(new Si("PSAPI client waiting aborted."))};t.aborted?s():t.addEventListener("abort",s)}))}function Mi(e){var t;return e.nonPlayable?null!=(t={ChannelAvailableWithNorwegianResidentClaim:yi.CHANNEL_AVAILABLE_NORWEGIAN_RESIDENT_CLAIM_ERROR,ChannelIsGeoblocked:yi.CHANNEL_GEOBLOCKED_ERROR,ChannelUnavailable:yi.CHANNEL_UNAVAILABLE_ERROR,ProgramAvailableWithNorwegianResidentClaim:yi.PROGRAM_AVAILABLE_NORWEGIAN_RESIDENT_CLAIM_ERROR,ProgramIsGeoblocked:yi.PROGRAM_GEOBLOCKED_ERROR,ProgramIsInLiveBuffer:yi.PROGRAM_IN_LIVE_BUFFER_ERROR,ProgramIsNotTranscoded:yi.PROGRAM_NOT_TRANSCODED_ERROR,ProgramRightsHasExpired:yi.PROGRAM_RIGHTS_EXPIRED_ERROR,ProgramRightsHasNotStarted:yi.PROGRAM_RIGHTS_NOT_STARTED_ERROR,ProgramUnavailable:yi.PROGRAM_UNAVAILABLE_ERROR,NoMessage:yi.PROGRAM_UNAVAILABLE_ERROR}[e.nonPlayable.messageType])?t:yi.PROGRAM_UNAVAILABLE_ERROR:yi.UNPLAYABLE_ERROR}var Ni=mt(Object.freeze({__proto__:null,AbortError:Si,MediaURI:mi,NonPlayableError:Ri,get NonPlayableErrorType(){return yi},PSAPIClient:class extends Pi{constructor(e,t,i){super(new Ti(t,i),e),this.abortController=void 0,this.abortController=new AbortController}static isSupported(e){return Pi.isSupported(e)}loadMetadata(e){var i,r,n=this,s=this.abortController,a=null!=(i=null==e?void 0:e.throwNonPlayableError)&&i,o=!1;return{async next(){var i,l,h,d,u,c,p,v;if(s.signal.aborted)throw new Si("Already aborted.");if(o)return Promise.resolve({done:!0,value:void 0});if(n.metadata){var g,m,f,y=null!=(g=n.schedule)&&g.playableAt?new Date(n.schedule.playableAt):(h=n.metadata,(v=null!=(d=null==h||null==(u=h.availability.onDemand)?void 0:u.from)?d:null==h||null==(c=h.availability.live)||null==(p=c.transmissionInterval)?void 0:p.from)?new Date(v):void 0),b=(null!=(m=null==y?void 0:y.getTime())?m:0)-Date.now(),_=Math.max(r?1e3*r:0,null!=(f=null==e?void 0:e.minReloadTime)?f:5e3,b/2)+5e3*Math.random();Oi.log("Media playable at "+y+". Reloading in "+_/1e3+" seconds."),await Li(_,s.signal)}r=await n.updateMetadataOrSchedule();var P=function(e,i){if(!i||i.playableNow&&"nonPlayable"===e.playability)return e;var r=null,n=null;e.availability.onDemand?r=t({},e.availability.onDemand,{from:i.playableAt,hasRightsNow:!1}):e.availability.live&&(n=t({},e.availability.live,{isOngoing:!1,transmissionInterval:t({},e.availability.live.transmissionInterval,{from:i.playableAt})}));var s=t({},e,{availability:t({},e.availability,{onDemand:r,live:n})});!1===i.playableNow&&"playable"===e.playability&&(s=t({},s,{_links:t({},s._links,{manifests:null}),playability:"nonPlayable",playable:null,nonPlayable:{reason:"blocked",messageType:"ProgramRightsHasNotStarted",endUserMessage:i.endUserMessage,helpUrl:"https://info.nrk.no/tv/",availableAbroadUrl:null,userAction:null}}));return s.nonPlayable=t({},s.nonPlayable,{endUserMessage:i.endUserMessage}),s}(n.metadata,n.schedule),E=function(e){var t,i,r,n,s=null!=(t=null==e||null==(i=e.availability.onDemand)?void 0:i.to)?t:null==e||null==(r=e.availability.live)||null==(n=r.transmissionInterval)?void 0:n.to;return s?new Date(s):void 0}(P);if((o="playable"===P.playability||(null==(i=P.nonPlayable)?void 0:i.messageType)&&"ProgramRightsHasNotStarted"!==(null==(l=P.nonPlayable)?void 0:l.messageType)||!E||E<new Date)&&a&&"playable"!==P.playability){var S=Mi(P);throw new Ri("Media is non-playable",S)}return{done:!1,value:P}},[Symbol.asyncIterator](){return this}}}async updateMetadataOrSchedule(){var e,t,i,r,n,s,a=!1,o=!1;null!=(e=this.metadata)&&e._links.schedule||(n=(await this.updateMetadata()).maxAge,a=!0);if(null!=(t=this.metadata)&&t._links.schedule)try{s=(await this.updateSchedule()).maxAge,o=!0}catch(e){Oi.error("Failed to update schedule:",e);var l=Gt(e);"PSAPIRequestError"===l.name&&l.type===fi.NOT_FOUND_ERROR&&(this.scheduleResponse=void 0)}a||o&&(null==(i=this.schedule)||!i.playableNow)||(n=(await this.updateMetadata()).maxAge);return null!=(r=s)?r:n}loadEPG(){var e=!0,t=this,i=this.abortController;return{async next(){if(i.signal.aborted)throw new Si("Already aborted.");e?e=!1:await Li(9e5,i.signal);try{await t.updateEPG()}catch(e){if("AbortError"===Gt(e).name)throw e;Oi.log("Failed to update EPG: "+e)}return{done:!1,value:t.epg}},[Symbol.asyncIterator](){return this}}}abort(){this.abortController.abort(),this.abortController=new AbortController,super.abort()}},PSAPIData:Pi,PSAPILoader:Ti,PSAPIRequestError:wi,get PSAPIRequestErrorType(){return fi},TimeWithTZ:_i,getManifestLinks:Ei,getNonPlayableErrorType:Mi}));var Ii=mt(Object.freeze({__proto__:null,DimensionsMixin:function(e){return class extends e{static get reactiveProperties(){return t({},super.reactiveProperties,{dimensions:Object})}constructor(){super(...arguments),this.dimensions={height:0,width:0},this._resizeObserver=void 0}firstUpdated(e){super.firstUpdated&&super.firstUpdated(e),this._initResizeObserver()}disconnectedCallback(){this._resizeObserver&&this._resizeObserver.disconnect(),super.disconnectedCallback&&super.disconnectedCallback()}_initResizeObserver(){if(void 0===window.ResizeObserver)throw Error("ResizeObserver not supported on this platform");this._resizeObserver=new ResizeObserver((e=>{for(var t of e){var i=t.contentBoxSize?t.contentBoxSize[0]:void 0;this.dimensions=i?{height:i.blockSize,width:i.inlineSize}:{height:t.contentRect.height,width:t.contentRect.width}}})),this._resizeObserver.observe(this)}}}}));var Di=mt(Object.freeze({__proto__:null,FocusVisibleMixin:function(e){return class extends e{static get reactiveProperties(){return t({},super.reactiveProperties,{focusVisible:Boolean})}constructor(){super(),this.focusVisible=!1,this._onKeydown=this._onKeydown.bind(this),this._onPointerdown=this._onPointerdown.bind(this)}connectedCallback(){document.addEventListener("keydown",this._onKeydown,!0),super.connectedCallback&&super.connectedCallback()}_onKeydown(e){9!==e.which||this.focusVisible||(this.focusVisible=!0,this.classList.add("focus-visible"),document.addEventListener("mousedown",this._onPointerdown,!0),document.addEventListener("pointerdown",this._onPointerdown,!0),document.addEventListener("touchstart",this._onPointerdown,!0))}_onPointerdown(e){this.focusVisible=!1,this.classList.remove("focus-visible"),this._removePointerHandlers()}_removePointerHandlers(){document.removeEventListener("mousedown",this._onPointerdown,!0),document.removeEventListener("pointerdown",this._onPointerdown,!0),document.removeEventListener("touchstart",this._onPointerdown,!0)}disconnectedCallback(){this._removePointerHandlers(),this.removeEventListener("keydown",this._onKeydown,!0),super.disconnectedCallback&&super.disconnectedCallback()}}}}));var Bi=mt(Object.freeze({__proto__:null,FocusWithinMixin:function(e){return class extends e{static get reactiveProperties(){return t({},super.reactiveProperties,{focusWithin:Boolean})}constructor(){super(...arguments),this.focusWithin=!1,this._onFocus=this._onFocus.bind(this),this._onBlur=this._onBlur.bind(this)}connectedCallback(){this.addEventListener("focus",this._onFocus,!0),this.addEventListener("blur",this._onBlur,!0),super.connectedCallback&&super.connectedCallback()}_onFocus(e){this.focusWithin=!0,this.classList.add("focus-within")}_onBlur(e){this.focusWithin=this.contains(e.relatedTarget),this.focusWithin||this.classList.remove("focus-within")}disconnectedCallback(){this.removeEventListener("focus",this._onFocus,!0),this.removeEventListener("blur",this._onBlur,!0),super.disconnectedCallback&&super.disconnectedCallback()}}}})),Vi={};Object.defineProperty(Vi,"__esModule",{value:!0});Vi.ElementPanic="ElementPanic";var Hi=Vi.ElementPanicMixin=function(e){return class extends e{panic(e){this.dispatchEvent(new CustomEvent("ElementPanic",{bubbles:!0,cancelable:!0,detail:e}))}}},ji={},Ui={};Object.defineProperty(Ui,"__esModule",{value:!0});var Fi=Jt;var Gi=Ui.getLogger=function(e){return Fi.getLogger(e)};Object.defineProperty(ji,"__esModule",{value:!0});var zi=Ui,Wi=Vi;ji.PlayerPanicHandlerMixin=function(e){return class extends e{constructor(){super(...arguments),this.panicLogger=zi.getLogger("PlayerPanic")}connectedCallback(){super.connectedCallback&&super.connectedCallback(),this.addEventListener(Wi.ElementPanic,this.onPanic)}onPanic(e){var t=e.detail;e.preventDefault(),this.panicLogger.error(t),this.handlePanic(t)}handlePanic(e){}disconnectedCallback(){this.removeEventListener(Wi.ElementPanic,this.onPanic),super.disconnectedCallback&&super.disconnectedCallback()}}};var{userAgent:qi,vendor:Ki}=navigator,Yi=/iPad|iPhone|iPod/.test(qi)&&!window.MSStream,Ji=/Windows Phone/.test(qi),$i=/android/i.test(qi),Xi="PointerEvent"in window,Qi="ontouchstart"in window,Zi=!1;try{var er=Object.defineProperty({},"passive",{get:()=>(Zi=!0,!0)});window.addEventListener("testPassive",null,er),window.removeEventListener("testPassive",null,er)}catch(e){}var tr,ir={isAndroid:$i,isApple:/Apple/.exec(Ki),isEdge:/Edge\/1[2-9]\./.test(qi),isIE:/Trident/.test(qi),isIOS:Yi,isIPhone:/iPhone|iPod/.test(qi)&&!window.MSStream,isSafari:/^((?!chrome|android).)*safari/i.test(qi),isLinux:/^(?!.*android).*linux.*$/i.test(qi),isMobile:Yi||Ji||$i,isNrknoApp:/^NRK NO/.test(navigator.userAgent)||/[&?]viewContext=/.test(window.location&&window.location.search),isWindowsDesktop:/Windows NT/.test(qi),isWindowsPhone:Ji,pointerEventTypes:Xi?{enter:"pointerenter",down:"pointerdown",leave:"pointerleave",move:"pointermove",over:"pointerover",out:"pointerout",up:"pointerup"}:{enter:"mouseenter",down:Qi?"touchstart":"mousedown",leave:"mouseleave",move:Qi?"touchmove":"mousemove",over:"mouseover",out:"mouseout",up:Qi?"touchend":"mouseup"},supportsPointerEvents:Xi,supportsPassiveEvents:Zi},rr={};tr=rr,Object.defineProperty(tr,"__esModule",{value:!0}),tr.PlayerActions=void 0,function(e){e.EnterFullscreen="player.enterFullscreen",e.ExitFullscreen="player.exitFullscreen",e.EnterPip="player.enterPip",e.ExitPip="player.exitPip",e.EnterRemotePlayback="player.enterRemotePlayback",e.Play="player.play",e.Pause="player.pause",e.TogglePlay="player.togglePlay",e.ToggleSubtitles="player.toggleSubtitles",e.Mute="player.mute",e.Unmute="player.unmute",e.ToggleMute="player.toggleMute",e.SetPoster="player.setPoster",e.SetVolume="player.setVolume",e.SeekTo="player.seekTo",e.SeekToLive="player.seekToLive",e.SeekToRelativeTime="player.seekToRelativeTime",e.SeekToPosition="player.seekToPosition",e.Speak="player.speak",e.StopPlayNextCountdown="player.stopPlayNextCountdown",e.PlayNextEpisode="player.playNextEpisode",e.SelectStream="player.selectStream",e.SkipToPoint="player.skipToPoint"}(tr.PlayerActions||(tr.PlayerActions={}));var nr={},sr={};Object.defineProperty(sr,"__esModule",{value:!0});var ar=t({},Ot.CoreEvent,{EPGChange:"player.EPGChange",PlayerError:"player.error",PlayNextEpisode:"player.playNextEpisode",TrackProgress:"player.trackProgress",EcommerceConsumeStart:"player.ecommerceConsumeStart",EcommerceConsumeComplete:"player.ecommerceConsumeComplete"});var or=sr.PlayerEvents=ar,lr=sr.isPlayerEvent=function(e,t){return function(e,t){return e.type===t}(e,t)},hr={};Object.defineProperty(hr,"__esModule",{value:!0});var dr=Ot,ur=kt,cr=Ui.getLogger("SubtitleState");class pr extends ur.ReactiveState{constructor(e,t){super(),this.isShowing=!1,this.active=void 0,this.activeLabel=void 0,this.activeCues=[],this.subtitles=[],this._session=void 0,this._session=e,this._init(t),e.on(dr.CoreEvent.SubtitlesCueUpdate,this._onSubtitleCueUpdate,this),e.on(dr.CoreEvent.SubtitlesChange,this._onSubtitleChange,this)}toggleVisibility(){this._session&&(this.isShowing?(this.isShowing=!1,this._session.setNoSubtitles()):(this.isShowing=!0,this._session.setAutoSubtitles()))}destroy(){super.destroy(),this._session=void 0}async _init(e){var t=this._session.getAvailableSubtitles();if(e){var i;if(0===(null==(i=t)?void 0:i.length)&&(t=await async function(e,t){var i=[];for(var r of t.playable.subtitles)try{var n=await e.addSubtitlesTrack(r.webVtt,r.label,r.language,{defaultOn:r.defaultOn});n&&i.push(n)}catch(e){cr.error(e)}return i}(this._session,e)),!this._session)return;if(this._session.setDefaultSubtitles(),void 0===this._session.getActiveSubtitles()){var r=function(e,t){var i=t.playable.subtitles.find((e=>e.defaultOn));if(!i)return;if(1===e.length)return e[0].id;var r=e.find((e=>e.label===i.label||e.label===i.type));return null==r?void 0:r.id}(t,e);r&&this._session.setActiveSubtitles(r)}}this.isShowing=void 0!==this._session.getActiveSubtitles(),this._session.disableNativeSubtitlesDisplay(),this.subtitles=t}_onSubtitleCueUpdate(e){this.activeCues=e.activeCues}_onSubtitleChange(e){this.active=e.active?e.active.id:void 0,this.activeLabel=e.active?e.active.label:void 0,this.isShowing=!!e.active}}hr.SubtitleState=pr,Object.defineProperty(nr,"__esModule",{value:!0});var vr=Ot,gr=sr,mr=hr,fr=kt;nr.PlaybackStateMixin=function(e){return class extends e{constructor(){super(...arguments),this.activeSession=void 0,this.currentLiveProgramTitle=void 0,this.fullscreenState=void 0,this.isAudioOnly=!1,this.isCurrentTimeLive=!0,this.isCurrentTimeLiveCutOffTime=25,this.isEnded=!1,this.isLive=!1,this.isPlaying=!1,this.isRealtime=!1,this.isSeeking=!1,this.isStarted=!1,this.isTimeRunning=!1,this.isWaiting=!1,this.manifest=void 0,this.muted=!1,this.pipState=void 0,this.playbackRate=1,this.remotePlaybackState=void 0,this.seekableStep=1,this.subtitleState=void 0,this.volume=1}static get reactiveAttributes(){return t({},super.reactiveAttributes,{muted:Boolean})}static get reactiveProperties(){return t({},super.reactiveProperties,{currentLiveProgramTitle:String,fullscreenState:Object,isCurrentTimeLive:Boolean,isAudioOnly:Boolean,isEnded:Boolean,isLive:Boolean,isPlaying:Boolean,isRealtime:Boolean,isSeeking:Boolean,isStarted:Boolean,isTimeRunning:Boolean,isWaiting:Boolean,manifest:Object,pipState:Object,playbackRate:Number,remotePlaybackState:Object,seekableStep:Number,subtitleState:fr.ReactiveState,volume:Number})}updating(e,t){super.updating(e,t);["isPlaying","isRealtime","isSeeking","isWaiting"].includes(e)&&this._updateCurrentTimeIsLive()}_observePlaybackSession(e){this.activeSession=e,this.fullscreenState=e.getFullscreenState(),this.pipState=e.getPiPState(),this.remotePlaybackState=e.getRemotePlaybackState(),e.on(vr.CoreEvent.Broken,this._onBroken,this),e.on(vr.CoreEvent.FullscreenStateChange,this._onFullscreenStateChange,this),e.on(vr.CoreEvent.LiveStreamEnded,this._onLiveStreamEnded,this),e.on(vr.CoreEvent.MediaInfoLoaded,this._onMediaInfoLoaded,this),e.on(vr.CoreEvent.MediaRangeChange,this._onMediaRangeChange,this),e.on(vr.CoreEvent.MutedChange,this._onMutedChange,this),e.on(vr.CoreEvent.PiPStateChange,this._onPipStateChange,this),e.on(vr.CoreEvent.PlayingChange,this._onPlayingChange,this),e.on(vr.CoreEvent.RateChange,this._onRateChange,this),e.on(vr.CoreEvent.RemotePlaybackStateChange,this._onRemotePlaybackStateChange,this),e.once(vr.CoreEvent.ScrubberUpdate,this._onScrubberUpdate,this),e.on(vr.CoreEvent.TimeRunningChange,this._onTimeRunningChange,this),e.on(vr.CoreEvent.VolumeChange,this._onVolumeChange,this),e.on(vr.CoreEvent.WaitingChange,this._onWaitingChange,this),this.addEventListener(gr.PlayerEvents.EPGChange,this._onEPGChange)}_unobservePlaybackSession(){var e;this.activeSession&&(this.activeSession=void 0,this.isAudioOnly=!1,this.isCurrentTimeLive=!1,this.isEnded=!1,this.isLive=!1,this.isPlaying=!1,this.isRealtime=!1,this.isSeeking=!1,this.isStarted=!1,this.isTimeRunning=!1,this.isWaiting=!1,this.seekableStep=1,null==(e=this.subtitleState)||e.destroy(),this.subtitleState=void 0,this.removeEventListener(gr.PlayerEvents.EPGChange,this._onEPGChange),window.removeEventListener("beforeunload",this._onWindowUnload))}_onEPGChange(e){var t=e;this.currentLiveProgramTitle=t.detail?t.detail.title:void 0}_onBroken(e){"panic"in this&&"function"==typeof this.panic?this.panic(e.error):this.error=e.error}_onFullscreenStateChange(e){this.fullscreenState=e.state,this.fullscreenState.isActive?window.addEventListener("beforeunload",this._onWindowUnload):window.removeEventListener("beforeunload",this._onWindowUnload)}_onLiveStreamEnded(){this.isRealtime=!1}_onMediaInfoLoaded(e){var t,i,r;this.isAudioOnly=e.isAudioOnly,this.isLive=null!=(t=null==(i=this.activeSession)?void 0:i.isLiveStream())&&t,this.isRealtime=this.isLive&&!(null!=(r=this.activeSession)&&r.isLiveStreamEnded()),this.activeSession&&(this.subtitleState=new mr.SubtitleState(this.activeSession,this.manifest))}_onScrubberUpdate(){this.isStarted=!0}_onMediaRangeChange(e){this.seekableStep=Math.round(Math.max(1,.02*(e.end-e.start)))}_onMutedChange(e){this.muted=e}_onPipStateChange(e){this.pipState=e.state}_onPlayingChange(e){this.isPlaying=e.isPlaying,this.isEnded=e.pausedReason===vr.PausedReason.Ended,this.isEnded&&(this.isStarted=!1)}_onRateChange(e){this.playbackRate=e}_onRemotePlaybackStateChange(e){this.remotePlaybackState=e.state}_onTimeRunningChange(e){this.isTimeRunning=e.isTimeRunning,this.isEnded=!1}_onVolumeChange(e){this.volume=e}_onWaitingChange(e){e.reason===vr.WaitingReason.Seeking&&(this.isSeeking=e.isWaiting),this.isWaiting=e.isWaiting}_onWindowUnload(e){null==document.exitFullscreen||document.exitFullscreen().catch((e=>{}))}_updateCurrentTimeIsLive(){if(this.activeSession)if(this.isRealtime&&this.isPlaying){var e=this.activeSession.getScrubberRange().end,t=5*Math.max(e/100,1),i=this.activeSession.getCurrentTime(),r=Math.min(this.isCurrentTimeLiveCutOffTime,t);this.isCurrentTimeLive=e-i<r}else this.isCurrentTimeLive=!1}}};var yr=mt(Object.freeze({__proto__:null,ShadowPropertiesMixin:function(e){return class extends e{constructor(){super(...arguments),this._propertyChangeObservers={}}shadowProperties(e,t){var i=this.constructor,r=i.reactiveAttributes,n=i.reactiveProperties;for(var s of(Array.isArray(e)||(e=[e]),e)){var[a,o=a]=s.split(":");if(n.attributes&&!(a in r)&&n.properties&&!(a in n))throw Error(a+" is not a reactive property and cannot be shadowed");a in this._propertyChangeObservers||(this._propertyChangeObservers[a]=new Map),this._propertyChangeObservers[a].set(t,o),t[o]=this[a]}return()=>{for(var i of e){var r=i.split(":")[0];this._propertyChangeObservers[r].delete(t)}}}updating(e,t){var i=e.split(".")[0],r=i!==e;if(i in this._propertyChangeObservers)for(var[n,s]of this._propertyChangeObservers[i])r&&n[i]===this[i]||(n[s]=this[i]);super.updating(e,t)}}}})),br={};!function(e){Object.defineProperty(e,"__esModule",{value:!0});var i,r=Ot,n=Ni;e.PlayerSourceErrorTypes=void 0,(i=e.PlayerSourceErrorTypes||(e.PlayerSourceErrorTypes={})).MISSING_SOURCE="MISSING_SOURCE",i.SOURCE_NOT_SUPPORTED="SOURCE_NOT_SUPPORTED",e.PlayerAgeErrorTypes=void 0,(e.PlayerAgeErrorTypes||(e.PlayerAgeErrorTypes={})).AGE_LIMIT_EXCEEDED="AGE_LIMIT_EXCEEDED";var s=t({},r.PlaybackSessionErrorType,n.PSAPIRequestErrorType,n.NonPlayableErrorType,e.PlayerSourceErrorTypes,e.PlayerAgeErrorTypes);class a extends Error{constructor(e,t,i,r){super(i.message),this.type=void 0,this.cause=void 0,this.fatal=void 0,this.sessionInfo=void 0,Object.setPrototypeOf(this,a.prototype),this.type=e,this.fatal=t,this.cause=i,this.name="PlayerError",this.sessionInfo=r}}e.PlayerError=a,e.PlayerErrorTypes=s}(br);var _r={},Pr={},Er={exports:{}};!function(e){var t=Object.prototype.hasOwnProperty,i="~";function r(){}function n(e,t,i){this.fn=e,this.context=t,this.once=i||!1}function s(e,t,r,s,a){if("function"!=typeof r)throw new TypeError("The listener must be a function");var o=new n(r,s||e,a),l=i?i+t:t;return e._events[l]?e._events[l].fn?e._events[l]=[e._events[l],o]:e._events[l].push(o):(e._events[l]=o,e._eventsCount++),e}function a(e,t){0==--e._eventsCount?e._events=new r:delete e._events[t]}function o(){this._events=new r,this._eventsCount=0}Object.create&&(r.prototype=Object.create(null),(new r).__proto__||(i=!1)),o.prototype.eventNames=function(){var e,r,n=[];if(0===this._eventsCount)return n;for(r in e=this._events)t.call(e,r)&&n.push(i?r.slice(1):r);return Object.getOwnPropertySymbols?n.concat(Object.getOwnPropertySymbols(e)):n},o.prototype.listeners=function(e){var t=i?i+e:e,r=this._events[t];if(!r)return[];if(r.fn)return[r.fn];for(var n=0,s=r.length,a=new Array(s);n<s;n++)a[n]=r[n].fn;return a},o.prototype.listenerCount=function(e){var t=i?i+e:e,r=this._events[t];return r?r.fn?1:r.length:0},o.prototype.emit=function(e,t,r,n,s,a){var o=i?i+e:e;if(!this._events[o])return!1;var l,h,d=this._events[o],u=arguments.length;if(d.fn){switch(d.once&&this.removeListener(e,d.fn,void 0,!0),u){case 1:return d.fn.call(d.context),!0;case 2:return d.fn.call(d.context,t),!0;case 3:return d.fn.call(d.context,t,r),!0;case 4:return d.fn.call(d.context,t,r,n),!0;case 5:return d.fn.call(d.context,t,r,n,s),!0;case 6:return d.fn.call(d.context,t,r,n,s,a),!0}for(h=1,l=new Array(u-1);h<u;h++)l[h-1]=arguments[h];d.fn.apply(d.context,l)}else{var c,p=d.length;for(h=0;h<p;h++)switch(d[h].once&&this.removeListener(e,d[h].fn,void 0,!0),u){case 1:d[h].fn.call(d[h].context);break;case 2:d[h].fn.call(d[h].context,t);break;case 3:d[h].fn.call(d[h].context,t,r);break;case 4:d[h].fn.call(d[h].context,t,r,n);break;default:if(!l)for(c=1,l=new Array(u-1);c<u;c++)l[c-1]=arguments[c];d[h].fn.apply(d[h].context,l)}}return!0},o.prototype.on=function(e,t,i){return s(this,e,t,i,!1)},o.prototype.once=function(e,t,i){return s(this,e,t,i,!0)},o.prototype.removeListener=function(e,t,r,n){var s=i?i+e:e;if(!this._events[s])return this;if(!t)return a(this,s),this;var o=this._events[s];if(o.fn)o.fn!==t||n&&!o.once||r&&o.context!==r||a(this,s);else{for(var l=0,h=[],d=o.length;l<d;l++)(o[l].fn!==t||n&&!o[l].once||r&&o[l].context!==r)&&h.push(o[l]);h.length?this._events[s]=1===h.length?h[0]:h:a(this,s)}return this},o.prototype.removeAllListeners=function(e){var t;return e?(t=i?i+e:e,this._events[t]&&a(this,t)):(this._events=new r,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prefixed=i,o.EventEmitter=o,e.exports=o}(Er);var Sr=Er.exports;Object.defineProperty(Pr,"__esModule",{value:!0});var wr=Ot,Rr=Ui;function Tr(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var kr=Tr(Er.exports),Cr=Rr.getLogger("EPGTracker");class Ar extends kr.default{constructor(e){super(),this.session=void 0,this.track=void 0,this.entries=void 0,this.updating=!1,this.programExitTimeout=void 0,this.nextEPGIndex=void 0,this.currentEPGIndex=void 0,this.session=e,this.session.on(wr.CoreEvent.TimeRunningChange,this.handleTimeRunningChange,this),this.track=e.createTimeRangeEventTrack(),this.track.on("enter",this.handleProgramChange,this),this.track.on("exit",this.handleProgramChange,this),this.entries=[]}getCurrentEntry(){return void 0!==this.currentEPGIndex?this.entries[this.currentEPGIndex]:void 0}async updateEPG(e){var t=this.session.getMediaRange();0===t.start&&0===t.end&&(Cr.log("Waiting for media range."),await new Promise((e=>this.session.once(wr.CoreEvent.MediaRangeChange,(()=>e())))),t=this.session.getMediaRange()),Cr.log("Updating EPG data."),this.updating=!0,this.track.removeAllRanges(),this.entries=e;for(var i=0;i<e.length;++i){var r=e[i],n=this.session.liveTimeToPosition(r.actualEnd.toDateObject());if(n>t.start){var s=this.session.liveTimeToPosition(r.actualStart.toDateObject());this.track.addRange({start:s,end:n},i)}}this.updating=!1,this.emit("epgupdated",e),Cr.log("EPG update done.")}destroy(){void 0!==this.programExitTimeout&&(clearTimeout(this.programExitTimeout),this.programExitTimeout=void 0),this.track.destroy()}handleTimeRunningChange(e){if(e.isTimeRunning&&void 0!==this.nextEPGIndex){var t=-1===this.nextEPGIndex?void 0:this.nextEPGIndex;this.nextEPGIndex=void 0,this.currentEPGIndex!==t&&this.changeProgram(t)}}handleProgramChange(e){void 0!==this.programExitTimeout&&(clearTimeout(this.programExitTimeout),this.programExitTimeout=void 0);var t=e.range.data;"enter"===e.type&&this.updating&&t===this.currentEPGIndex?Cr.debug("Got "+e.type+" "+t+". Ignoring due to data update."):this.session.isTimeRunning()?"enter"===e.type?(Cr.debug("Got "+e.type+" "+t+". Changing to "+t+"."),this.changeProgram(t)):this.currentEPGIndex===t?(Cr.debug("Got "+e.type+" "+t+". Changing to no program unless immediate enter."),this.changeProgram(void 0)):Cr.debug("Got "+e.type+" "+t+". Ignoring due to late exit."):"enter"===e.type?(Cr.debug("Got "+e.type+" "+t+". Changing to "+t+" when time starts."),this.nextEPGIndex=t):void 0===this.nextEPGIndex&&this.currentEPGIndex===t?(Cr.debug("Got "+e.type+" "+t+". Changing to no program when time starts."),this.nextEPGIndex=-1):this.nextEPGIndex===t?(Cr.debug("Got "+e.type+" "+t+". Clearing next program."),this.nextEPGIndex=void 0):Cr.debug("Got "+e.type+" "+t+". Ignoring due to late exit.")}changeProgram(e){if(void 0!==e){this.currentEPGIndex=e;var t=this.getCurrentEntry();Cr.log("Program changed: "+(null==t?void 0:t.programId)+" - "+(null==t?void 0:t.title)),this.emit("programchange",t)}else this.programExitTimeout=setTimeout((()=>{this.currentEPGIndex=void 0,Cr.log("Program changed: No program."),this.emit("programchange")}),100)}}Pr.EPGTracker=Ar,Object.defineProperty(_r,"__esModule",{value:!0});var xr=Jt,Or=kt,Lr=Pr,Mr=Ui;class Nr extends Or.ReactiveState{constructor(e){super(),this.entries=[],this._player=void 0,this._epgTracker=void 0,this._logger=Mr.getLogger("EPGState"),this._player=e,e&&e.activeSession&&(this._epgTracker=new Lr.EPGTracker(e.activeSession),this._epgTracker.on("epgupdated",(e=>{this.entries=e}))),this.updateEPG().catch((e=>{this._logger.warn("Updating EPG failed (no recovery).");var t=xr.toErrorLike(e);"AbortError"!==t.name&&this._player.panic(t)}))}destroy(){super.destroy(),this._epgTracker=null}getEPGTracker(){return this._epgTracker}async updateEPG(){var t,{psapiClient:i}=null!=(t=this._player)?t:{};if("channel"===(null==i?void 0:i.mediaURI.type)){var r,n=!1,s=!1;try{for(var a,o=function(t){var i,r,n,s=2;for("undefined"!=typeof Symbol&&(r=Symbol.asyncIterator,n=Symbol.iterator);s--;){if(r&&null!=(i=t[r]))return i.call(t);if(n&&null!=(i=t[n]))return new e(i.call(t));r="@@asyncIterator",n="@@iterator"}throw new TypeError("Object is not async iterable")}(i.loadEPG());n=!(a=await o.next()).done;n=!1){var l,h=a.value;if(0===h.length){var d;this._logger.info("No EPG available."),null==(d=this._epgTracker)||d.destroy();break}this._logger.info("Updating EPG tracker."),await(null==(l=this._epgTracker)?void 0:l.updateEPG(h))}}catch(e){s=!0,r=e}finally{try{n&&null!=o.return&&await o.return()}finally{if(s)throw r}}this._logger.info("EPG iterator ended.")}}}_r.EPGState=Nr,function(e){Object.defineProperty(e,"__esModule",{value:!0});var i=kt,r=Ot,n=Jt,s=Ni,a=Ii,o=Di,l=Bi,h=X,d=Vi,u=ji,c=ir,p=rr,v=nr,g=yr,m=br,f=We,y=_r,b=sr,_=Ui;function P(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var E=P(qe),S=P(c),w="2.3.60";class R extends(a.DimensionsMixin(o.FocusVisibleMixin(l.FocusWithinMixin(v.PlaybackStateMixin(g.ShadowPropertiesMixin(u.PlayerPanicHandlerMixin(d.ElementPanicMixin(i.ReactiveElement)))))))){static get reactiveAttributes(){return t({},super.reactiveAttributes,{blockedContentAge:Number,autoplay:Boolean,features:Array,loop:Boolean,preferredManifest:String,src:String,playlist:Array,psapiOrigin:String,startTime:Number,startTimeLive:Date})}static get reactiveProperties(){return t({},super.reactiveProperties,{epgState:i.ReactiveState,interactionPointState:Object,metadata:Object,poster:String,resolvedSrc:String,resolvedType:String,speak:String})}constructor(){super(),this.blockedContentAge=void 0,this.interactionPointState=void 0,this.metadata=void 0,this.poster="",this.startupSkipPointDelay=0,this.resolvedSrc=void 0,this.resolvedType=void 0,this.speak="",this.autoplay=!1,this.epgState=void 0,this.features=[],this.preferredManifest=void 0,this.isAwaitingPlaybackStart=!1,this.isBinging=!1,this.isSuspended=!1,this.pendingMetadataResponse=void 0,this.pendingMetadataPlayable=void 0,this.psapiClient=void 0,this.psapiOrigin="https://psapi.nrk.no",this.player=void 0,this.playlist=[],this.playerName="",this.playerVersionNumber="n/a",this.playerFamily="player-core",this.loop=!1,this.startTime=void 0,this.startTimeLive=void 0,this.src="",this.user=void 0,this.savedPlaybackState=void 0,this._speakClearTimeoutId=0,this._countdownIntervalId=0,this.logger=_.getLogger("Player"),this.interactionPointHandler=this.interactionPointHandler.bind(this),this.getAuthToken=this.getAuthToken.bind(this)}connectedCallback(){super.connectedCallback(),this.addEventListener("change",this),this.addEventListener("click",this),this.addEventListener("input",this)}readyCallback(){if(!this.src){var e=function(e){for(var{src:t,type:i}of Array.from(e.querySelectorAll("source")))if(e.canPlayType({type:i}))return{src:t,type:i}}(this);if(e){var{src:t,type:i}=e;this.resolvedType=i,this.src=t}}S.default.isMobile&&this.classList.add("mobile")}disconnectedCallback(){var e;super.disconnectedCallback(),this.destroySession(),null==(e=this.psapiClient)||e.abort(),this.psapiClient=void 0,this.removeEventListener("click",this),this.removeEventListener("input",this),this.removeEventListener("change",this)}updating(e,t){var i;if(super.updating(e,t),"volume"===e)null==(i=this.activeSession)||i.setVolume(this.volume);else if("muted"===e){var r;null==(r=this.activeSession)||r[this.muted?"mute":"unmute"]()}else if("metadata"===e&&this.metadata){var n;if(this.isLive=null!=(n=this.metadata.isLive)&&n,this.checkContentMinimumAge(),void 0!==this.preferredManifest){var a,o=null==(a=this.metadata.accessabilityVersions)?void 0:a.find((e=>e.type===this.preferredManifest));o&&!this.src.match(o.id)&&(this.src="nrk:program:"+o.id,this.pendingMetadataPlayable=void 0)}}else if("manifest"===e&&this.manifest&&"playable"in this.manifest){var l=function(e){var t=e.playable.assets;if(t&&t.length){var i=t[0];return{src:i.url,type:i.mimeType}}}(this.manifest);l&&(this.resolvedSrc=l.src,this.resolvedType=l.type)}else if("src"===e){var h;if(void 0!==t)this.manifest=void 0,this.metadata=void 0,null==(h=this.psapiClient)||h.abort(),this.psapiClient=void 0,this.resolvedSrc=void 0,this.isSuspended=!1,this.savedPlaybackState?this.startTime=this.savedPlaybackState.startTime:this.startTime=void 0,this.stop();if(this.src&&"undefined"!==this.src)if(s.PSAPIClient.isSupported(this.src)){var d={origin:this.psapiOrigin,playerFamily:this.playerFamily};this.user&&(d.enableEeaPortability=!0,d.authTokenFunction=this.getAuthToken),this.psapiClient=new s.PSAPIClient(this.src,this.playerName,d),this.loadMetadata()}else this.resolvedSrc=this.src}else if("isRealtime"===e)this.isRealtime?this.classList.add("realtime"):this.classList.remove("realtime");else if("isLive"===e)this.isLive?this.classList.add("live"):this.classList.remove("live");else if("isEnded"===e&&this.isEnded)this.startTime=void 0;else if("playbackRate"===e){var u;null==(u=this.activeSession)||u.setPlaybackRate(this.playbackRate)}else"dimensions"===e&&this.dimensions&&this.adjustFontSize()}updated(e){super.updated(e);var t=e.has("src"),i=this.src&&"undefined"!==this.src,r=(void 0!==this.activeSession||this.isAwaitingPlaybackStart)&&e.has("hidden")&&this.hidden,n=e.has("hidden")&&!this.hidden&&!t&&i,s=t&&i&&(!0===e.get("isPlaying")||this.autoplay);t&&(this.interactionPointState=void 0),r?this.suspend():n?this.resume():s&&this.play()}handleEvent(e){var t,i,r,n,s,a;if(!e.defaultPrevented){var[o,l]=h.getActionFromEvent(e);if(o)switch(o){case p.PlayerActions.EnterFullscreen:e.preventDefault(),null==(t=this.activeSession)||t.enterFullscreen();break;case p.PlayerActions.ExitFullscreen:e.preventDefault(),null==(i=this.activeSession)||i.exitFullscreen();break;case p.PlayerActions.EnterPip:e.preventDefault(),null==(r=this.activeSession)||r.enterPiP();break;case p.PlayerActions.ExitPip:e.preventDefault(),null==(n=this.activeSession)||n.exitPiP();break;case p.PlayerActions.EnterRemotePlayback:e.preventDefault(),null==(s=this.activeSession)||s.enterRemotePlayback();break;case p.PlayerActions.Play:e.preventDefault(),this.play();break;case p.PlayerActions.Pause:e.preventDefault(),null==(a=this.activeSession)||a.pause();break;case p.PlayerActions.TogglePlay:e.preventDefault(),this.togglePlay();break;case p.PlayerActions.Mute:e.preventDefault(),this.muted=!0;break;case p.PlayerActions.Unmute:e.preventDefault(),this.muted=!1;break;case p.PlayerActions.StopPlayNextCountdown:this.interactionPointState=void 0,window.clearInterval(this._countdownIntervalId);break;case p.PlayerActions.PlayNextEpisode:this.playNext();break;case p.PlayerActions.ToggleSubtitles:var d;e.preventDefault(),null==(d=this.subtitleState)||d.toggleVisibility();break;case p.PlayerActions.ToggleMute:e.preventDefault(),this.toggleMute();break;case p.PlayerActions.SelectStream:var u;if(l!==this.src)this.savedPlaybackState={startTime:null==(u=this.activeSession)?void 0:u.getCurrentTime()},this.src=l;break;case p.PlayerActions.SetPoster:e.preventDefault(),l&&(this.poster=l);break;case p.PlayerActions.SetVolume:if(e.preventDefault(),void 0!==l){var c="string"==typeof l?parseFloat(l):l;this.volume=Math.min(Math.max(c/100,0),1)}break;case p.PlayerActions.SeekTo:e.preventDefault(),this.interactionPointState=void 0,void 0!==l&&this.seekTo(l);break;case p.PlayerActions.SeekToLive:var v;e.preventDefault(),null==(v=this.activeSession)||v.seekToLive();break;case p.PlayerActions.SeekToRelativeTime:e.preventDefault(),void 0!==l&&this.seekToRelativeTime(l);break;case p.PlayerActions.SeekToPosition:e.preventDefault(),void 0!==l&&this.seekToPosition(l);break;case p.PlayerActions.Speak:e.preventDefault(),l&&(this.speak=l,clearTimeout(this._speakClearTimeoutId),this._speakClearTimeoutId=window.setTimeout((()=>{this.speak=""}),2e3))}}}get currentTime(){var e,t;return null!=(e=null==(t=this.activeSession)?void 0:t.getCurrentTime())?e:0}preload(e){var t;return null==(t=this.activeSession)?void 0:t.preload(e)}async play(){if(!this.isAwaitingPlaybackStart){if(this.isSuspended)return this.resume();if(this.isWaiting=!this.player||!this.activeSession,!this.player)try{await this.initPlayerCoreInstance()}catch(e){return this.isWaiting=!1,void this.panic(e)}if(!this.activeSession&&(this.isAwaitingPlaybackStart=!0,this.unlockAudioVideoElement(),s.PSAPIClient.isSupported(this.src)&&await this.loadMetadata(),this.resolvedSrc||await this.loadManifest(this.manifestTypeFromSrc()),this.resolvedSrc&&await this.createSession(),this.isAwaitingPlaybackStart=!1,!this.activeSession||this.isSuspended))return this.isWaiting=!1,void this.stop();try{var e,t=await this.activeSession.play();return this.startTimeLive&&null!=(e=this.metadata)&&e.isLive&&(this.seekTo(this.activeSession.liveTimeToPosition(this.startTimeLive)),this.startTimeLive=void 0),t}catch(e){this.isWaiting=!1,"AutoplayError"!==n.toErrorLike(e).name&&this.panic(e)}}}pause(){var e;if(null!=(e=this.activeSession)&&e.isPlaying())return this.activeSession.pause()}togglePlay(){if(!this.activeSession||!this.activeSession.isPlaying())return this.play();this.pause()}async suspend(e){return this.isSuspended=!0,this.activeSession&&(this.savedPlaybackState={isPlaying:this.isEnded||this.isPlaying||e,startTime:this.isStarted?this.currentTime:this.startTime}),this.stop()}async resume(){if(this.isSuspended=!1,this.savedPlaybackState){var e=this.savedPlaybackState;this.startTime=e.startTime,this.savedPlaybackState=void 0,await this.play(),e.isPlaying||(this.pause(),this.isStarted=!0)}else this.play()}stop(){var e;return this.isAwaitingPlaybackStart=!1,null==(e=this.psapiClient)||e.abort(),this.destroySession()}toggleMute(){this.muted=!this.muted}resetPlaybackRate(){var e;null==(e=this.activeSession)||e.resetPlaybackRate()}seekTo(e){this.activeSession&&(this.isSeeking=!0,"string"==typeof e&&(e=parseFloat(e)),this.activeSession.seekTo(e))}seekToRelativeTime(e){this.activeSession&&(this.isSeeking=!0,"string"==typeof e&&(e=parseFloat(e)),this.activeSession.seekToRelativeTime(e))}seekToPosition(e){if(this.activeSession){this.isSeeking=!0,"string"==typeof e&&(e=parseFloat(e));var t=this.activeSession.getSeekableRange(),i=e*(t.end-t.start)+t.start;this.activeSession.seekTo(i)}}emit(e,t){this.dispatchEvent(new CustomEvent(e,{bubbles:!1,detail:t}))}interactionPointHandler(e){var i=e.range.data;if("enter"===e.type){if(i.autoskipInBingeMode&&this.isBinging)return this.seekTo(i.seekToTime),void(this.isBinging=!1);this.interactionPointState={type:i.type,visible:!0,displayValue:i.displayValue,seekToTime:i.seekToTime},"nextUpPoint"===i.type&&(this.isBinging=!0,this.interactionPointState={countdownDuration:i.countdownDuration,seekToTime:i.seekToTime,visible:!0,type:i.type,displayValue:i.displayValue,originalCountdownDuration:i.countdownDuration},this._countdownIntervalId=window.setInterval((()=>{var e,i;null!=(e=this.interactionPointState)&&e.countdownDuration&&(this.interactionPointState=t({},this.interactionPointState,{countdownDuration:this.interactionPointState.countdownDuration-1})),0===(null==(i=this.interactionPointState)?void 0:i.countdownDuration)&&window.clearInterval(this._countdownIntervalId)}),1e3))}else if("exit"===e.type){var r,n,s;if(null!=(r=this.interactionPointState)&&r.countdownDuration)return this.abortInteractionPoint(),this.playNext();(null==(n=this.interactionPointState)||!n.manualExtension||null!=(s=this.interactionPointState)&&s.manualExtension&&this.currentTime<e.range.start)&&(this.interactionPointState=void 0,this.isBinging=!1)}}get updateComplete(){return new Promise((e=>{this.updatePromise.then((()=>{e(this.pendingMetadataResponse)}))}))}async _onMediaInfoLoaded(e){super._onMediaInfoLoaded(e),this.addEventsForInteractionPoints()}handlePanic(e){super.handlePanic(e),this.suspend()}canPlayType(e){throw Error('PlayerElement subclass must implement "canPlayType()" method based on required PlayerCore adapters')}playerVersion(){return this.playerName+"@"+this.playerVersionNumber+" (player-elements@"+"2.3.60/player-core@"+r.version+")"}abortInteractionPoint(){this.interactionPointState=void 0,window.clearInterval(this._countdownIntervalId)}resetNextUpCountdown(){this.interactionPointState&&(this.interactionPointState.countdownDuration=this.interactionPointState.originalCountdownDuration)}abortNextUpCountdown(){this.interactionPointState&&(window.clearInterval(this._countdownIntervalId),this.interactionPointState.countdownDuration=void 0,this.interactionPointState.displayValue="Neste",this.interactionPointState.manualExtension=!0,this.isBinging=!1)}async initPlayerCoreInstance(){throw Error('PlayerElement subclass must implement "initPlayerCoreInstance()" method')}async createSession(){var e;if(await this.destroySession(),!this.resolvedSrc)return this.panic(new m.PlayerError(m.PlayerErrorTypes.MISSING_SOURCE,!0,new Error("Avspilling feilet på grunn av manglende mediakilde")));var t=null!=(e=this.resolvedType?{type:this.resolvedType}:n.guessMediaTypeOfUrl(this.resolvedSrc))?e:{type:"video/mp4"};if(!this.canPlayType(t))return this.panic(new m.PlayerError(m.PlayerErrorTypes.SOURCE_NOT_SUPPORTED,!0,new Error("Avspilling av mediainnholdet er ikke støttet på denne enheten"),{mediaId:this.src,mediaUrl:this.resolvedSrc}));try{var i,r,s={mute:this.muted,startTime:null!=(i=this.metadata)&&i.isChannel?void 0:this.startTime,videoPoster:this.poster},a=this.player.createPlaybackSession(this.resolvedSrc,t,s);this._observePlaybackSession(a),null!=(r=this.metadata)&&r.isChannel&&(this.epgState=new y.EPGState(this))}catch(e){this.panic(e)}}destroySession(){if(this.activeSession){var e,t=this.activeSession;return this._unobservePlaybackSession(),null==(e=this.epgState)||e.destroy(),this.epgState=void 0,t.close()}return Promise.resolve()}async loadMetadata(){if(this.psapiClient){if(!this.metadata){if(this.pendingMetadataPlayable)return this.pendingMetadataPlayable;var e,i=this.psapiClient.loadMetadata({throwNonPlayableError:!0});this.pendingMetadataPlayable=new Promise((t=>e=t));var r=()=>{this.pendingMetadataResponse=i.next().then((i=>{var n,s,a,o,l,h,d,u,c;this.pendingMetadataResponse=void 0,i.done?(e(),this.pendingMetadataPlayable=void 0):(this.metadata=(n=i.value,s=this.startTime,l=n.preplay.poster.images,h="playable"===n.playability,d=function(e){var{live:t,onDemand:i}=e.availability||{},r={};return t&&t.transmissionInterval&&(r.from=new Date(t.transmissionInterval.from),r.to=new Date(t.transmissionInterval.to)),i&&(r.from=new Date(i.from),r.to=new Date(i.to)),e.nonPlayable&&(r.reason=e.nonPlayable.reason,r.endUserMessage=e.nonPlayable.endUserMessage,r.messageType=e.nonPlayable.messageType),r.isPending=!!r.from&&Date.now()<r.from.getTime(),r}(n),u=l.reduce(((e,t,i)=>{var{url:r,pixelWidth:n}=t;return e+=r+" "+n+"w, "}),""),c=null==(a=n._embedded.manifests)?void 0:a.map((e=>({id:e.id,label:e.availabilityLabel,type:e._links.self.name}))),u+=""+l[0].url,{availability:h?{available:!0}:t({available:!1},d),description:n.preplay.description,duration:n.duration?E.default.toSeconds(E.default.parse(n.duration)):0,heading:n.preplay.titles.title,id:n.id,isLive:"live"===n.streamingMode,isChannel:"channel"===(null==(o=n.availability.live)?void 0:o.type),legalAge:n.legalAge,startTime:s,posterSrcset:u,subheading:n.preplay.titles.subtitle,interactionPoints:n.interactionPoints,indexPoints:T(n.preplay.indexPoints),accessabilityVersions:c}),r())})).catch((e=>{this.pendingMetadataPlayable=void 0,this.pendingMetadataResponse=void 0,"AbortError"!==n.toErrorLike(e).name&&this.panic(e)}))};return r(),this.pendingMetadataPlayable}}else this.panic(Error("Unable to load metadata for invalid PSAPI media reference: "+this.src))}checkContentMinimumAge(){if(this.blockedContentAge&&this.metadata&&this.metadata.legalAge&&"exempt"!==this.metadata.legalAge.body.status){var e="A"===this.metadata.legalAge.body.rating.code?0:Number(this.metadata.legalAge.body.rating.code);e>=this.blockedContentAge&&this.panic(new m.PlayerError(m.PlayerErrorTypes.AGE_LIMIT_EXCEEDED,!0,{name:"AgeLimitExceeded",message:"Content age rating is "+e+" while set age limit is "+this.blockedContentAge+"+"}))}}async loadManifest(e){if(this.psapiClient){this.pendingMetadataPlayable&&await this.pendingMetadataPlayable;try{var t=await this.psapiClient.updateManifest(e);this.manifest=function(e){if(e.playable){var t=e.playable.assets[0].url,i=t.substr(0,t.lastIndexOf("/")),r=e.playable.thumbnails&&e.playable.thumbnails.length>0?e.playable.thumbnails:[{url:i+"/thumbnails.vtt",width:960}];return{statistics:e.statistics,playable:e.playable,thumbnails:r}}}(t.data)}catch(e){"AbortError"!==n.toErrorLike(e).name&&this.panic(e)}}else this.panic(Error("Unable to load manifest for invalid PSAPI media reference: "+this.src))}unlockAudioVideoElement(){var e=this.querySelector("video,audio");e&&n.unlockMediaElement(e)}adjustFontSize(){this.style.setProperty("--player-base-font-size",this.getRemFontSize())}getRemFontSize(){return(this.dimensions.width<500?2:5/4)*this.baseFontSize()/h.getFontSize(document.documentElement)+"rem"}baseFontSize(){var e=h.getFontSize(document.documentElement)/800;return Math.min(this.dimensions.width,this.dimensions.height*(1/.5625))*e}manifestTypeFromSrc(){return this.src.match(/TOLK/)?"tegntolk":this.src.match(/SYNS/)?"synstolk":"default"}addEventsForInteractionPoints(){var e,t;if(null!=(e=this.metadata)&&null!=(t=e.interactionPoints)&&t.seekToPoints&&this.activeSession){var i,r,n=this.activeSession.createTimeRangeEventTrack();for(var s of this.metadata.interactionPoints.seekToPoints){this.logger.log("adding TimeRangeEvent for seekToPoint",s);var a=0===s.startTime?this.startupSkipPointDelay:s.startTime,o=null==n?void 0:n.addRange({start:a,end:s.endTime},{type:"seekToPoint",displayValue:s.displayValue,seekToTime:s.seekToTime,autoskipInBingeMode:s.autoSkipInBingeMode});null==o||o.on("enter",this.interactionPointHandler),null==o||o.on("exit",this.interactionPointHandler)}if(null!=(i=this.metadata)&&null!=(r=i.interactionPoints)&&r.nextUpPoint&&this.playListHasNext()){var l=this.metadata.interactionPoints.nextUpPoint;this.logger.info("adding TimeRangeEvent for nextUpPoint",l);var h=null==n?void 0:n.addRange({start:l.startTime,end:this.metadata.duration},{type:"nextUpPoint",displayValue:"Neste om",countdownDuration:l.countDownDuration});null==h||h.on("enter",this.interactionPointHandler),null==h||h.on("exit",this.interactionPointHandler)}}}playNext(){if(this.dispatchEvent(new CustomEvent(b.PlayerEvents.PlayNextEpisode,{bubbles:!0,cancelable:!0})),this.playListHasNext()){var e=this.src.replace(/TOLK|SYNS/,""),t=this.playlist.findIndex((t=>t===e)),i=this.playlist[t+1];this.interactionPointState=void 0,this.src=i,this.isBinging=!0}}playListHasNext(){if(!this.playlist||0===this.playlist.length)return!1;var e=this.src.replace(/TOLK|SYNS/,"");return this.playlist.findIndex((t=>t===e))!==this.playlist.length-1}getAuthToken(){return this.user?this.user.getAuthToken().then((e=>Promise.resolve(e))).catch((e=>Promise.resolve(void 0))):Promise.resolve(void 0)}fakeError(e,t){void 0===t&&(t=!1),this.dispatchEvent(new CustomEvent(b.PlayerEvents.PlayerError,{bubbles:!0,cancelable:!0,detail:new m.PlayerError(e,t,e?new Error("FakeError "+e):new Error("fakeError(errorType: string | PlayerErrorTypes, fatal = false)\nThrow an error out of the player to any listening context. Error types can be:\n- "+Object.keys(m.PlayerErrorTypes).join("\n- ")+"\n"))}))}}function T(e){return e.map((e=>({title:e.title,startPoint:f.durationToSeconds(e.startPoint)})))}Object.defineProperty(e,"PlayerActions",{enumerable:!0,get:function(){return p.PlayerActions}}),Object.defineProperty(e,"PlayerErrorTypes",{enumerable:!0,get:function(){return m.PlayerErrorTypes}}),e.PLAYER_ELEMENTS_VERSION=w,e.PlayerElement=R}(Tt);var Ir={},Dr={};Object.defineProperty(Dr,"__esModule",{value:!0}),Dr.matchSrcset=function(e){var{srcsetConditions:t,elementWidth:i,devicePixelRatio:r=1}=e;if(t&&0!==t.length){for(var{type:n,url:s,value:a}of t){if(("x"===n?i*r-i*a:i-a)<=0)return s}return t[t.length-1].url}},Dr.parseSrcset=function(e){var t=[];for(var i of e.trim().split(/\s*,\s*/g)){var[r,n="0w"]=i.split(" "),s=n.slice(-1),a=Number(n.slice(0,-1));t.push({type:s,url:r,value:a})}return t.sort(((e,t)=>e.value-t.value))},Object.defineProperty(Ir,"__esModule",{value:!0});var Br=kt,Vr=We,Hr=X,jr=Dr;class Ur extends Br.ReactiveElement{constructor(){super(...arguments),this.availability=void 0,this.dimensions=void 0,this.duration=0,this.heading=void 0,this.isLive=void 0,this.isTimeRunning=void 0,this.legalAgeText=void 0,this.legalDisplayAge=void 0,this.metadata=void 0,this.muted=void 0,this.simple=!1,this.startTime=void 0,this.src=void 0,this.srcset=void 0,this.subheading=void 0,this.videoSrc=void 0,this.player=void 0,this.manualOverrides={srcset:!1,heading:!1,subheading:!1},this.srcsetConditions=void 0,this._unshadowProperties=void 0}static get reactiveAttributes(){return{heading:String,simple:Boolean,src:String,srcset:String,subheading:String}}static get reactiveProperties(){return{availability:Object,dimensions:(e,t)=>{e.srcsetConditions&&(e.src=e.matchSrcset(e.srcsetConditions))},duration:Number,isLive:Boolean,isTimeRunning:(e,t)=>{t&&(e.hidden=!0)},legalAgeText:String,metadata:(e,t)=>{t&&e.copyMetadata(t)},muted:Boolean,startTime:Number,srcset:String,videoSrc:(e,t)=>{e.hidden=!1}}}readyCallback(){this.player=Hr.getElementOfType(this),this._unshadowProperties=this.player.shadowProperties(["dimensions","isTimeRunning","metadata","muted","src:videoSrc"],this),this.isBootstrapped||(this.manualOverrides={srcset:void 0!==this.srcset,heading:void 0!==this.heading,subheading:void 0!==this.subheading})}updating(e,t){"srcset"===e&&this.srcset&&(this.srcsetConditions=jr.parseSrcset(this.srcset),this.src=this.matchSrcset(this.srcsetConditions))}updated(e){this.isConnected&&this.src&&e.has("src")&&(this.player.poster=this.src)}disconnectedCallback(){var e;null==(e=this._unshadowProperties)||e.call(this),this.player=null,super.disconnectedCallback()}copyMetadata(e){var t,i=null==(t=e.legalAge)?void 0:t.body;this.duration=e.duration,this.isLive=e.isLive,this.availability=e.availability,this.startTime=e.startTime,i&&"rating"in i&&(this.legalAgeText=i.rating.displayValue,this.legalDisplayAge=i.rating.displayAge),!this.manualOverrides.srcset&&e.posterSrcset&&(this.srcset=e.posterSrcset),!this.manualOverrides.subheading&&e.subheading&&(this.subheading=e.subheading),!this.manualOverrides.heading&&e.heading&&(this.heading=e.heading)}get accessibleDescription(){var e=[],t=!this.isLive&&Vr.durationToReadableString(this.duration);return this.isLive&&e.push("Direkte nå"),this.heading&&e.push("Spill av "+this.heading),this.legalAgeText&&e.push(this.legalAgeText),t&&e.push("Varigheten er "+t),e.length?e.join(". ")+".":""}matchSrcset(e){var t,{width:i}=this.getBoundingClientRect();return null!=(t=jr.matchSrcset({srcsetConditions:e,devicePixelRatio:window.devicePixelRatio,elementWidth:i}))?t:this.src}}var Fr=Ir.PosterElement=Ur,Gr=new WeakMap,zr=m((e=>t=>{if(!(t instanceof V))throw new Error("unsafeHTML can only be used in text bindings");var i=Gr.get(t);if(void 0===i||!N(e)||e!==i.value||t.value!==i.fragment){var r=document.createElement("template");r.innerHTML=e;var n=document.importNode(r.content,!0);t.setValue(n),Gr.set(t,{value:e,fragment:n})}})),Wr={};
/**
 * @license
 * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at
 * http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at
 * http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at
 * http://polymer.github.io/PATENTS.txt
 */Object.defineProperty(Wr,"__esModule",{value:!0});var qr,Kr,Yr,Jr,$r,Xr,Qr,Zr,en,tn,rn,nn,sn,an,on,ln,hn,dn,un,cn,pn=Wr.safeCEDefine=function(e,t){customElements.get(e)||customElements.define(e,t)};function vn(e){var{attemptPlay:t,attemptPause:i,pauseIntersection:r,disableAutopause:s,playIntersection:a,initialState:o}=e,l=new n.FiniteStateMachine(o);l.from(un.AwaitingIntersection).to(un.Playing,un.Paused,un.ManualPlaying),l.from(un.Playing).to(un.Paused,un.ManualPause),l.from(un.ManualPlaying).to(un.ManualPause),!1===s&&l.from(un.ManualPlaying).to(un.Paused),l.from(un.ManualPause).to(un.ManualPlaying),l.from(un.Paused).to(un.AwaitingIntersection,un.ManualPlaying);var{playGuard:h,pauseGuard:d}=function(e){var{pauseIntersection:t,playIntersection:i}=e;return{pauseGuard:gn.bind(null,t),playGuard:mn.bind(null,i)}}({playIntersection:a,pauseIntersection:r});l.onEnter(un.Playing,h),l.onEnter(un.Paused,d);var u=Promise.resolve();l.on(un.Playing,(async()=>{var e;await(e=250,new Promise((t=>{setTimeout(t,e)}))),l.is(un.Playing)?u=t():l.is(un.Paused)&&l.go(un.AwaitingIntersection)}));return l.on(un.Paused,(async()=>{try{await u}catch(e){}finally{await i()}})),l}function gn(e,t,i){var{isIntersecting:r=!1,intersectionRatio:n=0}=void 0===i?{}:i;return!r||e>=n}function mn(e,t,i){var{isIntersecting:r=!0,intersectionRatio:n=1}=void 0===i?{}:i;return r&&e<=n}function fn(e,t){if(e)return $(Kr||(Kr=i(['\n      <h2 class="nrkno-player-poster__heading">\n        ','\n        <div class="heading-container"><span class="heading-text">',"</span></div>\n      </h2>\n    "])),function(e){var t;if((null!=(t=null==e?void 0:e.length)?t:-1)>0)return $(Yr||(Yr=i(['<div class="subheading-container"><small class="subheading-text">',"</small></div>"])),e)}(t),e)}!function(e){e.AwaitingIntersection="AwaitingIntersection",e.Playing="Playing",e.Paused="Paused",e.ManualPlaying="ManualPlaying",e.ManualPause="ManualPause"}(un||(un={})),function(e){e.Error="error",e.Recommend="recommend",e.Share="share"}(cn||(cn={}));var yn,bn=t({},Tt.PlayerActions,{DialogHide:"player.dialogHide",DialogShow:"player.dialogShow"});class _n extends Fr{updated(e){super.updated(e),this.isConnected&&J(this.render(),this,{eventContext:this})}render(){return $(Jr||(Jr=i(["\n      "," ",'\n      <button\n        class="nrkno-player-poster__button full"\n        action="','"\n        ?disabled="','"\n        type="play-button"\n        aria-label="','"\n      >\n        <div aria-hidden="true">\n          ','\n          <div class="absolute top right flex">'," ",'</div>\n          <div class="absolute bottom left right">\n            '," ","\n          </div>\n          ","\n        </div>\n      </button>\n    "])),function(e){if(e)return $(qr||(qr=i(['<img class="full" alt src="','" />'])),e)}(this.src),this.renderLiveOrPendingBadge(),bn.Play,this.availability&&!this.availability.available,this.accessibleDescription,this.renderVolumeStatus(),this.renderAge(),this.renderDuration(),this.renderPlayButton(),fn(this.heading,this.subheading),this.renderMessage())}renderMessage(){if(this.availability&&!this.availability.available&&!this.availability.isPending)return $($r||($r=i(['\n      <div class="nrkno-player-poster__message absolute top right bottom left">\n        <p class="nrkno-player-poster__message-inner">',"</p>\n      </div>\n    "])),this.availability.endUserMessage)}renderPlayButton(){var e=this.availability;if(!(void 0!==e&&!1===e.available)){var t=this.isLive?"":"nrkno-player-button--start-time-indicator",r=100/this.duration*(this.startTime||0),n=r?"--startAtDegrees: "+3.6*r+"deg;":void 0;return $(Xr||(Xr=i([' <div\n      class="nrkno-player-poster__icon-play nrkno-player-button-big nrkno-player-focus-ring--outside relative center-content ','"\n      style="','"\n    >\n      <span class="sr-only">Spill av</span>\n      ',"\n    </div>"])),t,ie(n),zr(Ie))}}renderDuration(){if(!this.isLive&&this.duration)return $(Qr||(Qr=i([' <time class="nrkno-player-poster__pill">',"</time> "])),vt(this.duration))}renderAge(){var e=this.legalDisplayAge;if(!this.isLive&&"string"==typeof e)return $(Zr||(Zr=i(['<p class="nrkno-player-poster__pill nrkno-player-poster__age">',"</p> "])),e)}renderVolumeStatus(){if(this.muted)return $(en||(en=i([' <div class="nrkno-player-poster__pill nrkno-player-poster__muted absolute top left">\n      '," Spiller "," lyd\n    </div>"])),zr(this.muted?Ue:He),this.muted?"uten":"med")}renderLiveOrPendingBadge(){var e,t,r=!(null!=(e=this.availability)&&e.available)&&(null==(t=this.availability)?void 0:t.isPending);if(this.isLive||r){var n=this.availability,s=this.isLive?"Direkte":"Kommer";if(null==n||!n.available){var a,o,l=new Date,h=new Date(null!=(a=null==n?void 0:n.from)?a:0),d=new Date(null!=(o=null==n?void 0:n.to)?o:0),u=l.getTime()<h.getTime();u&&et(h,l)?s+=" kl. "+ct(h):u?s+=" "+ut(h,l):l.getTime()>d.getTime()&&(s="Sending avsluttet "+ut(d,l))}return $(tn||(tn=i(['\n      <div\n        class="nrkno-player-poster-live-badge absolute top right ','"\n      >\n        ',"\n      </div>\n    "])),r?"nrkno-player-poster-live-badge--pending":"",s)}}}function Pn(e,t){return new CustomEvent(e,{bubbles:!0,detail:t})}function En(e,t){return function(e,t){return e.type===t}(e,t)}!function(e){e.Autoplay="player.autoplay"}(yn||(yn={}));var Sn=["activeDialog","handledError","isLive","isRealtime","isWaiting","metadata","muted","src","speak"];class wn extends(function(e){return class extends e{static get reactiveProperties(){return t({},super.reactiveProperties,{intersectionEntry:Object,isIntersecting:Boolean})}constructor(){super(...arguments),this.intersectionEntry=void 0,this.intersectionThreshold=[0],this.isIntersecting=!1,this._intersectionObserver}readyCallback(){if(Se){var e=this.getAttribute("intersectionthreshold");null!==e&&(this.intersectionThreshold=JSON.parse(e)),this._intersectionObserver=this._getIntersectionObserver(this.intersectionThreshold),this._intersectionObserver&&(this._intersectionObserver.observe(this),this._intersectionObserver.count++),super.readyCallback()}else super.readyCallback()}disconnectedCallback(){super.disconnectedCallback&&super.disconnectedCallback(),this._intersectionObserver&&(this._intersectionObserver.unobserve(this),--this._intersectionObserver.count<=0&&(this._intersectionObserver.disconnect(),Ee.delete(this.intersectionThreshold)),this._intersectionObserver=void 0)}_getIntersectionObserver(e){for(var[t,i]of Ee.entries())if(re(e,t))return this.intersectionThreshold=t,i;var r={threshold:e},n=this._createIntersectionObserver(r);return Ee.set(e,n),n}_createIntersectionObserver(e){var t=new IntersectionObserver(((e,t)=>{for(var i of e){var r=i.target;r.intersectionEntry=i,r.isIntersecting=i.isIntersecting}}),e);return t.count=0,t}}}(Tt.PlayerElement)){constructor(){var e,t,i,r;super(...arguments),this.autoPlaybackState=void 0,this.activeDialog=void 0,this.didLazyAutoplay=!1,this.handledError=void 0,this.ga="UA-3413696-54",this.lazyAutoplay=!1,this.muteHadInteraction=!1,this.sourceId=void 0,this.disableAutopause=!1,this.playerName="nrkno-player",this.playerVersionNumber="3.1.14",this.buffering="default",this.stopBuffering=(e=()=>{this.activeSession&&this.activeSession.close()},t=5e3,(r=()=>{clearTimeout(i),i=setTimeout((()=>{e(),r.hasRun=!0}),t)}).hasRun=!1,r.cancel=()=>{clearTimeout(i)},r.reset=()=>{clearTimeout(i),r.hasRun=!1},r),this.shareOrigin="https://www.nrk.no/video",this.recommendedOrigin=void 0,this.recommendations=void 0,this.posterData=void 0}static get reactiveAttributes(){return t({},super.reactiveAttributes,{disableAutopause:Boolean,ga:String,lazyAutoplay:Boolean,buffering:String,recommendedOrigin:String,shareOrigin:String,sourceId:String})}static get reactiveProperties(){return t({},super.reactiveProperties,{activeDialog:String,handledError:Object,recommendations:Object})}static whenDefinedCallback(){pn("nrkno-player-poster",_n)}readyCallback(){super.readyCallback();var e=this.getAttribute(".posterData");e&&(this.posterData=JSON.parse(e));var t=this.getAttribute(".recommendations");t&&(this.recommendations=JSON.parse(t),this.removeAttribute(".recommendations"));var[i=0,r=0]=this.intersectionThreshold||[];this.autoPlaybackState=vn({initialState:un.Paused,playIntersection:i,pauseIntersection:r,disableAutopause:this.disableAutopause,attemptPlay:()=>{if(!this.isAnotherPlayerPlaying())return this.play().then((()=>{var e,t,i,r=null!=(e=null==(t=this.activeSession)?void 0:t.isPlaying())&&e;(this.didLazyAutoplay=r,r)&&(this.dispatchEvent(Pn(yn.Autoplay,{isAutoplay:r})),null==(i=this.activeSession)||i.once(or.PlayingChange,(()=>{this.dispatchEvent(Pn(yn.Autoplay,{isAutoplay:!1}))})))})).catch((()=>{this.dispatchEvent(Pn(yn.Autoplay,{isAutoplay:!1}))}))},attemptPause:()=>this.pause()})}updating(e,t){var i;if("activeDialog"===e)void 0!==this.activeDialog&&this.isPlaying&&(null==(i=this.activeSession)||i.pause());else if("isPlaying"===e)this.isPlaying?this.activeDialog=void 0:void 0!==t&&void 0===this.activeDialog&&!this.isLive&&this.renderRecommended()&&(this.activeDialog=cn.Recommend);else if("handledError"===e)this.handledError?this.activeDialog=cn.Error:this.activeDialog=void 0;else if("dimensions"===e&&this.dimensions){var r=Math.min(1e3,Math.max(400,this.dimensions.width/this.dimensions.height*400)),n="player-size--"+(this.dimensions.width<r?"small":"large");this.classList.remove("player-size--small","player-size--large"),this.classList.add(n)}else if("lazyAutoplay"===e){var s=this.autoPlaybackState;this.lazyAutoplay&&s.is(un.Paused)?(this.muted=!0,s.go(un.AwaitingIntersection)):s.is(un.AwaitingIntersection)&&s.go(un.Paused)}else if("isAudioOnly"===e){var a=this.querySelector("video");a&&(this.isAudioOnly?a.classList.add("nrkno-player-audio-only"):a.classList.remove("nrkno-player-audio-only"))}super.updating(e,t)}updated(e){var t,i;if(super.updated(e),this.isConnected)for(var r of(this.isBootstrapped&&e.has("src")&&(this.posterData=void 0),e.has("isPlaying")&&(i=this.autoPlaybackState,this.isPlaying?i.canGo(un.ManualPlaying)&&i.go(un.ManualPlaying):i.canGo(un.ManualPause)&&i.go(un.ManualPause)),!e.has("intersectionEntry")||!this.intersectionEntry||null!=(t=this.pipState)&&t.isActive||function(e,t){e.canGo(un.Playing)?e.go(un.Playing,t):e.canGo(un.Paused)&&e.go(un.Paused,t)}(this.autoPlaybackState,this.intersectionEntry),e.has("muted")&&this.isStarted&&!this.muteHadInteraction&&(this.muteHadInteraction=!0),Sn))if(!this.isBootstrapped||e.has(r))return J(this.render(),this,{eventContext:this})}handleEvent(e){if(!e.defaultPrevented){var[t,i]=Z(e);if(t)switch(t){case bn.DialogHide:void 0!==this.activeDialog&&(e.preventDefault(),this.activeDialog=void 0);break;case bn.DialogShow:e.preventDefault(),this.activeDialog=i;break;case bn.SetVolume:super.handleEvent(e),this.muted=0===this.volume;break;default:super.handleEvent(e)}}}render(){return $(nn||(nn=i(['\n      <video aria-hidden="true"></video>\n      <span class="visually-hidden" aria-live="polite">','</span>\n      <nrkno-player-keyboard></nrkno-player-keyboard>\n      <nrkno-player-tracker gatrackingid="','" source-id="','"></nrkno-player-tracker>\n      <nrkno-player-subtitles class="-subtitles nrkno-player-subtitle" type="subtitles"></nrkno-player-subtitles>\n      ','\n      <nrkno-player-controls\n        autofocusable\n        class="-controls full"\n        type="controls"\n        .visibility=',"\n        .activeDialog=",'\n        ?hidden="','"\n      ></nrkno-player-controls>\n      '," "," "," ","\n      "," ","\n    "])),this.speak,this.ga,ie(this.sourceId),this.renderUnmute(),this.visibleControllerItems(),this.activeDialog,void 0===this.activeSession,this.renderPoster(),this.renderError(),(e=!this.isWaiting,$(rn||(rn=i(['\n    <div class="nrkno-player-spinner center" ?hidden="','">\n      <div class="nrkno-player-spinner__icon">',"</div>\n    </div>\n  "])),e,zr('<svg viewBox="0 0 24 24" class="nrk-spinner" width="1.500em" height="1.500em" aria-hidden="true" focusable="false"><path fill="currentColor" d="M23 11.9999s0 .0001 0 0C23 18.0751 18.0751 23 12 23 5.92487 23 1 18.0751 1 12 1 5.92487 5.92487 1 12 1v2c-4.97056 0-9 4.02944-9 9 0 4.9706 4.02944 9 9 9 4.9706 0 9-4.0294 9-9l2-.0001z"/></svg>'))),this.renderRecommended(),this.renderShare(),this.renderAutoplayHeading());var e}async play(){return this.stopBuffering.hasRun&&await this.createSession(),this.stopBuffering.reset(),super.play()}pause(){return"conservative"===this.buffering&&this.isLive&&this.stopBuffering(),super.pause()}toggleMute(){this.volume?this.muted=!this.muted:(this.muted=!1,this.volume=1)}handlePanic(e){this.handledError=e}canPlayType(e){return(ir.isApple?[v,p]:[p,v]).some((t=>t(e)))}async initPlayerCoreInstance(){if(!this.player){var{HlsJsAdapter:e,NativeAdapter:t,PlayerCore:i}=await window.nrknoStaticLoaders.dynamicImport("./nrkno-player-dependencies.mjs","https://static.nrk.no/nrkno-player/2.7.1/"),r=ir.isApple?[t,e]:[e,t];this.player=new i(this,r,{hlsJsAdapter:{loadHlsJs:()=>window.nrknoStaticLoaders.dynamicImport("hls.js","https://static.nrk.no/nrkno-player/2.7.1/"),immediateQualityJumps:!0}})}}isAnotherPlayerPlaying(){var e=Array.from(document.getElementsByTagName(this.tagName));for(var t of e){var i=this!==t,r=t.isPlaying||t.isWaiting;if(i&&r)return!0}return!1}renderPoster(){var e,t=null!=(e=this.posterData)?e:{},r=t.subheading,n="string"==typeof r?r:!0===r?void 0:"";return $(sn||(sn=i(['\n      <nrkno-player-poster\n        class="-poster full"\n        type="poster"\n        src="','"\n        srcset="','"\n        heading="','"\n        subheading="','"\n      >\n      </nrkno-player-poster>\n    '])),ie(t.src),ie(t.srcset),ie(t.heading),ie(n))}renderError(){return $(an||(an=i(['\n      <nrkno-player-errormessage\n        class="nrkno-player-errormessage full"\n        .error="','"\n        ?hidden="','"\n      ></nrkno-player-errormessage>\n    '])),this.handledError,this.activeDialog!==cn.Error)}renderRecommended(){var e;if(this.recommendedOrigin||null!=(e=this.recommendations)&&e.src)return $(on||(on=i(['\n      <nrkno-player-recommended\n        autofocusable\n        class="nrkno-player-recommended full"\n        ?hidden="','"\n      ></nrkno-player-recommended>\n    '])),this.activeDialog!==cn.Recommend||this.isWaiting)}renderShare(){if(this.shareOrigin)return $(ln||(ln=i(['\n      <nrkno-player-share\n        autofocusable\n        class="nrkno-player-share full"\n        ?hidden="','"\n      ></nrkno-player-share>\n    '])),this.activeDialog!==cn.Share||this.isWaiting)}renderAutoplayHeading(){var e,t,r,n,s=null!=(e=null!=(t=null==(r=this.posterData)?void 0:r.heading)?t:null==(n=this.metadata)?void 0:n.heading)?e:"";if(this.didLazyAutoplay&&s)return $(hn||(hn=i(['\n      <h2 class="nrkno-player-autoplay absolute top left">\n        <span class="nrkno-player-autoplay__heading">',"</span>\n      </h2>\n    "])),s)}renderUnmute(){if(this.muted&&!this.muteHadInteraction&&!this.activeDialog)return $(dn||(dn=i(['<nrkno-player-volume\n      class="-volume nrkno-player-controls__mute absolute"\n      simple\n    ></nrkno-player-volume>'])))}visibleControllerItems(){if(this.activeDialog)return{disabled:[],hidden:["Scrubber","Live"]}}}window.customElements.get("nrkno-player")||window.customElements.define("nrkno-player",wn);export{i as $,B as A,gt as B,wt as C,Wt as D,Sr as E,zt as F,Ft as G,p as H,v as I,a as J,pn as K,Nt as L,Hi as M,bn as N,cn as O,U as P,ee as Q,ye as R,ft as S,n as T,vi as U,J as V,Et as W,$ as X,zr as Y,Ce as Z,t as _,ir as a,Ge as a0,ke as a1,vt as a2,pt as a3,Ue as a4,Ve as a5,He as a6,je as a7,Le as a8,Ie as a9,Ae as aa,xe as ab,De as ac,Be as ad,Me as ae,Ne as af,ze as ag,br as ah,Fe as ai,Te as aj,Oe as ak,yn as al,lr as am,En as an,Bi as b,We as c,X as d,sr as e,m as f,mt as g,Ii as h,Gi as i,jt as j,Rt as k,St as l,yt as m,Ct as n,or as o,rr as p,Ui as q,kt as r,Ut as s,d as t,l as u,xt as v,u as w,o as x,Pt as y,Gt as z};
