(()=>{var t={5186:function(t,i){"use strict";var e=this&&this.T||function(t){var i="function"==typeof Symbol&&Symbol.iterator,e=i&&t[i],s=0;if(e)return e.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&s>=t.length&&(t=void 0),{value:t&&t[s++],done:!t}}};throw new TypeError(i?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(i,"B",{value:!0});var s=function(){function t(){}return t.prototype.clone=function(){var t=this,i=new this.constructor;return Object.keys(this).forEach((function(e){var s=t.deepClone(t[e]);void 0!==s&&(i[e]=s)})),i},t.prototype.deepClone=function(t){var i,s,n=typeof t;if("number"===n||"string"===n||"boolean"===n)return t;if(null!==t&&"object"===n){if("function"==typeof t.clone)return t.clone();if(t instanceof Date)return new Date(t.getTime());if(void 0!==t[Symbol.iterator]){var r=[];try{for(var h=e(t),o=h.next();!o.done;o=h.next()){var a=o.value;r.push(this.deepClone(a))}}catch(t){i={error:t}}finally{try{o&&!o.done&&(s=h.return)&&s.call(h)}finally{if(i)throw i.error}}return t instanceof Array?r:new t.constructor(r)}var c={};for(var l in t)t.hasOwnProperty(l)&&(c[l]=this.deepClone(t[l]));return c}},t}();i.Cloneable=s},7061:function(t,i,e){"use strict";var s,n=this&&this.R||(s=function(t,i){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var e in i)i.hasOwnProperty(e)&&(t[e]=i[e])})(t,i)},function(t,i){function e(){this.constructor=t}s(t,i),t.prototype=null===i?Object.create(i):(e.prototype=i.prototype,new e)}),r=this&&this.U||function(t,i,e,s){return new(e||(e=Promise))((function(n,r){function h(t){try{a(s.next(t))}catch(t){r(t)}}function o(t){try{a(s.throw(t))}catch(t){r(t)}}function a(t){var i;t.done?n(t.value):(i=t.value,i instanceof e?i:new e((function(t){t(i)}))).then(h,o)}a((s=s.apply(t,i||[])).next())}))},h=this&&this.W||function(t,i){var e,s,n,r,h={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return r={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function o(r){return function(o){return function(r){if(e)throw new TypeError("Generator is already executing.");for(;h;)try{if(e=1,s&&(n=2&r[0]?s.return:r[0]?s.throw||((n=s.return)&&n.call(s),0):s.next)&&!(n=n.call(s,r[1])).done)return n;switch(s=0,n&&(r=[2&r[0],n.value]),r[0]){case 0:case 1:n=r;break;case 4:return h.label++,{value:r[1],done:!1};case 5:h.label++,s=r[1],r=[0];continue;case 7:r=h.ops.pop(),h.trys.pop();continue;default:if(!(n=(n=h.trys).length>0&&n[n.length-1])&&(6===r[0]||2===r[0])){h=0;continue}if(3===r[0]&&(!n||r[1]>n[0]&&r[1]<n[3])){h.label=r[1];break}if(6===r[0]&&h.label<n[1]){h.label=n[1],n=r;break}if(n&&h.label<n[2]){h.label=n[2],h.ops.push(r);break}n[2]&&h.ops.pop(),h.trys.pop();continue}r=i.call(t,h)}catch(t){r=[6,t],s=0}finally{e=n=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,o])}}};Object.defineProperty(i,"B",{value:!0});var o=e(5186),a=e(5458),c=e(6056),l=e(250),u=function(t){function i(e){var s=t.call(this)||this;s.isReady_=!1,s.isLatest=!1;var n=i.baseUrl;if(s.lang_=i.DEFAULT_LANGUAGE,s.isVendorList(e))s.populate(e),s.readyPromise=Promise.resolve();else{if(!n)throw new a.GVLError("must specify GVL.baseUrl before loading GVL json");if(e>0){var r=e;i.CACHE.has(r)?(s.populate(i.CACHE.get(r)),s.readyPromise=Promise.resolve()):(n+=i.versionedFilename.replace("[VERSION]",r+""),s.readyPromise=s.fetchJson(n))}else i.CACHE.has(i.LATEST_CACHE_KEY)?(s.populate(i.CACHE.get(i.LATEST_CACHE_KEY)),s.readyPromise=Promise.resolve()):(s.isLatest=!0,s.readyPromise=s.fetchJson(n+i.latestFilename))}return s}return n(i,t),Object.defineProperty(i,"baseUrl",{get:function(){return this.baseUrl_},set:function(t){if(/^https?:\/\/vendorlist\.consensu\.org\//.test(t))throw new a.GVLError("Invalid baseUrl!  You may not pull directly from vendorlist.consensu.org and must provide your own cache");t.length>0&&"/"!==t[t.length-1]&&(t+="/"),this.baseUrl_=t},enumerable:!0,configurable:!0}),i.emptyLanguageCache=function(t){var e=!1;return void 0===t&&i.LANGUAGE_CACHE.size>0?(i.LANGUAGE_CACHE=new Map,e=!0):"string"==typeof t&&this.consentLanguages.has(t.toUpperCase())&&(i.LANGUAGE_CACHE.delete(t.toUpperCase()),e=!0),e},i.emptyCache=function(t){var e=!1;return Number.isInteger(t)&&t>=0?(i.CACHE.delete(t),e=!0):void 0===t&&(i.CACHE=new Map,e=!0),e},i.prototype.cacheLanguage=function(){i.LANGUAGE_CACHE.has(this.lang_)||i.LANGUAGE_CACHE.set(this.lang_,{purposes:this.purposes,specialPurposes:this.specialPurposes,features:this.features,specialFeatures:this.specialFeatures,stacks:this.stacks})},i.prototype.fetchJson=function(t){return r(this,void 0,void 0,(function(){var i,e;return h(this,(function(s){switch(s.label){case 0:return s.trys.push([0,2,,3]),i=this.populate,[4,c.Json.fetch(t)];case 1:return i.apply(this,[s.sent()]),[3,3];case 2:throw e=s.sent(),new a.GVLError(e.message);case 3:return[2]}}))}))},i.prototype.getJson=function(){return JSON.parse(JSON.stringify({gvlSpecificationVersion:this.gvlSpecificationVersion,vendorListVersion:this.vendorListVersion,tcfPolicyVersion:this.tcfPolicyVersion,lastUpdated:this.lastUpdated,purposes:this.purposes,specialPurposes:this.specialPurposes,features:this.features,specialFeatures:this.specialFeatures,stacks:this.stacks,vendors:this.fullVendorList}))},i.prototype.changeLanguage=function(t){return r(this,void 0,void 0,(function(){var e,s,n,r,o;return h(this,(function(h){switch(h.label){case 0:if(e=t.toUpperCase(),!i.consentLanguages.has(e))return[3,6];if(e===this.lang_)return[3,5];if(this.lang_=e,!i.LANGUAGE_CACHE.has(e))return[3,1];for(n in s=i.LANGUAGE_CACHE.get(e))s.hasOwnProperty(n)&&(this[n]=s[n]);return[3,5];case 1:r=i.baseUrl+i.languageFilename.replace("[LANG]",t),h.label=2;case 2:return h.trys.push([2,4,,5]),[4,this.fetchJson(r)];case 3:return h.sent(),this.cacheLanguage(),[3,5];case 4:throw o=h.sent(),new a.GVLError("unable to load language: "+o.message);case 5:return[3,7];case 6:throw new a.GVLError("unsupported language "+t);case 7:return[2]}}))}))},Object.defineProperty(i.prototype,"language",{get:function(){return this.lang_},enumerable:!0,configurable:!0}),i.prototype.isVendorList=function(t){return void 0!==t&&void 0!==t.vendors},i.prototype.populate=function(t){this.purposes=t.purposes,this.specialPurposes=t.specialPurposes,this.features=t.features,this.specialFeatures=t.specialFeatures,this.stacks=t.stacks,this.isVendorList(t)&&(this.gvlSpecificationVersion=t.gvlSpecificationVersion,this.tcfPolicyVersion=t.tcfPolicyVersion,this.vendorListVersion=t.vendorListVersion,this.lastUpdated=t.lastUpdated,"string"==typeof this.lastUpdated&&(this.lastUpdated=new Date(this.lastUpdated)),this.vendors_=t.vendors,this.fullVendorList=t.vendors,this.mapVendors(),this.isReady_=!0,this.isLatest&&i.CACHE.set(i.LATEST_CACHE_KEY,this.getJson()),i.CACHE.has(this.vendorListVersion)||i.CACHE.set(this.vendorListVersion,this.getJson())),this.cacheLanguage()},i.prototype.mapVendors=function(t){var i=this;this.byPurposeVendorMap={},this.bySpecialPurposeVendorMap={},this.byFeatureVendorMap={},this.bySpecialFeatureVendorMap={},Object.keys(this.purposes).forEach((function(t){i.byPurposeVendorMap[t]={legInt:new Set,consent:new Set,flexible:new Set}})),Object.keys(this.specialPurposes).forEach((function(t){i.bySpecialPurposeVendorMap[t]=new Set})),Object.keys(this.features).forEach((function(t){i.byFeatureVendorMap[t]=new Set})),Object.keys(this.specialFeatures).forEach((function(t){i.bySpecialFeatureVendorMap[t]=new Set})),Array.isArray(t)||(t=Object.keys(this.fullVendorList).map((function(t){return+t}))),this.vendorIds=new Set(t),this.vendors_=t.reduce((function(t,e){var s=i.vendors_[""+e];return s&&void 0===s.deletedDate&&(s.purposes.forEach((function(t){i.byPurposeVendorMap[t+""].consent.add(e)})),s.specialPurposes.forEach((function(t){i.bySpecialPurposeVendorMap[t+""].add(e)})),s.legIntPurposes.forEach((function(t){i.byPurposeVendorMap[t+""].legInt.add(e)})),s.flexiblePurposes&&s.flexiblePurposes.forEach((function(t){i.byPurposeVendorMap[t+""].flexible.add(e)})),s.features.forEach((function(t){i.byFeatureVendorMap[t+""].add(e)})),s.specialFeatures.forEach((function(t){i.bySpecialFeatureVendorMap[t+""].add(e)})),t[e]=s),t}),{})},i.prototype.getFilteredVendors=function(t,i,e,s){var n=this,r=t.charAt(0).toUpperCase()+t.slice(1),h={};return("purpose"===t&&e?this["by"+r+"VendorMap"][i+""][e]:this["by"+(s?"Special":"")+r+"VendorMap"][i+""]).forEach((function(t){h[t+""]=n.vendors[t+""]})),h},i.prototype.getVendorsWithConsentPurpose=function(t){return this.getFilteredVendors("purpose",t,"consent")},i.prototype.getVendorsWithLegIntPurpose=function(t){return this.getFilteredVendors("purpose",t,"legInt")},i.prototype.getVendorsWithFlexiblePurpose=function(t){return this.getFilteredVendors("purpose",t,"flexible")},i.prototype.getVendorsWithSpecialPurpose=function(t){return this.getFilteredVendors("purpose",t,void 0,!0)},i.prototype.getVendorsWithFeature=function(t){return this.getFilteredVendors("feature",t)},i.prototype.getVendorsWithSpecialFeature=function(t){return this.getFilteredVendors("feature",t,void 0,!0)},Object.defineProperty(i.prototype,"vendors",{get:function(){return this.vendors_},enumerable:!0,configurable:!0}),i.prototype.narrowVendorsTo=function(t){this.mapVendors(t)},Object.defineProperty(i.prototype,"isReady",{get:function(){return this.isReady_},enumerable:!0,configurable:!0}),i.prototype.clone=function(){var t=new i(this.getJson());return this.lang_!==i.DEFAULT_LANGUAGE&&t.changeLanguage(this.lang_),t},i.isInstanceOf=function(t){return"object"==typeof t&&"function"==typeof t.narrowVendorsTo},i.LANGUAGE_CACHE=new Map,i.CACHE=new Map,i.LATEST_CACHE_KEY=0,i.DEFAULT_LANGUAGE="EN",i.consentLanguages=new l.ConsentLanguages,i.latestFilename="vendor-list.json",i.versionedFilename="archives/vendor-list-v[VERSION].json",i.languageFilename="purposes-[LANG].json",i}(o.Cloneable);i.GVL=u},6056:(t,i)=>{"use strict";Object.defineProperty(i,"B",{value:!0});var e=function(){function t(){}return t.absCall=function(t,i,e,s){return new Promise((function(n,r){var h=new XMLHttpRequest;h.withCredentials=e,h.addEventListener("load",(function(){if(h.readyState==XMLHttpRequest.DONE)if(h.status>=200&&h.status<300){var t=h.response;if("string"==typeof t)try{t=JSON.parse(t)}catch(t){}n(t)}else r(new Error("HTTP Status: "+h.status+" response type: "+h.responseType))})),h.addEventListener("error",(function(){r(new Error("error"))})),h.addEventListener("abort",(function(){r(new Error("aborted"))})),null===i?h.open("GET",t,!0):h.open("POST",t,!0),h.responseType="json",h.timeout=s,h.ontimeout=function(){r(new Error("Timeout "+s+"ms "+t))},h.send(i)}))},t.post=function(t,i,e,s){return void 0===e&&(e=!1),void 0===s&&(s=0),this.absCall(t,JSON.stringify(i),e,s)},t.fetch=function(t,i,e){return void 0===i&&(i=!1),void 0===e&&(e=0),this.absCall(t,null,i,e)},t}();i.Json=e},6382:function(t,i,e){"use strict";var s,n=this&&this.R||(s=function(t,i){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var e in i)i.hasOwnProperty(e)&&(t[e]=i[e])})(t,i)},function(t,i){function e(){this.constructor=t}s(t,i),t.prototype=null===i?Object.create(i):(e.prototype=i.prototype,new e)});Object.defineProperty(i,"B",{value:!0});var r=e(5186),h=e(5458),o=e(7061),a=e(250),c=function(t){function i(i){var e=t.call(this)||this;return e.isServiceSpecific_=!1,e.supportOOB_=!0,e.useNonStandardStacks_=!1,e.purposeOneTreatment_=!1,e.publisherCountryCode_="AA",e.version_=2,e.consentScreen_=0,e.policyVersion_=2,e.consentLanguage_="EN",e.cmpId_=0,e.cmpVersion_=0,e.vendorListVersion_=0,e.numCustomPurposes_=0,e.specialFeatureOptins=new a.Vector,e.purposeConsents=new a.Vector,e.purposeLegitimateInterests=new a.Vector,e.publisherConsents=new a.Vector,e.publisherLegitimateInterests=new a.Vector,e.publisherCustomConsents=new a.Vector,e.publisherCustomLegitimateInterests=new a.Vector,e.vendorConsents=new a.Vector,e.vendorLegitimateInterests=new a.Vector,e.vendorsDisclosed=new a.Vector,e.vendorsAllowed=new a.Vector,e.publisherRestrictions=new a.PurposeRestrictionVector,i&&(e.gvl=i),e.created=new Date,e.updated(),e}return n(i,t),Object.defineProperty(i.prototype,"gvl",{get:function(){return this.gvl_},set:function(t){o.GVL.isInstanceOf(t)||(t=new o.GVL(t)),this.gvl_=t,this.publisherRestrictions.gvl=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"cmpId",{get:function(){return this.cmpId_},set:function(t){if(!(Number.isInteger(+t)&&t>1))throw new h.TCModelError("cmpId",t);this.cmpId_=+t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"cmpVersion",{get:function(){return this.cmpVersion_},set:function(t){if(!(Number.isInteger(+t)&&t>-1))throw new h.TCModelError("cmpVersion",t);this.cmpVersion_=+t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"consentScreen",{get:function(){return this.consentScreen_},set:function(t){if(!(Number.isInteger(+t)&&t>-1))throw new h.TCModelError("consentScreen",t);this.consentScreen_=+t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"consentLanguage",{get:function(){return this.consentLanguage_},set:function(t){this.consentLanguage_=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"publisherCountryCode",{get:function(){return this.publisherCountryCode_},set:function(t){if(!/^([A-z]){2}$/.test(t))throw new h.TCModelError("publisherCountryCode",t);this.publisherCountryCode_=t.toUpperCase()},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"vendorListVersion",{get:function(){return this.gvl?this.gvl.vendorListVersion:this.vendorListVersion_},set:function(t){if((t=+t>>0)<0)throw new h.TCModelError("vendorListVersion",t);this.vendorListVersion_=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"policyVersion",{get:function(){return this.gvl?this.gvl.tcfPolicyVersion:this.policyVersion_},set:function(t){if(this.policyVersion_=parseInt(t,10),this.policyVersion_<0)throw new h.TCModelError("policyVersion",t)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"version",{get:function(){return this.version_},set:function(t){this.version_=parseInt(t,10)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"isServiceSpecific",{get:function(){return this.isServiceSpecific_},set:function(t){this.isServiceSpecific_=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"useNonStandardStacks",{get:function(){return this.useNonStandardStacks_},set:function(t){this.useNonStandardStacks_=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"supportOOB",{get:function(){return this.supportOOB_},set:function(t){this.supportOOB_=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"purposeOneTreatment",{get:function(){return this.purposeOneTreatment_},set:function(t){this.purposeOneTreatment_=t},enumerable:!0,configurable:!0}),i.prototype.setAllVendorConsents=function(){this.vendorConsents.set(this.gvl.vendors)},i.prototype.unsetAllVendorConsents=function(){this.vendorConsents.empty()},i.prototype.setAllVendorsDisclosed=function(){this.vendorsDisclosed.set(this.gvl.vendors)},i.prototype.unsetAllVendorsDisclosed=function(){this.vendorsDisclosed.empty()},i.prototype.setAllVendorsAllowed=function(){this.vendorsAllowed.set(this.gvl.vendors)},i.prototype.unsetAllVendorsAllowed=function(){this.vendorsAllowed.empty()},i.prototype.setAllVendorLegitimateInterests=function(){this.vendorLegitimateInterests.set(this.gvl.vendors)},i.prototype.unsetAllVendorLegitimateInterests=function(){this.vendorLegitimateInterests.empty()},i.prototype.setAllPurposeConsents=function(){this.purposeConsents.set(this.gvl.purposes)},i.prototype.unsetAllPurposeConsents=function(){this.purposeConsents.empty()},i.prototype.setAllPurposeLegitimateInterests=function(){this.purposeLegitimateInterests.set(this.gvl.purposes)},i.prototype.unsetAllPurposeLegitimateInterests=function(){this.purposeLegitimateInterests.empty()},i.prototype.setAllSpecialFeatureOptins=function(){this.specialFeatureOptins.set(this.gvl.specialFeatures)},i.prototype.unsetAllSpecialFeatureOptins=function(){this.specialFeatureOptins.empty()},i.prototype.setAll=function(){this.setAllVendorConsents(),this.setAllPurposeLegitimateInterests(),this.setAllSpecialFeatureOptins(),this.setAllPurposeConsents(),this.setAllVendorLegitimateInterests()},i.prototype.unsetAll=function(){this.unsetAllVendorConsents(),this.unsetAllPurposeLegitimateInterests(),this.unsetAllSpecialFeatureOptins(),this.unsetAllPurposeConsents(),this.unsetAllVendorLegitimateInterests()},Object.defineProperty(i.prototype,"numCustomPurposes",{get:function(){var t=this.numCustomPurposes_;if("object"==typeof this.customPurposes){var i=Object.keys(this.customPurposes).sort((function(t,i){return+t-+i}));t=parseInt(i.pop(),10)}return t},set:function(t){if(this.numCustomPurposes_=parseInt(t,10),this.numCustomPurposes_<0)throw new h.TCModelError("numCustomPurposes",t)},enumerable:!0,configurable:!0}),i.prototype.updated=function(){this.lastUpdated=new Date},i.consentLanguages=o.GVL.consentLanguages,i}(r.Cloneable);i.TCModel=c},2381:(t,i,e)=>{"use strict";var s=e(7170),n=e(250),r=e(2082),h=e(6382),o=function(){function t(){}return t.encode=function(t,i){var e,n,r="";return t=s.SemanticPreEncoder.process(t,i),(n=Array.isArray(null===(e=i)||void 0===e?void 0:e.segments)?i.segments:new s.SegmentSequence(t,i)[""+t.version]).forEach((function(i,e){var h="";e<n.length-1&&(h="."),r+=s.SegmentEncoder.encode(t,i)+h})),r},t.decode=function(t,i){var e=t.split("."),o=e.length;i||(i=new h.TCModel);for(var a=0;a<o;a++){var c=e[a],l=s.Base64Url.decode(c.charAt(0)).substr(0,s.BitLength.segmentType),u=n.SegmentIDs.ID_TO_KEY[r.IntEncoder.decode(l,s.BitLength.segmentType).toString()];s.SegmentEncoder.decode(c,i,u)}return i},t}();i.E=o},4479:(t,i,e)=>{"use strict";Object.defineProperty(i,"B",{value:!0});var s=e(5458),n=function(){function t(){}return t.encode=function(t){if(!/^[0-1]+$/.test(t))throw new s.EncodingError("Invalid bitField");var i=t.length%this.LCM;t+=i?"0".repeat(this.LCM-i):"";for(var e="",n=0;n<t.length;n+=this.BASIS)e+=this.DICT[parseInt(t.substr(n,this.BASIS),2)];return e},t.decode=function(t){if(!/^[A-Za-z0-9\-_]+$/.test(t))throw new s.DecodingError("Invalidly encoded Base64URL string");for(var i="",e=0;e<t.length;e++){var n=this.REVERSE_DICT.get(t[e]).toString(2);i+="0".repeat(this.BASIS-n.length)+n}return i},t.DICT="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",t.REVERSE_DICT=new Map([["A",0],["B",1],["C",2],["D",3],["E",4],["F",5],["G",6],["H",7],["I",8],["J",9],["K",10],["L",11],["M",12],["N",13],["O",14],["P",15],["Q",16],["R",17],["S",18],["T",19],["U",20],["V",21],["W",22],["X",23],["Y",24],["Z",25],["a",26],["b",27],["c",28],["d",29],["e",30],["f",31],["g",32],["h",33],["i",34],["j",35],["k",36],["l",37],["m",38],["n",39],["o",40],["p",41],["q",42],["r",43],["s",44],["t",45],["u",46],["v",47],["w",48],["x",49],["y",50],["z",51],["0",52],["1",53],["2",54],["3",55],["4",56],["5",57],["6",58],["7",59],["8",60],["9",61],["-",62],["_",63]]),t.BASIS=6,t.LCM=24,t}();i.Base64Url=n},2219:(t,i,e)=>{"use strict";Object.defineProperty(i,"B",{value:!0});var s=e(250),n=function(){function t(){}var i,e,n,r,h,o,a,c,l,u,d,p,f,m,g,v,y,b;return i=s.Fields.cmpId,e=s.Fields.cmpVersion,n=s.Fields.consentLanguage,r=s.Fields.consentScreen,h=s.Fields.created,o=s.Fields.isServiceSpecific,a=s.Fields.lastUpdated,c=s.Fields.policyVersion,l=s.Fields.publisherCountryCode,u=s.Fields.publisherLegitimateInterests,d=s.Fields.publisherConsents,p=s.Fields.purposeConsents,f=s.Fields.purposeLegitimateInterests,m=s.Fields.purposeOneTreatment,g=s.Fields.specialFeatureOptins,v=s.Fields.useNonStandardStacks,y=s.Fields.vendorListVersion,b=s.Fields.version,t[i]=12,t[e]=12,t[n]=12,t[r]=6,t[h]=36,t[o]=1,t[a]=36,t[c]=6,t[l]=12,t[u]=24,t[d]=24,t[p]=24,t[f]=24,t[m]=1,t[g]=12,t[v]=1,t[y]=12,t[b]=6,t.anyBoolean=1,t.encodingType=1,t.maxId=16,t.numCustomPurposes=6,t.numEntries=12,t.numRestrictions=12,t.purposeId=6,t.restrictionType=2,t.segmentType=3,t.singleOrRange=1,t.vendorId=16,t}();i.BitLength=n},3858:(t,i,e)=>{"use strict";Object.defineProperty(i,"B",{value:!0});var s=e(4479),n=e(2219),r=e(9836),h=e(8780),o=e(5458),a=e(3126),c=e(250),l=function(){function t(){}return t.encode=function(t,i){var e,h=this;try{e=this.fieldSequence[""+t.version][i]}catch(e){throw new o.EncodingError("Unable to encode version: "+t.version+", segment: "+i)}var l="";return i!==c.Segment.CORE&&(l=r.IntEncoder.encode(c.SegmentIDs.KEY_TO_ID[i],n.BitLength.segmentType)),e.forEach((function(e){var s=t[e],c=r.FieldEncoderMap[e],u=n.BitLength[e];void 0===u&&h.isPublisherCustom(e)&&(u=+t[a.Fields.numCustomPurposes]);try{l+=c.encode(s,u)}catch(t){throw new o.EncodingError("Error encoding "+i+"->"+e+": "+t.message)}})),s.Base64Url.encode(l)},t.decode=function(t,i,e){var h=this,l=s.Base64Url.decode(t),u=0;return e===c.Segment.CORE&&(i.version=r.IntEncoder.decode(l.substr(u,n.BitLength[a.Fields.version]),n.BitLength[a.Fields.version])),e!==c.Segment.CORE&&(u+=n.BitLength.segmentType),this.fieldSequence[""+i.version][e].forEach((function(t){var e=r.FieldEncoderMap[t],s=n.BitLength[t];if(void 0===s&&h.isPublisherCustom(t)&&(s=+i[a.Fields.numCustomPurposes]),0!==s){var c=l.substr(u,s);if(e===r.VendorVectorEncoder?i[t]=e.decode(c,i.version):i[t]=e.decode(c,s),Number.isInteger(s))u+=s;else{if(!Number.isInteger(i[t].bitLength))throw new o.DecodingError(t);u+=i[t].bitLength}}})),i},t.isPublisherCustom=function(t){return 0===t.indexOf("publisherCustom")},t.fieldSequence=new h.FieldSequence,t}();i.SegmentEncoder=l},818:(t,i,e)=>{"use strict";Object.defineProperty(i,"B",{value:!0});var s=e(5458),n=e(250),r=function(){function t(){}return t.process=function(t,i){var e,n,r=t.gvl;if(!r)throw new s.EncodingError("Unable to encode TCModel without a GVL");if(!r.isReady)throw new s.EncodingError("Unable to encode TCModel tcModel.gvl.readyPromise is not resolved");(t=t.clone()).consentLanguage=r.language.toUpperCase(),(null===(e=i)||void 0===e?void 0:e.version)>0&&(null===(n=i)||void 0===n?void 0:n.version)<=this.processor.length?t.version=i.version:t.version=this.processor.length;var h=t.version-1;if(!this.processor[h])throw new s.EncodingError("Invalid version: "+t.version);return this.processor[h](t,r)},t.processor=[function(t){return t},function(t,i){t.publisherRestrictions.gvl=i,t.purposeLegitimateInterests.unset(1);var e=new Map;return e.set("legIntPurposes",t.vendorLegitimateInterests),e.set("purposes",t.vendorConsents),e.forEach((function(e,s){e.forEach((function(r,h){if(r){var o=i.vendors[h];if(!o||o.deletedDate)e.unset(h);else if(0===o[s].length)if("legIntPurposes"===s&&0===o.purposes.length&&0===o.legIntPurposes.length&&o.specialPurposes.length>0);else if(t.isServiceSpecific)if(0===o.flexiblePurposes.length)e.unset(h);else{for(var a=t.publisherRestrictions.getRestrictions(h),c=!1,l=0,u=a.length;l<u&&!c;l++)c=a[l].restrictionType===n.RestrictionType.REQUIRE_CONSENT&&"purposes"===s||a[l].restrictionType===n.RestrictionType.REQUIRE_LI&&"legIntPurposes"===s;c||e.unset(h)}else e.unset(h)}}))})),t.vendorsDisclosed.set(i.vendors),t}],t}();i.SemanticPreEncoder=r},632:(t,i)=>{"use strict";Object.defineProperty(i,"B",{value:!0});var e=function(){function t(){}return t.encode=function(t){return+t+""},t.decode=function(t){return"1"===t},t}();i.BooleanEncoder=e},3101:(t,i,e)=>{"use strict";Object.defineProperty(i,"B",{value:!0});var s=e(2082),n=e(5458),r=function(){function t(){}return t.encode=function(t,i){return s.IntEncoder.encode(Math.round(t.getTime()/100),i)},t.decode=function(t,i){if(i!==t.length)throw new n.DecodingError("invalid bit length");var e=new Date;return e.setTime(100*s.IntEncoder.decode(t,i)),e},t}();i.DateEncoder=r},286:(t,i,e)=>{"use strict";Object.defineProperty(i,"B",{value:!0});var s=e(250),n=e(632),r=e(3101),h=e(8937),o=e(2082),a=e(835),c=e(5889),l=e(3283),u=function(){function t(){}var i,e,u,d,p,f,m,g,v,y,b,x,w,_,S,P,A,I,k,C,T,M,E,B,O,L;return i=s.Fields.version,e=s.Fields.created,u=s.Fields.lastUpdated,d=s.Fields.cmpId,p=s.Fields.cmpVersion,f=s.Fields.consentScreen,m=s.Fields.consentLanguage,g=s.Fields.vendorListVersion,v=s.Fields.policyVersion,y=s.Fields.isServiceSpecific,b=s.Fields.useNonStandardStacks,x=s.Fields.specialFeatureOptins,w=s.Fields.purposeConsents,_=s.Fields.purposeLegitimateInterests,S=s.Fields.purposeOneTreatment,P=s.Fields.publisherCountryCode,A=s.Fields.vendorConsents,I=s.Fields.vendorLegitimateInterests,k=s.Fields.publisherRestrictions,C=s.Fields.vendorsDisclosed,T=s.Fields.vendorsAllowed,M=s.Fields.publisherConsents,E=s.Fields.publisherLegitimateInterests,B=s.Fields.numCustomPurposes,O=s.Fields.publisherCustomConsents,L=s.Fields.publisherCustomLegitimateInterests,t[i]=o.IntEncoder,t[e]=r.DateEncoder,t[u]=r.DateEncoder,t[d]=o.IntEncoder,t[p]=o.IntEncoder,t[f]=o.IntEncoder,t[m]=a.LangEncoder,t[g]=o.IntEncoder,t[v]=o.IntEncoder,t[y]=n.BooleanEncoder,t[b]=n.BooleanEncoder,t[x]=h.FixedVectorEncoder,t[w]=h.FixedVectorEncoder,t[_]=h.FixedVectorEncoder,t[S]=n.BooleanEncoder,t[P]=a.LangEncoder,t[A]=l.VendorVectorEncoder,t[I]=l.VendorVectorEncoder,t[k]=c.PurposeRestrictionVectorEncoder,t.segmentType=o.IntEncoder,t[C]=l.VendorVectorEncoder,t[T]=l.VendorVectorEncoder,t[M]=h.FixedVectorEncoder,t[E]=h.FixedVectorEncoder,t[B]=o.IntEncoder,t[O]=h.FixedVectorEncoder,t[L]=h.FixedVectorEncoder,t}();i.FieldEncoderMap=u},8937:(t,i,e)=>{"use strict";Object.defineProperty(i,"B",{value:!0});var s=e(632),n=e(5458),r=e(250),h=function(){function t(){}return t.encode=function(t,i){for(var e="",n=1;n<=i;n++)e+=s.BooleanEncoder.encode(t.has(n));return e},t.decode=function(t,i){if(t.length!==i)throw new n.DecodingError("bitfield encoding length mismatch");for(var e=new r.Vector,h=1;h<=i;h++)s.BooleanEncoder.decode(t[h-1])&&e.set(h);return e.bitLength=t.length,e},t}();i.FixedVectorEncoder=h},2082:(t,i,e)=>{"use strict";Object.defineProperty(i,"B",{value:!0});var s=e(5458),n=function(){function t(){}return t.encode=function(t,i){var e;if("string"==typeof t&&(t=parseInt(t,10)),(e=t.toString(2)).length>i||t<0)throw new s.EncodingError(t+" too large to encode into "+i);return e.length<i&&(e="0".repeat(i-e.length)+e),e},t.decode=function(t,i){if(i!==t.length)throw new s.DecodingError("invalid bit length");return parseInt(t,2)},t}();i.IntEncoder=n},835:(t,i,e)=>{"use strict";Object.defineProperty(i,"B",{value:!0});var s=e(2082),n=e(5458),r=function(){function t(){}return t.encode=function(t,i){var e=(t=t.toUpperCase()).charCodeAt(0)-65,r=t.charCodeAt(1)-65;if(e<0||e>25||r<0||r>25)throw new n.EncodingError("invalid language code: "+t);if(i%2==1)throw new n.EncodingError("numBits must be even, "+i+" is not valid");return i/=2,s.IntEncoder.encode(e,i)+s.IntEncoder.encode(r,i)},t.decode=function(t,i){if(i!==t.length||t.length%2)throw new n.DecodingError("invalid bit length for language");var e=t.length/2,r=s.IntEncoder.decode(t.slice(0,e),e)+65,h=s.IntEncoder.decode(t.slice(e),e)+65;return String.fromCharCode(r)+String.fromCharCode(h)},t}();i.LangEncoder=r},5889:(t,i,e)=>{"use strict";Object.defineProperty(i,"B",{value:!0});var s=e(2219),n=e(632),r=e(5458),h=e(2082),o=e(250),a=function(){function t(){}return t.encode=function(t){var i=h.IntEncoder.encode(t.numRestrictions,s.BitLength.numRestrictions);return t.isEmpty()||t.getRestrictions().forEach((function(e){i+=h.IntEncoder.encode(e.purposeId,s.BitLength.purposeId),i+=h.IntEncoder.encode(e.restrictionType,s.BitLength.restrictionType);for(var r=t.getVendors(e),o=r.length,a=0,c=0,l="",u=function(i){var e=r[i];0===c&&(a++,c=e);var u=r[o-1],d=t.gvl.vendorIds;if(i===o-1||r[i+1]>function(t){for(;++t<=u&&!d.has(t););return t}(e)){var p=!(e===c);l+=n.BooleanEncoder.encode(p),l+=h.IntEncoder.encode(c,s.BitLength.vendorId),p&&(l+=h.IntEncoder.encode(e,s.BitLength.vendorId)),c=0}},d=0;d<o;d++)u(d);i+=h.IntEncoder.encode(a,s.BitLength.numEntries),i+=l})),i},t.decode=function(t){var i=0,e=new o.PurposeRestrictionVector,a=h.IntEncoder.decode(t.substr(i,s.BitLength.numRestrictions),s.BitLength.numRestrictions);i+=s.BitLength.numRestrictions;for(var c=0;c<a;c++){var l=h.IntEncoder.decode(t.substr(i,s.BitLength.purposeId),s.BitLength.purposeId);i+=s.BitLength.purposeId;var u=h.IntEncoder.decode(t.substr(i,s.BitLength.restrictionType),s.BitLength.restrictionType);i+=s.BitLength.restrictionType;var d=new o.PurposeRestriction(l,u),p=h.IntEncoder.decode(t.substr(i,s.BitLength.numEntries),s.BitLength.numEntries);i+=s.BitLength.numEntries;for(var f=0;f<p;f++){var m=n.BooleanEncoder.decode(t.substr(i,s.BitLength.anyBoolean));i+=s.BitLength.anyBoolean;var g=h.IntEncoder.decode(t.substr(i,s.BitLength.vendorId),s.BitLength.vendorId);if(i+=s.BitLength.vendorId,m){var v=h.IntEncoder.decode(t.substr(i,s.BitLength.vendorId),s.BitLength.vendorId);if(i+=s.BitLength.vendorId,v<g)throw new r.DecodingError("Invalid RangeEntry: endVendorId "+v+" is less than "+g);for(var y=g;y<=v;y++)e.add(y,d)}else e.add(g,d)}}return e.bitLength=i,e},t}();i.PurposeRestrictionVectorEncoder=a},1938:(t,i)=>{"use strict";var e;Object.defineProperty(i,"B",{value:!0}),(e=i.VectorEncodingType||(i.VectorEncodingType={}))[e.FIELD=0]="FIELD",e[e.RANGE=1]="RANGE"},3283:(t,i,e)=>{"use strict";Object.defineProperty(i,"B",{value:!0});var s=e(250),n=e(7170),r=e(2082),h=e(632),o=e(8937),a=e(1938),c=e(5458),l=function(){function t(){}return t.encode=function(t){var i,e=[],s=[],o=r.IntEncoder.encode(t.maxId,n.BitLength.maxId),c="",l=n.BitLength.maxId+n.BitLength.encodingType,u=l+t.maxId,d=2*n.BitLength.vendorId+n.BitLength.singleOrRange+n.BitLength.numEntries,p=l+n.BitLength.numEntries;return t.forEach((function(r,o){c+=h.BooleanEncoder.encode(r),(i=t.maxId>d&&p<u)&&r&&(t.has(o+1)?0===s.length&&(s.push(o),p+=n.BitLength.singleOrRange,p+=n.BitLength.vendorId):(s.push(o),p+=n.BitLength.vendorId,e.push(s),s=[]))})),i?(o+=a.VectorEncodingType.RANGE+"",o+=this.buildRangeEncoding(e)):(o+=a.VectorEncodingType.FIELD+"",o+=c),o},t.decode=function(t,i){var e,l=0,u=r.IntEncoder.decode(t.substr(l,n.BitLength.maxId),n.BitLength.maxId);l+=n.BitLength.maxId;var d=r.IntEncoder.decode(t.charAt(l),n.BitLength.encodingType);if(l+=n.BitLength.encodingType,d===a.VectorEncodingType.RANGE){if(e=new s.Vector,1===i){if("1"===t.substr(l,1))throw new c.DecodingError("Unable to decode default consent=1");l++}var p=r.IntEncoder.decode(t.substr(l,n.BitLength.numEntries),n.BitLength.numEntries);l+=n.BitLength.numEntries;for(var f=0;f<p;f++){var m=h.BooleanEncoder.decode(t.charAt(l));l+=n.BitLength.singleOrRange;var g=r.IntEncoder.decode(t.substr(l,n.BitLength.vendorId),n.BitLength.vendorId);if(l+=n.BitLength.vendorId,m){var v=r.IntEncoder.decode(t.substr(l,n.BitLength.vendorId),n.BitLength.vendorId);l+=n.BitLength.vendorId;for(var y=g;y<=v;y++)e.set(y)}else e.set(g)}}else{var b=t.substr(l,u);l+=u,e=o.FixedVectorEncoder.decode(b,u)}return e.bitLength=l,e},t.buildRangeEncoding=function(t){var i=t.length,e=r.IntEncoder.encode(i,n.BitLength.numEntries);return t.forEach((function(t){var i=1===t.length;e+=h.BooleanEncoder.encode(!i),e+=r.IntEncoder.encode(t[0],n.BitLength.vendorId),i||(e+=r.IntEncoder.encode(t[1],n.BitLength.vendorId))})),e},t}();i.VendorVectorEncoder=l},9836:(t,i,e)=>{"use strict";function s(t){for(var e in t)i.hasOwnProperty(e)||(i[e]=t[e])}Object.defineProperty(i,"B",{value:!0}),s(e(632)),s(e(3101)),s(e(286)),s(e(8937)),s(e(2082)),s(e(835)),s(e(5889)),s(e(1938)),s(e(3283))},7170:(t,i,e)=>{"use strict";function s(t){for(var e in t)i.hasOwnProperty(e)||(i[e]=t[e])}Object.defineProperty(i,"B",{value:!0}),s(e(4479)),s(e(2219)),s(e(3858)),s(e(818)),s(e(9836)),s(e(8780))},4014:(t,i,e)=>{"use strict";Object.defineProperty(i,"B",{value:!0});var s=e(250);i.FieldSequence=function(){var t,i;this[1]=((t={})[s.Segment.CORE]=[s.Fields.version,s.Fields.created,s.Fields.lastUpdated,s.Fields.cmpId,s.Fields.cmpVersion,s.Fields.consentScreen,s.Fields.consentLanguage,s.Fields.vendorListVersion,s.Fields.purposeConsents,s.Fields.vendorConsents],t),this[2]=((i={})[s.Segment.CORE]=[s.Fields.version,s.Fields.created,s.Fields.lastUpdated,s.Fields.cmpId,s.Fields.cmpVersion,s.Fields.consentScreen,s.Fields.consentLanguage,s.Fields.vendorListVersion,s.Fields.policyVersion,s.Fields.isServiceSpecific,s.Fields.useNonStandardStacks,s.Fields.specialFeatureOptins,s.Fields.purposeConsents,s.Fields.purposeLegitimateInterests,s.Fields.purposeOneTreatment,s.Fields.publisherCountryCode,s.Fields.vendorConsents,s.Fields.vendorLegitimateInterests,s.Fields.publisherRestrictions],i[s.Segment.PUBLISHER_TC]=[s.Fields.publisherConsents,s.Fields.publisherLegitimateInterests,s.Fields.numCustomPurposes,s.Fields.publisherCustomConsents,s.Fields.publisherCustomLegitimateInterests],i[s.Segment.VENDORS_ALLOWED]=[s.Fields.vendorsAllowed],i[s.Segment.VENDORS_DISCLOSED]=[s.Fields.vendorsDisclosed],i)}},1333:(t,i,e)=>{"use strict";Object.defineProperty(i,"B",{value:!0});var s=e(250);i.SegmentSequence=function(t,i){if(this[1]=[s.Segment.CORE],this[2]=[s.Segment.CORE],2===t.version)if(t.isServiceSpecific)this[2].push(s.Segment.PUBLISHER_TC);else{var e=!(!i||!i.isForVendors);e&&!0!==t[s.Fields.supportOOB]||this[2].push(s.Segment.VENDORS_DISCLOSED),e&&(t[s.Fields.supportOOB]&&t[s.Fields.vendorsAllowed].size>0&&this[2].push(s.Segment.VENDORS_ALLOWED),this[2].push(s.Segment.PUBLISHER_TC))}}},8780:(t,i,e)=>{"use strict";function s(t){for(var e in t)i.hasOwnProperty(e)||(i[e]=t[e])}Object.defineProperty(i,"B",{value:!0}),s(e(4014)),s(e(1333))},1265:function(t,i){"use strict";var e,s=this&&this.R||(e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var e in i)i.hasOwnProperty(e)&&(t[e]=i[e])})(t,i)},function(t,i){function s(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(s.prototype=i.prototype,new s)});Object.defineProperty(i,"B",{value:!0});var n=function(t){function i(i){var e=t.call(this,i)||this;return e.name="DecodingError",e}return s(i,t),i}(Error);i.DecodingError=n},5181:function(t,i){"use strict";var e,s=this&&this.R||(e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var e in i)i.hasOwnProperty(e)&&(t[e]=i[e])})(t,i)},function(t,i){function s(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(s.prototype=i.prototype,new s)});Object.defineProperty(i,"B",{value:!0});var n=function(t){function i(i){var e=t.call(this,i)||this;return e.name="EncodingError",e}return s(i,t),i}(Error);i.EncodingError=n},9565:function(t,i){"use strict";var e,s=this&&this.R||(e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var e in i)i.hasOwnProperty(e)&&(t[e]=i[e])})(t,i)},function(t,i){function s(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(s.prototype=i.prototype,new s)});Object.defineProperty(i,"B",{value:!0});var n=function(t){function i(i){var e=t.call(this,i)||this;return e.name="GVLError",e}return s(i,t),i}(Error);i.GVLError=n},9995:function(t,i){"use strict";var e,s=this&&this.R||(e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var e in i)i.hasOwnProperty(e)&&(t[e]=i[e])})(t,i)},function(t,i){function s(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(s.prototype=i.prototype,new s)});Object.defineProperty(i,"B",{value:!0});var n=function(t){function i(i,e,s){void 0===s&&(s="");var n=t.call(this,"invalid value "+e+" passed for "+i+" "+s)||this;return n.name="TCModelError",n}return s(i,t),i}(Error);i.TCModelError=n},5458:(t,i,e)=>{"use strict";function s(t){for(var e in t)i.hasOwnProperty(e)||(i[e]=t[e])}Object.defineProperty(i,"B",{value:!0}),s(e(1265)),s(e(5181)),s(e(9565)),s(e(9995))},5995:function(t,i,e){"use strict";var s,n=this&&this.R||(s=function(t,i){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var e in i)i.hasOwnProperty(e)&&(t[e]=i[e])})(t,i)},function(t,i){function e(){this.constructor=t}s(t,i),t.prototype=null===i?Object.create(i):(e.prototype=i.prototype,new e)});Object.defineProperty(i,"B",{value:!0});var r=function(t){function i(){var i=null!==t&&t.apply(this,arguments)||this;return i.root=null,i}return n(i,t),i.prototype.isEmpty=function(){return!this.root},i.prototype.add=function(t){var i,e={value:t,left:null,right:null};if(this.isEmpty())this.root=e;else for(i=this.root;;)if(t<i.value){if(null===i.left){i.left=e;break}i=i.left}else{if(!(t>i.value))break;if(null===i.right){i.right=e;break}i=i.right}},i.prototype.get=function(){for(var t=[],i=this.root;i;)if(i.left){for(var e=i.left;e.right&&e.right!=i;)e=e.right;e.right==i?(e.right=null,t.push(i.value),i=i.right):(e.right=i,i=i.left)}else t.push(i.value),i=i.right;return t},i.prototype.contains=function(t){for(var i=!1,e=this.root;e;){if(e.value===t){i=!0;break}t>e.value?e=e.right:t<e.value&&(e=e.left)}return i},i.prototype.min=function(t){var i;for(void 0===t&&(t=this.root);t;)t.left?t=t.left:(i=t.value,t=null);return i},i.prototype.max=function(t){var i;for(void 0===t&&(t=this.root);t;)t.right?t=t.right:(i=t.value,t=null);return i},i.prototype.remove=function(t,i){void 0===i&&(i=this.root);for(var e=null,s="left";i;)if(t<i.value)e=i,i=i.left,s="left";else if(t>i.value)e=i,i=i.right,s="right";else{if(i.left||i.right)if(i.left)if(i.right){var n=this.min(i.right);this.remove(n,i.right),i.value=n}else e?e[s]=i.left:this.root=i.left;else e?e[s]=i.right:this.root=i.right;else e?e[s]=null:this.root=null;i=null}},i}(e(5186).Cloneable);i.BinarySearchTree=r},5301:(t,i)=>{"use strict";Object.defineProperty(i,"B",{value:!0});var e=function(){function t(){}return t.prototype.has=function(i){return t.langSet.has(i)},t.prototype.forEach=function(i){t.langSet.forEach(i)},Object.defineProperty(t.prototype,"size",{get:function(){return t.langSet.size},enumerable:!0,configurable:!0}),t.langSet=new Set(["BG","CA","CS","DA","DE","EL","EN","ES","ET","FI","FR","HR","HU","IT","JA","LT","LV","MT","NL","NO","PL","PT","RO","RU","SK","SL","SV","TR","ZH"]),t}();i.ConsentLanguages=e},4243:(t,i)=>{"use strict";var e;Object.defineProperty(i,"B",{value:!0}),(e=i.DeviceDisclosureStorageAccessType||(i.DeviceDisclosureStorageAccessType={})).COOKIE="cookie",e.WEB="web",e.APP="app"},3126:(t,i)=>{"use strict";Object.defineProperty(i,"B",{value:!0});var e=function(){function t(){}return t.cmpId="cmpId",t.cmpVersion="cmpVersion",t.consentLanguage="consentLanguage",t.consentScreen="consentScreen",t.created="created",t.supportOOB="supportOOB",t.isServiceSpecific="isServiceSpecific",t.lastUpdated="lastUpdated",t.numCustomPurposes="numCustomPurposes",t.policyVersion="policyVersion",t.publisherCountryCode="publisherCountryCode",t.publisherCustomConsents="publisherCustomConsents",t.publisherCustomLegitimateInterests="publisherCustomLegitimateInterests",t.publisherLegitimateInterests="publisherLegitimateInterests",t.publisherConsents="publisherConsents",t.publisherRestrictions="publisherRestrictions",t.purposeConsents="purposeConsents",t.purposeLegitimateInterests="purposeLegitimateInterests",t.purposeOneTreatment="purposeOneTreatment",t.specialFeatureOptins="specialFeatureOptins",t.useNonStandardStacks="useNonStandardStacks",t.vendorConsents="vendorConsents",t.vendorLegitimateInterests="vendorLegitimateInterests",t.vendorListVersion="vendorListVersion",t.vendorsAllowed="vendorsAllowed",t.vendorsDisclosed="vendorsDisclosed",t.version="version",t}();i.Fields=e},4649:function(t,i,e){"use strict";var s,n=this&&this.R||(s=function(t,i){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var e in i)i.hasOwnProperty(e)&&(t[e]=i[e])})(t,i)},function(t,i){function e(){this.constructor=t}s(t,i),t.prototype=null===i?Object.create(i):(e.prototype=i.prototype,new e)});Object.defineProperty(i,"B",{value:!0});var r=e(5186),h=e(5458),o=e(2473),a=function(t){function i(i,e){var s=t.call(this)||this;return void 0!==i&&(s.purposeId=i),void 0!==e&&(s.restrictionType=e),s}return n(i,t),i.unHash=function(t){var e=t.split(this.hashSeparator),s=new i;if(2!==e.length)throw new h.TCModelError("hash",t);return s.purposeId=parseInt(e[0],10),s.restrictionType=parseInt(e[1],10),s},Object.defineProperty(i.prototype,"hash",{get:function(){if(!this.isValid())throw new Error("cannot hash invalid PurposeRestriction");return""+this.purposeId+i.hashSeparator+this.restrictionType},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"purposeId",{get:function(){return this.purposeId_},set:function(t){this.purposeId_=t},enumerable:!0,configurable:!0}),i.prototype.isValid=function(){return Number.isInteger(this.purposeId)&&this.purposeId>0&&(this.restrictionType===o.RestrictionType.NOT_ALLOWED||this.restrictionType===o.RestrictionType.REQUIRE_CONSENT||this.restrictionType===o.RestrictionType.REQUIRE_LI)},i.prototype.isSameAs=function(t){return this.purposeId===t.purposeId&&this.restrictionType===t.restrictionType},i.hashSeparator="-",i}(r.Cloneable);i.PurposeRestriction=a},7096:function(t,i,e){"use strict";var s,n=this&&this.R||(s=function(t,i){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var e in i)i.hasOwnProperty(e)&&(t[e]=i[e])})(t,i)},function(t,i){function e(){this.constructor=t}s(t,i),t.prototype=null===i?Object.create(i):(e.prototype=i.prototype,new e)}),r=this&&this.T||function(t){var i="function"==typeof Symbol&&Symbol.iterator,e=i&&t[i],s=0;if(e)return e.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&s>=t.length&&(t=void 0),{value:t&&t[s++],done:!t}}};throw new TypeError(i?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(i,"B",{value:!0});var h=e(4649),o=e(5995),a=e(2473),c=function(t){function i(){var i=null!==t&&t.apply(this,arguments)||this;return i.bitLength=0,i.map=new Map,i}return n(i,t),i.prototype.has=function(t){return this.map.has(t)},i.prototype.isOkToHave=function(t,i,e){var s,n=!0;if(null===(s=this.gvl)||void 0===s?void 0:s.vendors){var r=this.gvl.vendors[e];if(r)if(t===a.RestrictionType.NOT_ALLOWED)n=r.legIntPurposes.includes(i)||r.purposes.includes(i);else if(r.flexiblePurposes.length)switch(t){case a.RestrictionType.REQUIRE_CONSENT:n=r.flexiblePurposes.includes(i)&&r.legIntPurposes.includes(i);break;case a.RestrictionType.REQUIRE_LI:n=r.flexiblePurposes.includes(i)&&r.purposes.includes(i)}else n=!1;else n=!1}return n},i.prototype.add=function(t,i){if(this.isOkToHave(i.restrictionType,i.purposeId,t)){var e=i.hash;this.has(e)||(this.map.set(e,new o.BinarySearchTree),this.bitLength=0),this.map.get(e).add(t)}},i.prototype.restrictPurposeToLegalBasis=function(t){for(var i=this.gvl.vendorIds,e=t.hash,s=function(){var t,e,s;try{for(var n=r(i),h=n.next();!h.done;h=n.next())s=h.value}catch(i){t={error:i}}finally{try{h&&!h.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}return s}(),n=1;n<=s;n++)this.has(e)||(this.map.set(e,new o.BinarySearchTree),this.bitLength=0),this.map.get(e).add(n)},i.prototype.getVendors=function(t){var i=[];if(t){var e=t.hash;this.has(e)&&(i=this.map.get(e).get())}else{var s=new Set;this.map.forEach((function(t){t.get().forEach((function(t){s.add(t)}))})),i=Array.from(s)}return i},i.prototype.getRestrictionType=function(t,i){var e;return this.getRestrictions(t).forEach((function(t){t.purposeId===i&&(void 0===e||e>t.restrictionType)&&(e=t.restrictionType)})),e},i.prototype.vendorHasRestriction=function(t,i){for(var e=!1,s=this.getRestrictions(t),n=0;n<s.length&&!e;n++)e=i.isSameAs(s[n]);return e},i.prototype.getMaxVendorId=function(){var t=0;return this.map.forEach((function(i){t=Math.max(i.max(),t)})),t},i.prototype.getRestrictions=function(t){var i=[];return this.map.forEach((function(e,s){t?e.contains(t)&&i.push(h.PurposeRestriction.unHash(s)):i.push(h.PurposeRestriction.unHash(s))})),i},i.prototype.getPurposes=function(){var t=new Set;return this.map.forEach((function(i,e){t.add(h.PurposeRestriction.unHash(e).purposeId)})),Array.from(t)},i.prototype.remove=function(t,i){var e=i.hash,s=this.map.get(e);s&&(s.remove(t),s.isEmpty()&&(this.map.delete(e),this.bitLength=0))},Object.defineProperty(i.prototype,"gvl",{get:function(){return this.gvl_},set:function(t){var i=this;this.gvl_||(this.gvl_=t,this.map.forEach((function(t,e){var s=h.PurposeRestriction.unHash(e);t.get().forEach((function(e){i.isOkToHave(s.restrictionType,s.purposeId,e)||t.remove(e)}))})))},enumerable:!0,configurable:!0}),i.prototype.isEmpty=function(){return 0===this.map.size},Object.defineProperty(i.prototype,"numRestrictions",{get:function(){return this.map.size},enumerable:!0,configurable:!0}),i}(e(5186).Cloneable);i.PurposeRestrictionVector=c},2473:(t,i)=>{"use strict";var e;Object.defineProperty(i,"B",{value:!0}),(e=i.RestrictionType||(i.RestrictionType={}))[e.NOT_ALLOWED=0]="NOT_ALLOWED",e[e.REQUIRE_CONSENT=1]="REQUIRE_CONSENT",e[e.REQUIRE_LI=2]="REQUIRE_LI"},4858:(t,i)=>{"use strict";var e;Object.defineProperty(i,"B",{value:!0}),(e=i.Segment||(i.Segment={})).CORE="core",e.VENDORS_DISCLOSED="vendorsDisclosed",e.VENDORS_ALLOWED="vendorsAllowed",e.PUBLISHER_TC="publisherTC"},6130:(t,i,e)=>{"use strict";var s;Object.defineProperty(i,"B",{value:!0});var n=e(4858),r=function(){function t(){}return t.ID_TO_KEY=[n.Segment.CORE,n.Segment.VENDORS_DISCLOSED,n.Segment.VENDORS_ALLOWED,n.Segment.PUBLISHER_TC],t.KEY_TO_ID=((s={})[n.Segment.CORE]=0,s[n.Segment.VENDORS_DISCLOSED]=1,s[n.Segment.VENDORS_ALLOWED]=2,s[n.Segment.PUBLISHER_TC]=3,s),t}();i.SegmentIDs=r},6315:function(t,i,e){"use strict";var s,n=this&&this.R||(s=function(t,i){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var e in i)i.hasOwnProperty(e)&&(t[e]=i[e])})(t,i)},function(t,i){function e(){this.constructor=t}s(t,i),t.prototype=null===i?Object.create(i):(e.prototype=i.prototype,new e)}),r=this&&this.W||function(t,i){var e,s,n,r,h={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return r={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function o(r){return function(o){return function(r){if(e)throw new TypeError("Generator is already executing.");for(;h;)try{if(e=1,s&&(n=2&r[0]?s.return:r[0]?s.throw||((n=s.return)&&n.call(s),0):s.next)&&!(n=n.call(s,r[1])).done)return n;switch(s=0,n&&(r=[2&r[0],n.value]),r[0]){case 0:case 1:n=r;break;case 4:return h.label++,{value:r[1],done:!1};case 5:h.label++,s=r[1],r=[0];continue;case 7:r=h.ops.pop(),h.trys.pop();continue;default:if(!(n=(n=h.trys).length>0&&n[n.length-1])&&(6===r[0]||2===r[0])){h=0;continue}if(3===r[0]&&(!n||r[1]>n[0]&&r[1]<n[3])){h.label=r[1];break}if(6===r[0]&&h.label<n[1]){h.label=n[1],n=r;break}if(n&&h.label<n[2]){h.label=n[2],h.ops.push(r);break}n[2]&&h.ops.pop(),h.trys.pop();continue}r=i.call(t,h)}catch(t){r=[6,t],s=0}finally{e=n=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,o])}}};Object.defineProperty(i,"B",{value:!0});var h=e(5186),o=e(5458),a=function(t){function i(){var i=null!==t&&t.apply(this,arguments)||this;return i.bitLength=0,i.maxId_=0,i.set_=new Set,i}return n(i,t),i.prototype[Symbol.iterator]=function(){var t;return r(this,(function(i){switch(i.label){case 0:t=1,i.label=1;case 1:return t<=this.maxId?[4,[t,this.has(t)]]:[3,4];case 2:i.sent(),i.label=3;case 3:return t++,[3,1];case 4:return[2]}}))},i.prototype.values=function(){return this.set_.values()},Object.defineProperty(i.prototype,"maxId",{get:function(){return this.maxId_},enumerable:!0,configurable:!0}),i.prototype.has=function(t){return this.set_.has(t)},i.prototype.unset=function(t){var i=this;Array.isArray(t)?t.forEach((function(t){return i.unset(t)})):"object"==typeof t?this.unset(Object.keys(t).map((function(t){return+t}))):(this.set_.delete(t),this.bitLength=0,t===this.maxId&&(this.maxId_=0,this.set_.forEach((function(t){i.maxId_=Math.max(i.maxId,t)}))))},i.prototype.isIntMap=function(t){var i=this,e="object"==typeof t;return e&&Object.keys(t).every((function(e){var s=Number.isInteger(parseInt(e,10));return(s=s&&i.isValidNumber(t[e].id))&&void 0!==t[e].name}))},i.prototype.isValidNumber=function(t){return parseInt(t,10)>0},i.prototype.isSet=function(t){var i=!1;return t instanceof Set&&(i=Array.from(t).every(this.isValidNumber)),i},i.prototype.set=function(t){var i=this;if(Array.isArray(t))t.forEach((function(t){return i.set(t)}));else if(this.isSet(t))this.set(Array.from(t));else if(this.isIntMap(t))this.set(Object.keys(t).map((function(t){return+t})));else{if(!this.isValidNumber(t))throw new o.TCModelError("set()",t,"must be positive integer array, positive integer, Set<number>, or IntMap");this.set_.add(t),this.maxId_=Math.max(this.maxId,t),this.bitLength=0}},i.prototype.empty=function(){this.set_=new Set},i.prototype.forEach=function(t){for(var i=1;i<=this.maxId;i++)t(this.has(i),i)},Object.defineProperty(i.prototype,"size",{get:function(){return this.set_.size},enumerable:!0,configurable:!0}),i.prototype.setAll=function(t){this.set(t)},i}(h.Cloneable);i.Vector=a},250:(t,i,e)=>{"use strict";function s(t){for(var e in t)i.hasOwnProperty(e)||(i[e]=t[e])}Object.defineProperty(i,"B",{value:!0}),s(e(5995)),s(e(5301)),s(e(3126)),s(e(4649)),s(e(7096)),s(e(4243)),s(e(2473)),s(e(4858)),s(e(6130)),s(e(6315))},4537:t=>{"use strict";t.exports=function(t,i){var e=new Array(arguments.length-1),s=0,n=2,r=!0;for(;n<arguments.length;)e[s++]=arguments[n++];return new Promise((function(n,h){e[s]=function(t){if(r)if(r=!1,t)h(t);else{for(var i=new Array(arguments.length-1),e=0;e<i.length;)i[e++]=arguments[e];n.apply(null,i)}};try{t.apply(i||null,e)}catch(t){r&&(r=!1,h(t))}}))}},7419:(t,i)=>{"use strict";var e=i;e.length=function(t){var i=t.length;if(!i)return 0;for(var e=0;--i%4>1&&"="===t.charAt(i);)++e;return Math.ceil(3*t.length)/4-e};for(var s=new Array(64),n=new Array(123),r=0;r<64;)n[s[r]=r<26?r+65:r<52?r+71:r<62?r-4:r-59|43]=r++;e.encode=function(t,i,e){for(var n,r=null,h=[],o=0,a=0;i<e;){var c=t[i++];switch(a){case 0:h[o++]=s[c>>2],n=(3&c)<<4,a=1;break;case 1:h[o++]=s[n|c>>4],n=(15&c)<<2,a=2;break;case 2:h[o++]=s[n|c>>6],h[o++]=s[63&c],a=0}o>8191&&((r||(r=[])).push(String.fromCharCode.apply(String,h)),o=0)}return a&&(h[o++]=s[n],h[o++]=61,1===a&&(h[o++]=61)),r?(o&&r.push(String.fromCharCode.apply(String,h.slice(0,o))),r.join("")):String.fromCharCode.apply(String,h.slice(0,o))};var h="invalid encoding";e.decode=function(t,i,e){for(var s,r=e,o=0,a=0;a<t.length;){var c=t.charCodeAt(a++);if(61===c&&o>1)break;if(void 0===(c=n[c]))throw Error(h);switch(o){case 0:s=c,o=1;break;case 1:i[e++]=s<<2|(48&c)>>4,s=c,o=2;break;case 2:i[e++]=(15&s)<<4|(60&c)>>2,s=c,o=3;break;case 3:i[e++]=(3&s)<<6|c,o=0}}if(1===o)throw Error(h);return e-r},e.test=function(t){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(t)}},5124:t=>{"use strict";function i(t,e){"string"==typeof t&&(e=t,t=void 0);var s=[];function n(t){if("string"!=typeof t){var e=r();if(i.verbose&&console.log("codegen: "+e),e="return "+e,t){for(var h=Object.keys(t),o=new Array(h.length+1),a=new Array(h.length),c=0;c<h.length;)o[c]=h[c],a[c]=t[h[c++]];return o[c]=e,Function.apply(null,o).apply(null,a)}return Function(e)()}for(var l=new Array(arguments.length-1),u=0;u<l.length;)l[u]=arguments[++u];if(u=0,t=t.replace(/%([%dfijs])/g,(function(t,i){var e=l[u++];switch(i){case"d":case"f":return String(Number(e));case"i":return String(Math.floor(e));case"j":return JSON.stringify(e);case"s":return String(e)}return"%"})),u!==l.length)throw Error("parameter count mismatch");return s.push(t),n}function r(i){return"function "+(i||e||"")+"("+(t&&t.join(",")||"")+"){\n  "+s.join("\n  ")+"\n}"}return n.toString=r,n}t.exports=i,i.verbose=!1},9211:t=>{"use strict";function i(){this.J={}}t.exports=i,i.prototype.on=function(t,i,e){return(this.J[t]||(this.J[t]=[])).push({fn:i,ctx:e||this}),this},i.prototype.off=function(t,i){if(void 0===t)this.J={};else if(void 0===i)this.J[t]=[];else for(var e=this.J[t],s=0;s<e.length;)e[s].fn===i?e.splice(s,1):++s;return this},i.prototype.emit=function(t){var i=this.J[t];if(i){for(var e=[],s=1;s<arguments.length;)e.push(arguments[s++]);for(s=0;s<i.length;)i[s].fn.apply(i[s++].ctx,e)}return this}},9054:(t,i,e)=>{"use strict";t.exports=r;var s=e(4537),n=e(7199)("fs");function r(t,i,e){return"function"==typeof i?(e=i,i={}):i||(i={}),e?!i.xhr&&n&&n.readFile?n.readFile(t,(function(s,n){return s&&"undefined"!=typeof XMLHttpRequest?r.xhr(t,i,e):s?e(s):e(null,i.binary?n:n.toString("utf8"))})):r.xhr(t,i,e):s(r,this,t,i)}r.xhr=function(t,i,e){var s=new XMLHttpRequest;s.onreadystatechange=function(){if(4===s.readyState){if(0!==s.status&&200!==s.status)return e(Error("status "+s.status));if(i.binary){var t=s.response;if(!t){t=[];for(var n=0;n<s.responseText.length;++n)t.push(255&s.responseText.charCodeAt(n))}return e(null,"undefined"!=typeof Uint8Array?new Uint8Array(t):t)}return e(null,s.responseText)}},i.binary&&("overrideMimeType"in s&&s.overrideMimeType("text/plain; charset=x-user-defined"),s.responseType="arraybuffer"),s.open("GET",t),s.send()}},945:t=>{"use strict";function i(t){return"undefined"!=typeof Float32Array?function(){var i=new Float32Array([-0]),e=new Uint8Array(i.buffer),s=128===e[3];function n(t,s,n){i[0]=t,s[n]=e[0],s[n+1]=e[1],s[n+2]=e[2],s[n+3]=e[3]}function r(t,s,n){i[0]=t,s[n]=e[3],s[n+1]=e[2],s[n+2]=e[1],s[n+3]=e[0]}function h(t,s){return e[0]=t[s],e[1]=t[s+1],e[2]=t[s+2],e[3]=t[s+3],i[0]}function o(t,s){return e[3]=t[s],e[2]=t[s+1],e[1]=t[s+2],e[0]=t[s+3],i[0]}t.writeFloatLE=s?n:r,t.writeFloatBE=s?r:n,t.readFloatLE=s?h:o,t.readFloatBE=s?o:h}():function(){function i(t,i,e,s){var n=i<0?1:0;if(n&&(i=-i),0===i)t(1/i>0?0:2147483648,e,s);else if(isNaN(i))t(2143289344,e,s);else if(i>34028234663852886e22)t((n<<31|2139095040)>>>0,e,s);else if(i<11754943508222875e-54)t((n<<31|Math.round(i/1401298464324817e-60))>>>0,e,s);else{var r=Math.floor(Math.log(i)/Math.LN2);t((n<<31|r+127<<23|8388607&Math.round(i*Math.pow(2,-r)*8388608))>>>0,e,s)}}function h(t,i,e){var s=t(i,e),n=2*(s>>31)+1,r=s>>>23&255,h=8388607&s;return 255===r?h?NaN:n*(1/0):0===r?1401298464324817e-60*n*h:n*Math.pow(2,r-150)*(h+8388608)}t.writeFloatLE=i.bind(null,e),t.writeFloatBE=i.bind(null,s),t.readFloatLE=h.bind(null,n),t.readFloatBE=h.bind(null,r)}(),"undefined"!=typeof Float64Array?function(){var i=new Float64Array([-0]),e=new Uint8Array(i.buffer),s=128===e[7];function n(t,s,n){i[0]=t,s[n]=e[0],s[n+1]=e[1],s[n+2]=e[2],s[n+3]=e[3],s[n+4]=e[4],s[n+5]=e[5],s[n+6]=e[6],s[n+7]=e[7]}function r(t,s,n){i[0]=t,s[n]=e[7],s[n+1]=e[6],s[n+2]=e[5],s[n+3]=e[4],s[n+4]=e[3],s[n+5]=e[2],s[n+6]=e[1],s[n+7]=e[0]}function h(t,s){return e[0]=t[s],e[1]=t[s+1],e[2]=t[s+2],e[3]=t[s+3],e[4]=t[s+4],e[5]=t[s+5],e[6]=t[s+6],e[7]=t[s+7],i[0]}function o(t,s){return e[7]=t[s],e[6]=t[s+1],e[5]=t[s+2],e[4]=t[s+3],e[3]=t[s+4],e[2]=t[s+5],e[1]=t[s+6],e[0]=t[s+7],i[0]}t.writeDoubleLE=s?n:r,t.writeDoubleBE=s?r:n,t.readDoubleLE=s?h:o,t.readDoubleBE=s?o:h}():function(){function i(t,i,e,s,n,r){var h=s<0?1:0;if(h&&(s=-s),0===s)t(0,n,r+i),t(1/s>0?0:2147483648,n,r+e);else if(isNaN(s))t(0,n,r+i),t(2146959360,n,r+e);else if(s>17976931348623157e292)t(0,n,r+i),t((h<<31|2146435072)>>>0,n,r+e);else{var o;if(s<22250738585072014e-324)t((o=s/5e-324)>>>0,n,r+i),t((h<<31|o/4294967296)>>>0,n,r+e);else{var a=Math.floor(Math.log(s)/Math.LN2);1024===a&&(a=1023),t(4503599627370496*(o=s*Math.pow(2,-a))>>>0,n,r+i),t((h<<31|a+1023<<20|1048576*o&1048575)>>>0,n,r+e)}}}function h(t,i,e,s,n){var r=t(s,n+i),h=t(s,n+e),o=2*(h>>31)+1,a=h>>>20&2047,c=4294967296*(1048575&h)+r;return 2047===a?c?NaN:o*(1/0):0===a?5e-324*o*c:o*Math.pow(2,a-1075)*(c+4503599627370496)}t.writeDoubleLE=i.bind(null,e,0,4),t.writeDoubleBE=i.bind(null,s,4,0),t.readDoubleLE=h.bind(null,n,0,4),t.readDoubleBE=h.bind(null,r,4,0)}(),t}function e(t,i,e){i[e]=255&t,i[e+1]=t>>>8&255,i[e+2]=t>>>16&255,i[e+3]=t>>>24}function s(t,i,e){i[e]=t>>>24,i[e+1]=t>>>16&255,i[e+2]=t>>>8&255,i[e+3]=255&t}function n(t,i){return(t[i]|t[i+1]<<8|t[i+2]<<16|t[i+3]<<24)>>>0}function r(t,i){return(t[i]<<24|t[i+1]<<16|t[i+2]<<8|t[i+3])>>>0}t.exports=i(i)},7199:t=>{"use strict";function i(t){try{var i=eval("quire".replace(/^/,"re"))(t);if(i&&(i.length||Object.keys(i).length))return i}catch(t){}return null}t.exports=i},8626:(t,i)=>{"use strict";var e=i,s=e.isAbsolute=function(t){return/^(?:\/|\w+:)/.test(t)},n=e.normalize=function(t){var i=(t=t.replace(/\\/g,"/").replace(/\/{2,}/g,"/")).split("/"),e=s(t),n="";e&&(n=i.shift()+"/");for(var r=0;r<i.length;)".."===i[r]?r>0&&".."!==i[r-1]?i.splice(--r,2):e?i.splice(r,1):++r:"."===i[r]?i.splice(r,1):++r;return n+i.join("/")};e.resolve=function(t,i,e){return e||(i=n(i)),s(i)?i:(e||(t=n(t)),(t=t.replace(/(?:\/|^)[^/]+$/,"")).length?n(t+"/"+i):i)}},6662:t=>{"use strict";t.exports=function(t,i,e){var s=e||8192,n=s>>>1,r=null,h=s;return function(e){if(e<1||e>n)return t(e);h+e>s&&(r=t(s),h=0);var o=i.call(r,h,h+=e);return 7&h&&(h=1+(7|h)),o}}},4997:(t,i)=>{"use strict";var e=i;e.length=function(t){for(var i=0,e=0,s=0;s<t.length;++s)(e=t.charCodeAt(s))<128?i+=1:e<2048?i+=2:55296==(64512&e)&&56320==(64512&t.charCodeAt(s+1))?(++s,i+=4):i+=3;return i},e.read=function(t,i,e){if(e-i<1)return"";for(var s,n=null,r=[],h=0;i<e;)(s=t[i++])<128?r[h++]=s:s>191&&s<224?r[h++]=(31&s)<<6|63&t[i++]:s>239&&s<365?(s=((7&s)<<18|(63&t[i++])<<12|(63&t[i++])<<6|63&t[i++])-65536,r[h++]=55296+(s>>10),r[h++]=56320+(1023&s)):r[h++]=(15&s)<<12|(63&t[i++])<<6|63&t[i++],h>8191&&((n||(n=[])).push(String.fromCharCode.apply(String,r)),h=0);return n?(h&&n.push(String.fromCharCode.apply(String,r.slice(0,h))),n.join("")):String.fromCharCode.apply(String,r.slice(0,h))},e.write=function(t,i,e){for(var s,n,r=e,h=0;h<t.length;++h)(s=t.charCodeAt(h))<128?i[e++]=s:s<2048?(i[e++]=s>>6|192,i[e++]=63&s|128):55296==(64512&s)&&56320==(64512&(n=t.charCodeAt(h+1)))?(s=65536+((1023&s)<<10)+(1023&n),++h,i[e++]=s>>18|240,i[e++]=s>>12&63|128,i[e++]=s>>6&63|128,i[e++]=63&s|128):(i[e++]=s>>12|224,i[e++]=s>>6&63|128,i[e++]=63&s|128);return e-r}},7501:function(t,i,e){var s;t=e.nmd(t),function(n){var r=i,h=(t&&t.exports,"object"==typeof e.g&&e.g);h.global!==h&&h.window;var o=function(t){this.message=t};(o.prototype=new Error).name="InvalidCharacterError";var a=function(t){throw new o(t)},c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",l=/[\t\n\f\r ]/g,u={encode:function(t){t=String(t),/[^\0-\xFF]/.test(t)&&a("The string to be encoded contains characters outside of the Latin1 range.");for(var i,e,s,n,r=t.length%3,h="",o=-1,l=t.length-r;++o<l;)i=t.charCodeAt(o)<<16,e=t.charCodeAt(++o)<<8,s=t.charCodeAt(++o),h+=c.charAt((n=i+e+s)>>18&63)+c.charAt(n>>12&63)+c.charAt(n>>6&63)+c.charAt(63&n);return 2==r?(i=t.charCodeAt(o)<<8,e=t.charCodeAt(++o),h+=c.charAt((n=i+e)>>10)+c.charAt(n>>4&63)+c.charAt(n<<2&63)+"="):1==r&&(n=t.charCodeAt(o),h+=c.charAt(n>>2)+c.charAt(n<<4&63)+"=="),h},decode:function(t){var i=(t=String(t).replace(l,"")).length;i%4==0&&(i=(t=t.replace(/==?$/,"")).length),(i%4==1||/[^+a-zA-Z0-9/]/.test(t))&&a("Invalid character: the string to be decoded is not correctly encoded.");for(var e,s,n=0,r="",h=-1;++h<i;)s=c.indexOf(t.charAt(h)),e=n%4?64*e+s:s,n++%4&&(r+=String.fromCharCode(255&e>>(-2*n&6)));return r},version:"0.1.0"};void 0===(s=function(){return u}.call(i,e,i,t))||(t.exports=s)}()},6658:(t,i,e)=>{"use strict";var s=e(3090),n=s.decodeBitsToIds,r=s.decodeFromBase64;t.exports={decodeConsentString:function(t){var i=r(t),e=i.version,s=i.cmpId,h=i.vendorListVersion,o=i.purposeIdBitString,a=i.maxVendorId,c=i.created,l=i.lastUpdated,u=i.isRange,d=i.defaultConsent,p=i.vendorIdBitString,f=i.vendorRangeList,m=i.cmpVersion,g=i.consentScreen,v=i.consentLanguage,y={version:e,cmpId:s,vendorListVersion:h,allowedPurposeIds:n(o),maxVendorId:a,created:c,lastUpdated:l,cmpVersion:m,consentScreen:g,consentLanguage:v};if(u){var b=f.reduce((function(t,i){for(var e=i.isRange,s=i.startVendorId,n=i.endVendorId,r=e?n:s,h=s;h<=r;h+=1)t[h]=!0;return t}),{});y.allowedVendorIds=[];for(var x=1;x<=a;x+=1)(d&&!b[x]||!d&&b[x])&&-1===y.allowedVendorIds.indexOf(x)&&y.allowedVendorIds.push(x)}else y.allowedVendorIds=n(p);return y}}},8462:(t,i,e)=>{"use strict";var s=e(6658).decodeConsentString;t.exports={decodeConsentString:s}},3090:(t,i,e)=>{"use strict";var s=e(7501),n=e(3977),r=n.versionNumBits,h=n.vendorVersionMap;function o(t,i,e){return parseInt(t.substr(i,e),2)}function a(t,i,e){return new Date(100*o(t,i,e))}function c(t){var i=o(t);return String.fromCharCode(i+65).toLowerCase()}function l(t,i,e){var s=t.substr(i,e);return c(s.slice(0,e/2))+c(s.slice(e/2))}function u(t){var i=t.input,e=t.output,s=t.startPosition,n=t.field,r=n.type,h=n.numBits,c=n.decoder,u=n.validator,p=n.listCount;if("function"==typeof u&&!u(e))return{newPosition:s};if("function"==typeof c)return c(i,e,s);var f,m,g="function"==typeof h?h(e):h;switch(r){case"int":return{fieldValue:o(i,s,g)};case"bool":return{fieldValue:(f=i,m=s,1===parseInt(f.substr(m,1),2))};case"date":return{fieldValue:a(i,s,g)};case"bits":return{fieldValue:i.substr(s,g)};case"list":return function(t,i,e,s,n){var r=0;"function"==typeof n?r=n(i):"number"==typeof n&&(r=n);for(var h=e,o=[],a=0;a<r;a+=1){var c=d({input:t,fields:s.fields,startPosition:h});h=c.newPosition,o.push(c.decodedObject)}return{fieldValue:o,newPosition:h}}(i,e,s,n,p);case"language":return{fieldValue:l(i,s,g)};default:throw new Error("ConsentString - Unknown field type "+r+" for decoding")}}function d(t){var i=t.input,e=t.fields,s=t.startPosition,n=void 0===s?0:s;return{decodedObject:e.reduce((function(t,e){var s=e.name,r=e.numBits,h=u({input:i,output:t,startPosition:n,field:e}),o=h.fieldValue,a=h.newPosition;return void 0!==o&&(t[s]=o),void 0!==a?n=a:"number"==typeof r&&(n+=r),t}),{}),newPosition:n}}t.exports={decodeBitsToIds:function(t){return t.split("").reduce((function(t,i,e){return"1"===i&&-1===t.indexOf(e+1)&&t.push(e+1),t}),[])},decodeFromBase64:function(t,i){for(var e=t;e.length%4!=0;)e+="=";e=e.replace(/-/g,"+").replace(/_/g,"/");for(var n,a,c=s.decode(e),l="",u=0;u<c.length;u+=1){var p=c.charCodeAt(u).toString(2);l+=(n=p,a=8-p.length,function(t){for(var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"0",e="",s=0;s<t;s+=1)e+=i;return e}(Math.max(0,a))+n)}return function(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:h,e=o(t,0,r);if("number"!=typeof e)throw new Error("ConsentString - Unknown version number in the string to decode");if(!h[e])throw new Error("ConsentString - Unsupported version "+e+" in the string to decode");var s=i[e].fields;return d({input:t,fields:s}).decodedObject}(l,i)}}},3977:t=>{"use strict";t.exports={versionNumBits:6,vendorVersionMap:{1:{version:1,metadataFields:["version","created","lastUpdated","cmpId","cmpVersion","consentScreen","vendorListVersion"],fields:[{name:"version",type:"int",numBits:6},{name:"created",type:"date",numBits:36},{name:"lastUpdated",type:"date",numBits:36},{name:"cmpId",type:"int",numBits:12},{name:"cmpVersion",type:"int",numBits:12},{name:"consentScreen",type:"int",numBits:6},{name:"consentLanguage",type:"language",numBits:12},{name:"vendorListVersion",type:"int",numBits:12},{name:"purposeIdBitString",type:"bits",numBits:24},{name:"maxVendorId",type:"int",numBits:16},{name:"isRange",type:"bool",numBits:1},{name:"vendorIdBitString",type:"bits",numBits:function(t){return t.maxVendorId},validator:function(t){return!t.isRange}},{name:"defaultConsent",type:"bool",numBits:1,validator:function(t){return t.isRange}},{name:"numEntries",numBits:12,type:"int",validator:function(t){return t.isRange}},{name:"vendorRangeList",type:"list",listCount:function(t){return t.numEntries},validator:function(t){return t.isRange},fields:[{name:"isRange",type:"bool",numBits:1},{name:"startVendorId",type:"int",numBits:16},{name:"endVendorId",type:"int",numBits:16,validator:function(t){return t.isRange}}]}]}}}},4492:(t,i,e)=>{"use strict";t.exports=e(8836)},3996:(t,i,e)=>{"use strict";var s=i,n=e(7025),r=e(9935);function h(t,i,e,s){if(i.resolvedType)if(i.resolvedType instanceof n){t("switch(d%s){",s);for(var r=i.resolvedType.values,h=Object.keys(r),o=0;o<h.length;++o)i.repeated&&r[h[o]]===i.typeDefault&&t("default:"),t("case%j:",h[o])("case %i:",r[h[o]])("m%s=%j",s,r[h[o]])("break");t("}")}else t('if(typeof d%s!=="object")',s)("throw TypeError(%j)",i.fullName+": object expected")("m%s=types[%i].fromObject(d%s)",s,e,s);else{var a=!1;switch(i.type){case"double":case"float":t("m%s=Number(d%s)",s,s);break;case"uint32":case"fixed32":t("m%s=d%s>>>0",s,s);break;case"int32":case"sint32":case"sfixed32":t("m%s=d%s|0",s,s);break;case"uint64":a=!0;case"int64":case"sint64":case"fixed64":case"sfixed64":t("if(util.Long)")("(m%s=util.Long.fromValue(d%s)).unsigned=%j",s,s,a)('else if(typeof d%s==="string")',s)("m%s=parseInt(d%s,10)",s,s)('else if(typeof d%s==="number")',s)("m%s=d%s",s,s)('else if(typeof d%s==="object")',s)("m%s=new util.LongBits(d%s.low>>>0,d%s.high>>>0).toNumber(%s)",s,s,s,a?"true":"");break;case"bytes":t('if(typeof d%s==="string")',s)("util.base64.decode(d%s,m%s=util.newBuffer(util.base64.length(d%s)),0)",s,s,s)("else if(d%s.length)",s)("m%s=d%s",s,s);break;case"string":t("m%s=String(d%s)",s,s);break;case"bool":t("m%s=Boolean(d%s)",s,s)}}return t}function o(t,i,e,s){if(i.resolvedType)i.resolvedType instanceof n?t("d%s=o.enums===String?types[%i].values[m%s]:m%s",s,e,s,s):t("d%s=types[%i].toObject(m%s,o)",s,e,s);else{var r=!1;switch(i.type){case"double":case"float":t("d%s=o.json&&!isFinite(m%s)?String(m%s):m%s",s,s,s,s);break;case"uint64":r=!0;case"int64":case"sint64":case"fixed64":case"sfixed64":t('if(typeof m%s==="number")',s)("d%s=o.longs===String?String(m%s):m%s",s,s,s)("else")("d%s=o.longs===String?util.Long.prototype.toString.call(m%s):o.longs===Number?new util.LongBits(m%s.low>>>0,m%s.high>>>0).toNumber(%s):m%s",s,s,s,s,r?"true":"",s);break;case"bytes":t("d%s=o.bytes===String?util.base64.encode(m%s,0,m%s.length):o.bytes===Array?Array.prototype.slice.call(m%s):m%s",s,s,s,s,s);break;default:t("d%s=m%s",s,s)}}return t}s.fromObject=function(t){var i=t.fieldsArray,e=r.codegen(["d"],t.name+"$fromObject")("if(d instanceof this.ctor)")("return d");if(!i.length)return e("return new this.ctor");e("var m=new this.ctor");for(var s=0;s<i.length;++s){var o=i[s].resolve(),a=r.safeProp(o.name);o.map?(e("if(d%s){",a)('if(typeof d%s!=="object")',a)("throw TypeError(%j)",o.fullName+": object expected")("m%s={}",a)("for(var ks=Object.keys(d%s),i=0;i<ks.length;++i){",a),h(e,o,s,a+"[ks[i]]")("}")("}")):o.repeated?(e("if(d%s){",a)("if(!Array.isArray(d%s))",a)("throw TypeError(%j)",o.fullName+": array expected")("m%s=[]",a)("for(var i=0;i<d%s.length;++i){",a),h(e,o,s,a+"[i]")("}")("}")):(o.resolvedType instanceof n||e("if(d%s!=null){",a),h(e,o,s,a),o.resolvedType instanceof n||e("}"))}return e("return m")},s.toObject=function(t){var i=t.fieldsArray.slice().sort(r.compareFieldsById);if(!i.length)return r.codegen()("return {}");for(var e=r.codegen(["m","o"],t.name+"$toObject")("if(!o)")("o={}")("var d={}"),s=[],h=[],a=[],c=0;c<i.length;++c)i[c].partOf||(i[c].resolve().repeated?s:i[c].map?h:a).push(i[c]);if(s.length){for(e("if(o.arrays||o.defaults){"),c=0;c<s.length;++c)e("d%s=[]",r.safeProp(s[c].name));e("}")}if(h.length){for(e("if(o.objects||o.defaults){"),c=0;c<h.length;++c)e("d%s={}",r.safeProp(h[c].name));e("}")}if(a.length){for(e("if(o.defaults){"),c=0;c<a.length;++c){var l=a[c],u=r.safeProp(l.name);if(l.resolvedType instanceof n)e("d%s=o.enums===String?%j:%j",u,l.resolvedType.valuesById[l.typeDefault],l.typeDefault);else if(l.long)e("if(util.Long){")("var n=new util.Long(%i,%i,%j)",l.typeDefault.low,l.typeDefault.high,l.typeDefault.unsigned)("d%s=o.longs===String?n.toString():o.longs===Number?n.toNumber():n",u)("}else")("d%s=o.longs===String?%j:%i",u,l.typeDefault.toString(),l.typeDefault.toNumber());else if(l.bytes){var d="["+Array.prototype.slice.call(l.typeDefault).join(",")+"]";e("if(o.bytes===String)d%s=%j",u,String.fromCharCode.apply(String,l.typeDefault))("else{")("d%s=%s",u,d)("if(o.bytes!==Array)d%s=util.newBuffer(d%s)",u,u)("}")}else e("d%s=%j",u,l.typeDefault)}e("}")}var p=!1;for(c=0;c<i.length;++c){l=i[c];var f=t.K.indexOf(l);u=r.safeProp(l.name);l.map?(p||(p=!0,e("var ks2")),e("if(m%s&&(ks2=Object.keys(m%s)).length){",u,u)("d%s={}",u)("for(var j=0;j<ks2.length;++j){"),o(e,l,f,u+"[ks2[j]]")("}")):l.repeated?(e("if(m%s&&m%s.length){",u,u)("d%s=[]",u)("for(var j=0;j<m%s.length;++j){",u),o(e,l,f,u+"[j]")("}")):(e("if(m%s!=null&&m.hasOwnProperty(%j)){",u,l.name),o(e,l,f,u),l.partOf&&e("if(o.oneofs)")("d%s=%j",r.safeProp(l.partOf.name),l.name)),e("}")}return e("return d")}},5305:(t,i,e)=>{"use strict";t.exports=function(t){var i=r.codegen(["r","l"],t.name+"$decode")("if(!(r instanceof Reader))")("r=Reader.create(r)")("var c=l===undefined?r.len:r.pos+l,m=new this.ctor"+(t.fieldsArray.filter((function(t){return t.map})).length?",k,value":""))("while(r.pos<c){")("var t=r.uint32()");t.group&&i("if((t&7)===4)")("break");i("switch(t>>>3){");for(var e=0;e<t.fieldsArray.length;++e){var o=t.K[e].resolve(),a=o.resolvedType instanceof s?"int32":o.type,c="m"+r.safeProp(o.name);i("case %i:",o.id),o.map?(i("if(%s===util.emptyObject)",c)("%s={}",c)("var c2 = r.uint32()+r.pos"),void 0!==n.defaults[o.keyType]?i("k=%j",n.defaults[o.keyType]):i("k=null"),void 0!==n.defaults[a]?i("value=%j",n.defaults[a]):i("value=null"),i("while(r.pos<c2){")("var tag2=r.uint32()")("switch(tag2>>>3){")("case 1: k=r.%s(); break",o.keyType)("case 2:"),void 0===n.basic[a]?i("value=types[%i].decode(r,r.uint32())",e):i("value=r.%s()",a),i("break")("default:")("r.skipType(tag2&7)")("break")("}")("}"),void 0!==n.long[o.keyType]?i('%s[typeof k==="object"?util.longToHash(k):k]=value',c):i("%s[k]=value",c)):o.repeated?(i("if(!(%s&&%s.length))",c,c)("%s=[]",c),void 0!==n.packed[a]&&i("if((t&7)===2){")("var c2=r.uint32()+r.pos")("while(r.pos<c2)")("%s.push(r.%s())",c,a)("}else"),void 0===n.basic[a]?i(o.resolvedType.group?"%s.push(types[%i].decode(r))":"%s.push(types[%i].decode(r,r.uint32()))",c,e):i("%s.push(r.%s())",c,a)):void 0===n.basic[a]?i(o.resolvedType.group?"%s=types[%i].decode(r)":"%s=types[%i].decode(r,r.uint32())",c,e):i("%s=r.%s()",c,a),i("break")}for(i("default:")("r.skipType(t&7)")("break")("}")("}"),e=0;e<t.K.length;++e){var l=t.K[e];l.required&&i("if(!m.hasOwnProperty(%j))",l.name)("throw util.ProtocolError(%j,{instance:m})",h(l))}return i("return m")};var s=e(7025),n=e(7063),r=e(9935);function h(t){return"missing required '"+t.name+"'"}},4928:(t,i,e)=>{"use strict";t.exports=function(t){for(var i,e=r.codegen(["m","w"],t.name+"$encode")("if(!w)")("w=Writer.create()"),o=t.fieldsArray.slice().sort(r.compareFieldsById),a=0;a<o.length;++a){var c=o[a].resolve(),l=t.K.indexOf(c),u=c.resolvedType instanceof s?"int32":c.type,d=n.basic[u];i="m"+r.safeProp(c.name),c.map?(e("if(%s!=null&&Object.hasOwnProperty.call(m,%j)){",i,c.name)("for(var ks=Object.keys(%s),i=0;i<ks.length;++i){",i)("w.uint32(%i).fork().uint32(%i).%s(ks[i])",(c.id<<3|2)>>>0,8|n.mapKey[c.keyType],c.keyType),void 0===d?e("types[%i].encode(%s[ks[i]],w.uint32(18).fork()).ldelim().ldelim()",l,i):e(".uint32(%i).%s(%s[ks[i]]).ldelim()",16|d,u,i),e("}")("}")):c.repeated?(e("if(%s!=null&&%s.length){",i,i),c.packed&&void 0!==n.packed[u]?e("w.uint32(%i).fork()",(c.id<<3|2)>>>0)("for(var i=0;i<%s.length;++i)",i)("w.%s(%s[i])",u,i)("w.ldelim()"):(e("for(var i=0;i<%s.length;++i)",i),void 0===d?h(e,c,l,i+"[i]"):e("w.uint32(%i).%s(%s[i])",(c.id<<3|d)>>>0,u,i)),e("}")):(c.optional&&e("if(%s!=null&&Object.hasOwnProperty.call(m,%j))",i,c.name),void 0===d?h(e,c,l,i):e("w.uint32(%i).%s(%s)",(c.id<<3|d)>>>0,u,i))}return e("return w")};var s=e(7025),n=e(7063),r=e(9935);function h(t,i,e,s){return i.resolvedType.group?t("types[%i].encode(%s,w.uint32(%i)).uint32(%i)",e,s,(i.id<<3|3)>>>0,(i.id<<3|4)>>>0):t("types[%i].encode(%s,w.uint32(%i).fork()).ldelim()",e,s,(i.id<<3|2)>>>0)}},7025:(t,i,e)=>{"use strict";t.exports=h;var s=e(3243);((h.prototype=Object.create(s.prototype)).constructor=h).className="Enum";var n=e(9313),r=e(9935);function h(t,i,e,n,r){if(s.call(this,t,e),i&&"object"!=typeof i)throw TypeError("values must be an object");if(this.valuesById={},this.values=Object.create(this.valuesById),this.comment=n,this.comments=r||{},this.reserved=void 0,i)for(var h=Object.keys(i),o=0;o<h.length;++o)"number"==typeof i[h[o]]&&(this.valuesById[this.values[h[o]]=i[h[o]]]=h[o])}h.fromJSON=function(t,i){var e=new h(t,i.values,i.options,i.comment,i.comments);return e.reserved=i.reserved,e},h.prototype.toJSON=function(t){var i=!!t&&Boolean(t.keepComments);return r.toObject(["options",this.options,"values",this.values,"reserved",this.reserved&&this.reserved.length?this.reserved:void 0,"comment",i?this.comment:void 0,"comments",i?this.comments:void 0])},h.prototype.add=function(t,i,e){if(!r.isString(t))throw TypeError("name must be a string");if(!r.isInteger(i))throw TypeError("id must be an integer");if(void 0!==this.values[t])throw Error("duplicate name '"+t+"' in "+this);if(this.isReservedId(i))throw Error("id "+i+" is reserved in "+this);if(this.isReservedName(t))throw Error("name '"+t+"' is reserved in "+this);if(void 0!==this.valuesById[i]){if(!this.options||!this.options.allow_alias)throw Error("duplicate id "+i+" in "+this);this.values[t]=i}else this.valuesById[this.values[t]=i]=t;return this.comments[t]=e||null,this},h.prototype.remove=function(t){if(!r.isString(t))throw TypeError("name must be a string");var i=this.values[t];if(null==i)throw Error("name '"+t+"' does not exist in "+this);return delete this.valuesById[i],delete this.values[t],delete this.comments[t],this},h.prototype.isReservedId=function(t){return n.isReservedId(this.reserved,t)},h.prototype.isReservedName=function(t){return n.isReservedName(this.reserved,t)}},3548:(t,i,e)=>{"use strict";t.exports=c;var s=e(3243);((c.prototype=Object.create(s.prototype)).constructor=c).className="Field";var n,r=e(7025),h=e(7063),o=e(9935),a=/^required|optional|repeated$/;function c(t,i,e,n,r,c,l){if(o.isObject(n)?(l=r,c=n,n=r=void 0):o.isObject(r)&&(l=c,c=r,r=void 0),s.call(this,t,c),!o.isInteger(i)||i<0)throw TypeError("id must be a non-negative integer");if(!o.isString(e))throw TypeError("type must be a string");if(void 0!==n&&!a.test(n=n.toString().toLowerCase()))throw TypeError("rule must be a string rule");if(void 0!==r&&!o.isString(r))throw TypeError("extend must be a string");"proto3_optional"===n&&(n="optional"),this.rule=n&&"optional"!==n?n:void 0,this.type=e,this.id=i,this.extend=r||void 0,this.required="required"===n,this.optional=!this.required,this.repeated="repeated"===n,this.map=!1,this.message=null,this.partOf=null,this.typeDefault=null,this.defaultValue=null,this.long=!!o.Long&&void 0!==h.long[e],this.bytes="bytes"===e,this.resolvedType=null,this.extensionField=null,this.declaringField=null,this.tt=null,this.comment=l}c.fromJSON=function(t,i){return new c(t,i.id,i.type,i.rule,i.extend,i.options,i.comment)},Object.defineProperty(c.prototype,"packed",{get:function(){return null===this.tt&&(this.tt=!1!==this.getOption("packed")),this.tt}}),c.prototype.setOption=function(t,i,e){return"packed"===t&&(this.tt=null),s.prototype.setOption.call(this,t,i,e)},c.prototype.toJSON=function(t){var i=!!t&&Boolean(t.keepComments);return o.toObject(["rule","optional"!==this.rule&&this.rule||void 0,"type",this.type,"id",this.id,"extend",this.extend,"options",this.options,"comment",i?this.comment:void 0])},c.prototype.resolve=function(){if(this.resolved)return this;if(void 0===(this.typeDefault=h.defaults[this.type])&&(this.resolvedType=(this.declaringField?this.declaringField.parent:this.parent).lookupTypeOrEnum(this.type),this.resolvedType instanceof n?this.typeDefault=null:this.typeDefault=this.resolvedType.values[Object.keys(this.resolvedType.values)[0]]),this.options&&null!=this.options.default&&(this.typeDefault=this.options.default,this.resolvedType instanceof r&&"string"==typeof this.typeDefault&&(this.typeDefault=this.resolvedType.values[this.typeDefault])),this.options&&(!0!==this.options.packed&&(void 0===this.options.packed||!this.resolvedType||this.resolvedType instanceof r)||delete this.options.packed,Object.keys(this.options).length||(this.options=void 0)),this.long)this.typeDefault=o.Long.fromNumber(this.typeDefault,"u"===this.type.charAt(0)),Object.freeze&&Object.freeze(this.typeDefault);else if(this.bytes&&"string"==typeof this.typeDefault){var t;o.base64.test(this.typeDefault)?o.base64.decode(this.typeDefault,t=o.newBuffer(o.base64.length(this.typeDefault)),0):o.utf8.write(this.typeDefault,t=o.newBuffer(o.utf8.length(this.typeDefault)),0),this.typeDefault=t}return this.map?this.defaultValue=o.emptyObject:this.repeated?this.defaultValue=o.emptyArray:this.defaultValue=this.typeDefault,this.parent instanceof n&&(this.parent.ctor.prototype[this.name]=this.defaultValue),s.prototype.resolve.call(this)},c.d=function(t,i,e,s){return"function"==typeof i?i=o.decorateType(i).name:i&&"object"==typeof i&&(i=o.decorateEnum(i).name),function(n,r){o.decorateType(n.constructor).add(new c(r,t,i,e,{default:s}))}},c.it=function(t){n=t}},8836:(t,i,e)=>{"use strict";var s=t.exports=e(9482);s.build="light",s.load=function(t,i,e){return"function"==typeof i?(e=i,i=new s.Root):i||(i=new s.Root),i.load(t,e)},s.loadSync=function(t,i){return i||(i=new s.Root),i.loadSync(t)},s.encoder=e(4928),s.decoder=e(5305),s.verifier=e(4497),s.converter=e(3996),s.ReflectionObject=e(3243),s.Namespace=e(9313),s.Root=e(9424),s.Enum=e(7025),s.Type=e(7645),s.Field=e(3548),s.OneOf=e(7598),s.MapField=e(6039),s.Service=e(7513),s.Method=e(4429),s.Message=e(8368),s.wrappers=e(1667),s.types=e(7063),s.util=e(9935),s.ReflectionObject.it(s.Root),s.Namespace.it(s.Type,s.Service,s.Enum),s.Root.it(s.Type),s.Field.it(s.Type)},9482:(t,i,e)=>{"use strict";var s=i;function n(){s.util.it(),s.Writer.it(s.BufferWriter),s.Reader.it(s.BufferReader)}s.build="minimal",s.Writer=e(1173),s.BufferWriter=e(3155),s.Reader=e(1408),s.BufferReader=e(593),s.util=e(9693),s.rpc=e(5994),s.roots=e(5054),s.configure=n,n()},6039:(t,i,e)=>{"use strict";t.exports=h;var s=e(3548);((h.prototype=Object.create(s.prototype)).constructor=h).className="MapField";var n=e(7063),r=e(9935);function h(t,i,e,n,h,o){if(s.call(this,t,i,n,void 0,void 0,h,o),!r.isString(e))throw TypeError("keyType must be a string");this.keyType=e,this.resolvedKeyType=null,this.map=!0}h.fromJSON=function(t,i){return new h(t,i.id,i.keyType,i.type,i.options,i.comment)},h.prototype.toJSON=function(t){var i=!!t&&Boolean(t.keepComments);return r.toObject(["keyType",this.keyType,"type",this.type,"id",this.id,"extend",this.extend,"options",this.options,"comment",i?this.comment:void 0])},h.prototype.resolve=function(){if(this.resolved)return this;if(void 0===n.mapKey[this.keyType])throw Error("invalid key type: "+this.keyType);return s.prototype.resolve.call(this)},h.d=function(t,i,e){return"function"==typeof e?e=r.decorateType(e).name:e&&"object"==typeof e&&(e=r.decorateEnum(e).name),function(s,n){r.decorateType(s.constructor).add(new h(n,t,i,e))}}},8368:(t,i,e)=>{"use strict";t.exports=n;var s=e(9693);function n(t){if(t)for(var i=Object.keys(t),e=0;e<i.length;++e)this[i[e]]=t[i[e]]}n.create=function(t){return this.$type.create(t)},n.encode=function(t,i){return this.$type.encode(t,i)},n.encodeDelimited=function(t,i){return this.$type.encodeDelimited(t,i)},n.decode=function(t){return this.$type.decode(t)},n.decodeDelimited=function(t){return this.$type.decodeDelimited(t)},n.verify=function(t){return this.$type.verify(t)},n.fromObject=function(t){return this.$type.fromObject(t)},n.toObject=function(t,i){return this.$type.toObject(t,i)},n.prototype.toJSON=function(){return this.$type.toObject(this,s.toJSONOptions)}},4429:(t,i,e)=>{"use strict";t.exports=r;var s=e(3243);((r.prototype=Object.create(s.prototype)).constructor=r).className="Method";var n=e(9935);function r(t,i,e,r,h,o,a,c,l){if(n.isObject(h)?(a=h,h=o=void 0):n.isObject(o)&&(a=o,o=void 0),void 0!==i&&!n.isString(i))throw TypeError("type must be a string");if(!n.isString(e))throw TypeError("requestType must be a string");if(!n.isString(r))throw TypeError("responseType must be a string");s.call(this,t,a),this.type=i||"rpc",this.requestType=e,this.requestStream=!!h||void 0,this.responseType=r,this.responseStream=!!o||void 0,this.resolvedRequestType=null,this.resolvedResponseType=null,this.comment=c,this.parsedOptions=l}r.fromJSON=function(t,i){return new r(t,i.type,i.requestType,i.responseType,i.requestStream,i.responseStream,i.options,i.comment,i.parsedOptions)},r.prototype.toJSON=function(t){var i=!!t&&Boolean(t.keepComments);return n.toObject(["type","rpc"!==this.type&&this.type||void 0,"requestType",this.requestType,"requestStream",this.requestStream,"responseType",this.responseType,"responseStream",this.responseStream,"options",this.options,"comment",i?this.comment:void 0,"parsedOptions",this.parsedOptions])},r.prototype.resolve=function(){return this.resolved?this:(this.resolvedRequestType=this.parent.lookupType(this.requestType),this.resolvedResponseType=this.parent.lookupType(this.responseType),s.prototype.resolve.call(this))}},9313:(t,i,e)=>{"use strict";t.exports=u;var s=e(3243);((u.prototype=Object.create(s.prototype)).constructor=u).className="Namespace";var n,r,h,o=e(3548),a=e(7598),c=e(9935);function l(t,i){if(t&&t.length){for(var e={},s=0;s<t.length;++s)e[t[s].name]=t[s].toJSON(i);return e}}function u(t,i){s.call(this,t,i),this.nested=void 0,this.et=null}function d(t){return t.et=null,t}u.fromJSON=function(t,i){return new u(t,i.options).addJSON(i.nested)},u.arrayToJSON=l,u.isReservedId=function(t,i){if(t)for(var e=0;e<t.length;++e)if("string"!=typeof t[e]&&t[e][0]<=i&&t[e][1]>i)return!0;return!1},u.isReservedName=function(t,i){if(t)for(var e=0;e<t.length;++e)if(t[e]===i)return!0;return!1},Object.defineProperty(u.prototype,"nestedArray",{get:function(){return this.et||(this.et=c.toArray(this.nested))}}),u.prototype.toJSON=function(t){return c.toObject(["options",this.options,"nested",l(this.nestedArray,t)])},u.prototype.addJSON=function(t){if(t)for(var i,e=Object.keys(t),s=0;s<e.length;++s)i=t[e[s]],this.add((void 0!==i.fields?n.fromJSON:void 0!==i.values?h.fromJSON:void 0!==i.methods?r.fromJSON:void 0!==i.id?o.fromJSON:u.fromJSON)(e[s],i));return this},u.prototype.get=function(t){return this.nested&&this.nested[t]||null},u.prototype.getEnum=function(t){if(this.nested&&this.nested[t]instanceof h)return this.nested[t].values;throw Error("no such enum: "+t)},u.prototype.add=function(t){if(!(t instanceof o&&void 0!==t.extend||t instanceof n||t instanceof h||t instanceof r||t instanceof u||t instanceof a))throw TypeError("object must be a valid nested object");if(this.nested){var i=this.get(t.name);if(i){if(!(i instanceof u&&t instanceof u)||i instanceof n||i instanceof r)throw Error("duplicate name '"+t.name+"' in "+this);for(var e=i.nestedArray,s=0;s<e.length;++s)t.add(e[s]);this.remove(i),this.nested||(this.nested={}),t.setOptions(i.options,!0)}}else this.nested={};return this.nested[t.name]=t,t.onAdd(this),d(this)},u.prototype.remove=function(t){if(!(t instanceof s))throw TypeError("object must be a ReflectionObject");if(t.parent!==this)throw Error(t+" is not a member of "+this);return delete this.nested[t.name],Object.keys(this.nested).length||(this.nested=void 0),t.onRemove(this),d(this)},u.prototype.define=function(t,i){if(c.isString(t))t=t.split(".");else if(!Array.isArray(t))throw TypeError("illegal path");if(t&&t.length&&""===t[0])throw Error("path must be relative");for(var e=this;t.length>0;){var s=t.shift();if(e.nested&&e.nested[s]){if(!((e=e.nested[s])instanceof u))throw Error("path conflicts with non-namespace objects")}else e.add(e=new u(s))}return i&&e.addJSON(i),e},u.prototype.resolveAll=function(){for(var t=this.nestedArray,i=0;i<t.length;)t[i]instanceof u?t[i++].resolveAll():t[i++].resolve();return this.resolve()},u.prototype.lookup=function(t,i,e){if("boolean"==typeof i?(e=i,i=void 0):i&&!Array.isArray(i)&&(i=[i]),c.isString(t)&&t.length){if("."===t)return this.root;t=t.split(".")}else if(!t.length)return this;if(""===t[0])return this.root.lookup(t.slice(1),i);var s=this.get(t[0]);if(s){if(1===t.length){if(!i||i.indexOf(s.constructor)>-1)return s}else if(s instanceof u&&(s=s.lookup(t.slice(1),i,!0)))return s}else for(var n=0;n<this.nestedArray.length;++n)if(this.et[n]instanceof u&&(s=this.et[n].lookup(t,i,!0)))return s;return null===this.parent||e?null:this.parent.lookup(t,i)},u.prototype.lookupType=function(t){var i=this.lookup(t,[n]);if(!i)throw Error("no such type: "+t);return i},u.prototype.lookupEnum=function(t){var i=this.lookup(t,[h]);if(!i)throw Error("no such Enum '"+t+"' in "+this);return i},u.prototype.lookupTypeOrEnum=function(t){var i=this.lookup(t,[n,h]);if(!i)throw Error("no such Type or Enum '"+t+"' in "+this);return i},u.prototype.lookupService=function(t){var i=this.lookup(t,[r]);if(!i)throw Error("no such Service '"+t+"' in "+this);return i},u.it=function(t,i,e){n=t,r=i,h=e}},3243:(t,i,e)=>{"use strict";t.exports=r,r.className="ReflectionObject";var s,n=e(9935);function r(t,i){if(!n.isString(t))throw TypeError("name must be a string");if(i&&!n.isObject(i))throw TypeError("options must be an object");this.options=i,this.parsedOptions=null,this.name=t,this.parent=null,this.resolved=!1,this.comment=null,this.filename=null}Object.defineProperties(r.prototype,{root:{get:function(){for(var t=this;null!==t.parent;)t=t.parent;return t}},fullName:{get:function(){for(var t=[this.name],i=this.parent;i;)t.unshift(i.name),i=i.parent;return t.join(".")}}}),r.prototype.toJSON=function(){throw Error()},r.prototype.onAdd=function(t){this.parent&&this.parent!==t&&this.parent.remove(this),this.parent=t,this.resolved=!1;var i=t.root;i instanceof s&&i.st(this)},r.prototype.onRemove=function(t){var i=t.root;i instanceof s&&i.nt(this),this.parent=null,this.resolved=!1},r.prototype.resolve=function(){return this.resolved||this.root instanceof s&&(this.resolved=!0),this},r.prototype.getOption=function(t){if(this.options)return this.options[t]},r.prototype.setOption=function(t,i,e){return e&&this.options&&void 0!==this.options[t]||((this.options||(this.options={}))[t]=i),this},r.prototype.setParsedOption=function(t,i,e){this.parsedOptions||(this.parsedOptions=[]);var s=this.parsedOptions;if(e){var r=s.find((function(i){return Object.prototype.hasOwnProperty.call(i,t)}));if(r){var h=r[t];n.setProperty(h,e,i)}else(r={})[t]=n.setProperty({},e,i),s.push(r)}else{var o={};o[t]=i,s.push(o)}return this},r.prototype.setOptions=function(t,i){if(t)for(var e=Object.keys(t),s=0;s<e.length;++s)this.setOption(e[s],t[e[s]],i);return this},r.prototype.toString=function(){var t=this.constructor.className,i=this.fullName;return i.length?t+" "+i:t},r.it=function(t){s=t}},7598:(t,i,e)=>{"use strict";t.exports=h;var s=e(3243);((h.prototype=Object.create(s.prototype)).constructor=h).className="OneOf";var n=e(3548),r=e(9935);function h(t,i,e,n){if(Array.isArray(i)||(e=i,i=void 0),s.call(this,t,e),void 0!==i&&!Array.isArray(i))throw TypeError("fieldNames must be an Array");this.oneof=i||[],this.fieldsArray=[],this.comment=n}function o(t){if(t.parent)for(var i=0;i<t.fieldsArray.length;++i)t.fieldsArray[i].parent||t.parent.add(t.fieldsArray[i])}h.fromJSON=function(t,i){return new h(t,i.oneof,i.options,i.comment)},h.prototype.toJSON=function(t){var i=!!t&&Boolean(t.keepComments);return r.toObject(["options",this.options,"oneof",this.oneof,"comment",i?this.comment:void 0])},h.prototype.add=function(t){if(!(t instanceof n))throw TypeError("field must be a Field");return t.parent&&t.parent!==this.parent&&t.parent.remove(t),this.oneof.push(t.name),this.fieldsArray.push(t),t.partOf=this,o(this),this},h.prototype.remove=function(t){if(!(t instanceof n))throw TypeError("field must be a Field");var i=this.fieldsArray.indexOf(t);if(i<0)throw Error(t+" is not a member of "+this);return this.fieldsArray.splice(i,1),(i=this.oneof.indexOf(t.name))>-1&&this.oneof.splice(i,1),t.partOf=null,this},h.prototype.onAdd=function(t){s.prototype.onAdd.call(this,t);for(var i=0;i<this.oneof.length;++i){var e=t.get(this.oneof[i]);e&&!e.partOf&&(e.partOf=this,this.fieldsArray.push(e))}o(this)},h.prototype.onRemove=function(t){for(var i,e=0;e<this.fieldsArray.length;++e)(i=this.fieldsArray[e]).parent&&i.parent.remove(i);s.prototype.onRemove.call(this,t)},h.d=function(){for(var t=new Array(arguments.length),i=0;i<arguments.length;)t[i]=arguments[i++];return function(i,e){r.decorateType(i.constructor).add(new h(e,t)),Object.defineProperty(i,e,{get:r.oneOfGetter(t),set:r.oneOfSetter(t)})}}},1408:(t,i,e)=>{"use strict";t.exports=a;var s,n=e(9693),r=n.LongBits,h=n.utf8;function o(t,i){return RangeError("index out of range: "+t.pos+" + "+(i||1)+" > "+t.len)}function a(t){this.buf=t,this.pos=0,this.len=t.length}var c,l="undefined"!=typeof Uint8Array?function(t){if(t instanceof Uint8Array||Array.isArray(t))return new a(t);throw Error("illegal buffer")}:function(t){if(Array.isArray(t))return new a(t);throw Error("illegal buffer")},u=function(){return n.Buffer?function(t){return(a.create=function(t){return n.Buffer.isBuffer(t)?new s(t):l(t)})(t)}:l};function d(){var t=new r(0,0),i=0;if(!(this.len-this.pos>4)){for(;i<3;++i){if(this.pos>=this.len)throw o(this);if(t.lo=(t.lo|(127&this.buf[this.pos])<<7*i)>>>0,this.buf[this.pos++]<128)return t}return t.lo=(t.lo|(127&this.buf[this.pos++])<<7*i)>>>0,t}for(;i<4;++i)if(t.lo=(t.lo|(127&this.buf[this.pos])<<7*i)>>>0,this.buf[this.pos++]<128)return t;if(t.lo=(t.lo|(127&this.buf[this.pos])<<28)>>>0,t.hi=(t.hi|(127&this.buf[this.pos])>>4)>>>0,this.buf[this.pos++]<128)return t;if(i=0,this.len-this.pos>4){for(;i<5;++i)if(t.hi=(t.hi|(127&this.buf[this.pos])<<7*i+3)>>>0,this.buf[this.pos++]<128)return t}else for(;i<5;++i){if(this.pos>=this.len)throw o(this);if(t.hi=(t.hi|(127&this.buf[this.pos])<<7*i+3)>>>0,this.buf[this.pos++]<128)return t}throw Error("invalid varint encoding")}function p(t,i){return(t[i-4]|t[i-3]<<8|t[i-2]<<16|t[i-1]<<24)>>>0}function f(){if(this.pos+8>this.len)throw o(this,8);return new r(p(this.buf,this.pos+=4),p(this.buf,this.pos+=4))}a.create=u(),a.prototype.rt=n.Array.prototype.subarray||n.Array.prototype.slice,a.prototype.uint32=(c=4294967295,function(){if(c=(127&this.buf[this.pos])>>>0,this.buf[this.pos++]<128)return c;if(c=(c|(127&this.buf[this.pos])<<7)>>>0,this.buf[this.pos++]<128)return c;if(c=(c|(127&this.buf[this.pos])<<14)>>>0,this.buf[this.pos++]<128)return c;if(c=(c|(127&this.buf[this.pos])<<21)>>>0,this.buf[this.pos++]<128)return c;if(c=(c|(15&this.buf[this.pos])<<28)>>>0,this.buf[this.pos++]<128)return c;if((this.pos+=5)>this.len)throw this.pos=this.len,o(this,10);return c}),a.prototype.int32=function(){return 0|this.uint32()},a.prototype.sint32=function(){var t=this.uint32();return t>>>1^-(1&t)|0},a.prototype.bool=function(){return 0!==this.uint32()},a.prototype.fixed32=function(){if(this.pos+4>this.len)throw o(this,4);return p(this.buf,this.pos+=4)},a.prototype.sfixed32=function(){if(this.pos+4>this.len)throw o(this,4);return 0|p(this.buf,this.pos+=4)},a.prototype.float=function(){if(this.pos+4>this.len)throw o(this,4);var t=n.float.readFloatLE(this.buf,this.pos);return this.pos+=4,t},a.prototype.double=function(){if(this.pos+8>this.len)throw o(this,4);var t=n.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,t},a.prototype.bytes=function(){var t=this.uint32(),i=this.pos,e=this.pos+t;if(e>this.len)throw o(this,t);return this.pos+=t,Array.isArray(this.buf)?this.buf.slice(i,e):i===e?new this.buf.constructor(0):this.rt.call(this.buf,i,e)},a.prototype.string=function(){var t=this.bytes();return h.read(t,0,t.length)},a.prototype.skip=function(t){if("number"==typeof t){if(this.pos+t>this.len)throw o(this,t);this.pos+=t}else do{if(this.pos>=this.len)throw o(this)}while(128&this.buf[this.pos++]);return this},a.prototype.skipType=function(t){switch(t){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;4!=(t=7&this.uint32());)this.skipType(t);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+t+" at offset "+this.pos)}return this},a.it=function(t){s=t,a.create=u(),s.it();var i=n.Long?"toLong":"toNumber";n.merge(a.prototype,{int64:function(){return d.call(this)[i](!1)},uint64:function(){return d.call(this)[i](!0)},sint64:function(){return d.call(this).zzDecode()[i](!1)},fixed64:function(){return f.call(this)[i](!0)},sfixed64:function(){return f.call(this)[i](!1)}})}},593:(t,i,e)=>{"use strict";t.exports=r;var s=e(1408);(r.prototype=Object.create(s.prototype)).constructor=r;var n=e(9693);function r(t){s.call(this,t)}r.it=function(){n.Buffer&&(r.prototype.rt=n.Buffer.prototype.slice)},r.prototype.string=function(){var t=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+t,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+t,this.len))},r.it()},9424:(t,i,e)=>{"use strict";t.exports=u;var s=e(9313);((u.prototype=Object.create(s.prototype)).constructor=u).className="Root";var n,r,h,o=e(3548),a=e(7025),c=e(7598),l=e(9935);function u(t){s.call(this,"",t),this.deferred=[],this.files=[]}function d(){}u.fromJSON=function(t,i){return i||(i=new u),t.options&&i.setOptions(t.options),i.addJSON(t.nested)},u.prototype.resolvePath=l.path.resolve,u.prototype.fetch=l.fetch,u.prototype.load=function t(i,e,s){"function"==typeof e&&(s=e,e=void 0);var n=this;if(!s)return l.asPromise(t,n,i,e);var o=s===d;function a(t,i){if(s){var e=s;if(s=null,o)throw t;e(t,i)}}function c(t){var i=t.lastIndexOf("google/protobuf/");if(i>-1){var e=t.substring(i);if(e in h)return e}return null}function u(t,i){try{if(l.isString(i)&&"{"===i.charAt(0)&&(i=JSON.parse(i)),l.isString(i)){r.filename=t;var s,h=r(i,n,e),u=0;if(h.imports)for(;u<h.imports.length;++u)(s=c(h.imports[u])||n.resolvePath(t,h.imports[u]))&&p(s);if(h.weakImports)for(u=0;u<h.weakImports.length;++u)(s=c(h.weakImports[u])||n.resolvePath(t,h.weakImports[u]))&&p(s,!0)}else n.setOptions(i.options).addJSON(i.nested)}catch(t){a(t)}o||f||a(null,n)}function p(t,i){if(!(n.files.indexOf(t)>-1))if(n.files.push(t),t in h)o?u(t,h[t]):(++f,setTimeout((function(){--f,u(t,h[t])})));else if(o){var e;try{e=l.fs.readFileSync(t).toString("utf8")}catch(t){return void(i||a(t))}u(t,e)}else++f,n.fetch(t,(function(e,r){--f,s&&(e?i?f||a(null,n):a(e):u(t,r))}))}var f=0;l.isString(i)&&(i=[i]);for(var m,g=0;g<i.length;++g)(m=n.resolvePath("",i[g]))&&p(m);if(o)return n;f||a(null,n)},u.prototype.loadSync=function(t,i){if(!l.isNode)throw Error("not supported");return this.load(t,i,d)},u.prototype.resolveAll=function(){if(this.deferred.length)throw Error("unresolvable extensions: "+this.deferred.map((function(t){return"'extend "+t.extend+"' in "+t.parent.fullName})).join(", "));return s.prototype.resolveAll.call(this)};var p=/^[A-Z]/;function f(t,i){var e=i.parent.lookup(i.extend);if(e){var s=new o(i.fullName,i.id,i.type,i.rule,void 0,i.options);return s.declaringField=i,i.extensionField=s,e.add(s),!0}return!1}u.prototype.st=function(t){if(t instanceof o)void 0===t.extend||t.extensionField||f(0,t)||this.deferred.push(t);else if(t instanceof a)p.test(t.name)&&(t.parent[t.name]=t.values);else if(!(t instanceof c)){if(t instanceof n)for(var i=0;i<this.deferred.length;)f(0,this.deferred[i])?this.deferred.splice(i,1):++i;for(var e=0;e<t.nestedArray.length;++e)this.st(t.et[e]);p.test(t.name)&&(t.parent[t.name]=t)}},u.prototype.nt=function(t){if(t instanceof o){if(void 0!==t.extend)if(t.extensionField)t.extensionField.parent.remove(t.extensionField),t.extensionField=null;else{var i=this.deferred.indexOf(t);i>-1&&this.deferred.splice(i,1)}}else if(t instanceof a)p.test(t.name)&&delete t.parent[t.name];else if(t instanceof s){for(var e=0;e<t.nestedArray.length;++e)this.nt(t.et[e]);p.test(t.name)&&delete t.parent[t.name]}},u.it=function(t,i,e){n=t,r=i,h=e}},5054:t=>{"use strict";t.exports={}},5994:(t,i,e)=>{"use strict";i.Service=e(7948)},7948:(t,i,e)=>{"use strict";t.exports=n;var s=e(9693);function n(t,i,e){if("function"!=typeof t)throw TypeError("rpcImpl must be a function");s.EventEmitter.call(this),this.rpcImpl=t,this.requestDelimited=Boolean(i),this.responseDelimited=Boolean(e)}(n.prototype=Object.create(s.EventEmitter.prototype)).constructor=n,n.prototype.rpcCall=function t(i,e,n,r,h){if(!r)throw TypeError("request must be specified");var o=this;if(!h)return s.asPromise(t,o,i,e,n,r);if(o.rpcImpl)try{return o.rpcImpl(i,e[o.requestDelimited?"encodeDelimited":"encode"](r).finish(),(function(t,e){if(t)return o.emit("error",t,i),h(t);if(null!==e){if(!(e instanceof n))try{e=n[o.responseDelimited?"decodeDelimited":"decode"](e)}catch(t){return o.emit("error",t,i),h(t)}return o.emit("data",e,i),h(null,e)}o.end(!0)}))}catch(t){return o.emit("error",t,i),void setTimeout((function(){h(t)}),0)}else setTimeout((function(){h(Error("already ended"))}),0)},n.prototype.end=function(t){return this.rpcImpl&&(t||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this}},7513:(t,i,e)=>{"use strict";t.exports=o;var s=e(9313);((o.prototype=Object.create(s.prototype)).constructor=o).className="Service";var n=e(4429),r=e(9935),h=e(5994);function o(t,i){s.call(this,t,i),this.methods={},this.ht=null}function a(t){return t.ht=null,t}o.fromJSON=function(t,i){var e=new o(t,i.options);if(i.methods)for(var s=Object.keys(i.methods),r=0;r<s.length;++r)e.add(n.fromJSON(s[r],i.methods[s[r]]));return i.nested&&e.addJSON(i.nested),e.comment=i.comment,e},o.prototype.toJSON=function(t){var i=s.prototype.toJSON.call(this,t),e=!!t&&Boolean(t.keepComments);return r.toObject(["options",i&&i.options||void 0,"methods",s.arrayToJSON(this.methodsArray,t)||{},"nested",i&&i.nested||void 0,"comment",e?this.comment:void 0])},Object.defineProperty(o.prototype,"methodsArray",{get:function(){return this.ht||(this.ht=r.toArray(this.methods))}}),o.prototype.get=function(t){return this.methods[t]||s.prototype.get.call(this,t)},o.prototype.resolveAll=function(){for(var t=this.methodsArray,i=0;i<t.length;++i)t[i].resolve();return s.prototype.resolve.call(this)},o.prototype.add=function(t){if(this.get(t.name))throw Error("duplicate name '"+t.name+"' in "+this);return t instanceof n?(this.methods[t.name]=t,t.parent=this,a(this)):s.prototype.add.call(this,t)},o.prototype.remove=function(t){if(t instanceof n){if(this.methods[t.name]!==t)throw Error(t+" is not a member of "+this);return delete this.methods[t.name],t.parent=null,a(this)}return s.prototype.remove.call(this,t)},o.prototype.create=function(t,i,e){for(var s,n=new h.Service(t,i,e),o=0;o<this.methodsArray.length;++o){var a=r.lcFirst((s=this.ht[o]).resolve().name).replace(/[^$\w_]/g,"");n[a]=r.codegen(["r","c"],r.isReserved(a)?a+"_":a)("return this.rpcCall(m,q,s,r,c)")({m:s,q:s.resolvedRequestType.ctor,s:s.resolvedResponseType.ctor})}return n}},7645:(t,i,e)=>{"use strict";t.exports=y;var s=e(9313);((y.prototype=Object.create(s.prototype)).constructor=y).className="Type";var n=e(7025),r=e(7598),h=e(3548),o=e(6039),a=e(7513),c=e(8368),l=e(1408),u=e(1173),d=e(9935),p=e(4928),f=e(5305),m=e(4497),g=e(3996),v=e(1667);function y(t,i){s.call(this,t,i),this.fields={},this.oneofs=void 0,this.extensions=void 0,this.reserved=void 0,this.group=void 0,this.ot=null,this.K=null,this.ct=null,this.lt=null}function b(t){return t.ot=t.K=t.ct=null,delete t.encode,delete t.decode,delete t.verify,t}Object.defineProperties(y.prototype,{fieldsById:{get:function(){if(this.ot)return this.ot;this.ot={};for(var t=Object.keys(this.fields),i=0;i<t.length;++i){var e=this.fields[t[i]],s=e.id;if(this.ot[s])throw Error("duplicate id "+s+" in "+this);this.ot[s]=e}return this.ot}},fieldsArray:{get:function(){return this.K||(this.K=d.toArray(this.fields))}},oneofsArray:{get:function(){return this.ct||(this.ct=d.toArray(this.oneofs))}},ctor:{get:function(){return this.lt||(this.ctor=y.generateConstructor(this)())},set:function(t){var i=t.prototype;i instanceof c||((t.prototype=new c).constructor=t,d.merge(t.prototype,i)),t.$type=t.prototype.$type=this,d.merge(t,c,!0),this.lt=t;for(var e=0;e<this.fieldsArray.length;++e)this.K[e].resolve();var s={};for(e=0;e<this.oneofsArray.length;++e)s[this.ct[e].resolve().name]={get:d.oneOfGetter(this.ct[e].oneof),set:d.oneOfSetter(this.ct[e].oneof)};e&&Object.defineProperties(t.prototype,s)}}}),y.generateConstructor=function(t){for(var i,e=d.codegen(["p"],t.name),s=0;s<t.fieldsArray.length;++s)(i=t.K[s]).map?e("this%s={}",d.safeProp(i.name)):i.repeated&&e("this%s=[]",d.safeProp(i.name));return e("if(p)for(var ks=Object.keys(p),i=0;i<ks.length;++i)if(p[ks[i]]!=null)")("this[ks[i]]=p[ks[i]]")},y.fromJSON=function(t,i){var e=new y(t,i.options);e.extensions=i.extensions,e.reserved=i.reserved;for(var c=Object.keys(i.fields),l=0;l<c.length;++l)e.add((void 0!==i.fields[c[l]].keyType?o.fromJSON:h.fromJSON)(c[l],i.fields[c[l]]));if(i.oneofs)for(c=Object.keys(i.oneofs),l=0;l<c.length;++l)e.add(r.fromJSON(c[l],i.oneofs[c[l]]));if(i.nested)for(c=Object.keys(i.nested),l=0;l<c.length;++l){var u=i.nested[c[l]];e.add((void 0!==u.id?h.fromJSON:void 0!==u.fields?y.fromJSON:void 0!==u.values?n.fromJSON:void 0!==u.methods?a.fromJSON:s.fromJSON)(c[l],u))}return i.extensions&&i.extensions.length&&(e.extensions=i.extensions),i.reserved&&i.reserved.length&&(e.reserved=i.reserved),i.group&&(e.group=!0),i.comment&&(e.comment=i.comment),e},y.prototype.toJSON=function(t){var i=s.prototype.toJSON.call(this,t),e=!!t&&Boolean(t.keepComments);return d.toObject(["options",i&&i.options||void 0,"oneofs",s.arrayToJSON(this.oneofsArray,t),"fields",s.arrayToJSON(this.fieldsArray.filter((function(t){return!t.declaringField})),t)||{},"extensions",this.extensions&&this.extensions.length?this.extensions:void 0,"reserved",this.reserved&&this.reserved.length?this.reserved:void 0,"group",this.group||void 0,"nested",i&&i.nested||void 0,"comment",e?this.comment:void 0])},y.prototype.resolveAll=function(){for(var t=this.fieldsArray,i=0;i<t.length;)t[i++].resolve();var e=this.oneofsArray;for(i=0;i<e.length;)e[i++].resolve();return s.prototype.resolveAll.call(this)},y.prototype.get=function(t){return this.fields[t]||this.oneofs&&this.oneofs[t]||this.nested&&this.nested[t]||null},y.prototype.add=function(t){if(this.get(t.name))throw Error("duplicate name '"+t.name+"' in "+this);if(t instanceof h&&void 0===t.extend){if(this.ot?this.ot[t.id]:this.fieldsById[t.id])throw Error("duplicate id "+t.id+" in "+this);if(this.isReservedId(t.id))throw Error("id "+t.id+" is reserved in "+this);if(this.isReservedName(t.name))throw Error("name '"+t.name+"' is reserved in "+this);return t.parent&&t.parent.remove(t),this.fields[t.name]=t,t.message=this,t.onAdd(this),b(this)}return t instanceof r?(this.oneofs||(this.oneofs={}),this.oneofs[t.name]=t,t.onAdd(this),b(this)):s.prototype.add.call(this,t)},y.prototype.remove=function(t){if(t instanceof h&&void 0===t.extend){if(!this.fields||this.fields[t.name]!==t)throw Error(t+" is not a member of "+this);return delete this.fields[t.name],t.parent=null,t.onRemove(this),b(this)}if(t instanceof r){if(!this.oneofs||this.oneofs[t.name]!==t)throw Error(t+" is not a member of "+this);return delete this.oneofs[t.name],t.parent=null,t.onRemove(this),b(this)}return s.prototype.remove.call(this,t)},y.prototype.isReservedId=function(t){return s.isReservedId(this.reserved,t)},y.prototype.isReservedName=function(t){return s.isReservedName(this.reserved,t)},y.prototype.create=function(t){return new this.ctor(t)},y.prototype.setup=function(){for(var t=this.fullName,i=[],e=0;e<this.fieldsArray.length;++e)i.push(this.K[e].resolve().resolvedType);this.encode=p(this)({Writer:u,types:i,util:d}),this.decode=f(this)({Reader:l,types:i,util:d}),this.verify=m(this)({types:i,util:d}),this.fromObject=g.fromObject(this)({types:i,util:d}),this.toObject=g.toObject(this)({types:i,util:d});var s=v[t];if(s){var n=Object.create(this);n.fromObject=this.fromObject,this.fromObject=s.fromObject.bind(n),n.toObject=this.toObject,this.toObject=s.toObject.bind(n)}return this},y.prototype.encode=function(t,i){return this.setup().encode(t,i)},y.prototype.encodeDelimited=function(t,i){return this.encode(t,i&&i.len?i.fork():i).ldelim()},y.prototype.decode=function(t,i){return this.setup().decode(t,i)},y.prototype.decodeDelimited=function(t){return t instanceof l||(t=l.create(t)),this.decode(t,t.uint32())},y.prototype.verify=function(t){return this.setup().verify(t)},y.prototype.fromObject=function(t){return this.setup().fromObject(t)},y.prototype.toObject=function(t,i){return this.setup().toObject(t,i)},y.d=function(t){return function(i){d.decorateType(i,t)}}},7063:(t,i,e)=>{"use strict";var s=i,n=e(9935),r=["double","float","int32","uint32","sint32","fixed32","sfixed32","int64","uint64","sint64","fixed64","sfixed64","bool","string","bytes"];function h(t,i){var e=0,s={};for(i|=0;e<t.length;)s[r[e+i]]=t[e++];return s}s.basic=h([1,5,0,0,0,5,5,0,0,0,1,1,0,2,2]),s.defaults=h([0,0,0,0,0,0,0,0,0,0,0,0,!1,"",n.emptyArray,null]),s.long=h([0,0,0,1,1],7),s.mapKey=h([0,0,0,5,5,0,0,0,1,1,0,2],2),s.packed=h([1,5,0,0,0,5,5,0,0,0,1,1,0])},9935:(t,i,e)=>{"use strict";var s,n,r=t.exports=e(9693),h=e(5054);r.codegen=e(5124),r.fetch=e(9054),r.path=e(8626),r.fs=r.inquire("fs"),r.toArray=function(t){if(t){for(var i=Object.keys(t),e=new Array(i.length),s=0;s<i.length;)e[s]=t[i[s++]];return e}return[]},r.toObject=function(t){for(var i={},e=0;e<t.length;){var s=t[e++],n=t[e++];void 0!==n&&(i[s]=n)}return i};var o=/\\/g,a=/"/g;r.isReserved=function(t){return/^(?:do|if|in|for|let|new|try|var|case|else|enum|eval|false|null|this|true|void|with|break|catch|class|const|super|throw|while|yield|delete|export|import|public|return|static|switch|typeof|default|extends|finally|package|private|continue|debugger|function|arguments|interface|protected|implements|instanceof)$/.test(t)},r.safeProp=function(t){return!/^[$\w_]+$/.test(t)||r.isReserved(t)?'["'+t.replace(o,"\\\\").replace(a,'\\"')+'"]':"."+t},r.ucFirst=function(t){return t.charAt(0).toUpperCase()+t.substring(1)};var c=/_([a-z])/g;r.camelCase=function(t){return t.substring(0,1)+t.substring(1).replace(c,(function(t,i){return i.toUpperCase()}))},r.compareFieldsById=function(t,i){return t.id-i.id},r.decorateType=function(t,i){if(t.$type)return i&&t.$type.name!==i&&(r.decorateRoot.remove(t.$type),t.$type.name=i,r.decorateRoot.add(t.$type)),t.$type;s||(s=e(7645));var n=new s(i||t.name);return r.decorateRoot.add(n),n.ctor=t,Object.defineProperty(t,"$type",{value:n,enumerable:!1}),Object.defineProperty(t.prototype,"$type",{value:n,enumerable:!1}),n};var l=0;r.decorateEnum=function(t){if(t.$type)return t.$type;n||(n=e(7025));var i=new n("Enum"+l++,t);return r.decorateRoot.add(i),Object.defineProperty(t,"$type",{value:i,enumerable:!1}),i},r.setProperty=function(t,i,e){if("object"!=typeof t)throw TypeError("dst must be an object");if(!i)throw TypeError("path must be specified");return function t(i,e,s){var n=e.shift();if(e.length>0)i[n]=t(i[n]||{},e,s);else{var r=i[n];r&&(s=[].concat(r).concat(s)),i[n]=s}return i}(t,i=i.split("."),e)},Object.defineProperty(r,"decorateRoot",{get:function(){return h.decorated||(h.decorated=new(e(9424)))}})},1945:(t,i,e)=>{"use strict";t.exports=n;var s=e(9693);function n(t,i){this.lo=t>>>0,this.hi=i>>>0}var r=n.zero=new n(0,0);r.toNumber=function(){return 0},r.zzEncode=r.zzDecode=function(){return this},r.length=function(){return 1};var h=n.zeroHash="\0\0\0\0\0\0\0\0";n.fromNumber=function(t){if(0===t)return r;var i=t<0;i&&(t=-t);var e=t>>>0,s=(t-e)/4294967296>>>0;return i&&(s=~s>>>0,e=~e>>>0,++e>4294967295&&(e=0,++s>4294967295&&(s=0))),new n(e,s)},n.from=function(t){if("number"==typeof t)return n.fromNumber(t);if(s.isString(t)){if(!s.Long)return n.fromNumber(parseInt(t,10));t=s.Long.fromString(t)}return t.low||t.high?new n(t.low>>>0,t.high>>>0):r},n.prototype.toNumber=function(t){if(!t&&this.hi>>>31){var i=1+~this.lo>>>0,e=~this.hi>>>0;return i||(e=e+1>>>0),-(i+4294967296*e)}return this.lo+4294967296*this.hi},n.prototype.toLong=function(t){return s.Long?new s.Long(0|this.lo,0|this.hi,Boolean(t)):{low:0|this.lo,high:0|this.hi,unsigned:Boolean(t)}};var o=String.prototype.charCodeAt;n.fromHash=function(t){return t===h?r:new n((o.call(t,0)|o.call(t,1)<<8|o.call(t,2)<<16|o.call(t,3)<<24)>>>0,(o.call(t,4)|o.call(t,5)<<8|o.call(t,6)<<16|o.call(t,7)<<24)>>>0)},n.prototype.toHash=function(){return String.fromCharCode(255&this.lo,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,255&this.hi,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)},n.prototype.zzEncode=function(){var t=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^t)>>>0,this.lo=(this.lo<<1^t)>>>0,this},n.prototype.zzDecode=function(){var t=-(1&this.lo);return this.lo=((this.lo>>>1|this.hi<<31)^t)>>>0,this.hi=(this.hi>>>1^t)>>>0,this},n.prototype.length=function(){var t=this.lo,i=(this.lo>>>28|this.hi<<4)>>>0,e=this.hi>>>24;return 0===e?0===i?t<16384?t<128?1:2:t<2097152?3:4:i<16384?i<128?5:6:i<2097152?7:8:e<128?9:10}},9693:function(t,i,e){"use strict";var s=i;function n(t,i,e){for(var s=Object.keys(i),n=0;n<s.length;++n)void 0!==t[s[n]]&&e||(t[s[n]]=i[s[n]]);return t}function r(t){function i(t,e){if(!(this instanceof i))return new i(t,e);Object.defineProperty(this,"message",{get:function(){return t}}),Error.captureStackTrace?Error.captureStackTrace(this,i):Object.defineProperty(this,"stack",{value:(new Error).stack||""}),e&&n(this,e)}return(i.prototype=Object.create(Error.prototype)).constructor=i,Object.defineProperty(i.prototype,"name",{get:function(){return t}}),i.prototype.toString=function(){return this.name+": "+this.message},i}s.asPromise=e(4537),s.base64=e(7419),s.EventEmitter=e(9211),s.float=e(945),s.inquire=e(7199),s.utf8=e(4997),s.pool=e(6662),s.LongBits=e(1945),s.isNode=Boolean(void 0!==e.g&&e.g&&e.g.process&&e.g.process.versions&&e.g.process.versions.node),s.global=s.isNode&&e.g||"undefined"!=typeof window&&window||"undefined"!=typeof self&&self||this,s.emptyArray=Object.freeze?Object.freeze([]):[],s.emptyObject=Object.freeze?Object.freeze({}):{},s.isInteger=Number.isInteger||function(t){return"number"==typeof t&&isFinite(t)&&Math.floor(t)===t},s.isString=function(t){return"string"==typeof t||t instanceof String},s.isObject=function(t){return t&&"object"==typeof t},s.isset=s.isSet=function(t,i){var e=t[i];return!(null==e||!t.hasOwnProperty(i))&&("object"!=typeof e||(Array.isArray(e)?e.length:Object.keys(e).length)>0)},s.Buffer=function(){try{var t=s.inquire("buffer").Buffer;return t.prototype.utf8Write?t:null}catch(t){return null}}(),s.ut=null,s.dt=null,s.newBuffer=function(t){return"number"==typeof t?s.Buffer?s.dt(t):new s.Array(t):s.Buffer?s.ut(t):"undefined"==typeof Uint8Array?t:new Uint8Array(t)},s.Array="undefined"!=typeof Uint8Array?Uint8Array:Array,s.Long=s.global.dcodeIO&&s.global.dcodeIO.Long||s.global.Long||s.inquire("long"),s.key2Re=/^true|false|0|1$/,s.key32Re=/^-?(?:0|[1-9][0-9]*)$/,s.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,s.longToHash=function(t){return t?s.LongBits.from(t).toHash():s.LongBits.zeroHash},s.longFromHash=function(t,i){var e=s.LongBits.fromHash(t);return s.Long?s.Long.fromBits(e.lo,e.hi,i):e.toNumber(Boolean(i))},s.merge=n,s.lcFirst=function(t){return t.charAt(0).toLowerCase()+t.substring(1)},s.newError=r,s.ProtocolError=r("ProtocolError"),s.oneOfGetter=function(t){for(var i={},e=0;e<t.length;++e)i[t[e]]=1;return function(){for(var t=Object.keys(this),e=t.length-1;e>-1;--e)if(1===i[t[e]]&&void 0!==this[t[e]]&&null!==this[t[e]])return t[e]}},s.oneOfSetter=function(t){return function(i){for(var e=0;e<t.length;++e)t[e]!==i&&delete this[t[e]]}},s.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},s.it=function(){var t=s.Buffer;t?(s.ut=t.from!==Uint8Array.from&&t.from||function(i,e){return new t(i,e)},s.dt=t.allocUnsafe||function(i){return new t(i)}):s.ut=s.dt=null}},4497:(t,i,e)=>{"use strict";t.exports=function(t){var i=n.codegen(["m"],t.name+"$verify")('if(typeof m!=="object"||m===null)')("return%j","object expected"),e=t.oneofsArray,s={};e.length&&i("var p={}");for(var a=0;a<t.fieldsArray.length;++a){var c=t.K[a].resolve(),l="m"+n.safeProp(c.name);if(c.optional&&i("if(%s!=null&&m.hasOwnProperty(%j)){",l,c.name),c.map)i("if(!util.isObject(%s))",l)("return%j",r(c,"object"))("var k=Object.keys(%s)",l)("for(var i=0;i<k.length;++i){"),o(i,c,"k[i]"),h(i,c,a,l+"[k[i]]")("}");else if(c.repeated)i("if(!Array.isArray(%s))",l)("return%j",r(c,"array"))("for(var i=0;i<%s.length;++i){",l),h(i,c,a,l+"[i]")("}");else{if(c.partOf){var u=n.safeProp(c.partOf.name);1===s[c.partOf.name]&&i("if(p%s===1)",u)("return%j",c.partOf.name+": multiple values"),s[c.partOf.name]=1,i("p%s=1",u)}h(i,c,a,l)}c.optional&&i("}")}return i("return null")};var s=e(7025),n=e(9935);function r(t,i){return t.name+": "+i+(t.repeated&&"array"!==i?"[]":t.map&&"object"!==i?"{k:"+t.keyType+"}":"")+" expected"}function h(t,i,e,n){if(i.resolvedType)if(i.resolvedType instanceof s){t("switch(%s){",n)("default:")("return%j",r(i,"enum value"));for(var h=Object.keys(i.resolvedType.values),o=0;o<h.length;++o)t("case %i:",i.resolvedType.values[h[o]]);t("break")("}")}else t("{")("var e=types[%i].verify(%s);",e,n)("if(e)")("return%j+e",i.name+".")("}");else switch(i.type){case"int32":case"uint32":case"sint32":case"fixed32":case"sfixed32":t("if(!util.isInteger(%s))",n)("return%j",r(i,"integer"));break;case"int64":case"uint64":case"sint64":case"fixed64":case"sfixed64":t("if(!util.isInteger(%s)&&!(%s&&util.isInteger(%s.low)&&util.isInteger(%s.high)))",n,n,n,n)("return%j",r(i,"integer|Long"));break;case"float":case"double":t('if(typeof %s!=="number")',n)("return%j",r(i,"number"));break;case"bool":t('if(typeof %s!=="boolean")',n)("return%j",r(i,"boolean"));break;case"string":t("if(!util.isString(%s))",n)("return%j",r(i,"string"));break;case"bytes":t('if(!(%s&&typeof %s.length==="number"||util.isString(%s)))',n,n,n)("return%j",r(i,"buffer"))}return t}function o(t,i,e){switch(i.keyType){case"int32":case"uint32":case"sint32":case"fixed32":case"sfixed32":t("if(!util.key32Re.test(%s))",e)("return%j",r(i,"integer key"));break;case"int64":case"uint64":case"sint64":case"fixed64":case"sfixed64":t("if(!util.key64Re.test(%s))",e)("return%j",r(i,"integer|Long key"));break;case"bool":t("if(!util.key2Re.test(%s))",e)("return%j",r(i,"boolean key"))}return t}},1667:(t,i,e)=>{"use strict";var s=i,n=e(8368);s[".google.protobuf.Any"]={fromObject:function(t){if(t&&t["@type"]){var i=t["@type"].substring(t["@type"].lastIndexOf("/")+1),e=this.lookup(i);if(e){var s="."===t["@type"].charAt(0)?t["@type"].substr(1):t["@type"];return-1===s.indexOf("/")&&(s="/"+s),this.create({type_url:s,value:e.encode(e.fromObject(t)).finish()})}}return this.fromObject(t)},toObject:function(t,i){var e="",s="";if(i&&i.json&&t.type_url&&t.value){s=t.type_url.substring(t.type_url.lastIndexOf("/")+1),e=t.type_url.substring(0,t.type_url.lastIndexOf("/")+1);var r=this.lookup(s);r&&(t=r.decode(t.value))}if(!(t instanceof this.ctor)&&t instanceof n){var h=t.$type.toObject(t,i);return""===e&&(e="type.googleapis.com/"),s=e+("."===t.$type.fullName[0]?t.$type.fullName.substr(1):t.$type.fullName),h["@type"]=s,h}return this.toObject(t,i)}}},1173:(t,i,e)=>{"use strict";t.exports=u;var s,n=e(9693),r=n.LongBits,h=n.base64,o=n.utf8;function a(t,i,e){this.fn=t,this.len=i,this.next=void 0,this.val=e}function c(){}function l(t){this.head=t.head,this.tail=t.tail,this.len=t.len,this.next=t.states}function u(){this.len=0,this.head=new a(c,0,0),this.tail=this.head,this.states=null}var d=function(){return n.Buffer?function(){return(u.create=function(){return new s})()}:function(){return new u}};function p(t,i,e){i[e]=255&t}function f(t,i){this.len=t,this.next=void 0,this.val=i}function m(t,i,e){for(;t.hi;)i[e++]=127&t.lo|128,t.lo=(t.lo>>>7|t.hi<<25)>>>0,t.hi>>>=7;for(;t.lo>127;)i[e++]=127&t.lo|128,t.lo=t.lo>>>7;i[e++]=t.lo}function g(t,i,e){i[e]=255&t,i[e+1]=t>>>8&255,i[e+2]=t>>>16&255,i[e+3]=t>>>24}u.create=d(),u.alloc=function(t){return new n.Array(t)},n.Array!==Array&&(u.alloc=n.pool(u.alloc,n.Array.prototype.subarray)),u.prototype.ft=function(t,i,e){return this.tail=this.tail.next=new a(t,i,e),this.len+=i,this},f.prototype=Object.create(a.prototype),f.prototype.fn=function(t,i,e){for(;t>127;)i[e++]=127&t|128,t>>>=7;i[e]=t},u.prototype.uint32=function(t){return this.len+=(this.tail=this.tail.next=new f((t>>>=0)<128?1:t<16384?2:t<2097152?3:t<268435456?4:5,t)).len,this},u.prototype.int32=function(t){return t<0?this.ft(m,10,r.fromNumber(t)):this.uint32(t)},u.prototype.sint32=function(t){return this.uint32((t<<1^t>>31)>>>0)},u.prototype.uint64=function(t){var i=r.from(t);return this.ft(m,i.length(),i)},u.prototype.int64=u.prototype.uint64,u.prototype.sint64=function(t){var i=r.from(t).zzEncode();return this.ft(m,i.length(),i)},u.prototype.bool=function(t){return this.ft(p,1,t?1:0)},u.prototype.fixed32=function(t){return this.ft(g,4,t>>>0)},u.prototype.sfixed32=u.prototype.fixed32,u.prototype.fixed64=function(t){var i=r.from(t);return this.ft(g,4,i.lo).ft(g,4,i.hi)},u.prototype.sfixed64=u.prototype.fixed64,u.prototype.float=function(t){return this.ft(n.float.writeFloatLE,4,t)},u.prototype.double=function(t){return this.ft(n.float.writeDoubleLE,8,t)};var v=n.Array.prototype.set?function(t,i,e){i.set(t,e)}:function(t,i,e){for(var s=0;s<t.length;++s)i[e+s]=t[s]};u.prototype.bytes=function(t){var i=t.length>>>0;if(!i)return this.ft(p,1,0);if(n.isString(t)){var e=u.alloc(i=h.length(t));h.decode(t,e,0),t=e}return this.uint32(i).ft(v,i,t)},u.prototype.string=function(t){var i=o.length(t);return i?this.uint32(i).ft(o.write,i,t):this.ft(p,1,0)},u.prototype.fork=function(){return this.states=new l(this),this.head=this.tail=new a(c,0,0),this.len=0,this},u.prototype.reset=function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new a(c,0,0),this.len=0),this},u.prototype.ldelim=function(){var t=this.head,i=this.tail,e=this.len;return this.reset().uint32(e),e&&(this.tail.next=t.next,this.tail=i,this.len+=e),this},u.prototype.finish=function(){for(var t=this.head.next,i=this.constructor.alloc(this.len),e=0;t;)t.fn(t.val,i,e),e+=t.len,t=t.next;return i},u.it=function(t){s=t,u.create=d(),s.it()}},3155:(t,i,e)=>{"use strict";t.exports=r;var s=e(1173);(r.prototype=Object.create(s.prototype)).constructor=r;var n=e(9693);function r(){s.call(this)}function h(t,i,e){t.length<40?n.utf8.write(t,i,e):i.utf8Write?i.utf8Write(t,e):i.write(t,e)}r.it=function(){r.alloc=n.dt,r.writeBytesBuffer=n.Buffer&&n.Buffer.prototype instanceof Uint8Array&&"set"===n.Buffer.prototype.set.name?function(t,i,e){i.set(t,e)}:function(t,i,e){if(t.copy)t.copy(i,e,0,t.length);else for(var s=0;s<t.length;)i[e++]=t[s++]}},r.prototype.bytes=function(t){n.isString(t)&&(t=n.ut(t,"base64"));var i=t.length>>>0;return this.uint32(i),i&&this.ft(r.writeBytesBuffer,i,t),this},r.prototype.string=function(t){var i=n.Buffer.byteLength(t);return this.uint32(i),i&&this.ft(h,i,t),this},r.it()},8660:(t,i,e)=>{var s;!function(t){!function(i){var s="object"==typeof e.g?e.g:"object"==typeof self?self:"object"==typeof this?this:Function("return this;")(),n=r(t);function r(t,i){return function(e,s){"function"!=typeof t[e]&&Object.defineProperty(t,e,{configurable:!0,writable:!0,value:s}),i&&i(e,s)}}void 0===s.Reflect?s.Reflect=t:n=r(s.Reflect,n),function(t){var i=Object.prototype.hasOwnProperty,e="function"==typeof Symbol,s=e&&void 0!==Symbol.toPrimitive?Symbol.toPrimitive:"@@toPrimitive",n=e&&void 0!==Symbol.iterator?Symbol.iterator:"@@iterator",r="function"==typeof Object.create,h={__proto__:[]}instanceof Array,o=!r&&!h,a={create:r?function(){return st(Object.create(null))}:h?function(){return st({__proto__:null})}:function(){return st({})},has:o?function(t,e){return i.call(t,e)}:function(t,i){return i in t},get:o?function(t,e){return i.call(t,e)?t[e]:void 0}:function(t,i){return t[i]}},c=Object.getPrototypeOf(Function),l="object"==typeof process&&{DEBUG_MODE:!1}&&"true"==={DEBUG_MODE:!1}.REFLECT_METADATA_USE_MAP_POLYFILL,u=l||"function"!=typeof Map||"function"!=typeof Map.prototype.entries?tt():Map,d=l||"function"!=typeof Set||"function"!=typeof Set.prototype.entries?it():Set,p=new(l||"function"!=typeof WeakMap?et():WeakMap);function f(t,i,e,s){if(R(e)){if(!q(t))throw new TypeError;if(!W(i))throw new TypeError;return P(t,i)}if(!q(t))throw new TypeError;if(!F(i))throw new TypeError;if(!F(s)&&!R(s)&&!D(s))throw new TypeError;return D(s)&&(s=void 0),A(t,i,e=H(e),s)}function m(t,i){function e(e,s){if(!F(e))throw new TypeError;if(!R(s)&&!G(s))throw new TypeError;E(t,i,e,s)}return e}function g(t,i,e,s){if(!F(e))throw new TypeError;return R(s)||(s=H(s)),E(t,i,e,s)}function v(t,i,e){if(!F(i))throw new TypeError;return R(e)||(e=H(e)),k(t,i,e)}function y(t,i,e){if(!F(i))throw new TypeError;return R(e)||(e=H(e)),C(t,i,e)}function b(t,i,e){if(!F(i))throw new TypeError;return R(e)||(e=H(e)),T(t,i,e)}function x(t,i,e){if(!F(i))throw new TypeError;return R(e)||(e=H(e)),M(t,i,e)}function w(t,i){if(!F(t))throw new TypeError;return R(i)||(i=H(i)),B(t,i)}function _(t,i){if(!F(t))throw new TypeError;return R(i)||(i=H(i)),O(t,i)}function S(t,i,e){if(!F(i))throw new TypeError;R(e)||(e=H(e));var s=I(i,e,!1);if(R(s))return!1;if(!s.delete(t))return!1;if(s.size>0)return!0;var n=p.get(i);return n.delete(e),n.size>0||p.delete(i),!0}function P(t,i){for(var e=t.length-1;e>=0;--e){var s=(0,t[e])(i);if(!R(s)&&!D(s)){if(!W(s))throw new TypeError;i=s}}return i}function A(t,i,e,s){for(var n=t.length-1;n>=0;--n){var r=(0,t[n])(i,e,s);if(!R(r)&&!D(r)){if(!F(r))throw new TypeError;s=r}}return s}function I(t,i,e){var s=p.get(t);if(R(s)){if(!e)return;s=new u,p.set(t,s)}var n=s.get(i);if(R(n)){if(!e)return;n=new u,s.set(i,n)}return n}function k(t,i,e){if(C(t,i,e))return!0;var s=K(i);return!D(s)&&k(t,s,e)}function C(t,i,e){var s=I(i,e,!1);return!R(s)&&N(s.has(t))}function T(t,i,e){if(C(t,i,e))return M(t,i,e);var s=K(i);return D(s)?void 0:T(t,s,e)}function M(t,i,e){var s=I(i,e,!1);if(!R(s))return s.get(t)}function E(t,i,e,s){I(e,s,!0).set(t,i)}function B(t,i){var e=O(t,i),s=K(t);if(null===s)return e;var n=B(s,i);if(n.length<=0)return e;if(e.length<=0)return n;for(var r=new d,h=[],o=0,a=e;o<a.length;o++){var c=a[o];r.has(c)||(r.add(c),h.push(c))}for(var l=0,u=n;l<u.length;l++){c=u[l];r.has(c)||(r.add(c),h.push(c))}return h}function O(t,i){var e=[],s=I(t,i,!1);if(R(s))return e;for(var n=Q(s.keys()),r=0;;){var h=X(n);if(!h)return e.length=r,e;var o=Y(h);try{e[r]=o}catch(t){try{Z(n)}finally{throw t}}r++}}function L(t){if(null===t)return 1;switch(typeof t){case"undefined":return 0;case"boolean":return 2;case"string":return 3;case"symbol":return 4;case"number":return 5;case"object":return null===t?1:6;default:return 6}}function R(t){return void 0===t}function D(t){return null===t}function j(t){return"symbol"==typeof t}function F(t){return"object"==typeof t?null!==t:"function"==typeof t}function V(t,i){switch(L(t)){case 0:case 1:case 2:case 3:case 4:case 5:return t}var e=3===i?"string":5===i?"number":"default",n=J(t,s);if(void 0!==n){var r=n.call(t,e);if(F(r))throw new TypeError;return r}return $(t,"default"===e?"number":e)}function $(t,i){if("string"===i){var e=t.toString;if(z(e))if(!F(n=e.call(t)))return n;if(z(s=t.valueOf))if(!F(n=s.call(t)))return n}else{var s;if(z(s=t.valueOf))if(!F(n=s.call(t)))return n;var n,r=t.toString;if(z(r))if(!F(n=r.call(t)))return n}throw new TypeError}function N(t){return!!t}function U(t){return""+t}function H(t){var i=V(t,3);return j(i)?i:U(i)}function q(t){return Array.isArray?Array.isArray(t):t instanceof Object?t instanceof Array:"[object Array]"===Object.prototype.toString.call(t)}function z(t){return"function"==typeof t}function W(t){return"function"==typeof t}function G(t){switch(L(t)){case 3:case 4:return!0;default:return!1}}function J(t,i){var e=t[i];if(null!=e){if(!z(e))throw new TypeError;return e}}function Q(t){var i=J(t,n);if(!z(i))throw new TypeError;var e=i.call(t);if(!F(e))throw new TypeError;return e}function Y(t){return t.value}function X(t){var i=t.next();return!i.done&&i}function Z(t){var i=t.return;i&&i.call(t)}function K(t){var i=Object.getPrototypeOf(t);if("function"!=typeof t||t===c)return i;if(i!==c)return i;var e=t.prototype,s=e&&Object.getPrototypeOf(e);if(null==s||s===Object.prototype)return i;var n=s.constructor;return"function"!=typeof n||n===t?i:n}function tt(){var t={},i=[],e=function(){function t(t,i,e){this.gt=0,this.vt=t,this.yt=i,this.bt=e}return t.prototype["@@iterator"]=function(){return this},t.prototype[n]=function(){return this},t.prototype.next=function(){var t=this.gt;if(t>=0&&t<this.vt.length){var e=this.bt(this.vt[t],this.yt[t]);return t+1>=this.vt.length?(this.gt=-1,this.vt=i,this.yt=i):this.gt++,{value:e,done:!1}}return{value:void 0,done:!0}},t.prototype.throw=function(t){throw this.gt>=0&&(this.gt=-1,this.vt=i,this.yt=i),t},t.prototype.return=function(t){return this.gt>=0&&(this.gt=-1,this.vt=i,this.yt=i),{value:t,done:!0}},t}();return function(){function i(){this.vt=[],this.yt=[],this.xt=t,this.wt=-2}return Object.defineProperty(i.prototype,"size",{get:function(){return this.vt.length},enumerable:!0,configurable:!0}),i.prototype.has=function(t){return this._t(t,!1)>=0},i.prototype.get=function(t){var i=this._t(t,!1);return i>=0?this.yt[i]:void 0},i.prototype.set=function(t,i){var e=this._t(t,!0);return this.yt[e]=i,this},i.prototype.delete=function(i){var e=this._t(i,!1);if(e>=0){for(var s=this.vt.length,n=e+1;n<s;n++)this.vt[n-1]=this.vt[n],this.yt[n-1]=this.yt[n];return this.vt.length--,this.yt.length--,i===this.xt&&(this.xt=t,this.wt=-2),!0}return!1},i.prototype.clear=function(){this.vt.length=0,this.yt.length=0,this.xt=t,this.wt=-2},i.prototype.keys=function(){return new e(this.vt,this.yt,s)},i.prototype.values=function(){return new e(this.vt,this.yt,r)},i.prototype.entries=function(){return new e(this.vt,this.yt,h)},i.prototype["@@iterator"]=function(){return this.entries()},i.prototype[n]=function(){return this.entries()},i.prototype._t=function(t,i){return this.xt!==t&&(this.wt=this.vt.indexOf(this.xt=t)),this.wt<0&&i&&(this.wt=this.vt.length,this.vt.push(t),this.yt.push(void 0)),this.wt},i}();function s(t,i){return t}function r(t,i){return i}function h(t,i){return[t,i]}}function it(){return function(){function t(){this.St=new u}return Object.defineProperty(t.prototype,"size",{get:function(){return this.St.size},enumerable:!0,configurable:!0}),t.prototype.has=function(t){return this.St.has(t)},t.prototype.add=function(t){return this.St.set(t,t),this},t.prototype.delete=function(t){return this.St.delete(t)},t.prototype.clear=function(){this.St.clear()},t.prototype.keys=function(){return this.St.keys()},t.prototype.values=function(){return this.St.values()},t.prototype.entries=function(){return this.St.entries()},t.prototype["@@iterator"]=function(){return this.keys()},t.prototype[n]=function(){return this.keys()},t}()}function et(){var t=16,e=a.create(),s=n();return function(){function t(){this.Pt=n()}return t.prototype.has=function(t){var i=r(t,!1);return void 0!==i&&a.has(i,this.Pt)},t.prototype.get=function(t){var i=r(t,!1);return void 0!==i?a.get(i,this.Pt):void 0},t.prototype.set=function(t,i){return r(t,!0)[this.Pt]=i,this},t.prototype.delete=function(t){var i=r(t,!1);return void 0!==i&&delete i[this.Pt]},t.prototype.clear=function(){this.Pt=n()},t}();function n(){var t;do{t="@@WeakMap@@"+c()}while(a.has(e,t));return e[t]=!0,t}function r(t,e){if(!i.call(t,s)){if(!e)return;Object.defineProperty(t,s,{value:a.create()})}return t[s]}function h(t,i){for(var e=0;e<i;++e)t[e]=255*Math.random()|0;return t}function o(t){return"function"==typeof Uint8Array?"undefined"!=typeof crypto?crypto.getRandomValues(new Uint8Array(t)):"undefined"!=typeof msCrypto?msCrypto.getRandomValues(new Uint8Array(t)):h(new Uint8Array(t),t):h(new Array(t),t)}function c(){var i=o(t);i[6]=79&i[6]|64,i[8]=191&i[8]|128;for(var e="",s=0;s<t;++s){var n=i[s];4!==s&&6!==s&&8!==s||(e+="-"),n<16&&(e+="0"),e+=n.toString(16).toLowerCase()}return e}}function st(t){return t.At=void 0,delete t.At,t}t("decorate",f),t("metadata",m),t("defineMetadata",g),t("hasMetadata",v),t("hasOwnMetadata",y),t("getMetadata",b),t("getOwnMetadata",x),t("getMetadataKeys",w),t("getOwnMetadataKeys",_),t("deleteMetadata",S)}(n)}()}(s||(s={}))},6515:(t,i,e)=>{"use strict";e.d(i,{X:()=>n});var s=e(655),n=function(t){function i(i){var e=t.call(this)||this;return e.It=i,e}return(0,s.ZT)(i,t),Object.defineProperty(i.prototype,"value",{get:function(){return this.getValue()},enumerable:!1,configurable:!0}),i.prototype.kt=function(i){var e=t.prototype.kt.call(this,i);return!e.closed&&i.next(this.It),e},i.prototype.getValue=function(){var t=this,i=t.hasError,e=t.thrownError,s=t.It;if(i)throw e;return this.Ct(),s},i.prototype.next=function(i){t.prototype.next.call(this,this.It=i)},i}(e(6716).x)},1480:(t,i,e)=>{"use strict";e.d(i,{y:()=>u});var s=e(5642),n=e(5720),r=e(6766),h=e(278);function o(t){return 0===t.length?h.y:1===t.length?t[0]:function(i){return t.reduce((function(t,i){return i(t)}),i)}}var a=e(3912),c=e(8474),l=e(8846),u=function(){function t(t){t&&(this.kt=t)}return t.prototype.lift=function(i){var e=new t;return e.source=this,e.operator=i,e},t.prototype.subscribe=function(t,i,e){var r,h=this,o=(r=t)&&r instanceof s.Lv||function(t){return t&&(0,c.m)(t.next)&&(0,c.m)(t.error)&&(0,c.m)(t.complete)}(r)&&(0,n.Nn)(r)?t:new s.Hp(t,i,e);return(0,l.x)((function(){var t=h,i=t.operator,e=t.source;o.add(i?i.call(o,e):e?h.kt(o):h.Tt(o))})),o},t.prototype.Tt=function(t){try{return this.kt(t)}catch(i){t.error(i)}},t.prototype.forEach=function(t,i){var e=this;return new(i=d(i))((function(i,n){var r=new s.Hp({next:function(i){try{t(i)}catch(t){n(t),r.unsubscribe()}},error:n,complete:i});e.subscribe(r)}))},t.prototype.kt=function(t){var i;return null===(i=this.source)||void 0===i?void 0:i.subscribe(t)},t.prototype[r.L]=function(){return this},t.prototype.pipe=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];return o(t)(this)},t.prototype.toPromise=function(t){var i=this;return new(t=d(t))((function(t,e){var s;i.subscribe((function(t){return s=t}),(function(t){return e(t)}),(function(){return t(s)}))}))},t.create=function(i){return new t(i)},t}();function d(t){var i;return null!==(i=null!=t?t:a.v.Promise)&&void 0!==i?i:Promise}},6716:(t,i,e)=>{"use strict";e.d(i,{x:()=>c});var s=e(655),n=e(1480),r=e(5720),h=(0,e(1819).d)((function(t){return function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"}})),o=e(3699),a=e(8846),c=function(t){function i(){var i=t.call(this)||this;return i.closed=!1,i.observers=[],i.isStopped=!1,i.hasError=!1,i.thrownError=null,i}return(0,s.ZT)(i,t),i.prototype.lift=function(t){var i=new l(this,this);return i.operator=t,i},i.prototype.Ct=function(){if(this.closed)throw new h},i.prototype.next=function(t){var i=this;(0,a.x)((function(){var e,n;if(i.Ct(),!i.isStopped){var r=i.observers.slice();try{for(var h=(0,s.XA)(r),o=h.next();!o.done;o=h.next()){o.value.next(t)}}catch(t){e={error:t}}finally{try{o&&!o.done&&(n=h.return)&&n.call(h)}finally{if(e)throw e.error}}}}))},i.prototype.error=function(t){var i=this;(0,a.x)((function(){if(i.Ct(),!i.isStopped){i.hasError=i.isStopped=!0,i.thrownError=t;for(var e=i.observers;e.length;)e.shift().error(t)}}))},i.prototype.complete=function(){var t=this;(0,a.x)((function(){if(t.Ct(),!t.isStopped){t.isStopped=!0;for(var i=t.observers;i.length;)i.shift().complete()}}))},i.prototype.unsubscribe=function(){this.isStopped=this.closed=!0,this.observers=null},Object.defineProperty(i.prototype,"observed",{get:function(){var t;return(null===(t=this.observers)||void 0===t?void 0:t.length)>0},enumerable:!1,configurable:!0}),i.prototype.Tt=function(i){return this.Ct(),t.prototype.Tt.call(this,i)},i.prototype.kt=function(t){return this.Ct(),this.Mt(t),this.Et(t)},i.prototype.Et=function(t){var i=this,e=i.hasError,s=i.isStopped,n=i.observers;return e||s?r.Lc:(n.push(t),new r.w0((function(){return(0,o.P)(n,t)})))},i.prototype.Mt=function(t){var i=this,e=i.hasError,s=i.thrownError,n=i.isStopped;e?t.error(s):n&&t.complete()},i.prototype.asObservable=function(){var t=new n.y;return t.source=this,t},i.create=function(t,i){return new l(t,i)},i}(n.y),l=function(t){function i(i,e){var s=t.call(this)||this;return s.destination=i,s.source=e,s}return(0,s.ZT)(i,t),i.prototype.next=function(t){var i,e;null===(e=null===(i=this.destination)||void 0===i?void 0:i.next)||void 0===e||e.call(i,t)},i.prototype.error=function(t){var i,e;null===(e=null===(i=this.destination)||void 0===i?void 0:i.error)||void 0===e||e.call(i,t)},i.prototype.complete=function(){var t,i;null===(i=null===(t=this.destination)||void 0===t?void 0:t.complete)||void 0===i||i.call(t)},i.prototype.kt=function(t){var i,e;return null!==(e=null===(i=this.source)||void 0===i?void 0:i.subscribe(t))&&void 0!==e?e:r.Lc},i}(c)},5642:(t,i,e)=>{"use strict";e.d(i,{Hp:()=>v,Lv:()=>p});var s=e(655),n=e(8474),r=e(5720),h=e(3912),o=e(5);function a(){}var c=l("C",void 0,void 0);function l(t,i,e){return{kind:t,value:i,error:e}}var u=e(8380),d=e(8846),p=function(t){function i(i){var e=t.call(this)||this;return e.isStopped=!1,i?(e.destination=i,(0,r.Nn)(i)&&i.add(e)):e.destination=x,e}return(0,s.ZT)(i,t),i.create=function(t,i,e){return new v(t,i,e)},i.prototype.next=function(t){this.isStopped?b(function(t){return l("N",t,void 0)}(t),this):this.Bt(t)},i.prototype.error=function(t){this.isStopped?b(l("E",void 0,t),this):(this.isStopped=!0,this.Ot(t))},i.prototype.complete=function(){this.isStopped?b(c,this):(this.isStopped=!0,this.Lt())},i.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,t.prototype.unsubscribe.call(this),this.destination=null)},i.prototype.Bt=function(t){this.destination.next(t)},i.prototype.Ot=function(t){try{this.destination.error(t)}finally{this.unsubscribe()}},i.prototype.Lt=function(){try{this.destination.complete()}finally{this.unsubscribe()}},i}(r.w0),f=Function.prototype.bind;function m(t,i){return f.call(t,i)}var g=function(){function t(t){this.partialObserver=t}return t.prototype.next=function(t){var i=this.partialObserver;if(i.next)try{i.next(t)}catch(t){y(t)}},t.prototype.error=function(t){var i=this.partialObserver;if(i.error)try{i.error(t)}catch(t){y(t)}else y(t)},t.prototype.complete=function(){var t=this.partialObserver;if(t.complete)try{t.complete()}catch(t){y(t)}},t}(),v=function(t){function i(i,e,s){var r,o,a=t.call(this)||this;(0,n.m)(i)||!i?r={next:null!=i?i:void 0,error:null!=e?e:void 0,complete:null!=s?s:void 0}:a&&h.v.useDeprecatedNextContext?((o=Object.create(i)).unsubscribe=function(){return a.unsubscribe()},r={next:i.next&&m(i.next,o),error:i.error&&m(i.error,o),complete:i.complete&&m(i.complete,o)}):r=i;return a.destination=new g(r),a}return(0,s.ZT)(i,t),i}(p);function y(t){h.v.useDeprecatedSynchronousErrorHandling?(0,d.O)(t):(0,o.h)(t)}function b(t,i){var e=h.v.onStoppedNotification;e&&u.z.setTimeout((function(){return e(t,i)}))}var x={closed:!0,next:a,error:function(t){throw t},complete:a}},5720:(t,i,e)=>{"use strict";e.d(i,{Lc:()=>a,w0:()=>o,Nn:()=>c});var s=e(655),n=e(8474),r=(0,e(1819).d)((function(t){return function(i){t(this),this.message=i?i.length+" errors occurred during unsubscription:\n"+i.map((function(t,i){return i+1+") "+t.toString()})).join("\n  "):"",this.name="UnsubscriptionError",this.errors=i}})),h=e(3699),o=function(){function t(t){this.initialTeardown=t,this.closed=!1,this.Rt=null,this.Dt=null}var i;return t.prototype.unsubscribe=function(){var t,i,e,h,o;if(!this.closed){this.closed=!0;var a=this.Rt;if(a)if(this.Rt=null,Array.isArray(a))try{for(var c=(0,s.XA)(a),u=c.next();!u.done;u=c.next()){u.value.remove(this)}}catch(i){t={error:i}}finally{try{u&&!u.done&&(i=c.return)&&i.call(c)}finally{if(t)throw t.error}}else a.remove(this);var d=this.initialTeardown;if((0,n.m)(d))try{d()}catch(t){o=t instanceof r?t.errors:[t]}var p=this.Dt;if(p){this.Dt=null;try{for(var f=(0,s.XA)(p),m=f.next();!m.done;m=f.next()){var g=m.value;try{l(g)}catch(t){o=null!=o?o:[],t instanceof r?o=(0,s.ev)((0,s.ev)([],(0,s.CR)(o)),(0,s.CR)(t.errors)):o.push(t)}}}catch(t){e={error:t}}finally{try{m&&!m.done&&(h=f.return)&&h.call(f)}finally{if(e)throw e.error}}}if(o)throw new r(o)}},t.prototype.add=function(i){var e;if(i&&i!==this)if(this.closed)l(i);else{if(i instanceof t){if(i.closed||i.jt(this))return;i.Ft(this)}(this.Dt=null!==(e=this.Dt)&&void 0!==e?e:[]).push(i)}},t.prototype.jt=function(t){var i=this.Rt;return i===t||Array.isArray(i)&&i.includes(t)},t.prototype.Ft=function(t){var i=this.Rt;this.Rt=Array.isArray(i)?(i.push(t),i):i?[i,t]:t},t.prototype.Vt=function(t){var i=this.Rt;i===t?this.Rt=null:Array.isArray(i)&&(0,h.P)(i,t)},t.prototype.remove=function(i){var e=this.Dt;e&&(0,h.P)(e,i),i instanceof t&&i.Vt(this)},t.EMPTY=((i=new t).closed=!0,i),t}(),a=o.EMPTY;function c(t){return t instanceof o||t&&"closed"in t&&(0,n.m)(t.remove)&&(0,n.m)(t.add)&&(0,n.m)(t.unsubscribe)}function l(t){(0,n.m)(t)?t():t.unsubscribe()}},3912:(t,i,e)=>{"use strict";e.d(i,{v:()=>s});var s={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},2566:(t,i,e)=>{"use strict";e.d(i,{x:()=>n});var s=e(655);function n(t,i,e,s,n){return new r(t,i,e,s,n)}var r=function(t){function i(i,e,s,n,r,h){var o=t.call(this,i)||this;return o.onFinalize=r,o.shouldUnsubscribe=h,o.Bt=e?function(t){try{e(t)}catch(t){i.error(t)}}:t.prototype.Bt,o.Ot=n?function(t){try{n(t)}catch(t){i.error(t)}finally{this.unsubscribe()}}:t.prototype.Ot,o.Lt=s?function(){try{s()}catch(t){i.error(t)}finally{this.unsubscribe()}}:t.prototype.Lt,o}return(0,s.ZT)(i,t),i.prototype.unsubscribe=function(){var i;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){var e=this.closed;t.prototype.unsubscribe.call(this),!e&&(null===(i=this.onFinalize)||void 0===i||i.call(this))}},i}(e(5642).Lv)},4975:(t,i,e)=>{"use strict";e.d(i,{h:()=>r});var s=e(6798),n=e(2566);function r(t,i){return(0,s.e)((function(e,s){var r=0;e.subscribe((0,n.x)(s,(function(e){return t.call(i,e,r++)&&s.next(e)})))}))}},8380:(t,i,e)=>{"use strict";e.d(i,{z:()=>n});var s=e(655),n={setTimeout:function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];var e=n.delegate;return((null==e?void 0:e.setTimeout)||setTimeout).apply(void 0,(0,s.ev)([],(0,s.CR)(t)))},clearTimeout:function(t){var i=n.delegate;return((null==i?void 0:i.clearTimeout)||clearTimeout)(t)},delegate:void 0}},6766:(t,i,e)=>{"use strict";e.d(i,{L:()=>s});var s="function"==typeof Symbol&&Symbol.observable||"@@observable"},3699:(t,i,e)=>{"use strict";function s(t,i){if(t){var e=t.indexOf(i);0<=e&&t.splice(e,1)}}e.d(i,{P:()=>s})},1819:(t,i,e)=>{"use strict";function s(t){var i=t((function(t){Error.call(t),t.stack=(new Error).stack}));return i.prototype=Object.create(Error.prototype),i.prototype.constructor=i,i}e.d(i,{d:()=>s})},8846:(t,i,e)=>{"use strict";e.d(i,{O:()=>h,x:()=>r});var s=e(3912),n=null;function r(t){if(s.v.useDeprecatedSynchronousErrorHandling){var i=!n;if(i&&(n={errorThrown:!1,error:null}),t(),i){var e=n,r=e.errorThrown,h=e.error;if(n=null,r)throw h}}else t()}function h(t){s.v.useDeprecatedSynchronousErrorHandling&&n&&(n.errorThrown=!0,n.error=t)}},278:(t,i,e)=>{"use strict";function s(t){return t}e.d(i,{y:()=>s})},8474:(t,i,e)=>{"use strict";function s(t){return"function"==typeof t}e.d(i,{m:()=>s})},6798:(t,i,e)=>{"use strict";e.d(i,{e:()=>n});var s=e(8474);function n(t){return function(i){if(function(t){return(0,s.m)(null==t?void 0:t.lift)}(i))return i.lift((function(i){try{return t(i,this)}catch(t){this.error(t)}}));throw new TypeError("Unable to lift unknown Observable type")}}},5:(t,i,e)=>{"use strict";e.d(i,{h:()=>r});var s=e(3912),n=e(8380);function r(t){n.z.setTimeout((function(){var i=s.v.onUnhandledError;if(!i)throw t;i(t)}))}},5055:(t,i,e)=>{"use strict";e.d(i,{Km:()=>h,Zr:()=>n,n9:()=>o,q0:()=>s,rl:()=>r});const s={Play:"play",Pause:"pause",QualityChanged:"qualityChanged",PlayError:"playError",VolumeChanged:"volumeChanged"},n={FullscreenChanged:"fullscreenChanged",PlayerFloatChanged:"playerFloatChanged",FloatingEnterStart:"floatingEnterStart",FloatingEnterStop:"floatingEnterStop",FloatingExitStart:"floatingExitStart",FloatingExitStop:"floatingExitStop"},r={OmidViewabilityThreshold:"OmidViewabilityThreshold"},h=Object.assign(Object.assign(Object.assign(Object.assign({Ready:"ready",Removed:"removed",SetupError:"setupError",IsViewable:"isViewable",SizeChanged:"sizeChanged",BrandingClicked:"brandingClicked",ImpressionPrice:"impressionPrice",ImpressionRevenue:"impressionRevenue"},s),n),r),{AdClick:"adClick",AdPlay:"adPlay",AdPause:"adPause",AdImpression:"adImpression",AdCompleted25:"adCompleted25",AdCompleted50:"adCompleted50",AdCompleted75:"adCompleted75",AdCompleted100:"adCompleted100",AdSkipped:"adSkipped",AdError:"adError",AdStopped:"adStopped",AdCompanion:"adCompanion"});var o;!function(t){t.SetupError="SetupError",t.NoPlayer="NoPlayer",t.RenderError="RenderError",t.InvalidGUID="InvalidGUID"}(o||(o={}))},2817:(t,i,e)=>{"use strict";var s,n;e.d(i,{Ht:()=>r,bS:()=>h,do:()=>n,lI:()=>s}),function(t){t.Chrome="chrome",t.Firefox="firefox",t.Edge="edge",t.Safari="safari",t.Opera="opera",t.Samsung="samsung",t.Facebook="facebook",t.InternetExplorer="ie"}(s||(s={})),function(t){t.Standard="standard",t.Webkit="webkit",t.Moz="moz",t.Ms="ms",t.O="o"}(n||(n={}));const r=[{name:n.Standard,keys:{fullscreenEnabled:"fullscreenEnabled",fullscreenElement:"fullscreenElement",requestFullscreen:"requestFullscreen",exitFullscreen:"exitFullscreen",fullscreenchange:"fullscreenchange",fullscreenerror:"fullscreenerror"}},{name:n.Webkit,keys:{fullscreenEnabled:"webkitFullscreenEnabled",fullscreenElement:"webkitFullscreenElement",requestFullscreen:"webkitRequestFullscreen",exitFullscreen:"webkitExitFullscreen",fullscreenchange:"webkitfullscreenchange",fullscreenerror:"webkitfullscreenerror"}},{name:n.Webkit,keys:{fullscreenEnabled:"webkitSupportsFullscreen",fullscreenElement:"webkitFullscreenElement",requestFullscreen:"webkitEnterFullscreen",exitFullscreen:"webkitExitFullscreen",fullscreenchange:"webkitfullscreenchange",fullscreenerror:"webkitfullscreenerror"}},{name:n.Moz,keys:{fullscreenEnabled:"mozFullScreenEnabled",fullscreenElement:"mozFullScreenElement",requestFullscreen:"mozRequestFullScreen",exitFullscreen:"mozCancelFullScreen",fullscreenchange:"mozfullscreenchange",fullscreenerror:"mozfullscreenerror"}},{name:n.Ms,keys:{fullscreenEnabled:"msFullscreenEnabled",fullscreenElement:"msFullscreenElement",requestFullscreen:"msRequestFullscreen",exitFullscreen:"msExitFullscreen",fullscreenchange:"MSFullscreenChange",fullscreenerror:"MSFullscreenError"}}];var h;!function(t){t.Self="_self",t.Blank="_blank",t.Parent="_parent",t.Top="_top"}(h||(h={}))},2820:(t,i,e)=>{"use strict";var s,n,r;e.d(i,{Gj:()=>s,Hs:()=>w,Ig:()=>o,Ih:()=>v,Ng:()=>a,QO:()=>u,Rq:()=>h,Yk:()=>d,_7:()=>p,hQ:()=>g,iu:()=>c,jG:()=>f,mr:()=>_,oV:()=>b,pT:()=>x,s6:()=>n,sN:()=>y,s_:()=>r}),function(t){t.Invisible="cnx-mod-invisible",t.HovarableButton="cnx-ui-btn-hoverable",t.HoverStart="cnx-mod-hover-s",t.HoverEnd="cnx-mod-hover",t.HoverBoom="cnx-mod-boom",t.DisplayNone="cnx-mod-display-none",t.Active="cnx-mod-active",t.HideOnVolumeHover="cnx-hide-on-volume-hover",t.HideOnSingleVideo="cnx-hide-on-single-video",t.NoTransition="cnx-mod-no-transition",t.Collapsable="cnx-mod-collapsable",t.HasCustomScrollbar="cnx-mod-scrollbar",t.Show="cnx-mod-show",t.Hide="cnx-mod-hide",t.NoHeight="cnx-mod-no-height",t.OnHold="cnx-mod-onhold",t.ForceLineBreak="cnx-mod-force-line-break",t.HideOnAdOverlay="cnx-mod-ad-overlay-none",t.HideOnPodLoadingScreen="cnx-mod-pod-loading-none"}(s||(s={})),function(t){t.Fullscreen="cnx-in-fullscreen",t.Ad="cnx-in-ad",t.AdNonLinear="cnx-in-ad-non-linear",t.AdOverlayType="cnx-in-ad-overlay",t.AdFullSize="cnx-in-ad-full",t.AdShowCard="cnx-ad-show-card",t.ShowControls="cnx-in-show-controls",t.Mobile="cnx-in-mobile",t.Desktop="cnx-in-desktop",t.Muted="cnx-in-mute",t.Collapsed="cnx-in-collapse",t.GalleryPortrait="cnx-in-g-portrait",t.GalleryLandscape="cnx-in-g-landscape",t.ContextController="cnx-context-controller",t.HideUI="cnx-in-hide-ui",t.PodLoadingScreen="cnx-in-pod-loading",t.AdShowCountdown="cnx-ad-show-countdown",t.CloseOn="cnx-close-on",t.CloseOff="cnx-close-off",t.CloseHover="cnx-close-hover",t.CloseFloatOn="cnx-close-float-on",t.CloseFloatOff="cnx-close-float-off",t.CloseFloatHover="cnx-close-float-hover",t.UiInView="cnx-ui-in-view"}(n||(n={})),function(t){t.Playing="cnx-is-playing",t.Paused="cnx-is-paused",t.Stopped="cnx-is-stopped",t.Preroll="cnx-is-preroll",t.Postroll="cnx-is-postroll",t.Loading="cnx-is-loading",t.LiveEnded="cnx-live-ended"}(r||(r={}));const h={Xxl:"cnx-bp-xxl-v",Xl:"cnx-bp-xl-v",Lg:"cnx-bp-lg-v",Md:"cnx-bp-md-v",Sm:"cnx-bp-sm-v",Xs:"cnx-bp-xs-v",Xxs:"cnx-bp-xxs-v"};var o,a,c,l,u,d,p;!function(t){t.Responsive="cnx-size-responsive",t.Fixed="cnx-size-fixed"}(o||(o={})),function(t){t.ClickOption="cnx-cm-item--click",t.ToggleOption="cnx-cm-item--toggle",t.SubmenuOption="cnx-cm-item--submenu",t.ItemIcon="cnx-cm-item__icon",t.ItemTitle="cnx-cm-item__title",t.ItemExtra="cnx-cm-item__extra",t.Items="cnx-cm-items",t.Container="cnx-cm-container"}(a||(a={})),function(t){t.Icons="cnx-color-icon",t.TooltipText="cnx-color-tt-text",t.TooltipBackground="cnx-color-tt-bg",t.AccentColor="cnx-color-accent",t.PrimaryColor="cnx-color-primary",t.SecondaryColor="cnx-color-secondary",t.TitleComponent="cnx-title-component",t.TitleLink="cnx-color-title-link",t.SlideProgressBar="cnx-slides-progress-bar",t.ProgressFill="cnx-progress-fill"}(c||(c={})),function(t){t.InheritTitleFontFamily="cnx-inherit-title-font-family",t.InheritBodyFontFamily="cnx-inherit-body-font-family"}(l||(l={})),function(t){t.Connatix="#0099FF",t.Icons="#FFFFFF",t.PrimaryBackground="#F1F1F1",t.PrimaryForeground="#000000",t.SecondaryBackground="#000000",t.SecondaryForeground="#F1F1F1",t.AccentForeground="#FFFFFF"}(u||(u={})),function(t){t.CaptionContainer="cnx-captions-text-holder"}(d||(d={})),function(t){t.MainClass="cnx-float",t.TransitionClass="cnx-float-transition",t.AlwaysFloating="cnx-always-floating"}(p||(p={}));const f={FadeOutBase:"cnx-fade-out-base",FadeOut:"cnx-fade-out",FadeInBase:"cnx-fade-in-base",FadeIn:"cnx-fade-in"};var m,g,v;!function(t){t.CurrentSlide="cnx-slide-current",t.NextSlide="cnx-slide-next",t.SlideLeft="cnx-slide-left",t.SlideRight="cnx-slide-right"}(m||(m={})),function(t){t.OpacityInTransition="cnx-tooltip-animation-in"}(g||(g={})),function(t){t.Card="cnx-g-card",t.CardSlot="cnx-g-card-slot",t.CardImage="cnx-g-card-image",t.CardText="cnx-g-card-text",t.CardTextContainer="cnx-g-card-text-container",t.CardPlaceholder="cnx-g-card-placeholder",t.CardRail="cnx-g-rail",t.StyleDetailed="cnx-g-style-detailed",t.StyleVisual="cnx-g-style-visual",t.ExploreMore="cnx-g-explore-more",t.FadeOut="cnx-g-fade-out"}(v||(v={}));const y={MainContainer:"cnx-main-container",MainContainerFlex:"cnx-main-container-flex",PlayerWrapper:"cnx-player-wrapper",ImagePlaceholder:"cnx-image-placeholder"},b="cnx-ratio",x="cnx-hide-video",w={Text:"cnx-skip-ad-text",Timer:"cnx-timer-loader",Icon:"cnx-skip-ad-icon",SkipAdButton:"cnx-skip-ad-button",InTimer:"cnx-skip-ad-in-timer"},_={Icon:"cnx-pod-open-new-icon",Button:"cnx-pod-read-more-btn",ButtonContainer:"cnx-pod-read-more-container",Wrapper:"cnx-pod-read-more-wrapper",BackgroundImg:"cnx-pod-loading-background",InfoContainer:"cnx-pod-loading-info",FallbackContainer:"cnx-pod-loading-fallback",SlotCountText:"cnx-pod-slot-count-text"}},45:(t,i,e)=>{"use strict";e.d(i,{g:()=>r,x:()=>n});let s=null;try{s=JSON.parse('{"version":160578,"domainPrefix":"","logToConsole":false,"logToServer":true,"env":"production"}')}catch(t){}const n=!0,r=s},782:(t,i,e)=>{"use strict";var s,n;e.d(i,{Uh:()=>n,Xh:()=>s,dP:()=>r}),function(t){t.SessionRendered="rendered",t.SessionView="enter_view"}(s||(s={})),function(t){t.UserInteraction="userInteraction",t.GeneralUserInteraction="generalUserInteraction",t.CanStart="canStart",t.Destroy="destroy"}(n||(n={}));const r={StateChanged:"stateChanged"}},5049:(t,i,e)=>{"use strict";e.d(i,{x:()=>s});const s="//securepubads.g.doubleclick.net/tag/js/gpt.js"},2157:(t,i,e)=>{"use strict";e.d(i,{XY:()=>n,f3:()=>r,fJ:()=>o,kd:()=>a,xs:()=>h});var s=e(289);const n=200,r=31,h={[s.ProtoAdType.Video]:2e3,[s.ProtoAdType.Overlay]:1e3,[s.ProtoAdType.Nonlinear]:1e3},o=.5,a="connatix.com"},308:(t,i,e)=>{"use strict";e.d(i,{M:()=>r,a:()=>n});var s=e(289);const n=[s.ProtoDeviceType.Smartphone,s.ProtoDeviceType.Tablet];var r;!function(t){t.Ios="ios",t.Android="android",t.Mac="macos",t.Windows="windows",t.Linux="linux",t.IPadOS="ipados"}(r||(r={}))},7577:(t,i,e)=>{"use strict";e.d(i,{Fk:()=>n,Kp:()=>r,a8:()=>h,br:()=>s,ym:()=>o});const s="https://connatix.com/privacy-policy/",n="v",r="pid",h="sid",o="cid"},9115:(t,i,e)=>{"use strict";e.d(i,{T9:()=>s,Y0:()=>o,oG:()=>c,p7:()=>n,s_:()=>h,ti:()=>a,uD:()=>r});const s=/(\d\d):(\d\d):(\d\d)(\.(\d\d\d))?/,n=36e5,r=6e4,h=1e3,o=60,a=864e5,c=60},9078:(t,i,e)=>{"use strict";var s,n;e.d(i,{fI:()=>n,r5:()=>r,zc:()=>s}),function(t){t.Fullscreen="fullscreen",t.Normal="normal",t.Thumbnail="thumbnail"}(s||(s={})),function(t){t.AdLoaded="AdLoaded",t.AdStarted="AdStarted",t.AdStopped="AdStopped",t.AdSkipped="AdSkipped",t.AdSkippableStateChange="AdSkippableStateChange",t.AdSizeChange="AdSizeChange",t.AdLinearChange="AdLinearChange",t.AdDurationChange="AdDurationChange",t.AdExpandedChange="AdExpandedChange",t.AdRemainingTimeChange="AdRemainingTimeChange",t.AdVolumeChange="AdVolumeChange",t.AdImpression="AdImpression",t.AdVideoStart="AdVideoStart",t.AdVideoFirstQuartile="AdVideoFirstQuartile",t.AdVideoMidpoint="AdVideoMidpoint",t.AdVideoThirdQuartile="AdVideoThirdQuartile",t.AdVideoComplete="AdVideoComplete",t.AdClickThru="AdClickThru",t.AdInteraction="AdInteraction",t.AdUserAcceptInvitation="AdUserAcceptInvitation",t.AdUserMinimize="AdUserMinimize",t.AdUserClose="AdUserClose",t.AdPaused="AdPaused",t.AdPlaying="AdPlaying",t.AdLog="AdLog",t.AdError="AdError"}(n||(n={}));const r="nonLinearCloseClick"},1730:(t,i,e)=>{"use strict";e.d(i,{e:()=>o,j:()=>s});var s,n=e(8423);class r{}r.clientAb0=(0,n.Vm)([50,50]),r.clientAb1=(0,n.Vm)([50,50]);class h{}h.clientAb0=(0,n.Vm)([50,50]),h.clientAb1=(0,n.Vm)([50,50]),function(t){t[t.ElementsABService=0]="ElementsABService",t[t.PlayspaceABService=1]="PlayspaceABService"}(s||(s={}));class o{static get clientAb0(){return this.getABValueForKey("clientAb0")}static get clientAb1(){return this.getABValueForKey("clientAb1")}static getABValueForKey(t){return this.abServiceType===s.PlayspaceABService?h[t]:r[t]}}},5348:(t,i,e)=>{"use strict";e.d(i,{$:()=>h});const s="ats-liveramp-envelope-request";var n=e(289),r=e(8423);class h{static getEnvelopeFromParentAts(t){var i;return(null===(i=h.envelope)||void 0===i?void 0:i.envelope)?Promise.resolve():new Promise((i=>{if(!t.ats)return h.communicateViaPostMessage(t),void i();t.ats.retrieveEnvelope().then((e=>{e?(h.envelope=JSON.parse(e),i()):(h.communicateViaPostMessage(t),i())}))}))}static communicateViaPostMessage(t){h.dispatchEnvelopeRequestEvent(t),h.addEnvelopeListener()}static dispatchEnvelopeRequestEvent(t){try{t.postMessage(s,"*")}catch(i){void 0!==t.contentWindow&&t.contentWindow.postMessage(s,"*")}}static receiveEnvelopeListener(t){t&&t.data&&"ats-liveramp-envelope-result"===t.data.message&&t.data.result&&(h.envelope=JSON.parse(t.data.result),window.removeEventListener("message",h.receiveEnvelopeListener))}static addEnvelopeListener(){window.addEventListener("message",h.receiveEnvelopeListener,!1)}static getEnvelopeWithConsent(t,i){return new Promise(((e,s)=>{i.isConsentConnatix()?h.getEnvelopeFromParentAts(t).then((()=>{var t;(null===(t=h.envelope)||void 0===t?void 0:t.envelope)?e(h.envelope.envelope):setTimeout((()=>s()),500)})):setTimeout((()=>s()),500)}))}static getEnvelope(t,i){(0,r.Up)((()=>h.getEnvelopeWithConsent(t,i))).catch((()=>{}))}static setEnvelopeStatus(t){h.envelopeStatus=t}static getValidEnvelope(){var t;return(null===(t=h.envelope)||void 0===t?void 0:t.envelope)&&h.envelopeStatus===n.LiveRampEnvelopeStatusEnum.Ok?h.envelope.envelope:null}static wasRequestEnhanced(t){var i;return(null===(i=h.envelope)||void 0===i?void 0:i.envelope)&&t===n.LiveRampEnvelopeStatusEnum.Ok}}h.envelope=null,h.envelopeStatus=n.LiveRampEnvelopeStatusEnum.Ok},4280:(t,i,e)=>{"use strict";e.d(i,{_:()=>d});var s=e(5049);const n=["adBanner","banner-search","abc_banner","Banner_Top","ad_container","pub_300x250","pub_300x250m","pub_728x90","text-ad","text_ad","textAd","text-ad-links","text_ads","text-ads","text-ad-links"],r="cnxtestadblock";var h=e(1561),o=e(8423),a=e(7726),c=e(7427),l=e(6515),u=e(4975);class d{static get isBannerBlocked(){return this.$t}static onAdBlockerDetected(){return this.Nt.asObservable().pipe((0,u.h)((t=>null!==t)))}static detectUsingCSS(t){try{let i=!1;t.document.body.insertAdjacentHTML("beforeend",this.Ut());const e=t.document.getElementById(r);return 0!==e.getBoundingClientRect().height&&0!==e.getBoundingClientRect().width||(i=!0),t.document.body.removeChild(e),this.qt(i),i}catch(t){return this.qt(!1),!1}}static detectUsingScript(){return new Promise((t=>{const i=(0,o.pE)(window).topFrame,e=i=>{this.Nt.next(i),this.Nt.complete(),t(i)};i.googletag&&e(!1),(0,h.dZ)({src:s.x},i.document.head,i,(()=>i.googletag&&(0,c.QM)(i.googletag.getVersion())?e(!1):e(!0)),(()=>e(!0)))}))}static qt(t){null!==this.$t&&this.$t!==t&&(0,a.n)({message:"AdBlockerDetection_changed_after_new_global",level:a.D.INFO,exception:`${this.$t}`},{throttle:2,sendMaxLog:!1}),this.$t=t,this.$t&&(this.Nt.next(!0),this.Nt.complete())}static Ut(){return`<style>.adBanner{background-color: transparent; height: 1px !important; width: 1px !important; position: absolute !important; left: -10000px !important; top: -1000px !important; display:block !important; }</style><div id="cnxtestadblock" class="${n.join(" ")}"></div>`}}d.$t=null,d.Nt=new l.X(null)},7417:(t,i,e)=>{"use strict";var s;!function(t){t.prebid="prebid",t.bid="bid",t.win="win",t.impression="impression",t.viewableImpression="viewableImpression",t.postbid="postbid",t.initAd="initAd",t.request="request",t.startAd="startAd"}(s||(s={}))},497:(t,i,e)=>{"use strict";e.d(i,{S:()=>s});class s{}s.MaxLogOverflow=1e3,s.maxLogOverflowCount={},s.logCount={},s.maxLogSent={},s.sessionId="",s.pageFocus=!1,s.playerDestroyed=!1,s.incrementLogCount=t=>{s.logCount[t]?(++s.maxLogOverflowCount[t],++s.logCount[t]):(s.logCount[t]=1,s.maxLogOverflowCount[t]=1)},s.isMaxLog=(t,i)=>!!(s.logCount[t]&&s.logCount[t]>i),s.isMaxLogOverflow=t=>s.maxLogOverflowCount[t]>s.MaxLogOverflow&&(s.maxLogOverflowCount[t]=1,!0),s.setMaxLogSent=t=>{s.maxLogSent[t]=!0},s.isMaxLogSent=t=>!!s.maxLogSent[t]},1886:(t,i,e)=>{"use strict";e.d(i,{f:()=>n});var s=e(7577);class n{static getCidKeyValueObject(){return!!this.customerId&&{[s.ym]:this.customerId}}}n.customerId=null},7910:(t,i,e)=>{"use strict";e.d(i,{X:()=>a});var s=e(308),n=e(8423),r=e(2817),h=e(6615),o=e(7427);class a{constructor(t){this.zt=t,this.Wt=100,this.Gt=(0,n.pE)(window).topFrame,this.Jt=s.a.indexOf(this.zt.browser.device)>-1,this.Qt=(0,n.dz)(),this.Yt={browserType:this.Xt(),browserVersion:this.zt.browser.browserVersion},this.Zt=this.Kt(),this.ii=this.pageUrl.substr(0,this.Wt),this.ei=(0,h._Y)(this.ii)}Xt(){let t;return Object.keys(r.lI).forEach((i=>{this.zt.browser.browserType.toLowerCase().includes(r.lI[i])&&(t=r.lI[i])})),t}Kt(){let t,i=0;const e=this.zt.browser.osCode.split("_"),n=e[0].toLowerCase();return Object.keys(s.M).forEach((i=>{n.includes(s.M[i])&&(t=s.M[i])})),t===s.M.IPadOS&&(t=s.M.Ios),e.length>1&&(i=parseFloat(`${e[1]||0}.${e[2]||0}`)),{os:t,osVersion:i}}get device(){return this.zt.browser.device}get browser(){return this.Yt}get os(){return this.Zt}get geoLocation(){return this.zt.geoLocation}get pageUrl(){return this.zt.pageUrl||""}get pageUrlTrunc(){return this.ii}get pageDomain(){return this.ei}get isMobile(){return this.Jt}get isInApp(){return(0,o.QM)(this.zt.bundleID)}get isInAppAndroid(){return this.isInApp&&this.os.os===s.M.Android}get playerId(){return this.zt.playerId}get appId(){return this.Qt}get bundleID(){return(0,o.QM)(this.zt.iOSAppID)?this.zt.iOSAppID:this.zt.bundleID}get domainURL(){return this.zt.domainURL}get storeURL(){return this.zt.storeURL}get explorationMode(){return this.zt.explorationMode}get appName(){return this.zt.appName}get appCategories(){return this.zt.appCategories}get appVersion(){return this.zt.appVersion}get sdkVersion(){return this.zt.sdkVersion}get appPrivacyPolicy(){return this.zt.appPrivacyPolicy}get appIsPaid(){return this.zt.appIsPaid}get deviceId(){return this.zt.deviceId}get topWindow(){return this.Gt}get appPageURL(){return this.zt.appPageURL}get isOVPDomain(){return this.zt.isOVPDomain}}},1995:(t,i,e)=>{"use strict";e.d(i,{C:()=>s});class s{constructor(){this.si=!1,this.promise=new Promise(((t,i)=>{this.ni=t,this.ri=i}))}oi(){this.si||(this.si=!0)}resolve(t){this.oi(),this.ni(t)}reject(t){this.oi(),this.ri(t)}get isPending(){return!this.si}}},7754:(t,i,e)=>{"use strict";e.d(i,{P:()=>a});var s,n=e(7427),r=e(289);!function(t){t[t.Desktop=2]="Desktop",t[t.SmartTV=3]="SmartTV",t[t.Smartphone=4]="Smartphone",t[t.Tablet=5]="Tablet",t[t.GameConsole=6]="GameConsole",t[t.Unrecognized=7]="Unrecognized"}(s||(s={}));const h={[r.ProtoDeviceType.Desktop]:s.Desktop,[r.ProtoDeviceType.Smartphone]:s.Smartphone,[r.ProtoDeviceType.Tablet]:s.Tablet,[r.ProtoDeviceType.GameConsole]:s.GameConsole,[r.ProtoDeviceType.SmartTV]:s.SmartTV,[r.ProtoDeviceType.WearableComputer]:s.Unrecognized,[r.ProtoDeviceType.PDA]:s.Unrecognized,[r.ProtoDeviceType.Unrecognized]:s.Unrecognized},o="cnx_fraud_sensor";class a{constructor(t,i,e,s){this.ai=t,this.ci=i,this.ui=e,this.di(s)}addFraudSensorScript(){if(this.ci.getElementById(o))return;const t={id:o,src:this.ai.setupMacros("https://s.srvsynd.com/2/234175/analytics.js?dt=2341751597675869250012&di=[DOMAIN]&ui=[FS_USER_ID]&md=[FS_MEDIA_TYPE]&ap=[FS_DEVICE_IDENT]&sr=[CNX_SUPPLIER_ID]&pp=[PUBLISHER_ID]&ti=[SESSION_ID]&de=[FS_DEVICE_TYPE]&to=[MGTO]&pv=[MGID]")};this.ci.insertScript(t,null,"FraudSensor_script_error")}di(t){t=(0,n.QM)(t)?t:"00000000-0000-0000-0000-000000000000";const{lookupId:i,lookupResponseCode:e,publisherAdsTxt:s,deviceIdentifier:r}=this.ui,o=h[this.ui.deviceType];this.ai.setPublisherId(s),this.ai.setUserId(t),this.ai.setFraudSensorMacros({lookupId:i,lookupResponseCode:e,deviceType:o,mediaType:2,deviceIdentifier:r})}}},8804:(t,i,e)=>{"use strict";e.d(i,{a:()=>q});var s=e(289),n=e.n(s),r=e(7726),h=e(8423),o=e(1561),a=e(9446),c=e(7398),l=e(6438),u=e(7910),d=e(6615),p=e(45),f=e(497),m=e(7427),g=e(3030),v=e(5055),y=e(2356),b=e(1730),x=e(7272),w=e(3352),_=e(1580),S=e(3217),P=e(3810),A=e(5880),I=e(782),k=e(2820),C=e(649),T=e(7754),M=e(6284),E=e(3640),B=e(4280),O=e(9207),L=e(6243),R=e(7382),D=e(5732),j=e(4974),F=e(525),V=e(8852),$=e(7577),N=function(t,i,e,s){return new(e||(e=Promise))((function(n,r){function h(t){try{a(s.next(t))}catch(t){r(t)}}function o(t){try{a(s.throw(t))}catch(t){r(t)}}function a(t){var i;t.done?n(t.value):(i=t.value,i instanceof e?i:new e((function(t){t(i)}))).then(h,o)}a((s=s.apply(t,i||[])).next())}))};const U="player_instance",H=",";class q extends A._{constructor(t,i,e,s,n,r,h){super(),this.services=t,this.GLOBAL=i,this.pi=e,this.mi=s,this.gi=n,this.vi=r,this.readyCallback=h,this.yi={},this.bi="<cnx-placeholder></cnx-placeholder>",this.xi=100,this.wi=1e3,this.isServerlessMode=!1,this._i=!1,this.Si=[],this.Pi="{{omidVerificationClient}}",this.Ai=[],this.pi&&this.Ii(),B._.detectUsingCSS(this.GLOBAL),this.ki=(0,o.sw)(this.GLOBAL)}initUrlSuffixer(t){const i=new O.f;if(t.bandwidthLoggingState===s.ProtoBandwidthLoggingEnum.Disabled)return i;const e=this.Ci(t);return i.setUrlParams({domain:F.n.bundleDomain,urlParams:[(0,V.IS)(e,t.playerId)]}),i}Ti(){const t={playerId:this.externalAttributes.playerId,_appSettings:this.externalAttributes._appSettings,settings:{_connatixInternals:this.externalAttributes.settings._connatixInternals,advertising:{},customization:{},rendering:{},plugins:{}}};this.externalAttributes.customParam1&&(t.customParam1=this.externalAttributes.customParam1),this.externalAttributes.customParam2&&(t.customParam2=this.externalAttributes.customParam2),this.externalAttributes.customParam3&&(t.customParam3=this.externalAttributes.customParam3),this.externalAttributes.customParam4&&(t.customParam4=this.externalAttributes.customParam4),this.externalAttributes.customParam5&&(t.customParam5=this.externalAttributes.customParam5),this.externalAttributes.settings.useExternalViewabilityService&&(t.settings.useExternalViewabilityService=this.externalAttributes.settings.useExternalViewabilityService),this.externalAttributes=t}Mi(t){const i=this.GLOBAL.frameElement;if(!(0,o.GF)(i))return;let e=!0;i&&t&&(e=!1),e?(0,o.MV)(i):(0,o.Ho)(i)}Ei(t,i){try{return this.Bi(t,i)}catch(t){return null}}Oi(t){let i;try{i=eval(t)}catch(e){i=t.replace(/\[(\d+)]/g,":nth-child($1)")}return i}Li(t,i){const e=this.Ei(t,i);return null===e?new Promise((e=>{setTimeout((()=>{e(this.Li(t,i))}),this.xi)})):Promise.resolve(e)}Ri(t,i){const e=this.Oi(t);return Promise.resolve(this.Li(e,i))}Bi(t,i){let e;return t.split(/(\.cnxEq\(\d+\))/).filter((t=>t)).forEach((t=>{e=t.includes("cnxEq")?this.Di(e,t):e?e.querySelectorAll(t):(0,o.Wb)(t,i)})),e?(e.hasOwnProperty("length")&&(e=e.length>0?e[0]:null),e):null}Di(t,i){const e=/\d+/g.exec(i),s=parseInt(e[0],10);return s>t.length?(0,g.Sz)(t)[t.length-1]:(0,g.Sz)(t)[s]}ji(){return this.mi?s.ProtoImplementationType.Amp:s.ProtoImplementationType.Web}Fi(t,i){const e=(0,h.pE)(this.GLOBAL);let s;return s=(0,m.$K)(this.externalAttributes.settings.rendering.forceInsertPath)?this.externalAttributes.settings.rendering.forceInsertPath:i.forceInsertPath,new Promise(((n,r)=>{let h=(0,o.G$)(this.bi,this.GLOBAL);if(s||t.tag.parentNode===this.GLOBAL.document.head&&(!e.topChildFrame||i.renderInFrame)){let t,s,r;e.topChildFrame&&(0,o.IV)(e.topChildFrame.frameElement,k.Gj.DisplayNone),t=(0,m.QM)(this.externalAttributes.settings.rendering.containerSelector)?this.externalAttributes.settings.rendering.containerSelector:i.containerSelector,s=(0,m.$K)(this.externalAttributes.settings.rendering.insertPosition)?this.externalAttributes.settings.rendering.insertPosition:i.insertPosition,r=(0,m.$K)(this.externalAttributes.settings.rendering.position)?this.externalAttributes.settings.rendering.position:i.position,this.Ri(t,e.topFrame).then((t=>{this.Vi(t,h,s,r),n({insertContainer:h,insertWindow:e.topFrame})}))}else e.topChildFrame&&!i.renderInFrame?(h=(0,o.G$)(this.bi,e.topFrame),e.topChildFrame.frameElement.parentNode.insertBefore(h,e.topChildFrame.frameElement),(0,o.cn)(e.topChildFrame.frameElement,k.Gj.DisplayNone),n({insertContainer:h,insertWindow:e.topFrame})):(t.tag.parentNode.insertBefore(h,t.tag),n({insertContainer:h}))}))}$i(t,i,e){(0,o.IS)(i,t,e)}Ni(t,i,e){switch(e){case s.ProtoPlayerInsertMode.BeforeContainer:t.parentElement.insertBefore(i,t);break;case s.ProtoPlayerInsertMode.ReplaceContainer:t.parentElement.insertBefore(i,t),(0,o.bX)(t);break;case s.ProtoPlayerInsertMode.HideContainer:t.parentElement.insertBefore(i,t),(0,o.MV)(t);break;case s.ProtoPlayerInsertMode.AfterContainer:t.nextElementSibling?t.parentElement.insertBefore(i,t.nextElementSibling):t.parentElement.appendChild(i)}}Vi(t,i,e,n){e===s.ProtoPlayerInsertMode.WithinContainer?this.$i(t,i,n):this.Ni(t,i,e)}Ui(t,i=[]){t.lineItems=[...t.lineItems,...i];const e=t.lineItems.length;t.lineItems=(0,g.qy)("advertiserLineItemId",t.lineItems),e!==t.lineItems.length&&(0,r.n)({level:r.D.WARN,message:"Loader_duplicated_adsources",callStack:"_"})}Hi(t,i){const e=t.players[i],{playerModel:n,globalDomUtilsService:r,urlSuffixerService:h}=this.yi[i];if(this.qi(t.cookieSyncUrls),this.services.UserManagerService.setGeoLocation(t.geoLocation),f.S.sessionId=e.sessionId,this.zi.addPlayerSession(e.playerId,e.sessionId),!n)return void this.registerApiError(v.n9.SetupError,"No playlist was provided!");const o=new u.X({iOSAppID:this.pi&&!this.gi?t.iOSAppID:null,browser:t.browser,geoLocation:t.geoLocation,pageUrl:this.pageUrl,playerId:n.playerId,explorationMode:t.explorationMode,bundleID:this.externalAttributes._appSettings.bundleID,domainURL:this.externalAttributes._appSettings.domainURL,storeURL:this.externalAttributes._appSettings.storeURL,appCategories:this.externalAttributes._appSettings.appCategories,appIsPaid:this.externalAttributes._appSettings.appIsPaid,appName:this.externalAttributes._appSettings.appName,appPrivacyPolicy:this.externalAttributes._appSettings.appPrivacyPolicy,appVersion:this.externalAttributes._appSettings.appVersion,sdkVersion:this.externalAttributes._appSettings.sdkVersion,deviceId:this.externalAttributes._appSettings.deviceID,appPageURL:this.externalAttributes._appSettings.appPageURL,isOVPDomain:this.vi}),a=new y.v(r),d=this.getViewabilityService(n,a);B._.detectUsingCSS(n.global);const p=new l.c(n,t.geoLocation,o.pageUrl,o.pageDomain,this.externalAttributes._appSettings,this.ki,t.publisherNetworkCode),g={services:{GlobalDomUtilsService:r,ViewabilityService:d,TrackingService:this.Wi(n,t,i),ResizeObserver:new c.a(n.global),UserManagerService:this.services.UserManagerService,MacrosService:p,EventsStorageService:this.services.EventsStorageService,PageFocusService:a,InteractionService:new M.k(n.global,o.isMobile),UrlSuffixerService:h},config:o};B._.isBannerBlocked&&g.services.TrackingService.trackSessionAdBlocker(s.ProtoAdBlockDetectionTypeEnum.Banner),g.services.UserManagerService.setPageUrl(g.config.pageUrl);const b=this.ji();g.services.TrackingService.setImplementationTypeOnMeta(b),n.externalMacros&&g.services.MacrosService.addExtraMacros(n.externalMacros),g.services.UserManagerService.onEvent([x.k.CCPA_INFO_RECEIVED]).then((()=>{g.services.MacrosService.setUsPrivacyString(g.services.UserManagerService.getUsPrivacyString())})),g.services.UserManagerService.onEvent([x.k.CONSENT_DATA_UPDATE]).then((()=>{g.services.TrackingService.updateMetadataModel({userId:g.services.UserManagerService.getTrackableUser()});const t=g.services.UserManagerService.getConsentPayload();if(g.services.TrackingService.hasGdprConsentPayload=(0,m.QM)(t),this.services.UserManagerService.gdprConsentMode===s.ProtoGdprConsentModeEnum.NoConsent||this.pi){const t=n.lineItemSettings.lineItems.filter((t=>(0,m.QM)(t.vendorId))).every((t=>this.services.UserManagerService.isConsent(t.vendorId)));this.services.UserManagerService.gdprConsentMode=t?s.ProtoGdprConsentModeEnum.AllGood:s.ProtoGdprConsentModeEnum.NotAllDemandConsent}}));const w={wasPlayerReloaded:this.zi.wasPlayerReloaded(e.playerId),wasPlayerInView:this.zi.getSessionInView(e.playerId)};this.renderer=this.getRendererInstance(n,g,w,this.externalAttributes._appSettings),this.subscribe(I.Xh.SessionView,this.renderer,(()=>{this.zi.addSessionInView(e.playerId)})),this.subscribe(I.Xh.SessionRendered,this.renderer,(()=>{this.Gi(p,r,g.config)}));const _=Object.assign({configEnums:this.getApiConfigEnums(),configEvents:this.getApiConfigEvents()},this.renderer.getApiMethods());let S=e.customJsCode;if(S){const t=`${U}_${g.config.appId}`;this.GLOBAL[t]=_,S=S.cnx_replaceAll(`"{{${U}}}"`,`window.${t}`)}this.renderer.init((()=>{this.Qi(S)}))?this.registerApiSuccess(_):this.registerApiError(v.n9.RenderError,"Player size under supported value")}Wi(t,i,e){return t.disableTracking?new w.G:new a.e({userManagerService:this.services.UserManagerService,browser:i.browser,geoLocation:i.geoLocation,playerId:t.playerId,userId:this.services.UserManagerService.getTrackableUser(),sessionId:i.players[e].sessionId,pageUrl:this.pageUrl,bundleId:this.externalAttributes._appSettings.bundleID,customParam1:this.externalAttributes.customParam1,customParam2:this.externalAttributes.customParam2,customParam3:this.externalAttributes.customParam3,customParam4:this.externalAttributes.customParam4,customParam5:this.externalAttributes.customParam5,abTestId:i.players[e].abTestId,explorationMode:i.explorationMode,bundleAbId:i.bundleAbId,bundlePart:i.bundlePart})}Qi(t,i={useSafeMode:!0}){if(!t)return;const{global:e,useSafeMode:s}=i,n=e||this.GLOBAL;let r;r=s?`\n        (function() {\n            "use strict";\n            try {\n                ${t}\n            }catch(e){\n                console.warn('---CnxCustomApiError---');\n                console.warn(e.message);\n            }\n          })()\n        `:t,(0,o.ML)(n.document.head,n,r.trim())}Ii(){if(this.Pi.includes("{{omidVerificationClient"))return;const t={useSafeMode:!1,global:window};this.Qi(decodeURI(this.Pi),t)}Yi(){const{playerId:t,parseDomain:i}=this.Xi;return this.Zi(t,i).catch((t=>{const i=new Error(t);throw(0,r.n)({callStack:i.stack,level:r.D.CRITICAL,exception:i.message,message:"Prerender_Loader_player_id_call_get_pls"},{throttle:1e3}),this.registerApiError(v.n9.SetupError,"player data call error"),this.Ki(),i}))}te(t){return N(this,void 0,void 0,(function*(){const{browser:i,userInformation:e}=t;if(this.services.UserManagerService.setUserInformation(e),this.services.UserManagerService.setBrowserInfo(i),t.hashedPageUrl&&(yield j.k.loadPageInsights({insightsInputType:D.i.Page,id:t.hashedPageUrl})),e&&e.callFraudSensor){const{lookupId:t,lookupResponseCode:s,publisherAdsTxt:n}=e;this.ui={lookupId:t,lookupResponseCode:s,publisherAdsTxt:n,deviceType:i.device}}b.e.serverAb0=t.serverAb0,b.e.serverAb1=t.serverAb1,(0,g.BZ)(t.players)?(t.players.length>1&&(this.Ti(),this._i=!0),Object.keys(t.players).forEach((i=>{this.ie(t,this.Xi,i)}))):this.registerApiError(v.n9.NoPlayer,`No player available for given player id:${this.Xi.playerId}`),this.Ki()}))}Ki(){this.se(),this.ne()}ne(){setTimeout((()=>{if(!this._i){const t=this.Si[0];this.readyCallback&&this.readyCallback(t.apiErrorObj,t.apiConfigObj)}this.re()}))}re(){this.Si.filter((t=>t.apiErrorObj)).forEach((()=>{this.services.EventsStorageService.emitRenderError()}))}ie(t,i,e){const s=t.players[e],{playerModel:n}=this.yi[e];this.Mi(s.renderInFrame),this.Hi(t,e),this.he(n,this.renderer.playerContainer)}Zi(t,i=!1){let e={parseDomain:i,referrer:this.ki,pageUrl:this.pageUrl,tokens:[t]};e.bundleId=this.externalAttributes._appSettings.bundleID,this.queryParams.cnxLineItemId&&(e.forceLineItemIds=this.queryParams.cnxLineItemId.split(H).filter((t=>(0,m.QM)(t)))),this.queryParams.cnxPlayerId?e.forcePlayerId=this.queryParams.cnxPlayerId:this.externalAttributes.settings._connatixInternals.skipServingRules&&(e.forcePlayerId=t),this.queryParams.cnxExplorationMode&&(e.forceExploration=!0);const{queryJsTargeting:s}=this.externalAttributes.settings;return(0,m.as)(s)&&Object.keys(s).length>0&&(e.queryJsTargeting=(0,h.rM)(s)),e.customParam1=this.externalAttributes.customParam1,e.customParam2=this.externalAttributes.customParam2,e.customParam3=this.externalAttributes.customParam3,e.customParam4=this.externalAttributes.customParam4,e.customParam5=this.externalAttributes.customParam5,e.disableTracking=this.externalAttributes.settings._connatixInternals.disableTracking,e.version=p.g.version,e.es6=p.x,e.userId=this.services.UserManagerService.getForcedTrackableUser(),e.isConsentConnatix=this.services.UserManagerService.isConsentConnatix(),e.clientAb0=b.e.clientAb0,e.clientAb1=b.e.clientAb1,e.implementationType=this.ji(),e.reloadedPlayers=this.zi.getCookiePlayersSession(),e.servingRuleId=this.externalAttributes.servingRuleId,e=Object.assign(Object.assign({},e),this.getSpecificRequestData()),this.Xi.playerId?this.getPlayerResponse(e,this.Xi.playerId||"serverless"):new Promise(((t,i)=>{this.isServerlessMode=!0,t(this.defaultInitFromProto())}))}oe(){const t=(0,d.Ph)("cnxVideoPosition",this.pageUrl),i=parseInt((0,d.Ph)("cnxStoryPosition",this.pageUrl),10);return{cnxStoryId:(0,d.Ph)("cnxStoryId",this.pageUrl),cnxLineItemId:(0,d.Ph)("cnxLineItemId",this.pageUrl),cnxPlayerId:(0,d.Ph)("cnxPlayerId",this.pageUrl),cnxMediaId:(0,d.Ph)("cnxMediaId",this.pageUrl),cnxPlaylistId:(0,d.Ph)("cnxPlaylistId",this.pageUrl),cnxVideoPosition:t?parseInt(t,10):null,cnxExplorationMode:"true"===(0,d.Ph)("cnxExplorationMode",this.pageUrl),cnxStoryPosition:(0,m.r)(i)?i:null,cnxSkipAdsFlag:"true"===(0,d.Ph)("cnxSkipAdsFlag",this.pageUrl),cnxReloadTime:parseInt((0,d.Ph)("cnxReloadTime",this.pageUrl),10),cnxOverrideLineitems:"true"===(0,d.Ph)("cnxOverrideLineitems",this.pageUrl),cnxIsSeoTraffic:"true"===(0,d.Ph)("cnxIsSeoTraffic",this.pageUrl)}}he(t,i){const e=this.getDelegateHandler(),s=new _.N(this.GLOBAL,this.services.EventsStorageService,e,t,i);this.vi?B._.isBannerBlocked||this.Ai.push(B._.onAdBlockerDetected().subscribe((t=>{t||s.start()}))):s.start()}Gi(t,i,e){if(!this.ui)return;const s=this.services.UserManagerService.getTrackableUser();this.ui.deviceIdentifier=e.bundleID;const n=new T.P(t,i,this.ui,s);this.vi?this.Ai.push(B._.onAdBlockerDetected().subscribe((t=>{t||n.addFraudSensorScript()}))):n.addFraudSensorScript()}qi(t){B._.isBannerBlocked||(this.vi?this.Ai.push(B._.onAdBlockerDetected().subscribe((i=>{i||this.services.UserManagerService.setThirdPartySyncUrls(t)}))):this.services.UserManagerService.setThirdPartySyncUrls(t))}ae(){const t=R.$.getSessionClient(this.GLOBAL);t?this.ce=new S.Z(t,this.services.EventsStorageService,this.externalAttributes._appSettings.sdkVersion):(0,r.n)({message:"OmidSessionClient not found.",level:r.D.CRITICAL})}le(t){const i=()=>new Promise(((i,e)=>{const s=this.ue();t.addCssStylesheetToHead(s,(()=>i()),(t=>e(t)))}));return(0,h.Up)((()=>i())).catch((t=>{throw(0,r.n)({message:"Loader_add_css_link",exception:t,level:r.D.INFO}),new Error(t)}))}Ci(t){return t.bandwidthLoggingState===s.ProtoBandwidthLoggingEnum.Enabled?$.Kp:t.bandwidthLoggingState===s.ProtoBandwidthLoggingEnum.SaaS?$.a8:void 0}setApiHostUrl(t){F.n.apiHostUrl=t}setInappPageUrl(t){(0,m.QM)(t)&&(this.pageUrl=t)}updateQueryParams(){this.queryParams=this.oe()}loadScriptTag(t,i){if(this.externalAttributes=t,!(0,h.er)(t.playerId))return(0,r.n)({level:r.D.WARN,message:"Invalid_Player_GUID",exception:t.playerId}),this.registerApiError(v.n9.InvalidGUID,"Invalid PlayerID was provided"),!1;let e;if(i&&(e=this.GLOBAL.document.getElementById(i)),!e)return(0,r.n)({message:"Loader_no_script_id",exception:`${t.playerId}`,level:r.D.WARN}),this.registerApiError(v.n9.SetupError,"Could not locate any script tag ids in the page"),!1;const s=(0,m.as)(t.settings.plugins.adobeAnalyticsSettings);return this.gi&&this.ae(),this.Xi={parseDomain:s,playerId:t.playerId,tag:e},!0}insertRenderer(){try{this.zi=new P.e(this.queryParams.cnxReloadTime),this.Mi();const t=()=>{try{this.Yi().then((t=>{const i=[];t.players.forEach(((e,s)=>{t.players[s].limitClientSideApiUse&&this.Ti();const n=this.Fi(this.Xi,e).then((i=>{this.Ui(e,t.lineItems);const n=this.initUrlSuffixer(e),r=this.getPlayerModel(i,t,n,s.toString()),h=new C.m(r.global);return(0,E.u)(r.lineItemSettings.lineItems),this.yi[s]={playerModel:r,globalDomUtilsService:h,urlSuffixerService:n},this.le(h)})).catch((t=>{this.registerApiError(v.n9.SetupError,"rendering error"),(0,r.n)({message:"Loader_send_data_to_renderer",exception:t.message,callStack:t.stack,level:r.D.CRITICAL})}));i.push(n)})),Promise.all(i).then((()=>this.te(t)))}))}catch(t){(0,r.n)({message:"Prerender_Loader_do_player_call",callStack:t.stack,exception:t.message,level:r.D.WARN},{throttle:1e3})}};this.se=this.services.UserManagerService.registerPlsCall(t)}catch(t){(0,r.n)({message:"Prerender_Loader_insert_renderer",exception:t.message,callStack:t.stack,level:r.D.CRITICAL})}}findPageUrl(t,i,e=!1){if(t.cnx_page_url)this.pageUrl=t.cnx_page_url;else try{t["cnxAmpAd)"]?this.pageUrl=t.context.sourceUrl||t.context.location.href:this.pageUrl=i||(0,h.lU)((0,h.pE)(this.GLOBAL),this.GLOBAL)}catch(t){}if(!this.pageUrl||0===this.pageUrl.length)return e||(0,r.n)({message:"Prerender_Loader_find_page_url",level:r.D.INFO},{throttle:1e3}),new Promise((e=>{setTimeout((()=>{this.findPageUrl(t,i,!0).then((()=>e()))}),this.wi)}));try{return this.pageUrl=(0,d.sH)(this.pageUrl),Promise.resolve()}catch(t){return(0,r.n)({message:"Loader_find_page_url",exception:t.message,callStack:t.stack,level:r.D.CRITICAL}),Promise.reject()}}registerApiError(t=v.n9.SetupError,i=""){this.Si.push({apiErrorObj:{type:t,message:i}})}registerApiSuccess(t){this.Si.push({apiConfigObj:t})}destroy(){this.renderer&&this.renderer.destroy(),(0,L.i)(this.Ai)}}},3810:(t,i,e)=>{"use strict";e.d(i,{e:()=>h});var s=e(8423),n=e(7726),r=e(9115);class h{constructor(t){this.RELOAD_TIME=r.ti,this.RELOAD_COOKIES="cnx_player_reload",this.SESSION_IN_VIEW_FLAG="_sessionWasViewed",this.de={},this.pe={},this.fe={},this.Gt=(0,s.pE)(window).topFrame,this.me(t);try{this.ge()}catch(t){(0,n.n)({message:"PlayerReloader_cookie_fetch_failed",level:n.D.WARN,exception:t})}}wasPlayerReloaded(t){return!!this.de[t]}addPlayerSession(t,i){this.pe[t]=i}getCookiePlayersSession(){return this.de}addSessionInView(t){this.pe[t]+=this.SESSION_IN_VIEW_FLAG}getSessionInView(t){return this.fe[t]}me(t){setTimeout((()=>{this.ve(),this.Gt.location.reload()}),t||this.RELOAD_TIME)}ge(){decodeURIComponent(this.Gt.document.cookie).split(";").forEach((t=>{const i=t.split("=");i[0].includes(this.RELOAD_COOKIES)&&(this.de=JSON.parse(i[1]))})),this.ye(),this.be()}ye(){Object.keys(this.de).forEach((t=>{const i=this.de[t].indexOf(this.SESSION_IN_VIEW_FLAG);i>-1&&(this.de[t]=this.de[t].substr(0,i),this.fe[t]=!0)}))}be(){this.Gt.document.cookie=`${this.RELOAD_COOKIES}=; expires = Thu, 01 Jan 1970 00:00:00 GMT; path=/`}ve(){Object.keys(this.fe).forEach((t=>{this.pe[t].includes(this.SESSION_IN_VIEW_FLAG)||this.addSessionInView(t)}));const t=new Date;let i=t.getTime();i+=r.Y0*r.s_,t.setTime(i),this.Gt.document.cookie=`${this.RELOAD_COOKIES}=${JSON.stringify(this.pe)}; expires=${t.toUTCString()}; path=/`}}},7593:(t,i,e)=>{"use strict";e.d(i,{t:()=>o});var s=e(8423),n=e(7726),r=e(7427),h=e(158);class o{constructor(t,i){this.xe=t,this._e=i,this.Se=(t,i)=>new Promise(((e,s)=>{h.n.sendProtoRequest({ProtoResponse:this.xe,endpoint:t,requestType:"GET",logError:!0,timeout:i}).then((t=>{e(t)})).catch((t=>{s(t)}))}))}fetchMetadata(t,i=5,e=!0,n){const h=t=>403===this.Pe(t);return new Promise(((o,a)=>{(0,s.Up)((()=>this.Se(t,n)),i,h).then((i=>{if((0,r.as)(i))return o(i);const e=new Error("invalid metadata");return this.Ae({url:t,metadata:i,e}),a(e)})).catch((i=>{e&&this.Ae({url:t,e:i}),a(i)}))}))}Ae(t){var i;const e=(0,r.QM)(null===(i=t.e)||void 0===i?void 0:i.message)?t.e.message:"";e.includes("XhrUtils_XMLHttpRequest_error")||(0,n.n)({message:"MediaMetadataHandler_fetchMetadata",exception:`${this._e}_${e}:${JSON.stringify(t)}`,callStack:t.e&&t.e.stack,level:n.D.CRITICAL})}Pe(t){if(t&&t.message){const i=t.message.split("status:")[1];return i?parseInt(i.slice(0,3),10):null}return null}}},5880:(t,i,e)=>{"use strict";e.d(i,{_:()=>n});var s=e(3030);class n{constructor(){this.Ie={}}subscribe(t,i,e){this.Ie[t]||(this.Ie[t]=[]),this.Ie[t].push({context:i,func:e})}unsubscribe(t,i,e){this.Ie[t]&&(this.Ie[t]=this.Ie[t].filter((t=>!(t.context===i&&(t.func===e||!e)))))}unsubscribeAll(t){Object.keys(this.Ie).forEach((i=>{this.Ie[i]=this.Ie[i].filter((i=>i.context!==t))}))}publish(t,i,e={payload:void 0}){Object.prototype.hasOwnProperty.call(this.Ie,i)&&this.Ie[i].forEach((i=>{i.context===t&&i.func(e)}))}relay(t,i,e,n){(0,s.qo)(t).forEach((t=>{this.subscribe(t,i,(i=>{n.publish(e,t,i)}))}))}relayBulk(t,i,e){t.forEach((t=>{this.relay(t.channel,t.source,i,e)}))}}},1580:(t,i,e)=>{"use strict";e.d(i,{N:()=>p});var s,n=e(1561);class r{constructor(t){this.ke=[],this.Ce=t=>{this.ke.push(t)},this.Te=t.subscribe(this.Ce)}get cachedEvents(){return this.ke}destroy(){this.ke=null,this.Te()}}!function(t){t.AdobeAnalytics="AdobeAnalytics",t.MoatAnalytics="MoatAnalytics"}(s||(s={}));var h=e(7427),o=e(7726),a=e(3030),c=e(8423),l=e(6615),u=e(45),d=e(525);class p{constructor(t,i,e,s,n){this.Me=i,this.Ee=e,this.Be=s,this.Oe=n,this.Le=[],this.Re=t=>{try{this.De(t);const i=this.Le.find((i=>i.name===t.type));let e;if(i&&!i.started){i.started=!0;const t=i.eventsCacheHandler;e=t.cachedEvents,t.destroy()}const{adobeAnalyticsSettings:s,moatAnalyticsSettings:n,_debugLogging:r}=this.Be.apiConfig.settings.plugins,{secondLevelDomain:h,playerId:o}=this.Be,a={cachedEvents:e,adobeAnalyticsSettings:s,moatAnalyticsSettings:n,_debugLogging:r,secondLevelDomain:h,playerId:o,pageName:this.je,pageUrl:this.Fe,version:u.g.version,delegateHandlers:this.Ee,playerContainer:this.Oe,playerWindow:window};t.getInstance().start(this.Me,a)}catch(t){(0,o.n)({callStack:t.stack,exception:t.message,level:o.D.CRITICAL,message:"PluginsHandler_initPlugin"})}};const r=(0,c.pE)(t);this.$e=r.topFrame,this.Fe=(0,c.lU)(r,this.$e),this.Fe=(0,l.sH)(this.Fe),this.je=(0,l._Y)(this.Fe)}start(){this.Ne(),this.Ue(),this.$e.cnxPlugins.pluginsHandlers.push(this.Re)}Ne(){let t=[];Array.isArray(this.$e.cnxPlugins)&&this.$e.cnxPlugins.length>0&&(t=this.$e.cnxPlugins,t.forEach((t=>this.Re(t)))),(0,h.as)(this.$e.cnxPlugins)||this.He(t)}Ue(){const t=this.ze();(0,a.BZ)(t)&&this.We(t)}Ge(t){const i=this.$e.cnxPlugins.cachedPlugins;if((0,a.BZ)(i))return i.find((i=>i.type===t))}De(t){this.Ge(t.type)||this.$e.cnxPlugins.cachedPlugins.push(t)}He(t){this.$e.cnxPlugins={cachedPlugins:t,pluginsHandlers:[],push:function(t){this.pluginsHandlers.forEach((i=>{i(t)}))}}}We(t){t.forEach((t=>{this.Ge(t)||this.Le.push({name:t,started:!1,eventsCacheHandler:new r(this.Me)})})),this.Le.forEach((({name:t})=>this.Je(t)))}Qe(t){return Object.values(t).every((t=>(0,h.QM)(t)))}ze(){const t=[];return this.Be.apiConfig.settings.plugins.adobeAnalyticsSettings&&this.Qe(this.Be.apiConfig.settings.plugins.adobeAnalyticsSettings)&&t.push(s.AdobeAnalytics),this.Be.moatTrackingEnabled&&t.push(s.MoatAnalytics),t}Je(t){const i={id:`cnx-${t}`,src:""};switch(t){case s.AdobeAnalytics:i.src=d.n.endPoints.assets.plugins.adobeAnalytics;break;case s.MoatAnalytics:i.src=d.n.endPoints.assets.plugins.moatAnalytics}this.$e.document.getElementById(i.id)||(0,n.dZ)(i,this.$e.document.head,this.$e,null,null,!0,"PluginsHandler_unable_to_insert_plugin_script")}}},5874:(t,i,e)=>{"use strict";var s;e.d(i,{Z:()=>n}),function(t){t[t.HoldStart=0]="HoldStart",t[t.HoldEnd=1]="HoldEnd",t[t.TapLeft=2]="TapLeft",t[t.TapRight=3]="TapRight",t[t.SwipeEnd=4]="SwipeEnd",t[t.SwipeMove=5]="SwipeMove",t[t.Scroll=6]="Scroll",t[t.Click=7]="Click"}(s||(s={}));const n=s},3344:(t,i,e)=>{"use strict";e.d(i,{Ve:()=>o,_f:()=>l,cv:()=>s,fi:()=>r,jI:()=>n,li:()=>u,qZ:()=>c,sm:()=>a,yA:()=>h});const s="Connatix";var n,r,h,o,a,c,l,u;!function(t){t.Generic="generic",t.Video="video"}(n||(n={})),function(t){t.Click="click",t.InvitationAccept="invitationAccept"}(r||(r={})),function(t){t.PreRoll="preroll",t.MidRoll="midroll",t.PostRoll="postroll",t.Standalone="standalone"}(h||(h={})),function(t){t.SessionStart="sessionStart",t.SessionError="sessionError",t.SessionFinish="sessionFinish"}(o||(o={})),function(t){t.DefinedByJavascript="definedByJavaScript",t.BeginToRender="beginToRender"}(a||(a={})),function(t){t.DefinedByJavascript="definedByJavaScript",t.Video="video"}(c||(c={})),function(t){t.sessionError="sessionError",t.geometryChange="geometryChange"}(l||(l={})),function(t){t.backgrounded="backgrounded",t.notFound="notFound"}(u||(u={}))},3217:(t,i,e)=>{"use strict";e.d(i,{Z:()=>u});var s,n,r=e(3344),h=e(3121),o=e(4959);!function(t){t.Minimized="minimized",t.Collapsed="collapsed",t.Normal="normal",t.Expanded="expanded",t.Fullscreen="fullscreen"}(s||(s={})),function(t){t.StateChanged="stateChanged"}(n||(n={}));class a{constructor(t){this.mediator=t}computeState(t){const i=this.Ye(t);this.Xe&&this.Xe.name===i||this.mediator.publish(this,n.StateChanged,{payload:{state:i}}),this.Xe={dimensions:t,name:i},this.Ze||i!==s.Normal||(this.Ze=Object.assign({},this.Xe))}setPlayerState(t){this.Xe&&this.Xe.name===t||this.mediator.publish(this,n.StateChanged,{payload:{state:t}}),this.Xe={name:t},this.Ze||t!==s.Normal||(this.Ze=Object.assign({},this.Xe))}get currentState(){return this.Xe&&this.Xe.name}Ye(t){if(!this.Ze)return s.Normal;const{width:i,height:e}=this.Ze.dimensions,n=i*e,r=t.width*t.height;switch(!0){case n<r:return s.Expanded;case n>r:return s.Collapsed;default:return s.Normal}}}var c=e(5880),l=e(7726);class u extends c._{constructor(t,i,e){super(),this.Ke=t,this.Me=i,this.ts=new a(this),this.es=!1,this.ss={[h.Z.AdError]:()=>this.ns(),[h.Z.PlayError]:()=>this.rs(),[h.Z.RenderError]:()=>this.hs(),[h.Z.AdImpression]:()=>this.cs(),[h.Z.AdComplete]:()=>this.ls(),[h.Z.AdVideoStart]:({adVideoStartMetadata:t})=>this.us(t),[h.Z.AdVideoFirstQuartile]:()=>this.ds(),[h.Z.AdVideoMidpoint]:()=>this.ps(),[h.Z.AdVideoThirdQuartile]:()=>this.gs(),[h.Z.AdVideoComplete]:()=>this.vs(),[h.Z.VolumeChange]:({volume:t})=>this.ys(t),[h.Z.AdPause]:()=>this.bs(),[h.Z.AdPlay]:()=>this.ws(),[h.Z.AdSkipped]:()=>this._s(),[h.Z.AdClickThru]:()=>this.Ss(),[h.Z.AdInteraction]:()=>this.Ps(),[h.Z.AdLoaded]:({adLoadedMetadata:t})=>this.As(t),[h.Z.AdStateChange]:({adStateChangedMetadata:t})=>this.Is(t),[h.Z.PlayerResized]:({playerDimensionsMetadata:t})=>this.ks(t),[h.Z.OnEnterFullscreen]:()=>this.Cs(),[h.Z.PlayerCollapsed]:()=>this.Ts(),[h.Z.PlayerExpanded]:()=>this.Es(),[h.Z.Destroy]:()=>this.unsubscribeAll(this.ts)},this.Bs=t=>{try{const i=this.ss[t.name];if(!i)return;i(t.metadata)}catch(t){(0,l.n)({message:"SessionClientWrapper_omsdk__onEventStorageEvent",exception:t.message,callStack:t.callStack,level:l.D.WARN})}};try{const{AdSession:t,AdEvents:i,MediaEvents:s}=this.Ke,r=this.Os(e);this.Ls=new t(r),this.Rs=new i(this.Ls),this.Ds=new s(this.Ls),this.Me.subscribe(this.Bs),this.subscribe(n.StateChanged,this.ts,(({payload:{state:t}})=>{this.js(t)})),this.Vs()}catch(t){(0,l.n)({message:"SessionClientWrapper_omsdk_classes_init_err",exception:t.message,callStack:t.callStack,level:l.D.WARN})}}ns(){this.Ls.error(r.jI.Video,h.Z.AdError)}rs(){this.Ls.error(r.jI.Video,h.Z.PlayError)}hs(){this.Ls.error(r.jI.Generic,h.Z.RenderError)}Os(t){const{Partner:i,Context:e}=this.Ke;return new e(new i(r.cv,t))}cs(){this.es=!0,this.Rs.impressionOccurred();const t=this.ts.currentState;t!==s.Normal&&this.js(t)}ls(){this.es=!1}us(t){const{duration:i,mediaPlayerVolume:e}=t;this.Ds.start(i,e)}ds(){this.Ds.firstQuartile()}ps(){this.Ds.midpoint()}gs(){this.Ds.thirdQuartile()}vs(){this.Ds.complete()}ys(t){this.es&&this.Ds.volumeChange(t)}bs(){this.Ds.pause()}ws(){this.Ds.resume()}_s(){this.Ds.skipped()}Ss(){this.Ds.adUserInteraction(r.fi.Click)}Ps(){this.Ds.adUserInteraction(r.fi.InvitationAccept)}As(t){const{isSkippable:i,skipOffset:e,isAutoPlay:s}=t,{VastProperties:n}=this.Ke,r=new n(i,e,s,this.$s);this.Rs.loaded(r)}Is({state:t}){this.$s=r.yA[o.I[t]]}js(t){t&&this.Ds.playerStateChange(t)}Ns(t){this.ts.computeState(t)}Us(t){this.ts.setPlayerState(t)}ks(t){this.Ns(t)}Cs(){this.Us(s.Fullscreen)}Ts(){this.Us(s.Minimized)}Es(){this.Us(s.Normal)}Vs(){this.Ls.registerSessionObserver((t=>{t.type===r.Ve.SessionStart?this.zs(t):t.type===r.Ve.SessionError&&(0,l.n)({message:"SessionClientWrapper_omsdk_session_error",exception:t.type,callStack:JSON.stringify(t),level:l.D.WARN},{throttle:1,sendMaxLog:!1})}))}zs(t){t.data.creativeType===r.qZ.DefinedByJavascript&&this.Ls.setCreativeType(r.qZ.Video),t.data.impressionType===r.sm.DefinedByJavascript&&this.Ls.setImpressionType(r.sm.BeginToRender)}}},7382:(t,i,e)=>{"use strict";var s;e.d(i,{$:()=>s}),function(t){const i=["1.3.25-iab3167","1.3.13-iab2343"],e=["1.3.25-iab3167","1.3.13-iab2343"];function s(t,i){if(!t)return null;let e=null;for(let s=0;s<i.length&&(e=t[i[s]],!e);s++);return e}t.getSessionClient=function(t){return s(t.OmidSessionClient,i)},t.getVerificationClient=function(t){return s(t.OmidVerificationClient,e)}}(s||(s={}))},6450:()=>{String.prototype.cnx_replaceAll=function(t,i){return this.split(t).join(i)}},3640:(t,i,e)=>{"use strict";e.d(i,{A:()=>d,u:()=>u});var s=e(7593),n=e(289),r=e(525),h=e(7427),o=e(7726);const a=new s.t(n.ProtoAdDomainBlockingResponse,"AdDomainBlockingService");let c;const l=new Map;function u(t){c||(c=new Promise((i=>{const e=t.find((t=>t.blockedDomainsRevisionNumber));if(!e)return void i();const{publisherLineItemId:s,blockedDomainsRevisionNumber:n}=e,h=`${r.n.endPoints.base.lineItems}${s}/blockedDomains_${n}.bin`;a.fetchMetadata(h,2).then((t=>{l.set(s,t.domains),i()})).catch((()=>{(0,o.n)({message:"AdDomainBlockingService_fetchBlockedDomains_endpoint_unavailable",level:o.D.CRITICAL},{throttle:2,sendMaxLog:!1}),i()}))})))}function d(t,i){return new Promise((e=>{(0,h.QM)(i)?c.then((()=>{l.has(t)&&l.get(t).some((t=>i.includes(t)))?e(!0):e(!1)})):e(!1)}))}},525:(t,i,e)=>{"use strict";e.d(i,{n:()=>a});var s=e(6615),n=e(45),r=e(8423),h=e(7427);class o{constructor(t){this.base=t,this.api={pls:t.core+"core/pls",story:t.core+"core/story",rtb:t.core+"rtb/g",syncUrls:t.core+"core/us",fallbackstory:t.core+"core/fallbackstory",cookie:t.core+"core/ck",tam:t.core+"core/atam"},this.tracking={session_rendered:t.tracking+"sr",session_view:t.tracking+"sv",session_time:t.tracking+"st",session_client_error:t.tracking+"e",media_quartile:t.tracking+"mq",media_click:t.tracking+"mc",ad_impression:t.tracking+"ai",bids:t.tracking+"abt",ad_impression_viewable:t.tracking+"av",ad_quartile:t.tracking+"aq",ad_click:t.tracking+"ac",logging:t.tracking+"e",playerStart:t.tracking+"ps",adOpportunity:t.tracking+"ao",sessionAdBlocker:t.tracking+"sab",heavy_ad_intervention:t.tracking+"ha",auctionInformation:t.tracking+"aucinfo"},this.assets={css:{elements:`${this.Ws(t.assets)}player.css`,playspace:`${this.Ws(t.assets)}connatix.playspace.css`},plugins:{adobeAnalytics:`${t.plugins}p/plugins/adobe.plugin.js`,moatAnalytics:`${t.plugins}p/plugins/moat.plugin.js`,prebidScript:`${t.plugins}p/plugins/prebid6.20.0.js`}}}Ws(t){return`${t}p/${n.g.version}/`}}class a{static set bundleDomain(t){this.Gs=t}static get bundleDomain(){if(!(0,h.QM)(this.Gs))throw new Error("bundleDomain missing");return this.Gs}static set apiHostUrl(t){this.Js=t,a.Qs=a.Ys()}static Zs(t){let i=`capi{{env}}.${t}`;return this.Js&&(i=this.Js),{video:`//vid.${t}/`,image:`//img.${t}/`,core:`https://${i}/`,tracking:`https://${i}/tr/`,metadata:`//vid.${t}/`,insights:`//ins.${t}/`,assets:`//cds{{env}}.${t}/`,plugins:`//cds.${t}/`,lineItems:`//lit.${t}/`}}static Ys(){const t=(0,s.Ph)("cnxEnv",(0,r.pE)(window).topFrame.location.href);t&&(n.g.domainPrefix=`-${t}`);const i=this.Zs(this.bundleDomain);return Object.keys(i).forEach((t=>{i[t]=i[t].replace("{{env}}",n.g.domainPrefix)})),new o(i)}static get endPoints(){return null===a.Qs&&(a.Qs=a.Ys()),a.Qs}}a.Qs=null},4959:(t,i,e)=>{"use strict";e.d(i,{I:()=>s,V:()=>r});var s,n=e(289);!function(t){t[t.PreRoll=0]="PreRoll",t[t.MidRoll=1]="MidRoll",t[t.PostRoll=2]="PostRoll",t[t.Standalone=3]="Standalone"}(s||(s={}));const r={[n.ProtoAdSlotsEnum.PreRoll]:s.PreRoll,[n.ProtoAdSlotsEnum.MidRoll]:s.MidRoll,[n.ProtoAdSlotsEnum.PostRoll]:s.PostRoll}},3121:(t,i,e)=>{"use strict";e.d(i,{Z:()=>n});const s=e(9078).fI,n=Object.assign(Object.assign({},s),{AdBreakStart:"adBreakStart",AdComplete:"adComplete",AdBreakComplete:"adBreakComplete",Pause:"pause",AdPause:"adPause",Play:"play",AdPlay:"adPlay",ContentComplete:"contentComplete",SessionStart:"sessionStart",SessionEnd:"sessionEnd",PlayerResized:"playerStateResize",OnEnterFullscreen:"onEnterFullscreen",OnExitFullscreen:"onExitFullscreen",PlayerCollapsed:"playerCollapsed",PlayerExpanded:"playerExpanded",PlayError:"playError",RenderError:"renderError",AdStateChange:"adStateChange",VolumeChange:"volumeChange",Destroy:"destroy"})},649:(t,i,e)=>{"use strict";e.d(i,{m:()=>l});var s=e(308),n=e(525),r=e(3030),h=e(1561),o=e(8423),a=e(7726),c=e(7427);class l{constructor(t){this.createElement=(t,i=this.$e)=>i.document.createElement(t),this.$e=t,this.addPreconnect()}get global(){return this.$e}addCssString(t,i=""){return(0,h.uc)(t,i,this.$e)}addPreconnect(){(0,h.tp)(n.n.endPoints.base.video,this.$e),(0,h.tp)(n.n.endPoints.base.core,this.$e),(0,h.tp)(n.n.endPoints.base.image,this.$e)}getLineHeightPropertyValue(t){return(0,h.Dx)(t,this.$e).getPropertyValue("line-height")}getFontSizePropertyValue(t){return(0,h.Dx)(t,this.$e).getPropertyValue("font-size")}getFontWeightPropertyValue(t){return(0,h.Dx)(t,this.$e).getPropertyValue("font-weight")}getTransformPropertyValue(t){return(0,h.Dx)(t,this.$e).getPropertyValue("transform")}getPaddingTopPropertyValue(t){return(0,h.Dx)(t,this.$e).getPropertyValue("padding-top")}getPaddingBottomPropertyValue(t){return(0,h.Dx)(t,this.$e).getPropertyValue("padding-bottom")}getMarginTopPropertyValue(t){return(0,h.Dx)(t,this.$e).getPropertyValue("margin-top")}getMarginBottomPropertyValue(t){return(0,h.Dx)(t,this.$e).getPropertyValue("margin-bottom")}getMarginLeftPropertyValue(t){return(0,h.Dx)(t,this.$e).getPropertyValue("margin-left")}getMarginRightPropertyValue(t){return(0,h.Dx)(t,this.$e).getPropertyValue("margin-right")}createElementByString(t,i=this.$e){return(0,h.G$)(t,i)}createDocumentFragment(t=this.$e){return t.document.createDocumentFragment()}isHttpsProtocolUsed(){return(0,h.eA)(this.$e)}isURLSameDomainToTop(t){return(0,h.uh)(t,this.$e)}isDetachedFromDOM(t){let i=t;for(;i.parentNode;)if(i=i.parentNode,i===this.$e.document.body)return!1;return!0}hasIosFullscreenBehaviour(t){return t&&t===s.M.Ios||!this.getFullscreenKeys()}querySelector(t,i=this.$e){let e;try{e=i.document.querySelector(t)}catch(t){}return e}addCssStylesheetToHead(t,i,e){const s=this.$e.document;s.getElementById(t.id)?(0,c.mf)(i)&&i():(0,h.NS)(t,s.head,this.$e,i,e)}getFullscreenKeys(t){return(0,h.S0)(t||this.$e.document)}exitFullscreen(t,i){(i||this.$e.document)[t]()}getDocumentProperty(t){return this.$e.document[t]}addEventListenerOnGlobal(t,i,e,s=!1){(e?this.$e.document:this.$e).addEventListener(t,i,s)}removeEventListenerOnGlobal(t,i,e,s=!1){(e?this.$e.document:this.$e).removeEventListener(t,i,s)}trackWithImages(t,i){(0,o.Hh)(t,this.$e,i)}getElementCoordinates(t){let{top:i,left:e}=t.getBoundingClientRect();const{width:s,height:n}=t.getBoundingClientRect();return i+=this.$e.pageYOffset,e+=this.$e.pageXOffset,{clientX:e,clientY:i,width:s,height:n}}getElementDistanceToViewport(t){const{top:i,left:e}=t.getBoundingClientRect();return{top:i,left:e}}requestAnimationFrameHelper(t){return(0,h.PM)(this.$e,t)}cancelRequestAnimationFrame(t){return(0,h.h_)(this.$e,t)}getGlobalLocationProperties(){const t=this.$e.location;return{hostname:t.hostname,pathname:t.pathname,href:t.href,protocol:t.protocol,host:t.host,port:t.port,search:t.search,hash:t.hash}}open(t,i){this.$e.open(t,i)}getComputedTranslateX(t){let i=0;const e=(0,h.Dx)(t,this.$e).getPropertyValue("transform").match(/^matrix\((.+)\)$/);return(0,r.BZ)(e)&&(i=parseFloat(e[1].split(", ")[4])),i}getBodyDimensions(){try{const t=(0,o.pE)(this.$e).topFrame.document.body;let{offsetWidth:i,offsetHeight:e}=t;const s=(0,h.Dx)(t,this.$e);return i+=parseInt(s.marginLeft,10)+parseInt(s.marginRight,10),e+=parseInt(s.marginTop,10)+parseInt(s.marginBottom,10),{width:i,height:e}}catch(t){return(0,a.n)({message:"DomUtils_error_getting_body_dimensions",exception:t.message,callStack:t.stack,level:a.D.CRITICAL}),{width:0,height:0}}}getViewportWidth(){return(0,o.pE)(this.$e).topFrame.document.documentElement.clientWidth}getViewportHeight(){return(0,o.pE)(this.$e).topFrame.innerHeight}getGlobalClosestTop(){return(0,o.pE)(this.$e)}stripHtmlTags(t){return(0,h.ju)(t,this.$e)}getComputedStyle(t,i){return(0,h.Dx)(t,this.$e,i)}getElementById(t){return(0,h.rI)(t,this.$e)}getElementsByClassName(t){return(0,h.Fs)(t,this.$e)}insertScript(t,i,e){this.$e.document.getElementById(t.id)?(0,c.mf)(i)&&i():(0,h.dZ)(t,this.$e.document.head,this.$e,i,null,!0,e)}destroy(){}}},4974:(t,i,e)=>{"use strict";e.d(i,{k:()=>d});var s=e(7593),n=e(289),r=e(525),h=e(7726),o=e(5732),a=e(8423),c=e(7427),l=function(t,i,e,s){return new(e||(e=Promise))((function(n,r){function h(t){try{a(s.next(t))}catch(t){r(t)}}function o(t){try{a(s.throw(t))}catch(t){r(t)}}function a(t){var i;t.done?n(t.value):(i=t.value,i instanceof e?i:new e((function(t){t(i)}))).then(h,o)}a((s=s.apply(t,i||[])).next())}))};const u={insights:[],sentimentAnalysis:void 0};class d{static loadInsights(t){const{id:i}=t;let e=d.insightsPromiseStore.get(i);return e||(e=new Promise((i=>{const e=d.requestUrlBuilder(t);d.mediaMetadataHandler.fetchMetadata(e,2,false,1e4).then((t=>{const e=t.insights.map((t=>t.key));i({insights:e,sentimentAnalysis:t.sentimentAnalysis})})).catch((t=>{(0,a.Vm)([95,5])&&(0,h.n)({message:"LoadInsightIndexesService_endpoint_unavailable",exception:e,callStack:`${t}`,level:h.D.WARN},{sendMaxLog:!1}),i(u)}))})),d.insightsPromiseStore.set(i,e)),e}static loadPageInsights(t){return l(this,void 0,void 0,(function*(){const i=yield d.loadInsights(t);return d.pageInsights={insights:i.insights},d.pageInsights}))}static requestUrlBuilder({insightsInputType:t,id:i,versionId:e}){return t===o.i.Page||(0,c.$K)(e)||(0,h.n)({message:"LoadInsightIndexesService_requestUrlBuilder_noVersionIdProvided",exception:`Type: ${t}, id: ${i}`,level:h.D.CRITICAL}),t===o.i.Page?`${r.n.endPoints.base.insights}${i}/insights.bin`:`${r.n.endPoints.base.insights}${i}/${e}/insights.bin`}static markAsUnavailable(t){d.insightsPromiseStore.get(t)||d.insightsPromiseStore.set(t,Promise.resolve(u))}}d.mediaMetadataHandler=new s.t(n.ProtoInsightsResponse,"InsightsLoaderService"),d.insightsPromiseStore=new Map},5732:(t,i,e)=>{"use strict";var s;e.d(i,{i:()=>s}),function(t){t[t.Video=0]="Video",t[t.Story=1]="Story",t[t.Page=2]="Page"}(s||(s={}))},5256:(t,i,e)=>{"use strict";var s,n,r,h;e.d(i,{Av:()=>h,HT:()=>n,WR:()=>r,qs:()=>s}),function(t){t[t.X=0]="X",t[t.Y=1]="Y"}(s||(s={})),function(t){t.Click="click",t.InteractionStart="interactionstart",t.Interaction="interaction",t.InteractionEnd="interactionend"}(n||(n={})),function(t){t[t.Swipe=0]="Swipe",t[t.Hold=1]="Hold"}(r||(r={})),function(t){t[t.Left=0]="Left",t[t.Right=1]="Right"}(h||(h={}))},6284:(t,i,e)=>{"use strict";e.d(i,{k:()=>d});var s=e(2820),n=e(5874),r=e(5256),h=e(3030),o=e(1561);const a=0;function c(t){return t.button===a}var l=e(2231),u=e(7427);class d{constructor(t,i,e){this.Ks=t,this.Jt=i,this.mediator=null,this.tn=30,this.en=250,this.sn=25,this.nn=[],this.rn={},this.hn=0,this.an=0,this.ln=!0,this.un=null,this.dn=!1,this.pn=!1,this.mn=!1,this.gn=!1,this.vn=0,this.yn=0,this.bn=null,this.xn=null,this.wn=null,this._n=!0,this.Sn=!1,this.Pn=t=>{this.Jt?(t.element.addEventListener("touchstart",this.An,{passive:!0}),t.element.addEventListener("touchmove",this.In,{passive:!0}),t.element.addEventListener("touchend",this.kn),t.element.addEventListener("touchcancel",this.Cn),t.element.addEventListener("mouseup",this.Tn)):(t.element.addEventListener("mousedown",this.Mn),t.element.addEventListener("mouseup",this.Tn))},this.En=t=>{this.Jt?(t.element.removeEventListener("touchstart",this.An),t.element.removeEventListener("touchmove",this.In),t.element.removeEventListener("touchend",this.kn),t.element.removeEventListener("touchcancel",this.Cn),t.element.removeEventListener("mouseup",this.Tn)):(t.element.removeEventListener("mousedown",this.Mn),t.element.removeEventListener("mouseup",this.Tn))},this.An=t=>{t.stopPropagation();const i=this.Bn(t);this.wn=i,this.pn=!1,this.Ln(i,r.WR.Hold)&&this.Rn(t);const e=this.Dn(t);this.an=e.eventX,this.hn=e.eventY,this.jn(t,i,r.HT.InteractionStart),this.ln=!0},this.In=t=>{t.stopPropagation();const i=this.Bn(t),e=this.Dn(t);if(this.ln&&(Math.abs(e.deltaXFromStart)>this.sn||Math.abs(e.deltaYFromStart)>this.sn)&&(this.ln=!1),this.dn||this.Ln(i,r.WR.Swipe)){if(null===this.bn&&this.Fn(i,e),this.bn===r.qs.Y)return;null===this.xn&&(this.xn=(0,o.PM)(this.Ks,(()=>{this.xn=null,this.Vn(e.deltaXFromStart),i.mediator.publish(i.context,n.Z[n.Z.SwipeMove],{payload:e.deltaXFromStart})})))}},this.kn=t=>{const i=this.Bn(t);if(this.Sn=!1,this.wn===i){const e=this.Dn(t);t.cancelable&&this.Ln(i,r.WR.Hold)&&Math.abs(e.deltaXFromStart)<this.sn&&Math.abs(e.deltaYFromStart)<this.sn&&t.preventDefault(),this.$n(t,i,e);this.Un(e)===r.qs.Y&&Math.abs(e.deltaYFromStart)>=this.sn?this._n&&i.mediator.publish(i.context,n.Z[n.Z.Scroll]):!this.ln||this.mn||this.pn||(this.Sn=!0)}this.wn=null},this.Cn=t=>{const i=this.Bn(t);this.$n(t,i),this.wn=null},this.Mn=t=>{if(!c(t))return void this.Hn(r.HT.InteractionStart,t);const i=this.Bn(t);this.wn=i,t.stopPropagation(),t.preventDefault(),this.Ln(i,r.WR.Hold)&&this.Rn(t),this.jn(t,i,r.HT.InteractionStart)},this.Tn=t=>{const i=this.Bn(t);return this.Sn?(i.mediator.publish(i.context,n.Z[n.Z.Click]),void(this.Sn=!1)):c(t)&&this.wn?(t.stopPropagation(),t.preventDefault(),this.jn(t,this.wn,r.HT.Interaction),this.jn(t,this.wn,r.HT.InteractionEnd),(this.dn||this.Ln(i,r.WR.Hold))&&this.qn(t),this.wn===i&&(this.jn(t,i,r.HT.Click),i.mediator.publish(i.context,n.Z[n.Z.Click])),void(this.wn=null)):(this.Hn(r.HT.Interaction,t),void this.Hn(r.HT.InteractionEnd,t))},this.zn=t=>{if(!c(t))return this.Hn(r.HT.Interaction,t),void this.Hn(r.HT.InteractionEnd,t);this.wn=null},this.Wn=t=>{if(!c(t)||!this.wn)return this.Hn(r.HT.Interaction,t),void this.Hn(r.HT.InteractionEnd,t);this.jn(t,this.wn,r.HT.Interaction),this.jn(t,this.wn,r.HT.InteractionEnd),(this.dn||this.Ln(this.wn,r.WR.Hold))&&this.qn(t),this.wn=null};const{leftTapSizeThreshold:s,holdTriggerDuration:h,scrollThreshold:a}=Object.assign({},e);this.tn=s||this.tn,this.en=h||this.en,this.sn=a||this.sn,this.Ks.document.addEventListener("mousedown",this.zn),this.Ks.document.addEventListener("mouseup",this.Wn)}register(t,i,e,s={},n=[]){const r={element:t,mediator:i,context:e,callbacks:s||{},allowedSpecialInteractions:n,disabledSpecialInteractions:[]};this.nn.push(r),this.Pn(r)}unregister(t){const i=this.nn.find((i=>i.element===t));i&&(this.nn=this.nn.filter((i=>i.element!==t)),this.En(i))}unregisterAll(t){const i=this.nn.filter((i=>i.mediator===t));i.forEach(this.En),this.nn=(0,h.V7)(this.nn,i)}addGlobalActions(t,i){Object.keys(Object.assign({},i)).forEach((e=>{this.rn[e]=this.rn[e]||[],this.rn[e].push({initiator:t,action:i[e]})}))}removeGlobalActions(t){Object.keys(this.rn).forEach((i=>{this.rn[i].some((i=>i.initiator===t))&&(this.rn[i]=this.rn[i].filter((i=>i.initiator!==t)))}))}disableSpecialInteractions(t){const i=this.Gn(t);i&&(i.disabledSpecialInteractions=(0,h.gX)(i.allowedSpecialInteractions))}enableSpecialInteractions(t){const i=this.Gn(t);i&&(i.disabledSpecialInteractions=[])}getNonInterruptibleInteractions(){return[n.Z.HoldStart,n.Z.HoldEnd,n.Z.SwipeMove,n.Z.SwipeEnd,n.Z.Scroll]}disableScrollEvent(){this._n=!1}enableScrollEvent(){this._n=!0}destroy(){clearTimeout(this.un),this.nn.forEach(this.En),this.Ks.document.removeEventListener("mousedown",this.zn),this.Ks.document.removeEventListener("mouseup",this.Wn)}Jn(t){const i=this.Bn(t),e=i.element.getBoundingClientRect(),s=this.Qn(t),n=e.width,r=(0,l.dQ)(0,n,0,100,s);this.Yn(i,this.tn,r)}Yn(t,i,e){e<i?t.mediator.publish(t.context,n.Z[n.Z.TapLeft]):t.mediator.publish(t.context,n.Z[n.Z.TapRight])}Rn(t){clearTimeout(this.un),this.dn=!1,this.mn=!1;const i=this.Bn(t);(0,o.cn)(i.element,s.Gj.OnHold),this.un=setTimeout((()=>{this.dn=!0,this.ln&&(this.mn=!0,i.mediator.publish(i.context,n.Z[n.Z.HoldStart]))}),this.en)}qn(t){clearTimeout(this.un);const i=this.Bn(t);(0,o.IV)(i.element,s.Gj.OnHold),this.dn?(this.dn=!1,this.mn&&(this.mn=!1,i.mediator.publish(i.context,n.Z[n.Z.HoldEnd]))):(this.pn=!0,this.Jn(t))}$n(t,i,e){e=e||this.Dn(t),t.stopPropagation(),this.jn(t,i,r.HT.Interaction),this.jn(t,i,r.HT.InteractionEnd),(this.dn||this.gn||this.ln&&this.Ln(i,r.WR.Hold))&&this.qn(t),(this.gn||this.Ln(i,r.WR.Swipe))&&this.Xn(i,e)}Fn(t,i){this.bn=this.Un(i),this.bn===r.qs.X&&(this.gn=!0,this.dn||(clearTimeout(this.un),this.un=null,this.dn=!0,t.mediator.publish(t.context,n.Z[n.Z.HoldStart])))}Xn(t,i){if(this.gn){const e=this.Zn(i);t.mediator.publish(t.context,n.Z[n.Z.SwipeEnd],{payload:e})}(0,o.h_)(this.Ks,this.xn),this.xn=null,this.gn=!1,this.an=null,this.hn=null,this.bn=null,this.vn=0,this.yn=0}Vn(t){this.yn<this.sn?this.yn++:(this.vn=t,this.yn=0)}Un(t){return Math.abs(t.deltaXFromStart)>=Math.abs(t.deltaYFromStart)?r.qs.X:r.qs.Y}Zn(t){return t.deltaXFromStart-this.vn<0?r.Av.Left:r.Av.Right}Dn(t){const i=t.changedTouches[0];return{deltaXFromStart:i.clientX-this.an,deltaYFromStart:i.clientY-this.hn,eventX:i.clientX,eventY:i.clientY}}Bn(t){return this.wn||this.Gn(t.currentTarget)}Gn(t){return this.nn.find((i=>i.element===t))}Qn(t){const i=this.Bn(t);if(this.Jt){return t.changedTouches[0].clientX-i.element.getBoundingClientRect().left}return t.offsetX}Ln(t,i){return t.allowedSpecialInteractions.includes(i)&&!t.disabledSpecialInteractions.includes(i)}jn(t,i,e){const s=i.callbacks[e];(0,u.mf)(s)&&s(t),this.Hn(e,t)}Hn(t,i){var e;null===(e=this.rn[t])||void 0===e||e.forEach((t=>{t.action(i)}))}}},6438:(t,i,e)=>{"use strict";e.d(i,{c:()=>u});var s,n,r=e(289),h=e(8423),o=e(1561),a=e(2157),c=e(7427),l=e(7726);!function(t){function i(t,i,n,r){const h=t[i];if(!(0,c.QM)(h))return;if(!e(h,r))return;const o=s(h,r);n.has(o)?t[i]=n.get(o):delete t[i]}function e(t,i){return 0===t.indexOf(i[0])&&t.indexOf(i[1],i[1].length)===t.length-i[0].length}function s(t,i){return t.substring(t.indexOf(i[0])+1,t.lastIndexOf(i[1]))}t.searchAndReplaceMacrosInJson=function t(e,s,n){const r=Object.keys(e),h=r.filter((t=>!(0,c.as)(e[t]))),o=r.filter((t=>(0,c.as)(e[t])));return h.forEach((t=>{i(e,t,s,n)})),o.forEach((i=>{t(e[i],s,n)})),e},t.replaceMacrosOnCurrentLevelIfNeeded=i,t.isMacroString=e,t.extractMacroPlaceholder=s}(s||(s={})),function(t){t.AppUrl="APP_URL",t.AppBundle="APP_BUNDLE",t.AppName="APP_NAME",t.Uuid="UUID",t.PageUrl="PAGE_URL",t.AdPosition="AD_POSITION",t.VideoTitle="VIDEO_TITLE",t.MediaTitle="MEDIA_TITLE",t.VideoDuration="VIDEO_DURATION",t.ContentLength="CONTENT_LENGTH",t.VideoDescription="VIDEO_DESCRIPTION",t.VideoUrl="VIDEO_URL",t.VideoId="VIDEO_ID",t.VideoTime="VIDEO_TIME",t.DescriptionUrl="DESCRIPTION_URL",t.VideoKeywords="VIDEO_KEYWORDS",t.Autoplay="AUTOPLAY",t.UserAgent="UA",t.Ip="IP",t.CashBuster="CB",t.Width="WIDTH",t.Height="HEIGHT",t.Domain="DOMAIN",t.SourceReferrer="SOURCE_REFERRER",t.Gdpr="GDPR",t.GdprConsent="GDPR_CONSENT",t.Consent="CONSENT",t.Ctd="CTD",t.Publisher="PUBLISHER",t.Random="RAND",t.Site="SITE",t.SubId="SUB_ID",t.Url="URL",t.UserLat="USER_LAT",t.UserLong="USER_LONG",t.UsPrivacyString="US_PRIVACY",t.Npa="NPA",t.DoNotTrack="DNT",t.FraudSensorUserId="FS_USER_ID",t.PublisherId="PUBLISHER_ID",t.SessionId="SESSION_ID",t.FraudSensorDeviceType="FS_DEVICE_TYPE",t.FraudSensorLookupId="MGID",t.FraudSensorLookupResponseCode="MGTO",t.FraudSensorMediaType="FS_MEDIA_TYPE",t.FraudSensorDeviceIdentifier="FS_DEVICE_IDENT",t.CnxSupplierId="CNX_SUPPLIER_ID",t.AdxPublisherNetworkCode="ADX_CPNC"}(n||(n={}));class u{constructor(t,i,e,s,h,o,l){this.Kn=new Map,this.tr="[",this.ir="]",this.Kn.set(n.Autoplay,t.playbackMode===r.ProtoPlayerPlaybackModeEnum.Autoplay),this.Kn.set(n.UserAgent,navigator.userAgent),this.Kn.set(n.UserLong,i.lon),this.Kn.set(n.UserLat,i.lat),this.Kn.set(n.Ip,i.ip),this.sr(h),this.nr(o),this.rr(e),this.hr(),this.Kn.set(n.Domain,s),this.Kn.set(n.CnxSupplierId,a.kd),this.Kn.set(n.SessionId,t.sessionId),(0,c.QM)(l)&&this.Kn.set(n.AdxPublisherNetworkCode,`,${l}`)}sr(t){this.Kn.set(n.AppBundle,t.bundleID),this.Kn.set(n.AppName,t.appName),this.Kn.set(n.AppUrl,t.storeURL)}nr(t){this.Kn.set(n.SourceReferrer,t)}hr(){const t=(0,o.w6)()?1:0;this.Kn.set(n.DoNotTrack,t)}rr(t){this.Kn.set(n.PageUrl,t),this.Kn.set(n.Url,t),this.Kn.set(n.Publisher,t),this.Kn.set(n.Site,t),this.Kn.set(n.DescriptionUrl,t)}ar(){const t=(0,h.qs)();this.Kn.set(n.CashBuster,t),this.Kn.set(n.Random,t),this.Kn.set(n.Ctd,t)}cr(t){return t.split("?")[0]}lr(t){return t.split("?").slice(1).join("?")}ur(t,i){const e=this.cr(t),s=this.dr(this.lr(t),i);return`${e}${s?`?${s}`:""}`}dr(t,i,e=!1){let n=t;const r=n.split("&"),h=[this.tr,this.ir];try{r.forEach((t=>{const r=t.split("=");if(r[1])if(s.isMacroString(r[1],h))n=n.replace(r[1],this.pr(r[1].toLowerCase(),i,e));else if(decodeURIComponent(r[1]).split("=").length>1){const t=this.dr(decodeURIComponent(r[1]),i,!0);n=n.replace(r[1],encodeURIComponent(t))}}))}catch(i){throw(0,l.n)({message:"MacrosService_handleMacros",exception:i.message,callStack:t,level:l.D.CRITICAL},{throttle:1}),i}return n=this.gr(n,i),this.vr(n)}vr(t){return t.includes(this.tr)&&(t=t.cnx_replaceAll(this.tr,encodeURIComponent(this.tr))),t.includes(this.ir)&&(t=t.cnx_replaceAll(this.ir,encodeURIComponent(this.ir))),t}pr(t,i,e){let s,n=t;return i.forEach(((t,i)=>{for(;n.includes(this.tr+i.toLowerCase()+this.ir);)s=e?t:encodeURIComponent(t),n=n.replace(this.tr+i.toLowerCase()+this.ir,s)})),n}gr(t,i){const e=`${this.tr}${n.AdxPublisherNetworkCode}${this.ir}`;return t.includes(e)?i.has(n.AdxPublisherNetworkCode)?t.cnx_replaceAll(e,i.get(n.AdxPublisherNetworkCode)):t.cnx_replaceAll(e,""):t}setAdWidth(t){this.Kn.set(n.Width,Math.floor(t))}setAdHeight(t){this.Kn.set(n.Height,Math.floor(t))}setSubId(t){this.Kn.set(n.SubId,t)}setGDPR(t){this.Kn.set(n.Gdpr,t)}setUUID(t){this.Kn.set(n.Uuid,t)}setGDPRConsent(t){this.Kn.set(n.GdprConsent,t)}setConsent(t){this.Kn.set(n.Consent,t)}setVideoId(t){this.Kn.set(n.VideoId,t)}setNPA(t){this.Kn.set(n.Npa,t)}setVideoTime(t){this.Kn.set(n.VideoTime,Math.floor(t))}setVideoUrl(t){this.Kn.set(n.VideoUrl,t)}setVideoDescription(t){this.Kn.set(n.VideoDescription,t)}setVideoDuration(t){this.Kn.set(n.VideoDuration,t),this.Kn.set(n.ContentLength,t)}setVideoTitle(t){let i;this.Kn.set(n.VideoTitle,t),this.Kn.set(n.MediaTitle,t),t&&(i=t.split(" ").join(",")),this.Kn.set(n.VideoKeywords,i)}setAdPosition(t="midRoll"){this.Kn.set(n.AdPosition,t)}setupMacros(t){return this.ar(),this.ur(t,this.Kn)}replaceMacrosInJsonString(t){const i=[this.tr,this.ir],e=JSON.parse(t),n=s.searchAndReplaceMacrosInJson(e,this.Kn,i);return JSON.stringify(n)}addExtraMacros(t){const i=Object.values(n);Object.keys(t).filter((t=>!i.includes(t.toUpperCase()))).forEach((i=>{this.Kn.set(i,t[i])}))}getExtraMacros(){const t=Object.values(n),i={};return this.Kn.forEach(((e,s)=>{t.includes(s)||null==e||(i[s]=(0,c.QM)(e)?e:JSON.stringify(e))})),i}setUsPrivacyString(t){const i=t||"";this.Kn.set(n.UsPrivacyString,i)}setUserId(t){this.Kn.set(n.FraudSensorUserId,t)}setPublisherId(t){this.Kn.set(n.PublisherId,t)}setFraudSensorMacros(t){this.Kn.set(n.FraudSensorDeviceType,t.deviceType),this.Kn.set(n.FraudSensorLookupId,t.lookupId),this.Kn.set(n.FraudSensorLookupResponseCode,t.lookupResponseCode),this.Kn.set(n.FraudSensorMediaType,t.mediaType),this.Kn.set(n.FraudSensorDeviceIdentifier,t.deviceIdentifier)}destroy(){}}},2356:(t,i,e)=>{"use strict";var s,n;e.d(i,{v:()=>r}),function(t){t.hidden="hidden",t.msHidden="msHidden",t.webkitHidden="webkitHidden"}(s||(s={})),function(t){t.visibilitychange="visibilitychange",t.msvisibilitychange="msvisibilitychange",t.webkitvisibilitychange="webkitvisibilitychange"}(n||(n={}));class r{constructor(t){this.yr=t,this.wr=[],this._r(),this.Sr()}on(t){this.wr.push(t),t(this.isDocumentVisible())}off(t){this.wr=this.wr.filter((i=>i!==t))}_r(){void 0!==this.yr.getDocumentProperty(s.hidden)?(this.Pr=s.hidden,this.Ar=n.visibilitychange):void 0!==this.yr.getDocumentProperty(s.msHidden)?(this.Pr=s.msHidden,this.Ar=n.msvisibilitychange):void 0!==this.yr.getDocumentProperty(s.webkitHidden)&&(this.Pr=s.webkitHidden,this.Ar=n.webkitvisibilitychange)}Sr(){this.yr.addEventListenerOnGlobal(this.Ar,(()=>{this.wr.forEach((t=>{t(this.isDocumentVisible())}))}),!0,!1)}isDocumentVisible(){return!this.yr.getDocumentProperty(this.Pr)}}},7398:(t,i,e)=>{"use strict";e.d(i,{a:()=>z});var s,n=e(7726),r=e(1561),h=[],o="ResizeObserver loop completed with undelivered notifications.";!function(t){t.BORDER_BOX="border-box",t.CONTENT_BOX="content-box",t.DEVICE_PIXEL_CONTENT_BOX="device-pixel-content-box"}(s||(s={}));var a,c=function(t){return Object.freeze(t)},l=function(t,i){this.inlineSize=t,this.blockSize=i,c(this)},u=function(){function t(t,i,e,s){return this.x=t,this.y=i,this.width=e,this.height=s,this.top=this.y,this.left=this.x,this.bottom=this.top+this.height,this.right=this.left+this.width,c(this)}return t.prototype.toJSON=function(){var t=this;return{x:t.x,y:t.y,top:t.top,right:t.right,bottom:t.bottom,left:t.left,width:t.width,height:t.height}},t.fromRect=function(i){return new t(i.x,i.y,i.width,i.height)},t}(),d=function(t){return t instanceof SVGElement&&"getBBox"in t},p=function(t){if(d(t)){var i=t.getBBox(),e=i.width,s=i.height;return!e&&!s}var n=t,r=n.offsetWidth,h=n.offsetHeight;return!(r||h||t.getClientRects().length)},f=function(t){var i,e;if(t instanceof Element)return!0;var s=null===(e=null===(i=t)||void 0===i?void 0:i.ownerDocument)||void 0===e?void 0:e.defaultView;return!!(s&&t instanceof s.Element)},m="undefined"!=typeof window?window:{},g=new WeakMap,v=/auto|scroll/,y=/^tb|vertical/,b=/msie|trident/i.test(m.navigator&&m.navigator.userAgent),x=function(t){return parseFloat(t||"0")},w=function(t,i,e){return void 0===t&&(t=0),void 0===i&&(i=0),void 0===e&&(e=!1),new l((e?i:t)||0,(e?t:i)||0)},_=c({devicePixelContentBoxSize:w(),borderBoxSize:w(),contentBoxSize:w(),contentRect:new u(0,0,0,0)}),S=function(t,i){if(void 0===i&&(i=!1),g.has(t)&&!i)return g.get(t);if(p(t))return g.set(t,_),_;var e=getComputedStyle(t),s=d(t)&&t.ownerSVGElement&&t.getBBox(),n=!b&&"border-box"===e.boxSizing,r=y.test(e.writingMode||""),h=!s&&v.test(e.overflowY||""),o=!s&&v.test(e.overflowX||""),a=s?0:x(e.paddingTop),l=s?0:x(e.paddingRight),f=s?0:x(e.paddingBottom),m=s?0:x(e.paddingLeft),S=s?0:x(e.borderTopWidth),P=s?0:x(e.borderRightWidth),A=s?0:x(e.borderBottomWidth),I=m+l,k=a+f,C=(s?0:x(e.borderLeftWidth))+P,T=S+A,M=o?t.offsetHeight-T-t.clientHeight:0,E=h?t.offsetWidth-C-t.clientWidth:0,B=n?I+C:0,O=n?k+T:0,L=s?s.width:x(e.width)-B-E,R=s?s.height:x(e.height)-O-M,D=L+I+E+C,j=R+k+M+T,F=c({devicePixelContentBoxSize:w(Math.round(L*devicePixelRatio),Math.round(R*devicePixelRatio),r),borderBoxSize:w(D,j,r),contentBoxSize:w(L,R,r),contentRect:new u(m,a,L,R)});return g.set(t,F),F},P=function(t,i,e){var n=S(t,e),r=n.borderBoxSize,h=n.contentBoxSize,o=n.devicePixelContentBoxSize;switch(i){case s.DEVICE_PIXEL_CONTENT_BOX:return o;case s.BORDER_BOX:return r;default:return h}},A=function(t){var i=S(t);this.target=t,this.contentRect=i.contentRect,this.borderBoxSize=c([i.borderBoxSize]),this.contentBoxSize=c([i.contentBoxSize]),this.devicePixelContentBoxSize=c([i.devicePixelContentBoxSize])},I=function(t){if(p(t))return 1/0;for(var i=0,e=t.parentNode;e;)i+=1,e=e.parentNode;return i},k=function(){var t=1/0,i=[];h.forEach((function(e){if(0!==e.activeTargets.length){var s=[];e.activeTargets.forEach((function(i){var e=new A(i.target),n=I(i.target);s.push(e),i.lastReportedSize=P(i.target,i.observedBox),n<t&&(t=n)})),i.push((function(){e.callback.call(e.observer,s,e.observer)})),e.activeTargets.splice(0,e.activeTargets.length)}}));for(var e=0,s=i;e<s.length;e++){(0,s[e])()}return t},C=function(t){h.forEach((function(i){i.activeTargets.splice(0,i.activeTargets.length),i.skippedTargets.splice(0,i.skippedTargets.length),i.observationTargets.forEach((function(e){e.isActive()&&(I(e.target)>t?i.activeTargets.push(e):i.skippedTargets.push(e))}))}))},T=function(){var t,i=0;for(C(i);h.some((function(t){return t.activeTargets.length>0}));)i=k(),C(i);return h.some((function(t){return t.skippedTargets.length>0}))&&("function"==typeof ErrorEvent?t=new ErrorEvent("error",{message:o}):((t=document.createEvent("Event")).initEvent("error",!1,!1),t.message=o),window.dispatchEvent(t)),i>0},M=[],E=function(t){if(!a){var i=0,e=document.createTextNode("");new MutationObserver((function(){return M.splice(0).forEach((function(t){return t()}))})).observe(e,{characterData:!0}),a=function(){e.textContent=""+(i?i--:i++)}}M.push(t),a()},B=0,O={attributes:!0,characterData:!0,childList:!0,subtree:!0},L=["resize","load","transitionend","animationend","animationstart","animationiteration","keyup","keydown","mouseup","mousedown","mouseover","mouseout","blur","focus"],R=function(t){return void 0===t&&(t=0),Date.now()+t},D=!1,j=new(function(){function t(){var t=this;this.stopped=!0,this.listener=function(){return t.schedule()}}return t.prototype.run=function(t){var i=this;if(void 0===t&&(t=250),!D){D=!0;var e,s=R(t);e=function(){var e=!1;try{e=T()}finally{if(D=!1,t=s-R(),!B)return;e?i.run(1e3):t>0?i.run(t):i.start()}},E((function(){requestAnimationFrame(e)}))}},t.prototype.schedule=function(){this.stop(),this.run()},t.prototype.observe=function(){var t=this,i=function(){return t.observer&&t.observer.observe(document.body,O)};document.body?i():m.addEventListener("DOMContentLoaded",i)},t.prototype.start=function(){var t=this;this.stopped&&(this.stopped=!1,this.observer=new MutationObserver(this.listener),this.observe(),L.forEach((function(i){return m.addEventListener(i,t.listener,!0)})))},t.prototype.stop=function(){var t=this;this.stopped||(this.observer&&this.observer.disconnect(),L.forEach((function(i){return m.removeEventListener(i,t.listener,!0)})),this.stopped=!0)},t}()),F=function(t){!B&&t>0&&j.start(),!(B+=t)&&j.stop()},V=function(){function t(t,i){this.target=t,this.observedBox=i||s.CONTENT_BOX,this.lastReportedSize={inlineSize:0,blockSize:0}}return t.prototype.isActive=function(){var t,i=P(this.target,this.observedBox,!0);return t=this.target,d(t)||function(t){switch(t.tagName){case"INPUT":if("image"!==t.type)break;case"VIDEO":case"AUDIO":case"EMBED":case"OBJECT":case"CANVAS":case"IFRAME":case"IMG":return!0}return!1}(t)||"inline"!==getComputedStyle(t).display||(this.lastReportedSize=i),this.lastReportedSize.inlineSize!==i.inlineSize||this.lastReportedSize.blockSize!==i.blockSize},t}(),$=function(t,i){this.activeTargets=[],this.skippedTargets=[],this.observationTargets=[],this.observer=t,this.callback=i},N=new WeakMap,U=function(t,i){for(var e=0;e<t.length;e+=1)if(t[e].target===i)return e;return-1},H=function(){function t(){}return t.connect=function(t,i){var e=new $(t,i);N.set(t,e)},t.observe=function(t,i,e){var s=N.get(t),n=0===s.observationTargets.length;U(s.observationTargets,i)<0&&(n&&h.push(s),s.observationTargets.push(new V(i,e&&e.box)),F(1),j.schedule())},t.unobserve=function(t,i){var e=N.get(t),s=U(e.observationTargets,i),n=1===e.observationTargets.length;s>=0&&(n&&h.splice(h.indexOf(e),1),e.observationTargets.splice(s,1),F(-1))},t.disconnect=function(t){var i=this,e=N.get(t);e.observationTargets.slice().forEach((function(e){return i.unobserve(t,e.target)})),e.activeTargets.splice(0,e.activeTargets.length)},t}(),q=function(){function t(t){if(0===arguments.length)throw new TypeError("Failed to construct 'ResizeObserver': 1 argument required, but only 0 present.");if("function"!=typeof t)throw new TypeError("Failed to construct 'ResizeObserver': The callback provided as parameter 1 is not a function.");H.connect(this,t)}return t.prototype.observe=function(t,i){if(0===arguments.length)throw new TypeError("Failed to execute 'observe' on 'ResizeObserver': 1 argument required, but only 0 present.");if(!f(t))throw new TypeError("Failed to execute 'observe' on 'ResizeObserver': parameter 1 is not of type 'Element");H.observe(this,t,i)},t.prototype.unobserve=function(t){if(0===arguments.length)throw new TypeError("Failed to execute 'unobserve' on 'ResizeObserver': 1 argument required, but only 0 present.");if(!f(t))throw new TypeError("Failed to execute 'unobserve' on 'ResizeObserver': parameter 1 is not of type 'Element");H.unobserve(this,t)},t.prototype.disconnect=function(){H.disconnect(this)},t.toString=function(){return"function ResizeObserver () { [polyfill code] }"},t}();class z{constructor(t){this.Ir=[],this.kr=(t,i)=>{t.forEach((t=>{this.Cr(t.target).forEach((t=>{t&&((0,r.Tp)(t.element),t.callback(t.element))}))}))};try{const i=t.ResizeObserver||q;this.Tr=new i(this.kr)}catch(t){(0,n.n)({message:"ResizeObserver_constructor",callStack:t.stack,exception:t.message,level:n.D.CRITICAL})}}on(t,i){this.Mr(t,i)||(this.Ir.push({element:t,callback:i}),this.Tr.observe(t))}off(t,i){const e=this.Mr(t,i);if(!e)return;this.Tr.unobserve(e.element);const s=this.Ir.indexOf(e);s>=0&&this.Ir.splice(s,1)}destroy(){if(this.Ir)for(;this.Ir.length>0;)this.Ir.pop();this.Tr.disconnect()}Cr(t){return this.Ir.filter((i=>i.element===t))}Mr(t,i){return this.Ir.find((e=>e.element===t&&e.callback===i))}}},3352:(t,i,e)=>{"use strict";e.d(i,{G:()=>s});class s{setNewMedia(){}updateMediaMetadata(){}setMediaStart(){}setContentStart(){}setSessionPlayback(){}setSessionViewability(){}trackSessionRendered(){}trackSessionViewability(){}trackMediaQuartile(){}trackMediaClick(){}setAdStart(){}startBidTrackingInterval(){}addPrebid(){}addPostBid(){}addBid(){}trackAuctionInfoForBid(){}trackVideoAdImpression(){}trackVideoAdImpressionViewable(){}trackVideoAdQuartile(){}trackAdClick(){}trackAdOpportunity(){}trackSessionAdBlocker(){}getMetadataModel(){}getPlayerSize(){return{playerWidth:0,playerHeight:0}}updateMetadataModel(){}updatePlayerDimensions(t,i){}setIsConsentPayload(){}destroy(){}publish(){}setImplementationTypeOnMeta(){}trackHeavyAdIntervention(){}}},9446:(t,i,e)=>{"use strict";e.d(i,{e:()=>b});var s=e(158),n=e(289),r=e(45),h=e(525),o=e(5880),a=e(7427),c=e(1730),l=e(7577),u=e(8423),d=e(3030),p=e(497),f=(e(7417),e(6716)),m=e(4974),g=e(1886),v=e(9115);class y{constructor(){this.Er=null,this.Br=0}Or(){if(null===this.Er)return;const t=(new Date).getTime();this.Br=t-this.Er}startCountingTime(){this.Er=(new Date).getTime()}stopCountingTime(){this.Or(),this.Er=null}fetchTime(t){this.Or();const i=Math.round(this.Br/v.s_);return this.Br=0,null!==this.Er&&this.startCountingTime(),i>t?t:i}}class b extends o._{constructor({userId:t,playerId:i,geoLocation:e,browser:s,sessionId:n,pageUrl:h,bundleId:o,Lr:a,userManagerService:l,customParam1:p,customParam2:m,customParam3:g,customParam4:v,customParam5:b,abTestId:x,explorationMode:w,bundleAbId:_,bundlePart:S}){super(),this.hasGdprConsentPayload=!1,this.Rr={},this.Dr={},this.jr=!1,this.Fr=!1,this.Vr=!1,this.$r=!1,this.Nr=[],this.Ur=[],this.Hr=[],this.qr=5e3,this.zr=!1,this.Wr=[{delay:7,timesRepeatDelay:1},{delay:8,timesRepeatDelay:1},{delay:15,timesRepeatDelay:3},{delay:30,timesRepeatDelay:2},{delay:60,timesRepeatDelay:1},{delay:120,timesRepeatDelay:1},{delay:300,timesRepeatDelay:8},{delay:600,timesRepeatDelay:13},{delay:1800}],this.Gr=0,this.Jr=0,this.Qr=0,this.Yr=new f.x,this.Xr=new f.x,this.Kr=new f.x;(0,d.d3)(i,[])?this.Rr.trackAllRequests=!0:this.Rr.trackAllRequests=1===(0,u.Vm)([99,1]),this.th=l,this.Rr.userId=t,this.Rr.playerId=i,this.Rr.geo=e,this.Rr.browser=s,this.Rr.version=r.g.version,this.Rr.sessionId=n,this.Rr.clientAb0=c.e.clientAb0,this.Rr.clientAb1=c.e.clientAb1,this.Rr.serverAb0=c.e.serverAb0,this.Rr.serverAb1=c.e.serverAb1,this.Rr.pageUrl=h,this.Rr.bundleId=o,this.Rr.customParam1=p,this.Rr.customParam2=m,this.Rr.customParam3=g,this.Rr.customParam4=v,this.Rr.customParam5=b,this.Rr.bundleAbId=_,this.Rr.bundlePart=S,this.Rr.abTestId=x,this.ih=new y,this.eh=new y,this.sh=w}nh(t,i=n.ProtoTrackingRequest,e,r=!0){return this.Rr.pageInFocus=p.S.pageFocus,s.n.sendProtoBeaconRequest({endpoint:t,ProtoRequest:i,requestData:Object.assign({trackingRequestMeta:r?this.Rr:void 0},e),logError:!1})}rh(t,i=n.ProtoTrackingRequest,e){this.Rr.pageInFocus=p.S.pageFocus;const h=s.n.sendProtoRequest({endpoint:t,ProtoRequest:i,ProtoResponse:n.ProtoTrackingResponse,requestData:Object.assign({trackingRequestMeta:this.Rr},e),queryParams:Object.assign({[l.Fk]:r.g.version},g.f.getCidKeyValueObject()),withCredentials:!0,logError:!0});return h.then((t=>{var i;const s=t.platformCappedLineItemIdList;(0,d.BZ)(s)&&this.Yr.next(s);const{impressionRevenue:n,adServerLineItemName:r}=t;if((0,a.r)(n)&&(0,a.QM)(r)&&this.Xr.next({impressionRevenue:n,adServerLineItemName:r}),(0,a.$K)(t.viewability)){const s=null===(i=e)||void 0===i?void 0:i.advertiserLineItemId;this.Kr.next([s,t.viewability])}})).catch((t=>{})),h}hh(t,i,e=n.ProtoMediaTrackingRequest){const s=Object.assign({},i);(0,a.QM)(this.Dr.mediaId)&&(s.mediaGuid=this.Dr.mediaId),this.rh(t,e,s)}oh(){var t;this.zr||(this.zr=!0,this.rh(h.n.endPoints.tracking.playerStart,n.ProtoPlayerStartRequest,{pageInsightIndexes:null===(t=m.k.pageInsights)||void 0===t?void 0:t.insights}))}ah(t,i,e=n.ProtoMediaTrackingRequest){var s;return this.rh(t,e,Object.assign({mediaGuid:this.Dr.mediaId,insightIndexes:this.Dr.insights,sentimentAnalysis:this.Dr.sentimentAnalysis,pageInsightIndexes:null===(s=m.k.pageInsights)||void 0===s?void 0:s.insights},i))}lh(t){this.hh(h.n.endPoints.tracking.media_quartile,{baseMeta:this.Dr,mediaId:this.Dr.mediaId,insightIndexes:this.Dr.insights,sentimentAnalysis:this.Dr.sentimentAnalysis,quartile:t})}dh(){this.ph(this.Ur,this.Nr,this.Hr),this.Ur=[],this.Nr=[],this.Hr=[]}ph(t,i,e){if(0===t.length&&0===i.length&&0===e.length)return;e.forEach((t=>{t.error&&t.error.length>0&&(t.error=t.error.substring(0,500))}));const s={mediaGuid:this.Dr.mediaId,prebids:t,bids:i,postBids:e,logEveryting:this.Rr.trackAllRequests,hasGdprConsentPayload:this.hasGdprConsentPayload,gdprConsentMode:this.th.gdprConsentMode,useExploration:this.sh};this.rh(h.n.endPoints.tracking.bids,n.ProtoBidTrackingsRequest,s)}fh(t){var i;this.rh(h.n.endPoints.tracking.ad_click,n.ProtoAdClickTrackingRequest,Object.assign({mediaGuid:this.Dr.mediaId,insightIndexes:this.Dr.insights,sentimentAnalysis:this.Dr.sentimentAnalysis,pageInsightIndexes:null===(i=m.k.pageInsights)||void 0===i?void 0:i.insights},t))}mh(t){this.nh(h.n.endPoints.tracking.heavy_ad_intervention,n.ProtoHeavyAdTrackingRequest,t)}gh(){const t=this.Wr[this.Gr];clearTimeout(this.yh),this.yh=setTimeout((()=>{this.bh(t.delay),(0,a.r)(t.timesRepeatDelay)&&t.timesRepeatDelay--,0===t.timesRepeatDelay&&this.Gr++,this.gh()}),1e3*t.delay)}bh(t){var i;this.rh(h.n.endPoints.tracking.session_time,n.ProtoSessionTimeTrackingRequest,{trackingRequestMeta:this.Rr,sessionTime:t,timePlayed:this.ih.fetchTime(t),timePlayedInView:this.eh.fetchTime(t),pageInsightIndexes:null===(i=m.k.pageInsights)||void 0===i?void 0:i.insights})}xh(t){return t.playerWidth=this.Jr,t.playerHeight=this.Qr,t}get onLineItemPlatformCapped(){return this.Yr.asObservable()}get onLineItemViewabilityChange(){return this.Kr.asObservable()}get onImpressionRevenue(){return this.Xr.asObservable()}setNewMedia(t){this.Dr=t}updateMediaMetadata(t){this.Dr=t}setImplementationTypeOnMeta(t){this.Rr.implementationType=t}setMediaStart(){this.lh(n.ProtoQuartilesEnum.Start)}setContentStart(){this.oh()}setSessionPlayback(t){this.Vr!==t&&(this.Vr=t,this.$r&&this.Vr&&this.eh.startCountingTime(),this.Vr?this.ih.startCountingTime():(this.ih.stopCountingTime(),this.eh.stopCountingTime()))}setSessionViewability(t){this.$r!==t&&(this.$r=t,this.$r&&this.Vr?this.eh.startCountingTime():this.$r||this.eh.stopCountingTime())}trackSessionRendered(t){var i;if(this.jr)return;this.rh(h.n.endPoints.tracking.session_rendered,n.ProtoTrackingRequest,{playerHeight:this.Qr,playerWidth:this.Jr,hasAdBlocker:t,bundleName:"connatix.player.dc.js",pageInsightIndexes:null===(i=m.k.pageInsights)||void 0===i?void 0:i.insights}),this.jr=!0,this.gh()}trackSessionViewability(){var t;!this.Fr&&this.zr&&(this.rh(h.n.endPoints.tracking.session_view,n.ProtoSessionViewRequest,{pageInsightIndexes:null===(t=m.k.pageInsights)||void 0===t?void 0:t.insights}),this.Fr=!0)}trackMediaQuartile(t){this.lh(t)}trackMediaClick(t=n.ProtoMediaClickTypeEnum.Click){const i={type:t,clickUrl:t===n.ProtoMediaClickTypeEnum.UrlClick?this.Dr.clickUrl:void 0,insightIndexes:this.Dr.insights,sentimentAnalysis:this.Dr.sentimentAnalysis,slideTitle:this.Dr.slideTitle,slideNumber:this.Dr.slideNumber,slideMediaType:this.Dr.slideMediaType};this.hh(h.n.endPoints.tracking.media_click,i,n.ProtoMediaClickTrackingRequest)}setAdStart(){this.oh()}startBidTrackingInterval(){this.wh=setInterval((()=>{this.dh()}),this.qr)}addPrebid(t){t=this.xh(t),this.Ur.push(t)}addPostBid(t){t=this.xh(t),(0,a.HD)(t.error)||(t.error=JSON.stringify(t.error)),this.Hr.push(t)}addBid(t){t=this.xh(t),this.Nr.push(t)}trackAuctionInfoForBid(t){this.rh(h.n.endPoints.tracking.auctionInformation,n.ProtoAuctionInfoRequest,t)}trackVideoAdImpression(t){return t=this.xh(t),this.ah(h.n.endPoints.tracking.ad_impression,t,n.ProtoVideoAdImpressionRequest)}trackVideoAdImpressionViewable(t){return this.ah(h.n.endPoints.tracking.ad_impression_viewable,t,n.ProtoVideoAdImpressionViewableRequest)}trackVideoAdQuartile(t){var i;t=Object.assign(Object.assign({},t),{insightIndexes:this.Dr.insights,sentimentAnalysis:this.Dr.sentimentAnalysis,pageInsightIndexes:null===(i=m.k.pageInsights)||void 0===i?void 0:i.insights}),this.hh(h.n.endPoints.tracking.ad_quartile,t,n.ProtoVideoAdQuartilesRequest)}trackAdClick(t){this.fh(t)}trackAdOpportunity(t){var i;const{sessionId:e}=this.Rr;t.sessionId=e,t.pageInsightIndexes=null===(i=m.k.pageInsights)||void 0===i?void 0:i.insights,this.rh(h.n.endPoints.tracking.adOpportunity,n.ProtoAdOpportunityRequest,t)}trackSessionAdBlocker(t){this.rh(h.n.endPoints.tracking.sessionAdBlocker,n.ProtoSessionAdBlockerRequest,{trackingRequestMeta:this.Rr,adBlockDetectionType:t})}getMetadataModel(){return this.Rr}getPlayerSize(){return{playerWidth:this.Jr,playerHeight:this.Qr}}updateMetadataModel(t){this.Rr=Object.assign(Object.assign({},this.Rr),t)}updatePlayerDimensions(t,i){this.Jr=t,this.Qr=i}trackHeavyAdIntervention(t){this.mh(t)}destroy(){clearInterval(this.yh),clearInterval(this.wh)}}},9207:(t,i,e)=>{"use strict";e.d(i,{f:()=>h});var s=e(3030),n=e(6615),r=e(7427);class h{constructor(){this._h={},this.Sh={domain:"",urlParams:[]},this.ignoredDomains=[]}setQueryParams(t){this._h=t}setUrlParams(t){this.Sh=t}appendParamsToUrl(t){return this.isIgnoredDomain(t)?t:this.Ah(t)}appendQueryParamsToUrl(t){return this.isIgnoredDomain(t)?t:this.kh(t,Object.keys(this._h).map((t=>({paramName:t,paramValue:this._h[t]}))))}Ah(t){if(!(0,s.BZ)(Object.keys(this.Sh))||!(0,s.BZ)(this.Sh.urlParams)||!t.includes(this.Sh.domain))return t;const i=this.Sh.urlParams.reduce(((t,i)=>`${t}${i}`),"");return t.replace(this.Sh.domain,this.Sh.domain+"/"+i)}kh(t,i){if(!(0,s.BZ)(i))return t;t+=(0,n.CK)(t);let e="";return i.forEach((t=>{(0,r.QM)(t.paramName)&&(0,r.QM)(t.paramValue)&&(e+=`${e.length>0?"&":""}${t.paramName}=${t.paramValue}`)})),t+e}isIgnoredDomain(t){return this.ignoredDomains.some((i=>t.indexOf(i)>-1))}}},7432:(t,i,e)=>{"use strict";var s;e.d(i,{Z:()=>n}),function(t){t[t.P1=1]="P1",t[t.P2=2]="P2",t[t.P3=3]="P3",t[t.P4=4]="P4",t[t.P5=5]="P5",t[t.P6=6]="P6",t[t.P7=7]="P7",t[t.P8=8]="P8",t[t.P9=9]="P9",t[t.P10=10]="P10"}(s||(s={}));const n=[s.P1,s.P2,s.P4,s.P7,s.P8]},7272:(t,i,e)=>{"use strict";e.d(i,{k:()=>X,x:()=>tt});var s,n=e(8423);!function(t){t.Connatix="143",t.AppNexus="32",t.DistrictM="144",t.IndexExchange="10",t.Lkqd="237",t.OneVideo="25",t.Openx="69",t.Pubmatic="76",t.RhythmOne="36",t.Rubicon="52",t.Spotx="165",t.Telaria="202",t.MediaNet="142",t.AdMan="149",t.IronSource="",t.Undertone="677",t.SynacorMedia="",t.AmxRTB="737",t.Smaato="82",t.TheMediaGrid="686",t.Rise="1043"}(s||(s={}));const r=["1YNY"];var h=e(158),o=e(289),a=e(525),c=e(7427),l=e(7577),u=e(45);class d{constructor(t){this.Ch=t,this.Th=!0,this.Mh="",this.Eh=!1,this.Bh=[]}static getInstance(t){const i=(0,n.pE)(t).topFrame;return i.cnx_usr_storage||(i.cnx_usr_storage=new d(i)),i.cnx_usr_storage}get userId(){if((0,c.QM)(this.Oh))return this.Oh.split("_")[0]}set userId(t){this.Oh=t}get isCcpaApplicable(){return this.Th}set isCcpaApplicable(t){this.Th=t}get usPrivacyString(){return this.Mh}set usPrivacyString(t){this.Mh=t}get consentPayload(){return this.Lh}set consentPayload(t){this.Lh||(this.Lh=t)}getScope(){return this.Ch}syncDemandPartner(t){if(this.userId){const i={userId:this.userId,demandPartner:parseInt(t.demandPartner,10),demandPartnerUserId:t.demandPartnerUserId};h.n.sendProtoRequest({ProtoRequest:o.ProtoUserSyncRequest,endpoint:a.n.endPoints.api.syncUrls,requestData:i,queryParams:{[l.Fk]:u.g.version},logError:!0}).then((t=>{})).catch((t=>{}))}}registerPlsCall(t){return this.Eh?(this.Bh.push(t),()=>{}):this.userId?(t(),()=>{}):(this.Eh=!0,t(),()=>{this.Eh=!1,this.Bh.forEach((t=>t())),this.Bh=[]})}}var p,f,m=e(2324),g=e(7726),v=e(3030);!function(t){t.USER_ID="cnx_userId"}(p||(p={}));class y{constructor(t,i){this.Rh=t,this.$e=i,this.Dh={[p.USER_ID]:30},this.jh=["Facebook App","Google App","Flipboard App","Instagram App","Pinterest App"],this.Fh=!1}Vh({name:t,value:i}){t===p.USER_ID&&(this.Rh.userId=this.$h(i))}Nh(t){let i="";const e=this.Dh[t.name];if(e){i=`; expires=${new Date((0,m.XF)(e)).toUTCString()}`}this.$e.document.cookie=`${t.name}=${t.value}${i}; path=/`}qh(t,i){if(!(0,v.BZ)(t))return;const e={cookieList:t,secureMode:i?o.ProtoCookieSecureModeEnum.Unsecure:o.ProtoCookieSecureModeEnum.Auto,browserInfo:this.zh};return h.n.sendProtoRequest({requestData:e,ProtoRequest:o.ProtoCookieSyncRequest,endpoint:a.n.endPoints.api.cookie,withCredentials:!0,queryParams:{[l.Fk]:u.g.version},logError:!1}).catch((t=>(0,g.n)({message:"UserCookieManager_setThirdPartyCookie",exception:t.message,callStack:t.callStack,level:g.D.CRITICAL})))}$h(t){return t.split("_")[0]}Wh(t){try{const i=t+"=",e=decodeURIComponent(this.$e.document.cookie).split(";");for(let t of e){for(;" "===t.charAt(0);)t=t.substring(1);if(t.includes(i))return this.$h(t.substring(i.length,t.length))}}catch(t){}return""}getUserId(){return this.Rh.userId}syncFirstPartyCookie(t){const i={name:t,value:"",timestamp:(0,m.XF)(this.Dh[t])};t===p.USER_ID&&(i.value=this.Rh.userId),(0,c.QM)(i.value)&&this.Nh(i)}syncThirdPartyCookieList(t){const i=[p.USER_ID],e=[];i.forEach((t=>{t===p.USER_ID&&(0,c.QM)(this.Rh.userId)&&e.push({name:p.USER_ID,value:this.Rh.userId,timestamp:(0,m.XF)(this.Dh[p.USER_ID])})})),this.qh(e,t)}setBrowserInfo(t,i){this.zh=t,this.Fh=this.jh.includes(t.browserType),this.Fh&&i&&this.syncThirdPartyCookieList(this.Fh)}setUserInformation(t){t&&this.Vh({name:p.USER_ID,value:t.userId})}fetchCookies(){[p.USER_ID].map((t=>({name:t,value:this.Wh(t)}))).filter((({value:t})=>(0,c.QM)(t))).forEach((t=>this.Vh(t)))}get unsecuredCookieSync(){return this.Fh}}!function(t){t[t.CmpApi=0]="CmpApi",t[t.TcfApi=1]="TcfApi"}(f||(f={}));const b={[f.CmpApi]:{windowPropertyName:"__cmp",framePropertyName:"__cmpLocator",getVendorConsentDataMethodName:"getVendorConsents",getConsentDataMethodName:"getConsentData"},[f.TcfApi]:{windowPropertyName:"__tcfapi",framePropertyName:"__tcfapiLocator",getVendorConsentDataMethodName:"getTCData",consentUpdateMethodName:"addEventListener",removeUpdateListenerMethodName:"removeEventListener"}};class x{constructor(t,i){this.Gh=t,this.Qh=i,this.apiType=f.CmpApi,this.Yh={},this.Lh=null,this.Zh=t=>new Promise(((i,e)=>{try{const e="string"==typeof t.data?JSON.parse(t.data):t.data;if("object"==typeof e&&e.Kh)if(e.Kh.callId===this.io){const t=e.Kh.returnValue&&e.Kh.returnValue.vendorConsents;this.eo(t).then((()=>i(this.io)))}else if(e.Kh.callId===this.so){const t=e.Kh.returnValue&&e.Kh.returnValue.consentData;this.no(t).then((()=>i(this.so)))}}catch(t){e()}}))}isApiOnPage(){return null!==this.Gh||null!==this.Qh}bindToApi(){return null!==this.Gh?new Promise(((t,i)=>{this.ro(this.Gh).then((()=>t())).catch((t=>i(t)))})):null!==this.Qh?this.ho(this.Qh):Promise.reject()}isConsentForVendor(t){return!!this.Yh[t]}getConsentPayload(){return this.Lh}setInAppConsentData(t){this.eo(t),this.no(t.consentString)}hasIvtConsent(){return this.isConsentForVendor(s.Connatix)}isConsentForPurposes(t){return!0}ho(t){this.so=(0,n.qs)(),this.io=(0,n.qs)();const i={};return new Promise((e=>{const s=t=>{this.Zh(t).then((t=>{i[t]=!0,i[this.so]&&i[this.io]&&(window.removeEventListener("message",s,!1),e())})).catch((t=>{}))};window.addEventListener("message",s,!1);const n=b[f.CmpApi].getVendorConsentDataMethodName,r=b[f.CmpApi].getConsentDataMethodName;t.postMessage({oo:{command:n,parameter:null,callId:this.io}},"*"),t.postMessage({oo:{command:r,parameter:null,callId:this.so}},"*")}))}ro(t){const i=b[f.CmpApi].windowPropertyName,e=b[f.CmpApi].getVendorConsentDataMethodName,s=b[f.CmpApi].getConsentDataMethodName;if(t&&t[i]){const n=new Promise((s=>{t[i](e,null,((t,i)=>{if(i){const{vendorConsents:i}=t;this.eo(i).then((()=>s()))}}))})),r=new Promise((e=>{t[i](s,null,((t,i)=>{if(i){const{consentData:i}=t;this.no(i).then((()=>e()))}}))}));return Promise.all([n,r])}return Promise.reject()}eo(t){return(0,c.as)(t)?(this.Yh=t,Promise.resolve()):Promise.reject()}no(t){return(0,c.HD)(t)?(this.Lh=t,Promise.resolve()):Promise.reject()}}var w=e(1561),_=e(8462),S=e(2381);const P=(t,i)=>{const e=b[i].windowPropertyName;return(0,w.uq)(t,e)},A=(t,i)=>{const e=b[i].framePropertyName;return(0,w.wl)(t,e)},I=(t,i)=>null!==P(t,i)||null!==A(t,i),k=t=>{const i=S.E.decode(t),e={},s={};return i.vendorConsents.forEach(((t,i)=>e[i]=t)),i.purposeConsents.forEach(((t,i)=>s[i]=t)),{vendorConsents:e,purposeConsents:s,tcString:t}},C=t=>{const i=_.decodeConsentString(t);let e="";const s=i.maxVendorId;for(let t=1;t<=s;t++)e+="0";const n=e.split("");i.allowedVendorIds.forEach((t=>{n[t-1]="1"}));return(t=>{const i={consentString:t};for(let e=0;e<t.length;e++)i[e+1]="1"===t[e];return i})(n.join(""))},T=(t,i,e)=>{let s;try{s=i(t)}catch(t){}if((0,c.as)(s))return s;try{s=e(t)}catch(t){}return s},M=t=>{var i;return(0,c.QM)(null===(i=t)||void 0===i?void 0:i.tcString)},E=t=>{var i;return(0,c.QM)(null===(i=t)||void 0===i?void 0:i.consentString)},B=({cmpEncodedString:t,tcfEncodedString:i})=>{if(!(0,c.QM)(t)&&!(0,c.QM)(i))return null;let e=null;return(0,c.QM)(i)&&(e=T(i,k,C)),(0,c.as)(e)?e:(0,c.QM)(t)?(e=T(t,C,k),(0,c.as)(e)?e:((0,g.n)({message:"UserManagerService_getDecodedConsentData",exception:"cmpEncodedString failed to decode",callStack:JSON.stringify({cmpEncodedString:t,tcfEncodedString:i}),level:g.D.CRITICAL}),null)):((0,g.n)({message:"UserManagerService_getDecodedConsentData",exception:"tcfEncodedString failed to decode",callStack:JSON.stringify({tcfEncodedString:i}),level:g.D.CRITICAL}),null)};class O{constructor(t,i){this.ao=t,this.co=i,this.apiType=f.TcfApi,this.uo=t=>new Promise(((i,e)=>{try{let s=t.data;if("string"==typeof t.data)try{s=JSON.parse(t.data)}catch(t){s=void 0}if("object"==typeof s&&s.po&&s.po.callId===this.fo){const t=s.po.returnValue.tcString;this.eo(t).then((()=>i(this.fo))).catch((t=>e()))}}catch(t){e()}}))}isApiOnPage(){return null!==this.ao||null!==this.co}bindToApi(){return null!==this.ao?new Promise(((t,i)=>{this.ro(this.ao).then((()=>t())).catch((t=>i(t)))})):null!==this.co?this.ho(this.co):Promise.reject()}isConsentForVendor(t){var i,e;return!!(null===(i=this.mo)||void 0===i?void 0:i.vendorConsents)&&!!(null===(e=this.mo)||void 0===e?void 0:e.vendorConsents[t])}getConsentPayload(){var t;return null===(t=this.mo)||void 0===t?void 0:t.tcString}setInAppConsentData(t){this.mo=Object.assign(Object.assign({},this.mo),t)}hasIvtConsent(){return!0}isConsentForPurposes(t){var i;return!!(null===(i=this.mo)||void 0===i?void 0:i.purposeConsents)&&t.every((t=>!!this.mo.purposeConsents[t]))}ho(t){this.fo=(0,n.qs)();const i={};return new Promise((e=>{const s=t=>{this.uo(t).then((t=>{i[t]=!0,i[this.fo]&&(window.removeEventListener("message",s,!1),e())})).catch((t=>{}))};window.addEventListener("message",s,!1);const n=b[f.TcfApi].getVendorConsentDataMethodName;t.postMessage({vo:{command:n,parameter:null,callId:this.fo}},"*")}))}ro(t){const i=b[f.TcfApi].windowPropertyName,e=b[f.TcfApi].consentUpdateMethodName,s=b[f.TcfApi].removeUpdateListenerMethodName;return t&&t[i]?new Promise((t=>{this.ao[i](e,2,((e,n)=>{if(n&&("useractioncomplete"===e.eventStatus||"tcloaded"===e.eventStatus)){const n=e.tcString;this.eo(n).then((()=>t())),this.ao[i](s,2,(()=>{}),e.listenerId)}}))})):Promise.reject()}eo(t){const i=B({tcfEncodedString:t});return M(i)?(this.mo=i,Promise.resolve()):Promise.reject()}}var L=e(7432);class R{constructor(t,i,e={}){var s,n;this.yo=t,this.$e=i;const r=B({cmpEncodedString:null===(s=e.cmp)||void 0===s?void 0:s.consentString,tcfEncodedString:null===(n=e.tcf)||void 0===n?void 0:n.tcString}),h=this.bo(r);null!==h?(this.xo(h),(M(r)||E(r))&&this.wo.setInAppConsentData(r)):(0,g.n)({message:"UserManagerService_UserConsentApiManager",exception:"failed to find the right api, no consent string and no framework on page was found",callStack:JSON.stringify({_appSettings:e}),level:g.D.CRITICAL})}setPageUrl(t){this.Fe=t}setAmpUserConsent(t){var i,e;if(!this.isConsentRequired())return;const s=t.consentStringTypeEnum.US_PRIVACY_STRING,n=null===(i=t.consentMetadata)||void 0===i?void 0:i.consentStringType,r=t.encodeConsentString||(null===(e=t.consentMetadata)||void 0===e?void 0:e.additionalConsent);let h;if(!(0,c.QM)(r))return void(0,g.n)({level:g.D.INFO,message:"AMP_no_consent_string_provided",callStack:JSON.stringify(t),exception:this.Fe});if(n===s)return void(0,g.n)({message:"UserConsentApiManager_CCPA_encoded_string_from_amp_not_used",level:g.D.WARN,callStack:r,exception:`${JSON.stringify(t)}__pageURL_${this.Fe}`},{throttle:2,sendMaxLog:!1});const o=B({tcfEncodedString:r,cmpEncodedString:r});M(o)?h=new O(null,null):E(o)&&(h=new x(null,null)),h?h?(this.wo=h,this.wo.setInAppConsentData(o)):(0,g.n)({message:"UserConsentApiManager_amp_userConsentApi_not_found",level:g.D.WARN,callStack:r,exception:`${JSON.stringify(t)}__pageURL__${this.Fe}`},{sendMaxLog:!1,throttle:2}):(0,g.n)({message:"UserConsentApiManager_encoded_string_not_tcf_and_not_cmp",level:g.D.WARN,callStack:r,exception:`${JSON.stringify(t)}__pageURL__${this.Fe}`},{throttle:2,sendMaxLog:!1})}isConsentRequired(){return this.yo}isConsent(t,i=[]){if(this.isConsentRequired()){return this.wo.isConsentForVendor(t)&&this.wo.isConsentForPurposes(i)}return!0}isConsentConnatix(){return this.isConsent(s.Connatix,L.Z)}isConsentForPersonalisedAds(){return this.getConsentApiType()!==f.CmpApi&&this.wo.isConsentForPurposes(L.Z)}getConsentDataPayload(){return this.wo.getConsentPayload()}bindToConsentApi(){return this.wo.bindToApi()}isConsentApiOnPage(){return this.wo.isApiOnPage()}hasIVTConsent(){return this.wo.hasIvtConsent()}getConsentApiType(){return this.wo.apiType}xo(t){const i=P(this.$e,t),e=A(this.$e,t);t===f.TcfApi?this.wo=new O(i,e):this.wo=new x(i,e)}bo(t){if(M(t))return f.TcfApi;if(E(t))return f.CmpApi;if(I(this.$e,f.TcfApi))return f.TcfApi;return I(this.$e,f.CmpApi)?f.CmpApi:f.TcfApi}}var D=e(6615);const j="PUBMATIC",F="predirect",V="UserThirdPartySyncManager_Pubmatic",$="CookieSync_syncScript_not_properly_loaded",N="CookieSync_param_not_parsed_properly",U=(t,i)=>{if(!window.PubMaticSync)return q($,j),!1;const e=Number.parseInt(t,10);return(0,c.kE)(e)?!!(0,c.QM)(i)||(q(N,j,F),!1):(q(N,j,"p"),!1)},H=(t,i,e,s)=>{const n={pubId:Number.parseInt(t,10),url:i};e&&(n.delay=1e3,n.gdpr=1,n.gdprConsent=s),window.PubMaticSync.sync(n)},q=(t,i,e="")=>{(0,g.n)({message:t,callStack:i,exception:e,level:g.D.CRITICAL},{throttle:1,sendMaxLog:!1})};class z{constructor(t,i){this._o=t,this.yo=i,this.So=[]}replaceuserIdMacros(t,i){let e=t;return e=e.replace("%5BuserId%5D",i),e=e.replace("[userId]",i),e=e.replace("%7bUSER_ID%7d",i),e}Po(t,i){try{if(this.Ao(t)){const e=i.document.createElement("iframe");e.setAttribute("style","width:1px;height:1px;border:0px;margin:0px;padding:0px"),e.src=t.url,i.document.body.appendChild(e)}else(0,w.dZ)({src:t.url},i.document.head,i,null,null,1===(0,n.Vm)([95,5]),"UserManager_unable_to_insert_sync_url_script");return!0}catch(t){return!1}}Ao(t){switch(t.vendorId){case s.Rubicon:case s.Pubmatic:return!0;default:return!!t.url.includes("yellowblue.io")}}syncUrls(t,i){this.So.forEach((e=>{if(this._o.isConsent(e.vendorId)&&!e.synced){if(e.vendorId===s.Pubmatic)return void((t,i,e)=>new Promise(((s,n)=>{const r=(0,D.Ph)("p",t),h=(0,D.Ph)(F,t);if(window.PubMaticSync){if(!U(r,h))return void n();H(r,h,i,e),s(!0)}else(0,w.dZ)({src:"//ads.pubmatic.com/AdServer/js/userSync.js"},window.document.head,window,(()=>{U(r,h)?(H(r,h,i,e),s(!0)):n()}),(()=>{n()}),!0,V)})))(e.url,this._o.isConsentRequired(),this._o.getConsentDataPayload()).then((()=>{e.synced=!0}));if(e.url.includes("openx.net"))return e.url=`${e.url.split("r=")[0]}&r=\n                        ${encodeURIComponent(`${a.n.endPoints.api.syncUrls}?DemandPartner=8&UserId=${t}&DemandPartnerUserId=`)}`,e.url=this.replaceuserIdMacros(e.url,t),h.n.trackPixel(e.url),void(e.synced=!0);if(e.url.includes("sync.technoratimedia.com/services"))return h.n.trackPixel(e.url),void(e.synced=!0);if(e.url.includes("pixel.advertising.com")&&(e.url=e.url.replace("gdpr=","gdpr="+(this._o.isConsentRequired()?1:0)),e.url=e.url.replace("gdpr_consent=","gdpr_consent=0")),e.url=this.replaceuserIdMacros(e.url,t),this.yo){e.url=(0,D.Bp)(e.url,"gdpr","1");const t=this._o.getConsentDataPayload();e.url=(0,D.Bp)(e.url,"gdpr_consent",t)}this.Po(e,i)&&(e.synced=!0)}}))}setSyncUrls(t={}){return!(this.So.length>0)&&(this.So=[],Object.keys(t).forEach((i=>{this.So.push({vendorId:i,url:t[i],synced:!1})})),!0)}}var W=e(1995);const G={California:5332921},J={US:6252001};var Q;!function(t){t.CCPA_Error="CCPA Error",t.CCPA_Pending="CCPA Pending",t.CCPA_Success="CCPA Success",t.CCPA_Delayed_Success="CCPA Delayed Success",t.CCPA_Delayed_Failure="CCPA Delayed Failure"}(Q||(Q={}));class Y{constructor(t,i){this.Rh=t,this.Io=1,this.ko="__uspapi",this.Co="getUSPData",this.To={isPending:!0,isRejected:!1,isDelayed:!1,promise:new Promise((()=>{}))},this.Mo(i)}getUsPrivacyString(){if(this.Rh.usPrivacyString||this.Rh.isCcpaApplicable)return this.Rh.usPrivacyString}isCcpaApplicable(){return this.Rh.isCcpaApplicable}isSellUserAllowed(){return!this.Rh.isCcpaApplicable||this.Eo()}setGeoLocation(t){this.Bo=t,t.subdivisionId!==G.California&&(this.Rh.isCcpaApplicable=!1)}fetchUsPrivacyString(){return this.Oo()&&this.Lo(),this.isCcpaApplicable()?new Promise((t=>{this.getUsPrivacyString()?t():t(this.Ro())})):Promise.resolve()}Ro(){return this.To.promise=new Promise(((t,i)=>{const e=this.Rh.getScope()[this.ko];e?(this.Do=!0,e(this.Co,this.Io,((e,s)=>{s?(this.Mo(e.uspString),t()):i()}))):i()})),this.makeQuerablePromise(this.To),this.To.promise}Eo(){return!this.Rh.usPrivacyString||(0,v.d3)(this.Rh.usPrivacyString,r)}Mo(t){this.Rh.usPrivacyString=t}Oo(){if(!(0,n.Vm)([95,5]))return!1;const t=new Date(2020,10,16,12,0,0).getTime(),i=new Date(2020,10,17,12,0,0).getTime();return(0,m.k$)(t,i)}Lo(){const{countryGeoId:t,subdivisionId:i}=this.Bo;t===J.US&&(0,g.n)({message:"UserCcpaManager_logCCPA",level:g.D.INFO,callStack:JSON.stringify(i),exception:this.Rh.usPrivacyString})}ccpaInfoLogging(t){this.isCcpaApplicable()&&this.Do&&(this.To.isPending?((0,g.n)({message:Q.CCPA_Pending,exception:"CCPA_Pending_At_Start_AdRequest",level:g.D.INFO,callStack:t}),this.To.isDelayed=!0,this.jo=t):this.To.isRejected&&(0,g.n)({message:Q.CCPA_Error,exception:"CCPA_Error_At_Start_AdRequest",level:g.D.INFO,callStack:t}))}makeQuerablePromise(t){t.promise.then((()=>{t.isPending=!1,t.isDelayed&&(0,g.n)({message:Q.CCPA_Delayed_Success,exception:"CCPA_Success_After_Delay",level:g.D.INFO,callStack:this.jo})})).catch((i=>{throw t.isRejected=!0,t.isPending=!1,t.isDelayed&&(0,g.n)({message:Q.CCPA_Delayed_Failure,exception:"CCPA_Failed_After_Delay",level:g.D.INFO,callStack:this.jo}),i}))}}var X,Z,K=e(5348);!function(t){t.CCPA_INFO_RECEIVED="ccpaInfoReceived",t.CONSENT_DATA_UPDATE="consentDataUpdate"}(X||(X={})),function(t){t.SYNC_URLS_RECEIVED="thirdPartySyncUrlsReceived",t.USER_INFO_RECEIVED="userInfoReceived"}(Z||(Z={}));class tt{constructor(t,i,e,s={}){this.pi=i,this.mi=e,this._appSettings=s,this.gdprConsentMode=o.ProtoGdprConsentModeEnum.Unknown,this.Fo={},this.Vo="{{isEu}}",this.$o=!1,this.Uo=()=>{!this._o.isConsentRequired()||this.pi?this.resolveEvent(X.CONSENT_DATA_UPDATE):(this.gdprConsentMode=this._o.isConsentApiOnPage()||this.mi?o.ProtoGdprConsentModeEnum.NoConsent:o.ProtoGdprConsentModeEnum.NoCmp,this._o.bindToConsentApi().then((()=>{this.isConsentConnatix()||(this.gdprConsentMode=o.ProtoGdprConsentModeEnum.NoConnatixConsent),this.resolveEvent(X.CONSENT_DATA_UPDATE)})).catch((t=>{})))},this.zo=()=>{K.$.getEnvelope(this.Gt,this._o)},this.Wo=()=>{this.isConsentConnatix()&&(this.onEvent([Z.USER_INFO_RECEIVED]).then((()=>{this.$o&&(this.Go.syncThirdPartyCookieList(),this.Go.unsecuredCookieSync&&this.Go.syncThirdPartyCookieList(this.Go.unsecuredCookieSync),this.Go.syncFirstPartyCookie(p.USER_ID))})),this.onEvent([Z.SYNC_URLS_RECEIVED,X.CONSENT_DATA_UPDATE,X.CCPA_INFO_RECEIVED]).then((()=>{if(this.isConsentConnatix()&&this.Jo.isSellUserAllowed())try{this.Qo.syncUrls(this.Rh.userId,this.Rh.getScope())}catch(t){(0,g.n)({level:g.D.WARN,message:"UserManager_syncUrls",exception:t.message,callStack:t.stack})}})))};try{this.Gt=t,this.Rh=d.getInstance(t),this.pi||(this.Go=new y(this.Rh,t));const{cmp:i,tcf:e}=this._appSettings;this._o=new R(!!this.Vo,t,{cmp:i,tcf:e}),this.Qo=new z(this._o,this.isGDPR()),this.Jo=new Y(this.Rh,this._appSettings.usPrivacyString),this.Yo()}catch(t){(0,g.n)({callStack:t.stack,exception:t.message,message:"UserManager_constructor",level:g.D.CRITICAL})}}get identityEnvelope(){return K.$.getValidEnvelope()}Yo(){this.Go&&this.Go.fetchCookies(),this.Uo(),this.onEvent([X.CONSENT_DATA_UPDATE]).then((()=>{this.zo(),setTimeout((()=>{try{if(this.pi)return;this.Wo()}catch(t){(0,g.n)({callStack:t.stack,exception:t.message,message:"UserManager_consent_data_received",level:g.D.CRITICAL})}}),0)}))}Xo(t){return void 0===this.Fo[t]&&(this.Fo[t]=new W.C,this.Fo[t].promise.catch((()=>this.Fo[t].reject()))),this.Fo[t]}resolveEvent(t,i){this.Xo(t).resolve(i)}setAmpUserConsent(t){this._o.setAmpUserConsent(t),this.resolveEvent(X.CONSENT_DATA_UPDATE)}setPageUrl(t){this._o&&this._o.setPageUrl(t)}onEvent(t){const i=t.map((t=>this.Xo(t).promise));return Promise.all(i)}isConsent(t,i){return this._o.isConsent(t,i)}isConsentConnatix(){return this._o.isConsentConnatix()}ccpaInfoLogging(t){this.Jo.ccpaInfoLogging(t)}getConsentPayload(){return this._o.getConsentDataPayload()}isConsentRequired(){return this._o.isConsentRequired()}isPersonalisedAdsAllowed(){return this.isConsentRequired()?this._o.isConsentForPersonalisedAds():!this.isCcpaApplicable()||this.Jo.isSellUserAllowed()}setThirdPartySyncUrls(t){this.pi||this.Qo.setSyncUrls(t)&&this.resolveEvent(Z.SYNC_URLS_RECEIVED)}setGeoLocation(t){this.Jo.setGeoLocation(t),this.Jo.fetchUsPrivacyString().then((()=>{this.resolveEvent(X.CCPA_INFO_RECEIVED)})).catch((()=>{this.resolveEvent(X.CCPA_INFO_RECEIVED)}))}getUserId(){if(this.isConsentConnatix()&&this.Go)return this.Go.getUserId()}Zo(){return this.Go&&this.Go.getUserId()}setUserInformation(t){this.Go&&(this.Go.setUserInformation(t),this.resolveEvent(Z.USER_INFO_RECEIVED),!this.pi&&this.isConsentConnatix()&&this.Go.syncFirstPartyCookie(p.USER_ID))}isGDPR(){return!!this.Vo}getUsPrivacyString(){return this.Jo.getUsPrivacyString()}isCcpaApplicable(){return this.Jo.isCcpaApplicable()}isSellUserAllowed(){return this.pi||this.Jo.isSellUserAllowed()}getDeviceId(){if(this.isConsentConnatix())return this._appSettings.deviceID}Ko(){return this._appSettings.deviceID}getTrackableUser(){return this.pi?this.getDeviceId():this.getUserId()}getForcedTrackableUser(){return this.pi?this.Ko():this.Zo()}registerPlsCall(t){return this.isConsentConnatix()||(this.$o=!0),this.Rh.registerPlsCall(t)}setBrowserInfo(t){this.Go&&this.Go.setBrowserInfo(t,this.isConsentConnatix())}getGdprConsentApiType(){return this._o.getConsentApiType()}}},3030:(t,i,e)=>{"use strict";e.d(i,{BZ:()=>u,Gg:()=>p,Sz:()=>c,V7:()=>f,d3:()=>h,ee:()=>y,fn:()=>d,gX:()=>g,qo:()=>o,qy:()=>a,sj:()=>v,tN:()=>m,ti:()=>l});var s=e(7427),n=e(7726),r=e(9065);e(8423);function h(t,i){return i.indexOf(t)>-1}function o(t){return Array.isArray(t)?t:[t]}function a(t,i){const e=[],s=new Map;return i.forEach((i=>{s.has(i[t])||(s.set(i[t],!0),e.push(i))})),e}function c(t){return[].slice.call(t)}function l(t){const i=[];for(const e in t)e&&parseInt(e,10)>=0&&i.push(t[e]);return i}function u(t){return t&&t.length>0}function d(t){return t.every((t=>(0,s.kE)(t)))}function p(t){let i="[";for(let e=0;e<t.length;e++)i+=(0,r.H)(t[e])+(e===t.length-1?"":",");return i+="]",i}function f(t,i){return t.filter((t=>!i.includes(t)))}function m(t,i){return t.filter((t=>i.includes(t)))}function g(t){return t.filter(((i,e)=>t.indexOf(i)===e))}function v(t,i){const e=t.indexOf(i);-1!==e?t.splice(e,1):(0,n.n)({message:"removeItemFromArray_error_item_not_found",exception:JSON.stringify(i),level:n.D.WARN})}function y(t){const i=[];return t.forEach((t=>i.push(t))),i}},1561:(t,i,e)=>{"use strict";e.d(i,{AX:()=>et,Dx:()=>I,Fs:()=>k,G$:()=>M,GF:()=>W,Ho:()=>p,IS:()=>N,IV:()=>w,Ji:()=>z,LT:()=>V,L_:()=>P,ML:()=>b,MV:()=>d,NN:()=>ht,NS:()=>v,Nb:()=>K,PM:()=>L,Q1:()=>E,S0:()=>B,T7:()=>f,Tp:()=>O,U6:()=>q,UR:()=>st,Wb:()=>X,_w:()=>nt,aQ:()=>m,bX:()=>g,bZ:()=>rt,cn:()=>x,dZ:()=>y,eA:()=>Z,fj:()=>F,h_:()=>R,jG:()=>$,ju:()=>G,nw:()=>j,oW:()=>ot,og:()=>S,pv:()=>_,rI:()=>A,sw:()=>tt,tp:()=>T,uc:()=>C,uh:()=>it,uq:()=>Q,w6:()=>J,wl:()=>Y});var s=e(2817),n=e(7427),r=e(3030),h=e(2820),o=e(8423),a=e(6615),c=e(7577),l=e(7726);function u(t,i){t&&(t.style.display=i?"":"none")}function d(t){u(t,!1)}function p(t){u(t,!0)}function f(t,i){for(const e in i)i.hasOwnProperty(e)&&(t.style[e]=i[e])}function m(t,...i){i.forEach((i=>{t.style[i]=""}))}function g(t){t&&t.parentNode&&t.parentNode.removeChild(t)}function v(t,i,e,s,r){if(i)try{const h=e.document.createElement("link");return h.id=t.id,h.type="text/css",h.rel="stylesheet",h.href=t.src,(0,n.mf)(s)&&(h.onload=()=>{s()}),(0,n.mf)(r)&&(h.onerror=t=>{i.removeChild(h),(0,n.HD)(t)?r(`link_stylesheet_load_error_${t}`):r(`link_stylesheet_load_error_${function(t,i){const e=t.document.createElement("div");return e.appendChild(i),e.innerHTML}(e,h)}`)}),i.appendChild(h),h}catch(t){return null}}function y(t,i,e,s,r,h=!0,o){try{const a=e.document.createElement("script");return a.src=t.src,a.async=!0,a.type="text/javascript",t.id&&(a.id=t.id),(0,n.mf)(s)&&(a.onload=()=>{s()}),a.onerror=e=>{i.removeChild(a),h&&(0,l.n)({message:o,exception:"script_load_error",callStack:t.src,level:l.D.INFO},{throttle:2,sendMaxLog:!1}),(0,n.mf)(r)&&r()},i.appendChild(a),a}catch(i){return h&&(0,l.n)({message:o,exception:`script_insert_error_${i.message}_${i.stack}`,callStack:t.src,level:l.D.CRITICAL},{throttle:2,sendMaxLog:!1}),(0,n.mf)(r)&&r(),null}}function b(t,i,e){if(t)try{const s=i.document.createElement("script"),n=i.document.createTextNode(e);return s.appendChild(n),t.appendChild(s),s}catch(t){return null}}function x(t,...i){t&&t.classList.add(...i)}function w(t,...i){t&&t.classList.remove(...i)}function _(t,i){return t&&t.classList.contains(i)}function S(t,i,e){return!!t&&t.classList.toggle(i,e)}function P(t,i,e,s=!1){t&&(t.classList.remove(i),t.classList.add(e),s&&O(t))}const A=(t,i)=>i.document.getElementById(t),I=(t,i,e)=>i.getComputedStyle(t,e),k=(t,i)=>i.document.getElementsByClassName(t);function C(t,i="",e){const s=e.document.getElementsByTagName("head")[0],n=e.document.createElement("style");n.setAttribute("type","text/css"),n.id=i,n.appendChild(e.document.createTextNode(t)),s.appendChild(n)}function T(t,i){const e=i.document.getElementsByTagName("head")[0],s=i.document.createElement("link");s.setAttribute("rel","preconnect"),s.setAttribute("link",t),e.appendChild(s)}function M(t,i){const e=i.document.createElement("div");return e.innerHTML=t,e.firstElementChild}function E(t,i){i>0?(t.removeAttribute("muted"),t.muted=!1):(t.setAttribute("muted",""),t.muted=!0)}function B(t){return s.Ht.find((i=>{if(i.keys.fullscreenEnabled in t)return!0}))}function O(t){t.getBoundingClientRect()}function L(t,i){return(t.requestAnimationFrame||t.webkitRequestAnimationFrame||function(t){return setTimeout(t,20)})(i)}function R(t,i){return(t.cancelAnimationFrame||t.webkitCancelAnimationFrame||function(t){return clearTimeout(t)})(i)}function D(t,i,e){const s=function(t,i){const e=function(t,i){let e=i;for(;e;){const i=e.parentNode;if(i){const e=t.reduce(((t,e)=>t||i.querySelector(e)),null);if(e)return e}e=i}return null}(t,i);return e?I(e,V(e)):null}(t,i);return s?function(t,i){return t.getPropertyValue(i)}(s,e):null}function j(t){const i=D(["h1","h2"],t,"font-family");return i||"inherit"}function F(t){const i=D(["p"],t,"font-family");return i||"inherit"}function V(t){try{return t.ownerDocument.defaultView}catch(t){return null}}function $(t,i){t&&i&&(Array.isArray(t)?t.forEach((t=>i.appendChild(t))):i.appendChild(t))}function N(t,i,e){let s=!1;const n=(0,r.Sz)(i.children);for(let i=0;i<n.length;i++)if(e-1===i||0===e){s=!0,Array.isArray(t)?U(n[i],...t):U(n[i],t);break}s||$(t,i)}function U(t,...i){if(t&&t.parentElement)for(let e=i.length;e--;)t.parentElement.insertBefore(i[e],t)}function H(t){const i=V(t);if(!i)return;const{display:e}=I(t,i);"none"===e&&(t.style.display="block")}function q(t,i=(()=>{})){const e=function(s){"opacity"===s.propertyName&&(w(t,h.jG.FadeOutBase,h.jG.FadeOut),i(),t.removeEventListener("transitionend",e))};x(t,h.jG.FadeOutBase),H(t),O(t),t.addEventListener("transitionend",e),x(t,h.jG.FadeOut)}function z(t,i=(()=>{})){const e=function(s){"opacity"===s.propertyName&&(w(t,h.jG.FadeInBase,h.jG.FadeIn),i(),t.removeEventListener("transitionend",e))};x(t,h.jG.FadeInBase),H(t),O(t),t.addEventListener("transitionend",e),x(t,h.jG.FadeIn)}function W(t){const i=V(t);if(!i)return!0;const{display:e,opacity:s}=I(t,i);return"none"===e||"0"===s}function G(t,i){const e=i.document.createElement("div");return e.innerHTML=t||"",e.innerText}function J(){const t=window.navigator&&window.navigator.doNotTrack||window.doNotTrack;return"1"===t||"yes"===t}function Q(t,i){const e=(0,o.pE)(t).topFrame;return e[i]?e:null}function Y(t,i){let e=t,s=null;try{for(;!s;){try{e.frames[i]&&(s=e)}catch(t){}if(!t.top||t.top===e)break;e=e.parent}}catch(t){}return s}function X(t,i){let e=[];try{e=e.slice.call(i.document.querySelectorAll(t),0)}catch(t){}return e}function Z(t){return(0,o.pE)(t).topFrame.location.protocol.includes("https")}function K(t){if(!Z(t))return;[window,t].forEach((t=>{if(null===t.document.querySelector("meta[content=upgrade-insecure-requests]")){const i=t.document.createElement("meta");i.setAttribute("http-equiv","Content-Security-Policy"),i.content="upgrade-insecure-requests",t.document.head.appendChild(i)}}))}function tt(t){return(0,o.pE)(t).topFrame.document.referrer}function it(t,i){const e=(0,o.pE)(i).topFrame.location.hostname,s=(0,o.bx)(t);return s&&s.hostname===e}function et(t,i){try{t.onclick=t=>{const{tagName:e,className:s}=t.target;(0,l.n)({message:`${i} - click on tag:${e} class:${s}`,level:l.D.INFO})}}catch(t){(0,l.n)({message:`${i}_Error - iframe click`,level:l.D.WARN,callStack:t.stack})}}function st(t){setTimeout((()=>{let i=t.currentTime+.01;i>t.duration&&(i=.01),t.currentTime=i}),0)}function nt(t,i){!function(t,i,e){const s=t.document.createElement("link");s.rel="preload",s.href=i,s.as=e,t.document.head.appendChild(s)}(i,t,"script")}function rt(t,i){if(!i||!ht(i))return(0,l.n)({message:"Prerender_Elements_getgetCustomerId_no_currentScript",level:l.D.CRITICAL}),null;const e=i.src;return(0,a.Ph)(c.ym,e)}function ht(t){return"SCRIPT"===t.tagName}function ot(t){const{top:i,left:e}=t.getBoundingClientRect();return{top:i,left:e}}},8423:(t,i,e)=>{"use strict";e.d(i,{Hh:()=>p,Of:()=>v,Up:()=>y,Vm:()=>f,bx:()=>u,dz:()=>a,er:()=>c,lU:()=>l,ld:()=>g,oC:()=>b,pE:()=>d,qs:()=>o,rM:()=>x,we:()=>m});var s=e(6615),n=e(7427),r=e(9065),h=e(3030);function o(){let t=Date.now();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(i){const e=(t+16*Math.random())%16|0;return t=Math.floor(t/16),("x"===i?e:3&e|8).toString(16)}))}function a(){return o().replace(/-/g,"")}function c(t){return/^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(t.trim())}function l(t,i){let e="";if(!t.err)try{e=t.topFrame.location.href}catch(t){}if(!e||0===e.length)try{e=i.top.location.href}catch(t){}if(!e||0===e.length)try{e=t.topFrame.document.referrer}catch(t){}return e}function u(t){try{const i=t.match(/^(https?:)\/\/(([^:\/?#]*)(?::([0-9]+))?)([\/]{0,1}[^?#]*)(\?[^#]*|)(#.*|)$/);return{href:t,protocol:i[1],host:i[2],hostname:i[3],port:i[4],pathname:i[5],search:i[6],hash:i[7]}}catch(t){return null}}function d(t){let i=t,e=null,s=!1;try{for(;i.parent.document!==i.document;){if(!i.parent.document){s=!0;break}e=i,i=i.parent}}catch(t){s=!0}return{topFrame:i,topChildFrame:e,err:s}}function p(t=[],i,e={}){t.forEach((t=>{(0,n.HD)(t)&&((new i.Image).src=`${t}${(0,s.CK)(t)}${function(t,i){const e=[];return Object.keys(t).forEach((s=>{const o=i?`${i}[${s}]`:s,a=t[s];if((0,n.as)(a))e.push(`${encodeURIComponent(o)}=${(0,r.H)(a)}`);else if(Array.isArray(a))e.push(`${encodeURIComponent(o)}=${(0,h.Gg)(a)}`);else if(null!=a){const t=encodeURIComponent(a),i=encodeURIComponent(o);t&&i&&e.push(`${i}=${t}`)}})),e.join("&")}(e)}`)}))}function f(t){const i=Math.floor(100*Math.random());let e=0,s=0;for(let n=0;n<t.length;n++)if(s+=t[n],i<s){e=n;break}return e}function m(){let t=!1;try{const i=document.createElement("audio");i.volume=1,i.muted=!1;const e=i.play();void 0!==e&&e.catch((()=>{})),t=!i.paused,i.pause()}catch(t){}return t}function g(t,i=0,...e){return setTimeout((()=>{t.apply(this,e)}),i)}function v(t,i,e){let s=0,n=t;for(;s<=e;){if(s++,n.classList.contains(i))return!0;if(n=n.parentElement,!n)return!1}return!1}function y(t,i=5,e){return new Promise(((s,r)=>{t().then(s).catch((h=>{1===i||(0,n.mf)(e)&&e(h)?r(h):y(t,i-1,e).then(s,r)}))}))}function b(){const t=!!window.MSInputMethodContext&&!!document.documentMode,i=navigator.userAgent.toLowerCase().includes("msie");return t||i}function x(t){return Object.keys(t).reduce(((i,e)=>Object.assign(Object.assign({},i),{[e]:`${t[e]}`})),{})}},6615:(t,i,e)=>{"use strict";e.d(i,{Bp:()=>h,CK:()=>o,Ph:()=>r,_Y:()=>a,sH:()=>l});var s=e(7427);const n=".cdn.ampproject.org";function r(t,i){i||(i=location.search),t=t.replace(/\[/,"\\[").replace(/]/,"\\]");const e=new RegExp(`[\\?&]${t}=([^&#]*)`,"i").exec(i);return null===e?null:decodeURIComponent(e[1])}function h(t,i,e){const s=new RegExp(`([?&])${i}=.*?(&|$)`,"i"),n=o(t);return t.match(s)?e?t.replace(s,`$1${i}=${e}$2`):t.replace(s,"$1"):`${t}${n}${i}=${e}`}function o(t){return t.includes("?")?"&":"?"}function a(t){if((0,s.QM)(t))return t.includes("://")?t.split("/")[2]:t.split("/")[0]}function c(t,i){return`${"http"+(/(\/s\/)+/.test(t.replace(i,""))?"s":"")}://${i}`}function l(t,i=!0){return t=function(t){if(!t.includes(n))return t;const i="www.",e="amp.";if((t=(t=(t=(t=(t=(t=(t=t.replace(n,"")).replace("www-",i)).replace("amp-",e)).cnx_replaceAll("--","=")).cnx_replaceAll("-",".")).cnx_replaceAll("=","-")).replace(i,e)).includes(e))return t;const s="http://",r="https://";return(t=t.replace(s,"http://amp.")).replace(r,"https://amp.")}(t=function(t){const i=/^https:\/\/www.google\..*?\/amp\/s*\/*/.exec(t);if(null!==i){const e=t.replace(i[0],"");return c(t,e)}return t}(t=function(t){if(t.includes(n)){t=t.replace("https://","");const i=/^[^\/]+(\/[a-z]+\/)+s*\/*/,e=i.test(t)?t.replace(i.exec(t)[0],""):t;return c(t,e)}return t}(t))),i&&(t=function(t){if(!t.includes("#origin-")&&!t.includes("viewerUrl-"))return t;const i=t.split("#origin-")[1].split("viewerUrl-");return l(t=decodeURIComponent(i[1]),!1)}(t)),t}},7726:(t,i,e)=>{"use strict";e.d(i,{D:()=>c,n:()=>u});var s=e(45),n=e(497);var r=e(8423),h=e(158),o=e(525);let a=window.location&&window.location.href;try{a=window.top.location.href}catch(t){}var c;!function(t){t.EMERGENCY="Emergency",t.ALERT="Alert",t.CRITICAL="Critical",t.ERROR="Error",t.WARN="Warn",t.INFO="Info"}(c||(c={}));const l={throttle:30,sendMaxLog:!0,pacing:0};function u(t,i={}){if(!((i=Object.assign(Object.assign({},l),i)).pacing>0)||function(t){const i=Math.min(Math.max(t,0),100);return!!(0,r.Vm)([100-i,i])}(i.pacing))if(t.sessionId=n.S.sessionId,n.S.incrementLogCount(t.message),n.S.isMaxLogOverflow(t.message)&&u({message:"Logging_max_log_overflow_1000",exception:t.message,callStack:t.callStack,level:c.CRITICAL,sessionId:n.S.sessionId},{sendMaxLog:!1,throttle:100}),n.S.isMaxLog(t.message,i.throttle))i.sendMaxLog&&!n.S.isMaxLogSent(t.message)&&(n.S.setMaxLogSent(t.message),u({message:"Logging_max_log_sent",exception:t.message,callStack:t.callStack,level:c.CRITICAL,sessionId:n.S.sessionId}));else{if(void 0===t.callStack){const i=new Error(t.message);t.callStack=i.stack}if(t.callStack=t.callStack.substring(0,500),s.g.logToServer){t.pageUrl=t.pageUrl||a,t.version=s.g.version;let e="connatix.com";try{e=o.n.bundleDomain}catch(t){}const n="https://pl."+e;t.ddsource="browser",t.service="player",i.sendBeacon?h.n.sendJsonBeaconRequest(t,n):h.n.fetchXhttpRequest({requestUrl:n,requestType:"POST",withCredentials:!1},JSON.stringify(t))}s.g.logToConsole&&function(t){let i;switch(t.level){case c.CRITICAL:i="#8B0000";break;case c.WARN:i="#FF8C00";break;case c.INFO:i="#000000"}console.log(`%cConnatix Logging:\n   message: ${t.message}\n   exception: ${t.exception}\n   level: ${t.level}\n   version: ${t.version}\n   sessionId: ${t.sessionId}\n   callStack: ${t.callStack}`,`color:${i}`)}(t)}}},2231:(t,i,e)=>{"use strict";e.d(i,{DE:()=>r,ON:()=>a,Tc:()=>h,dO:()=>c,dQ:()=>n,oK:()=>o});var s=e(7427);function n(t,i,e,s,n){return e+(s-e)*function(t,i,e){return(e-t)/(i-t)}(t,i,n)}function r(t,i){return i.reduce(((i,e)=>Math.abs(e-t)<=Math.abs(i-t)?e:i))}function h(t,i){return i/100*t}function o(t,i){const e=Math.pow(10,i);return Math.round(t*e)/e}function a(t){return!(0,s.r)(t.width)||!(0,s.r)(t.height)}function c(t,i){for(let e=i;e>1;e--)t%e==0&&i%e==0&&(t/=e,i/=e);return{widthRatio:t,heightRatio:i}}},9065:(t,i,e)=>{"use strict";e.d(i,{H:()=>s});e(8423);function s(t){for(const i in t)t.hasOwnProperty(i)&&"string"==typeof t[i]&&(t[i]=`%22${encodeURIComponent(t[i])}%22`);return JSON.stringify(t).cnx_replaceAll('"',"")}},6243:(t,i,e)=>{"use strict";function s(t=[]){t.forEach((t=>t.unsubscribe()))}e.d(i,{i:()=>s})},8852:(t,i,e)=>{"use strict";e.d(i,{EQ:()=>h,IS:()=>o,f5:()=>r});var s=e(7726),n=e(7427);function r(t,i){return t.replace(/(?:\r\n|\r|\n)/g,i)}function h(t){try{return Object.keys(t).reduce(((i,e)=>Object.assign(Object.assign({},i),{[e]:(0,n.QM)(t[e])&&t[e].includes("%%")?void 0:t[e]})),{})}catch(i){return(0,s.n)({message:"sanitizeDfpMacros_error",exception:i.message,callStack:i.stack,level:s.D.WARN}),Object.keys(t).reduce(((i,e)=>Object.assign(Object.assign({},i),{[e]:(0,n.QM)(t[e])&&t[e].includes("%%")?void 0:t[e]})),{})}}function o(t,i){return`${t}-${i}`}},2324:(t,i,e)=>{"use strict";e.d(i,{H8:()=>u,QI:()=>h,XF:()=>o,k$:()=>c,pP:()=>r,qe:()=>d,to:()=>a,w4:()=>p,x8:()=>l});var s=e(9115),n=e(7427);function r(t){let i,e;return(0,n.HD)(t)&&(i=t.match(s.T9),i&&(e=parseInt(i[1],10)*s.p7+parseInt(i[2],10)*s.uD+parseInt(i[3],10)*s.s_+parseInt(i[5]||0,10))),isNaN(e)?null:e}function h(t,i){return/^\d+(\.\d+)?%$/g.test(t)?i?i*parseFloat(t.replace("%",""))/100:null:r(t)}function o(t){return Date.now()+t*s.ti}function a(t,i=":"){const e=t=>t>=10?t:`0${t}`;return`${e(Math.floor(t/60))}${i}${e(Math.floor(t%60))}`}function c(t,i){const e=Date.now();return!(e<t||e>i)}function l(){const t=new Date;return t.getTime()-1e3*t.getTimezoneOffset()*60}function u(t){return Math.floor((Date.now()-t)/s.s_)}function d(t,i){return t>=i?t/s.s_:t}function p(t){return(0,n.kE)(t)?t*s.s_:null}},7427:(t,i,e)=>{"use strict";function s(t){return"string"==typeof t}function n(t){return!isNaN(parseFloat(t))&&isFinite(t)}function r(t){return n(t)&&t>0}function h(t){return s(t)&&t.length>0}function o(t){return void 0!==t}function a(t){return"function"==typeof t}function c(t){return"object"==typeof t&&null!==t&&!Array.isArray(t)}function l(t){try{if(t.contentWindow||t.contentDocument)return!0}catch(t){}return!1}function u(t,i){var e;return h(t)?!(!(null===(e=Object.values(i))||void 0===e?void 0:e.includes(t))||Object.keys(i).includes(t)):!!n(t)&&t in i}e.d(i,{$K:()=>o,Cz:()=>u,HD:()=>s,QM:()=>h,as:()=>c,cL:()=>l,kE:()=>n,mf:()=>a,r:()=>r})},158:(t,i,e)=>{"use strict";e.d(i,{n:()=>s});var s,n=e(8423),r=e(7427),h=e(6615),o=e(7726);!function(t){let i;!function(t){t.DumpJson="Dump Json",t.ServerError="Server Error",t.ProtobufDecode="Protobuf_decode"}(i||(i={}));function e(t,i){return(0,r.as)(i)?(Object.keys(i).forEach((e=>t=(0,h.Bp)(t,e,i[e]))),t):t}function s(t,i){const e=function({requestUrl:t,requestType:i="POST",contentType:e="",responseType:s="",withCredentials:n=!1,timeout:r=3e4}){const h=new XMLHttpRequest;return h.open(i,t,!0),e.length>0&&h.setRequestHeader("Content-Type",e),s.length>0&&(h.responseType=s),h.timeout=r,h.withCredentials=n,h}(t),s=new Date;return new Promise(((t,n)=>{e.onreadystatechange=()=>{if(e.readyState===XMLHttpRequest.DONE)if(200===e.status)t(e.response);else{let t="";try{t=e.responseText}catch(t){}const i=(new Date).getTime()-s.getTime();n(new Error(`Request fail. status:${e.status}, readyState:${e.readyState}, response:${t}, time:${i}`))}},e.ontimeout=()=>{const t=(new Date).getTime()-s.getTime();n(new Error(`Request timeout status:${e.status}. time:${t}`))},e.send(i)}))}function a(t,e,s,n){return new Promise(((r,h)=>{e.then((e=>{if(t){let a=null;try{const i=e?new Uint8Array(e):new Uint8Array;a=t.toObject(t.decode(i),{defaults:!0,arrays:!0,objects:!0})}catch(t){!function(t,e,s,n){let r;try{r=JSON.parse((new TextDecoder).decode(t))}catch(t){}r?(r.ErrorMessage===i.DumpJson&&(0,o.n)({message:i.DumpJson,exception:JSON.stringify(s),callStack:e,level:o.D.INFO}),r.ErrorMessage===i.ServerError&&(0,o.n)({message:i.ServerError,exception:e,level:o.D.WARN})):(0,o.n)({exception:`${e}__${n.message}`,message:i.ProtobufDecode,callStack:n.stack,level:o.D.WARN},{throttle:10})}(e,s,n,t),h(i.ProtobufDecode)}r(a)}})).catch((t=>{h(t)}))}))}function c(t,i,e){try{const s=(0,n.Vm)([95,5]);!s||i&&0!==Object.keys(i).length||(0,o.n)({message:"empty_proto_request",callStack:"empty_function_argument",exception:e,level:o.D.INFO},{sendMaxLog:!1});const r=t.fromObject(i);!s||r&&0!==Object.keys(r).length||(0,o.n)({message:"empty_proto_request",callStack:"empty_fromObject_result",exception:e,level:o.D.INFO},{sendMaxLog:!1});const h=t.encode(r).finish();return!s||h&&0!==Object.keys(h).length||(0,o.n)({message:"empty_proto_request",callStack:"empty_encode_result",exception:e,level:o.D.INFO},{sendMaxLog:!1}),h}catch(t){throw(0,o.n)({exception:e,level:o.D.CRITICAL,callStack:JSON.stringify(i),message:"Protobuf_encode"},{throttle:10}),Error()}}t.fetchXhttpRequest=s,t.fetchXMLRequest=function(t,i=!0){const e=s({requestUrl:t,requestType:"GET",withCredentials:i});return new Promise(((t,i)=>{e.then((i=>{t(i)})).catch((t=>{i(t)}))}))},t.sendProtoRequest=function({ProtoResponse:t,ProtoRequest:i,requestData:r,endpoint:h,requestType:l,withCredentials:u,queryParams:d,logError:p,timeout:f}){const m=r?c(i,r,h):null;return function(t,i,e="POST",n,r,h,o){return a(t,s({requestUrl:i,requestType:e,withCredentials:r,contentType:"POST"===e?"multipart/form-data":"",responseType:"arraybuffer",timeout:h},n),i,o)}(t,h=e(h,d),l,m,u,f,r).catch((t=>{throw p&&(0,n.Vm)([95,5])&&(0,o.n)({message:"Xhr_error",exception:h,callStack:`${t}, requestData: ${JSON.stringify(r)}`,level:o.D.INFO}),new Error(t)}))},t.sendProtoBeaconRequest=function({ProtoRequest:t,requestData:i,endpoint:s,queryParams:n=null}){s=e(s,n);const r=i?c(t,i,s):null;return navigator.sendBeacon(s,r)},t.sendJsonBeaconRequest=function(t,i){const e=new Blob([JSON.stringify(t)],{type:"application/json"});return navigator.sendBeacon(i,e)},t.trackPixel=function(t){try{(new Image).src=t}catch(t){(0,o.n)({message:"Xhr_trackPixel",exception:t.message,callStack:t.stack,level:o.D.CRITICAL})}}}(s||(s={}))},655:(t,i,e)=>{"use strict";e.d(i,{CR:()=>a,FC:()=>u,Jh:()=>h,KL:()=>d,XA:()=>o,ZT:()=>n,ev:()=>c,mG:()=>r,qq:()=>l});var s=function(t,i){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var e in i)Object.prototype.hasOwnProperty.call(i,e)&&(t[e]=i[e])},s(t,i)};function n(t,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function e(){this.constructor=t}s(t,i),t.prototype=null===i?Object.create(i):(e.prototype=i.prototype,new e)}function r(t,i,e,s){return new(e||(e=Promise))((function(n,r){function h(t){try{a(s.next(t))}catch(t){r(t)}}function o(t){try{a(s.throw(t))}catch(t){r(t)}}function a(t){var i;t.done?n(t.value):(i=t.value,i instanceof e?i:new e((function(t){t(i)}))).then(h,o)}a((s=s.apply(t,i||[])).next())}))}function h(t,i){var e,s,n,r,h={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return r={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function o(r){return function(o){return function(r){if(e)throw new TypeError("Generator is already executing.");for(;h;)try{if(e=1,s&&(n=2&r[0]?s.return:r[0]?s.throw||((n=s.return)&&n.call(s),0):s.next)&&!(n=n.call(s,r[1])).done)return n;switch(s=0,n&&(r=[2&r[0],n.value]),r[0]){case 0:case 1:n=r;break;case 4:return h.label++,{value:r[1],done:!1};case 5:h.label++,s=r[1],r=[0];continue;case 7:r=h.ops.pop(),h.trys.pop();continue;default:if(!(n=h.trys,(n=n.length>0&&n[n.length-1])||6!==r[0]&&2!==r[0])){h=0;continue}if(3===r[0]&&(!n||r[1]>n[0]&&r[1]<n[3])){h.label=r[1];break}if(6===r[0]&&h.label<n[1]){h.label=n[1],n=r;break}if(n&&h.label<n[2]){h.label=n[2],h.ops.push(r);break}n[2]&&h.ops.pop(),h.trys.pop();continue}r=i.call(t,h)}catch(t){r=[6,t],s=0}finally{e=n=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,o])}}}Object.create;function o(t){var i="function"==typeof Symbol&&Symbol.iterator,e=i&&t[i],s=0;if(e)return e.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&s>=t.length&&(t=void 0),{value:t&&t[s++],done:!t}}};throw new TypeError(i?"Object is not iterable.":"Symbol.iterator is not defined.")}function a(t,i){var e="function"==typeof Symbol&&t[Symbol.iterator];if(!e)return t;var s,n,r=e.call(t),h=[];try{for(;(void 0===i||i-- >0)&&!(s=r.next()).done;)h.push(s.value)}catch(t){n={error:t}}finally{try{s&&!s.done&&(e=r.return)&&e.call(r)}finally{if(n)throw n.error}}return h}function c(t,i,e){if(e||2===arguments.length)for(var s,n=0,r=i.length;n<r;n++)!s&&n in i||(s||(s=Array.prototype.slice.call(i,0,n)),s[n]=i[n]);return t.concat(s||Array.prototype.slice.call(i))}function l(t){return this instanceof l?(this.v=t,this):new l(t)}function u(t,i,e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var s,n=e.apply(t,i||[]),r=[];return s={},h("next"),h("throw"),h("return"),s[Symbol.asyncIterator]=function(){return this},s;function h(t){n[t]&&(s[t]=function(i){return new Promise((function(e,s){r.push([t,i,e,s])>1||o(t,i)}))})}function o(t,i){try{(e=n[t](i)).value instanceof l?Promise.resolve(e.value.v).then(a,c):u(r[0][2],e)}catch(t){u(r[0][3],t)}var e}function a(t){o("next",t)}function c(t){o("throw",t)}function u(t,i){t(i),r.shift(),r.length&&o(r[0][0],r[0][1])}}function d(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i,e=t[Symbol.asyncIterator];return e?e.call(t):(t=o(t),i={},s("next"),s("throw"),s("return"),i[Symbol.asyncIterator]=function(){return this},i);function s(e){i[e]=t[e]&&function(i){return new Promise((function(s,n){(function(t,i,e,s){Promise.resolve(s).then((function(i){t({value:i,done:e})}),i)})(s,n,(i=t[e](i)).done,i.value)}))}}}Object.create},289:function(t,i,e){var s,n,r;n=[e(4492)],void 0===(r="function"==typeof(s=function(t){"use strict";return(t.roots.common||(t.roots.common=new t.Root)).addJSON({ProtoAdBreak:{fields:{types:{rule:"repeated",type:"ProtoAdBreakTypeEnum",id:1,options:{packed:!1}},maxAdPodDuration:{type:"int32",id:2},maxAdSlotDuration:{type:"int32",id:3,options:{default:180}},numberOfAdSlots:{type:"int32",id:4,options:{default:1}}}},ProtoAdDomainBlockingResponse:{fields:{domains:{rule:"repeated",type:"string",id:1}}},ProtoCoreTamBidRequest:{fields:{lineItemId:{type:"string",id:1},code:{type:"string",id:2},metadata:{type:"MetadataModel",id:3},exploration:{type:"bool",id:4}}},MetadataModel:{fields:{version:{type:"int32",id:1},sessionId:{type:"string",id:2},playerId:{type:"string",id:3},userId:{type:"string",id:4},browser:{type:"Browser",id:5},geo:{type:"GeoLocation",id:6},clientAb0:{type:"int32",id:7},clientAb1:{type:"int32",id:8},serverAb0:{type:"int32",id:9},serverAb1:{type:"int32",id:10},pageUrl:{type:"string",id:15},bundleId:{type:"string",id:17},implementationType:{type:"ProtoImplementationType",id:18},trackAllRequests:{type:"bool",id:19},customParam1:{type:"string",id:20},customParam2:{type:"string",id:21},customParam3:{type:"string",id:22},abTestId:{type:"string",id:24},pageInFocus:{type:"bool",id:25},customParam4:{type:"string",id:26},customParam5:{type:"string",id:27},bundleAbId:{type:"string",id:28},bundlePart:{type:"string",id:29}}},Browser:{fields:{browserVersion:{type:"string",id:1},browserType:{type:"string",id:2},osCode:{type:"string",id:3},device:{type:"ProtoDeviceType",id:4}}},GeoLocation:{fields:{countryGeoId:{type:"int32",id:1},cityId:{type:"int32",id:2},subdivisionId:{type:"int32",id:3},dmaId:{type:"int32",id:4},ip:{type:"string",id:5},lat:{type:"double",id:6},lon:{type:"double",id:7},zipcode:{type:"string",id:8}}},ProtoCoreTamBidResponse:{fields:{errorMessage:{type:"string",id:1},encryptedBidPrice:{type:"string",id:10},ofskp:{type:"double",id:12},impressionTimeSpent:{type:"int32",id:13},bidRate:{type:"double",id:14},successRate:{type:"double",id:15}}},ProtoCookieSettings:{fields:{name:{type:"string",id:1},value:{type:"string",id:2},timestamp:{type:"int64",id:3}}},ProtoCookieSyncRequest:{fields:{cookieList:{rule:"repeated",type:"ProtoCookieSettings",id:1},secureMode:{type:"ProtoCookieSecureModeEnum",id:2},browserInfo:{type:"Browser",id:3}}},ProtoUserInformation:{fields:{userId:{type:"string",id:1},lookupId:{type:"string",id:3},lookupResponseCode:{type:"int32",id:4},callFraudSensor:{type:"bool",id:5},publisherAdsTxt:{type:"string",id:6}}},CreativeTrackerViewModel:{fields:{type:{type:"ProtoTrackerType",id:1},trigger:{type:"ProtoTrackerTriggerType",id:2},url:{type:"string",id:3}}},Insights:{fields:{key:{type:"string",id:1}}},ProtoSentimentAnalysis:{fields:{positive:{type:"double",id:1},neutral:{type:"double",id:2},negative:{type:"double",id:3}}},ProtoInsightsResponse:{fields:{insights:{rule:"repeated",type:"Insights",id:1},sentimentAnalysis:{type:"ProtoSentimentAnalysis",id:2}}},ProtoLineItemAdBreakTargeting:{fields:{adRollType:{type:"ProtoAdBreakTypeEnum",id:1},adBreakTypeEnum:{type:"ProtoLineItemAdBreakTypeEnum",id:2}}},ProtoLineItemAdPodTargeting:{fields:{targetingType:{type:"ProtoLineItemTargetingTypeEnum",id:1},adSlotTargetingType:{type:"ProtoLineItemAdSlotTargetingTypeEnum",id:2},adSlotPositions:{rule:"repeated",type:"int32",id:3,options:{packed:!1}}}},ProtoLineItemAdBreakSettings:{fields:{adBreakTargeting:{rule:"repeated",type:"ProtoLineItemAdBreakTargeting",id:1},adPodTargeting:{type:"ProtoLineItemAdPodTargeting",id:2}}},ProtoLineItem:{oneofs:{ta:{oneof:["predictedFloorPrice"]},ia:{oneof:["floorPricesNew"]}},fields:{predictedFloorPrice:{type:"double",id:49,options:{proto3_optional:!0}},floorPricesNew:{type:"ProtoFloorPricesNewModel",id:57,options:{proto3_optional:!0}},publisherLineItemId:{type:"string",id:1},advertiserLineItemId:{type:"string",id:2},adTag:{type:"string",id:3},creativeType:{type:"ProtoCreativeTypeEnum",id:4},sound:{type:"bool",id:6},viewability:{type:"bool",id:7},impressionTimeSpent:{type:"int32",id:9},vendorId:{type:"string",id:10},trackers:{rule:"repeated",type:"CreativeTrackerViewModel",id:12},duration:{type:"int32",id:13},renditions:{rule:"repeated",type:"ProtoRendition",id:14},mediaCreativeId:{type:"string",id:15},ignoreFilledRequests:{type:"bool",id:16},requestCap:{type:"int32",id:17,options:{default:3}},impressionCap:{type:"int32",id:18},successRate:{type:"double",id:19},lineItemPriority:{type:"ProtoLineItemPriority",id:20},headerBidderBids:{type:"string",id:21},headerBidderTimeout:{type:"int32",id:22},mediaCreativeClickUrl:{type:"string",id:23},resetRequestsCapTime:{type:"int32",id:24,options:{default:60}},resetImpressionsCapTime:{type:"int32",id:25,options:{default:60}},resetCapType:{type:"ProtoResetCapTypeEnum",id:26},creativeHlsFileName:{type:"string",id:27},timeBetweenRequests:{type:"int32",id:28},skipMode:{type:"ProtoAdSkipMode",id:29},mediaIdTargeting:{type:"ProtoTargetingChoiceModel",id:30},mediaKeywordsTargeting:{type:"ProtoTargetingChoiceModel",id:31},mediaLanguageTargeting:{type:"ProtoTargetingChoiceModel",id:32},adType:{type:"ProtoAdType",id:33},overlayTime:{type:"int32",id:34,options:{default:30}},floorPrice:{type:"double",id:35},adBreakSettings:{type:"ProtoLineItemAdBreakSettings",id:36},floorPrices:{rule:"repeated",type:"double",id:38,options:{packed:!1}},bidRate:{type:"double",id:39},pauseAdOutOfView:{type:"ProtoLineItemPauseAdOutOfViewEnum",id:40},moatTrackingEnabled:{type:"bool",id:41},cnxCreativeId:{type:"string",id:42},blockedDomainsRevisionNumber:{type:"int32",id:44},advertiserContextualTargeting:{rule:"repeated",type:"ProtoContextualTargetingCaseModel",id:45},publisherContextualTargeting:{rule:"repeated",type:"ProtoContextualTargetingCaseModel",id:46},playerSizeTargetings:{type:"ProtoPlayerSizeTargetings",id:47},amazonDealId:{type:"string",id:48},playerOrientationTargeting:{type:"ProtoPlayerOrientationTargetingEnum",id:50},skipMin:{type:"int32",id:51,options:{default:6}},skippability:{type:"ProtoLineItemSkippabilityType",id:52},forceCallingInEveryAO:{type:"bool",id:53},networkExpiryTimeSeconds:{type:"int32",id:54,options:{default:21600}},nonlinearLineItemSettings:{type:"ProtoNonlinearLineItemSettings",id:55},floorPriceData:{rule:"repeated",type:"ProtoFloorPriceModel",id:56},prebidJsBidParamsJSONString:{type:"string",id:58},playerSize:{type:"string",id:101}}},ProtoTargetingChoiceModel:{fields:{choiceCriteria:{type:"ProtoChoiceCriteriaEnum",id:1},items:{rule:"repeated",type:"string",id:2}}},ProtoContextualTargetingCaseModel:{fields:{filters:{rule:"repeated",type:"ProtoContextualTargetingFilterModel",id:1}}},ProtoContextualTargetingFilterModel:{fields:{type:{type:"ProtoLineItemContextualTargetingEnum",id:1},items:{rule:"repeated",type:"string",id:2},level:{type:"ProtoContextualTargetingLevelEnum",id:3},hashedItemsIds:{rule:"repeated",type:"string",id:4}}},ProtoPlayerSizeTargetings:{fields:{sizeChoiceCriteria:{type:"ProtoSizeChoiceCriteriaEnum",id:1},minWidth:{type:"int32",id:2},maxWidth:{type:"int32",id:3}}},ProtoFloorPriceModel:{fields:{price:{type:"double",id:1},factor:{type:"double",id:2}}},ProtoFloorPricesData:{fields:{price:{type:"double",id:1},floorPriceBypassReason:{type:"FloorPriceBypassReasonEnum",id:2}}},ProtoFloorPricesNewModel:{fields:{floorPrices:{rule:"repeated",type:"ProtoFloorPricesData",id:1},recommended:{type:"int32",id:2}}},ProtoRendition:{fields:{height:{type:"int32",id:1},codec:{type:"string",id:2},file:{type:"string",id:3}}},ProtoNonlinearLineItemSettings:{fields:{nonLinearRequestType:{type:"ProtoNonlinearRequestType",id:1},nonLinearAdTimeSeconds:{type:"int32",id:2,options:{default:15}}}},ProtoLiveMediaMetadataResponse:{fields:{startDate:{type:"string",id:1},outputUrl:{type:"string",id:2},thumbnailUrl:{type:"string",id:3},altText:{type:"string",id:4},name:{type:"string",id:5}}},ProtoSpriteSheet:{fields:{file:{type:"string",id:1},height:{type:"int32",id:2},count:{type:"int32",id:3}}},ProtoTrack:{fields:{file:{type:"string",id:1},type:{type:"ProtoTrackType",id:2},code:{type:"string",id:3},title:{type:"string",id:4}}},ProtoCustomField:{fields:{name:{type:"string",id:1},value:{type:"string",id:2}}},ProtoMediaMetadataResponse:{fields:{title:{type:"string",id:1},description:{type:"string",id:2},duration:{type:"int32",id:3},clickUrl:{type:"string",id:4},keywordList:{rule:"repeated",type:"string",id:5},trackList:{rule:"repeated",type:"ProtoTrack",id:6},spriteSheet:{type:"ProtoSpriteSheet",id:7},thumbnail:{type:"string",id:8},renditionList:{rule:"repeated",type:"ProtoRendition",id:9},customFields:{rule:"repeated",type:"ProtoCustomField",id:10},hlsFilePath:{type:"string",id:11},languageId:{type:"string",id:12},sourceItemId:{type:"string",id:13},altText:{type:"string",id:14},videoIndexes:{rule:"repeated",type:"string",id:15}}},ProtoNonlinearPlayerSettings:{fields:{numberOfNonlinearAds:{type:"int32",id:1},timeSecondsBetweenNonlinear:{type:"int32",id:2,options:{default:5}},timeSecondsBetweenLinearAndNonlinear:{type:"int32",id:3}}},ProtoRtbRequest:{fields:{metadata:{type:"MetadataModel",id:1},coppa:{type:"bool",id:4},refererUrl:{type:"string",id:5},testMode:{type:"bool",id:6},videoWidth:{type:"int32",id:7},videoHeight:{type:"int32",id:8},gdprCompliant:{type:"bool",id:9},soundOn:{type:"bool",id:10},gdprConsentData:{type:"string",id:11},explorationMode:{type:"bool",id:12},viewability:{type:"bool",id:13},outstream:{type:"bool",id:14},domainURL:{type:"string",id:16},isClickToPlay:{type:"bool",id:18},appVersion:{type:"string",id:21},deviceID:{type:"string",id:24},lineItems:{keyType:"string",type:"ProtoRtbRequestLineItemEntry",id:25},isCcpaBlockingUserInfo:{type:"bool",id:26},usPrivacyString:{type:"string",id:27},gdprConsentMode:{type:"ProtoGdprConsentModeEnum",id:36},maxAdDuration:{type:"int32",id:37,options:{default:180}},customMacros:{keyType:"string",type:"string",id:38},maxBidPrice:{type:"double",id:39},playerWidth:{type:"int32",id:43},playerHeight:{type:"int32",id:44},useNewSkippability:{type:"bool",id:42},liveRampAtsEnvelope:{type:"string",id:45}}},ProtoRtbRequestLineItemEntry:{oneofs:{ea:{oneof:["cachedFloorPriceOld"]},ta:{oneof:["predictedFloorPrice"]},sa:{oneof:["cachedFloorPrice"]}},fields:{cachedFloorPriceOld:{type:"double",id:2,options:{proto3_optional:!0}},predictedFloorPrice:{type:"double",id:9,options:{proto3_optional:!0}},cachedFloorPrice:{type:"ProtoCacheFloorPrice",id:16,options:{proto3_optional:!0}},availableRequests:{type:"int32",id:1},gdprConsent:{type:"bool",id:4},publisherLineItemId:{type:"string",id:5},slotWidth:{type:"int32",id:6},slotHeight:{type:"int32",id:7},requestNumber:{type:"int32",id:8},skip:{type:"ProtoSkipEnabledEnum",id:12},skipmin:{type:"int32",id:13},skipafter:{type:"int32",id:14},minDuration:{type:"int32",id:15}}},ProtoCacheFloorPrice:{fields:{floorPrices:{rule:"repeated",type:"double",id:1,options:{packed:!1}},recommended:{type:"int32",id:2}}},ProtoRtbResponse:{fields:{lineItemResponses:{rule:"repeated",type:"ProtoRtbLineItem",id:3},liveRampEnvelopeStatus:{type:"LiveRampEnvelopeStatusEnum",id:4}}},ProtoRtbBid:{oneofs:{na:{oneof:["floorPriceFactor"]},ra:{oneof:["floorPriceBypassReason"]}},fields:{floorPriceFactor:{type:"double",id:28,options:{proto3_optional:!0}},floorPriceBypassReason:{type:"FloorPriceBypassReasonEnum",id:29,options:{proto3_optional:!0}},winNoticeUrl:{type:"string",id:2},adQualityCheckUrl:{type:"string",id:3},vastTag:{type:"string",id:4},encryptedPrice:{type:"string",id:6},creativeId:{type:"string",id:7},seatId:{type:"string",id:8},adomain:{type:"string",id:9},syncedUser:{type:"bool",id:10},requestedFloorPrice:{type:"double",id:11},floorPriceFactorIndex:{type:"int32",id:12},campaignId:{type:"string",id:13},width:{type:"int32",id:14},height:{type:"int32",id:15},billingNoticeUrlList:{rule:"repeated",type:"string",id:16},mime:{type:"string",id:17,options:{default:"text/html"}},gtkpbp:{type:"double",id:18},successRate:{type:"double",id:19},impressionTimeSpent:{type:"int32",id:20},bidRate:{type:"double",id:21},dspId:{type:"string",id:22},cnxBidId:{type:"string",id:23},logAuctionInformation:{type:"bool",id:24},auctionBidId:{type:"string",id:25},rtbRequestId:{type:"string",id:26},liveRampAts:{type:"bool",id:27},floorPriceInformation:{type:"ProtoFloorPriceInformation",id:30}}},ProtoRtbNoBid:{fields:{connatixReason:{type:"ConnatixNoBidReasonEnum",id:1},partnerReason:{type:"PartnerNoBidReasonEnum",id:2},syncedUser:{type:"bool",id:3},requestedFloorPrice:{type:"double",id:4},floorPriceFactorIndex:{type:"int32",id:5},partnerCustomHeaders:{type:"string",id:6}}},ProtoRtbLineItem:{oneofs:{ta:{oneof:["predictedFloorPrice"]},sa:{oneof:["cachedFloorPrice"]}},fields:{predictedFloorPrice:{type:"double",id:5,options:{proto3_optional:!0}},cachedFloorPrice:{type:"ProtoCacheFloorPrice",id:6,options:{proto3_optional:!0}},id:{type:"string",id:1},cachedFloorPriceOld:{type:"double",id:2},bids:{rule:"repeated",type:"ProtoRtbBid",id:3},noBids:{rule:"repeated",type:"ProtoRtbNoBid",id:4}}},ProtoSupplyChain:{fields:{businessDomain:{type:"string",id:1},supplyChainId:{type:"string",id:3}}},ProtoAdClickTrackingRequest:{fields:{trackingRequestMeta:{type:"MetadataModel",id:1},mediaGuid:{type:"string",id:2},publisherLineItemId:{type:"string",id:3},advertiserLineItemId:{type:"string",id:4},type:{type:"ProtoAdClickTypeEnum",id:5},insightIndexes:{rule:"repeated",type:"string",id:10},adBreakType:{type:"ProtoAdBreakTypeEnum",id:11},sentimentAnalysis:{type:"ProtoSentimentAnalysis",id:12},pageInsightIndexes:{rule:"repeated",type:"string",id:13}}},ProtoAdOpportunityRequest:{fields:{sessionId:{type:"string",id:1},trackingRequestMeta:{type:"MetadataModel",id:2},adBreak:{type:"ProtoAdBreakTypeEnum",id:3},playerWidth:{type:"int32",id:4},pageInsightIndexes:{rule:"repeated",type:"string",id:5}}},ProtoAuctionInfoRequest:{fields:{cnxBidId:{type:"string",id:1},auctionInformation:{type:"ProtoAuctionInformation",id:2},auctionLossReason:{type:"ProtoAuctionLossReasonEnum",id:3}}},ProtoAuctionInformation:{fields:{highestObfuscatedBidPrice:{type:"double",id:1},secondHighestObfuscatedBidPrice:{type:"double",id:2},bidDensity:{type:"int32",id:3}}},ProtoFloorPriceInformation:{fields:{floorPrices:{rule:"repeated",type:"double",id:1,options:{packed:!1}},floorPriceIndexUsed:{type:"int32",id:2},floorPriceBypassReason:{type:"FloorPriceBypassReasonEnum",id:3}}},ProtoPrebid:{fields:{publisherLineItemId:{type:"string",id:1},advertiserLineItemId:{type:"string",id:2},syncedUser:{type:"bool",id:3},timeSpent:{type:"int32",id:4},reason:{type:"ConnatixNoBidReasonEnum",id:5},requestNumber:{type:"int32",id:6},partnerReason:{type:"PartnerNoBidReasonEnum",id:7},requestedFloorPrice:{type:"double",id:8},partnerCustomHeaders:{type:"string",id:9},prebidJsBidderName:{type:"string",id:12},predictedFloorPrice:{type:"double",id:13},playerWidth:{type:"int32",id:14},playerHeight:{type:"int32",id:15},floorPriceInformation:{type:"ProtoFloorPriceInformation",id:16}}},ProtoBid:{fields:{publisherLineItemId:{type:"string",id:1},advertiserLineItemId:{type:"string",id:2},syncedUser:{type:"bool",id:3},timeSpent:{type:"int32",id:4},requestNumber:{type:"int32",id:5},creativeId:{type:"string",id:6},rtbSeatId:{type:"string",id:7},rtbAdomain:{type:"string",id:8},encryptedPrice:{type:"string",id:9},requestedFloorPrice:{type:"double",id:10},prebidJsBidderName:{type:"string",id:13},customClientPrice:{type:"double",id:14},dspId:{type:"string",id:15},cnxBidId:{type:"string",id:16},predictedFloorPrice:{type:"double",id:17},playerWidth:{type:"int32",id:18},playerHeight:{type:"int32",id:19},floorPriceFactor:{type:"double",id:20},floorPriceFactorBypassReason:{type:"int32",id:21},floorPriceInformation:{type:"ProtoFloorPriceInformation",id:22}}},ProtoPostBid:{fields:{publisherLineItemId:{type:"string",id:1},advertiserLineItemId:{type:"string",id:2},syncedUser:{type:"bool",id:3},timeSpent:{type:"int32",id:4},error:{type:"string",id:5},loaded:{type:"bool",id:6},creativeId:{type:"string",id:7},rtbSeatId:{type:"string",id:8},rtbAdomain:{type:"string",id:9},adsourceType:{type:"ProtoAdsourceTypeEnum",id:10},vastMediaType:{type:"string",id:11},adPodSlotPosition:{type:"int32",id:12},prebidJsBidderName:{type:"string",id:13},dspId:{type:"string",id:14},cnxBidId:{type:"string",id:15},winToAdLoadedTime:{type:"int32",id:16},auctionInformation:{type:"ProtoAuctionInformation",id:18},auctionPostbidReason:{type:"ProtoAuctionPostbidReasonEnum",id:19},requestNumber:{type:"int32",id:20},predictedFloorPrice:{type:"double",id:21},floorPrice:{type:"double",id:22},playerWidth:{type:"int32",id:23},playerHeight:{type:"int32",id:24},bidElapsedTimeSeconds:{type:"int32",id:25},adBreakType:{type:"ProtoAdBreakTypeEnum",id:26},liveRampAts:{type:"bool",id:27},floorPriceInformation:{type:"ProtoFloorPriceInformation",id:28},dynamicElkFieldsValues:{keyType:"string",type:"string",id:100}}},ProtoBidTrackingsRequest:{fields:{trackingRequestMeta:{type:"MetadataModel",id:1},mediaGuid:{type:"string",id:2},prebids:{rule:"repeated",type:"ProtoPrebid",id:4},bids:{rule:"repeated",type:"ProtoBid",id:5},postBids:{rule:"repeated",type:"ProtoPostBid",id:6},logEveryting:{type:"bool",id:7},hasGdprConsentPayload:{type:"bool",id:10},gdprConsentMode:{type:"ProtoGdprConsentModeEnum",id:11},useExploration:{type:"bool",id:12}}},ProtoHeavyAdTrackingRequest:{fields:{trackingRequestMeta:{type:"MetadataModel",id:1},advertiserLineItemId:{type:"string",id:2},heavyAdBlockTypeEnum:{type:"ProtoHeavyAdBlockTypeEnum",id:3}}},ProtoMediaClickTrackingRequest:{fields:{trackingRequestMeta:{type:"MetadataModel",id:1},mediaGuid:{type:"string",id:2},type:{type:"ProtoMediaClickTypeEnum",id:3},clickUrl:{type:"string",id:4},slideTitle:{type:"string",id:5},slideNumber:{type:"int32",id:6},slideMediaType:{type:"ProtoMediaTypeEnum",id:7},insightIndexes:{rule:"repeated",type:"string",id:12},sentimentAnalysis:{type:"ProtoSentimentAnalysis",id:13}}},ProtoMediaTrackingRequest:{fields:{trackingRequestMeta:{type:"MetadataModel",id:1},mediaGuid:{type:"string",id:2},quartile:{type:"ProtoQuartilesEnum",id:4},insightIndexes:{rule:"repeated",type:"string",id:9},sentimentAnalysis:{type:"ProtoSentimentAnalysis",id:10}}},ProtoPlayerStartRequest:{fields:{trackingRequestMeta:{type:"MetadataModel",id:1},pageInsightIndexes:{rule:"repeated",type:"string",id:2},dynamicElkFieldsValues:{keyType:"string",type:"string",id:100}}},ProtoSessionAdBlockerRequest:{fields:{trackingRequestMeta:{type:"MetadataModel",id:1},adBlockDetectionType:{type:"ProtoAdBlockDetectionTypeEnum",id:2},dynamicElkFieldsValues:{keyType:"string",type:"string",id:100}}},ProtoSessionTimeTrackingRequest:{fields:{trackingRequestMeta:{type:"MetadataModel",id:1},timePlayed:{type:"int32",id:2},timePlayedInView:{type:"int32",id:3},sessionTime:{type:"int32",id:4},pageInsightIndexes:{rule:"repeated",type:"string",id:5}}},ProtoSessionViewRequest:{fields:{trackingRequestMeta:{type:"MetadataModel",id:1},pageInsightIndexes:{rule:"repeated",type:"string",id:2},dynamicElkFieldsValues:{keyType:"string",type:"string",id:100}}},ProtoTrackingRequest:{fields:{trackingRequestMeta:{type:"MetadataModel",id:1},hasAdBlocker:{type:"bool",id:4},bundleName:{type:"string",id:5},playerWidth:{type:"int32",id:6},playerHeight:{type:"int32",id:7},pageInsightIndexes:{rule:"repeated",type:"string",id:8},dynamicElkFieldsValues:{keyType:"string",type:"string",id:100}}},ProtoTrackingResponse:{oneofs:{ha:{oneof:["viewability"]}},fields:{viewability:{type:"bool",id:5,options:{proto3_optional:!0}},errorMessage:{type:"string",id:1},platformCappedLineItemIdList:{rule:"repeated",type:"string",id:2},impressionRevenue:{type:"double",id:3},adServerLineItemName:{type:"string",id:4}}},ProtoVideoAdImpressionRequest:{fields:{trackingRequestMeta:{type:"MetadataModel",id:1},mediaGuid:{type:"string",id:3},publisherLineItemId:{type:"string",id:5},advertiserLineItemId:{type:"string",id:6},syncedUser:{type:"bool",id:7},timeSpent:{type:"int32",id:8},encryptedPrice:{type:"string",id:9},creativeId:{type:"string",id:10},rtbSeatId:{type:"string",id:11},rtbAdomain:{type:"string",id:12},customClientPrice:{type:"double",id:13},adsourceType:{type:"ProtoAdsourceTypeEnum",id:14},vastMediaType:{type:"string",id:15},adPodSlotPosition:{type:"int32",id:18},prebidJsBidderName:{type:"string",id:19},dspId:{type:"string",id:20},cnxBidId:{type:"string",id:21},winToAdLoadedTime:{type:"int32",id:22},startAdToImpressionTime:{type:"int32",id:23},declaredDuration:{type:"double",id:24},impressionDuration:{type:"double",id:25},useExploration:{type:"bool",id:26},auctionInformation:{type:"ProtoAuctionInformation",id:27},playerWidth:{type:"int32",id:28},requestNumber:{type:"int32",id:29},predictedFloorPrice:{type:"double",id:30},floorPrice:{type:"double",id:31},floorPriceFactor:{type:"double",id:44},floorPriceBypassReason:{type:"FloorPriceBypassReasonEnum",id:45},playerHeight:{type:"int32",id:36},bidElapsedTimeSeconds:{type:"int32",id:37},insightIndexes:{rule:"repeated",type:"string",id:38},adBreakType:{type:"ProtoAdBreakTypeEnum",id:40},sentimentAnalysis:{type:"ProtoSentimentAnalysis",id:41},hasAdSkip:{type:"bool",id:39},pageInsightIndexes:{rule:"repeated",type:"string",id:42},liveRampAts:{type:"bool",id:43},floorPriceInformation:{type:"ProtoFloorPriceInformation",id:46},dynamicElkFieldsValues:{keyType:"string",type:"string",id:100}}},ProtoVideoAdImpressionViewableRequest:{fields:{trackingRequestMeta:{type:"MetadataModel",id:1},mediaGuid:{type:"string",id:3},publisherLineItemId:{type:"string",id:5},advertiserLineItemId:{type:"string",id:6},rtbSeatId:{type:"string",id:7},dspId:{type:"string",id:8},insightIndexes:{rule:"repeated",type:"string",id:13},hasAdSkip:{type:"bool",id:14},adBreakType:{type:"ProtoAdBreakTypeEnum",id:15},sentimentAnalysis:{type:"ProtoSentimentAnalysis",id:16},pageInsightIndexes:{rule:"repeated",type:"string",id:17},rtbAdomain:{type:"string",id:18}}},ProtoVideoAdQuartilesRequest:{fields:{trackingRequestMeta:{type:"MetadataModel",id:1},mediaGuid:{type:"string",id:3},publisherLineItemId:{type:"string",id:5},advertiserLineItemId:{type:"string",id:6},quartile:{type:"ProtoQuartilesEnum",id:7},rtbSeatId:{type:"string",id:8},dspId:{type:"string",id:9},insightIndexes:{rule:"repeated",type:"string",id:14},hasAdSkip:{type:"bool",id:15},adBreakType:{type:"ProtoAdBreakTypeEnum",id:16},sentimentAnalysis:{type:"ProtoSentimentAnalysis",id:17},pageInsightIndexes:{rule:"repeated",type:"string",id:18},rtbAdomain:{type:"string",id:19}}},ProtoUserSyncRequest:{fields:{userId:{type:"string",id:1},demandPartner:{type:"int32",id:2},demandPartnerUserId:{type:"string",id:3}}},ProtoPlayerPlaybackModeEnum:{values:{Autoplay:0,ScrollToPlay:1,ClickToPlay:2}},ProtoPlayerCloseButtonMode:{values:{Off:0,OnHover:1,OnHoverAfterFirstAd:2,AlwaysOn:3}},ProtoPlayerFloatingMode:{values:{Off:0,OnPageLoad:1,AfterInView:2,Always:3}},ProtoPlayerSoundMode:{values:{Mute:0,On:1,Hover:2}},ProtoPlayerInsertMode:{values:{WithinContainer:0,BeforeContainer:1,AfterContainer:2,ReplaceContainer:3,HideContainer:4}},ProtoAdViewabilityPolicy:{values:{Default:0,Strict:1}},ProtoSharingDestination:{values:{Facebook:0,Twitter:1,LinkedIn:2}},ProtoFloatingFixedPositionMode:{values:{Page:0,Element:1}},ProtoPositionMode:{values:{BottomRight:0,BottomLeft:1,TopRight:2,TopLeft:3}},ProtoAdPlaybackMode:{values:{Autoplay:0,ScrollToPlay:1}},ProtoFloatingAppendLocationEnum:{values:{Above:0,Below:1,Within:2}},ProtoPlayerAdSkippability:{values:{IfLongerThan:0,Always:1,NoRestrictions:2}},ProtoVideoQuality:{values:{Auto:0,High1080p:1,High720p:2,Medium360p:3}},ProtoImplementationType:{values:{Web:0,Amp:1}},ProtoAdBreakTypeEnum:{values:{None:0,PreRoll:1,MidRoll:2,PostRoll:3}},ProtoAdSlotAdTypeEnum:{values:{SingleAd:0,AdPod:1}},ProtoPlayerSkippabilityType:{values:{AllowNonSkipAdsIfTheyAreShorterThan:0,RequireAdsToBeSkippable:1}},ProtoBandwidthLoggingEnum:{values:{Disabled:0,Enabled:1,SaaS:2}},ProtoDeviceType:{values:{Desktop:0,Smartphone:1,Tablet:2,GameConsole:3,SmartTV:4,WearableComputer:5,PDA:6,Unrecognized:7}},ProtoCookieSecureModeEnum:{values:{Secure:0,Unsecure:1,Auto:2}},ProtoTrackerType:{values:{Image:0,Javascript:1}},ProtoTrackerTriggerType:{values:{Impression:0,Complete25Pc:1,Complete50Pc:2,Complete75Pc:3,ViewCompletion:4,VideoClick:5,Pause:6,Resume:7,Mute:8,Unmute:9}},ProtoCreativeTypeEnum:{values:{ThirdParty:0,MediaFile:1,Rtb:2,External:3,HeaderBidder:4,Tam:7,TamDeal:8,TamPrivateAuction:9}},ProtoResetCapTypeEnum:{values:{TimeCapping:0,ContentCapping:1,OpportunityCapping:2}},ProtoAdSlotsEnum:{values:{PreRoll:0,MidRoll:1,PostRoll:2}},ProtoLineItemPriority:{values:{House:0,Default:1,Preferred:2,Top:3}},ProtoAdSkipMode:{values:{IfLongerThan31Sec:0,Always:1,Never:2,NotAplicable:3}},ProtoAdType:{values:{Video:0,Overlay:1,Nonlinear:2}},ProtoChoiceCriteriaEnum:{values:{Only:0,Except:1}},ProtoLineItemAdBreakTypeEnum:{values:{All:1,SingleAd:2,AdPod:3}},ProtoLineItemTargetingTypeEnum:{values:{Only:0,Except:1}},ProtoLineItemAdSlotTargetingTypeEnum:{values:{SpecificSlots:1,Interval:2}},ProtoLineItemPauseAdOutOfViewEnum:{values:{Default:0,Strict:1}},ProtoLineItemContextualTargetingEnum:{values:{IncludeAny:0,IncludeAll:1,ExcludeAny:2,ExcludeAll:3}},ProtoSizeChoiceCriteriaEnum:{values:{GreaterThan:0,SmallerThan:1,Between:2}},ProtoPlayerOrientationTargetingEnum:{values:{Both:0,Portrait:1,Landscape:2}},ProtoLineItemSkippabilityType:{values:{AllowPublisherToDetermineSkippability:0,RequirePublisherToAllowNonSkipAdsShorterThan:1,NotApplicable:2}},ProtoContextualTargetingLevelEnum:{values:{Media:0,Page:1,Both:2}},FloorPriceBypassReasonEnum:{values:{MinCpm:0,FixedCpm:1,MaxBidPrice:2,VideoOrBannerMin:3,PubMinFloor:4,AdvMinFloor:5,BidInHand:6,NoPredictionFound:7}},ProtoNonlinearRequestType:{values:{Banner:0,Video:1}},ProtoTrackType:{values:{ManualSubtitle:0,AutoGeneratedSubtitle:1,ClosedCaptions:2}},ProtoMediaTypeEnum:{values:{Image:0,Video:1}},ProtoSkipEnabledEnum:{values:{No:0,Yes:1}},LiveRampEnvelopeStatusEnum:{values:{Ok:0,EnvelopeExpired:1,Unauthorized:2}},ConnatixNoBidReasonEnum:{values:{RequestException:0,Timeout:1,EmptyResponse:2,InvalidResponse:3,NoBid:4,BidBelowFloor:5,DealIdMismatch:6,CsInvalidResponse:7,CsRequestException:8,CsEmptyResponse:9,NoLibInPage:11,BidIsNotTargetingAllowedEver:12}},PartnerNoBidReasonEnum:{values:{Unknown:0,TechnicalError:1,InvalidRequest:2,KnownWebSpider:3,SuspectedNonHumanTraffic:4,CloudIP:5,UnsupportedDevice:6,BlockedPublisher:7,UnmatchedUser:8,DailyReaderCapMet:9,DailyDomainCapMet:10}},ProtoAdBlockDetectionTypeEnum:{values:{Banner:0,Network:1}},ProtoAdClickTypeEnum:{values:{AdClick:1,AdClickThrough:2,AdSkipClick:3,VolumeClick:4,PauseClick:5,PlayClick:6,FullScreenClick:7,MuteClick:8,UnmuteClick:9,ExitFullScreenClick:10,AdUserClose:11}},ProtoAdsourceTypeEnum:{values:{Unknown:0,Vpaid:1,VastMedia:2,CnxMedia:3,Jw:4,Ima:5,AOL:6}},ProtoAuctionLossReasonEnum:{values:{TargetingMismatch:0,CompetitorPriority:1,AdOpportunityEnd:2}},ProtoGdprConsentModeEnum:{values:{Unknown:0,NoCmp:1,NoConsent:2,NoConnatixConsent:3,NotAllDemandConsent:4,AllGood:5}},ProtoAuctionPostbidReasonEnum:{values:{CreativeError:0,SDKFailure:1,UnsupportedMedia:2,TargetingMismatch:3,PlayerError:4}},ProtoHeavyAdBlockTypeEnum:{values:{Global:0,Script:1,VpaidIframe:2,OverlayIframe:3}},ProtoMediaClickTypeEnum:{values:{Click:0,UrlClick:1,VolumeClick:2,PlayClick:3,PauseClick:4,NextClick:5,PreviousClick:6,MuteClick:7,UnmuteClick:8,CloseClick:9,ScrollClick:10,GalleryClick:11,SubtitleClick:12,FullScreenClick:13,ExitFullScreenClick:14}},ProtoQuartilesEnum:{values:{Start:0,First:1,Second:2,Third:3,Fourth:4}}})})?s.apply(i,n):s)||(t.exports=r)},7953:function(t,i,e){var s,n,r;n=[e(4492)],void 0===(r="function"==typeof(s=function(t){"use strict";return(t.roots.elements||(t.roots.elements=new t.Root)).addJSON({ProtoElementsRequest:{fields:{tokens:{rule:"repeated",type:"string",id:1},pageUrl:{type:"string",id:3},userId:{type:"string",id:5},forcePlayerId:{type:"string",id:7},forcePlaylistId:{type:"string",id:9},version:{type:"int32",id:10},forceLineItemIds:{rule:"repeated",type:"string",id:11},clientAb0:{type:"int32",id:12},clientAb1:{type:"int32",id:13},customParam1:{type:"string",id:16},customParam2:{type:"string",id:17},customParam3:{type:"string",id:18},forceExploration:{type:"bool",id:20},es6:{type:"bool",id:21},bundleId:{type:"string",id:22},forceSourceItemId:{type:"string",id:23},parseDomain:{type:"bool",id:24},implementationType:{type:"ProtoImplementationType",id:25},queryJsTargeting:{keyType:"string",type:"string",id:26},isConsentConnatix:{type:"bool",id:27,options:{default:!0}},reloadedPlayers:{keyType:"string",type:"string",id:29},disableTracking:{type:"bool",id:31},referrer:{type:"string",id:32},localTimestamp:{type:"int64",id:33},customParam4:{type:"string",id:34},customParam5:{type:"string",id:35},forceMediaIdList:{rule:"repeated",type:"string",id:36},servingRuleId:{type:"string",id:37}}},ProtoPlaylistItem:{oneofs:{oa:{oneof:["insightsRevisionNumber"]}},fields:{insightsRevisionNumber:{type:"int32",id:4,options:{proto3_optional:!0}},mediaId:{type:"string",id:1},revisionNumber:{type:"int32",id:2},mediaContentVersionId:{type:"string",id:3}}},ProtoElements:{fields:{playerId:{type:"string",id:1},playbackMode:{type:"ProtoPlayerPlaybackModeEnum",id:2},soundMode:{type:"ProtoPlayerSoundMode",id:3},upNextMode:{type:"ProtoPlayerUpNextMode",id:4,options:{default:1}},containerSelector:{type:"string",id:5},position:{type:"int32",id:6},insertPosition:{type:"ProtoPlayerInsertMode",id:7},forceInsertPath:{type:"bool",id:8},renderInFrame:{type:"bool",id:9},scrollHijackingProtection:{type:"bool",id:10},preRollBreak:{type:"int32",id:11},postRollBreak:{type:"int32",id:12},midRollNumber:{type:"int32",id:13,options:{default:-1}},timeBetweenAds:{type:"int32",id:14},minTimeBeforeFirstAd:{type:"int32",id:15},adViewabilityPolicy:{type:"ProtoAdViewabilityPolicy",id:16},responsive:{type:"bool",id:18},ratioWidth:{type:"int32",id:19},ratioHeight:{type:"int32",id:20},fixedWidth:{type:"int32",id:21},fixedHeight:{type:"int32",id:22},casting:{type:"bool",id:23},sharingDestinations:{rule:"repeated",type:"ProtoSharingDestination",id:24,options:{packed:!1}},closedCaption:{type:"bool",id:25},muteWatermark:{type:"bool",id:26},expandButton:{type:"bool",id:27},closeButtonMode:{type:"ProtoPlayerCloseButtonMode",id:28},floatingMode:{type:"ProtoPlayerFloatingMode",id:29},floatingDeviceMode:{rule:"repeated",type:"ProtoDeviceType",id:30,options:{packed:!1}},floatingCloseButtonMode:{type:"ProtoPlayerCloseButtonMode",id:31},floatingFixedPosition:{type:"ProtoFloatingFixedPositionMode",id:32},floatingPageElement:{type:"string",id:33},floatingUseElementWidth:{type:"bool",id:34},floatingScrollPosition:{type:"ProtoPositionMode",id:35},floatingGutterX:{type:"int32",id:36},floatingGutterY:{type:"int32",id:37},floatingWidth:{type:"int32",id:38},iconsColor:{type:"string",id:39},accentColor:{type:"string",id:40},tooltipTextColor:{type:"string",id:41},tooltipBackgroundColor:{type:"string",id:42},html:{type:"string",id:43},galleryStyle:{type:"ProtoGalleryStyleMode",id:45},logoPosition:{type:"ProtoLogoPositionMode",id:46},lineItems:{rule:"repeated",type:"ProtoLineItem",id:49},adPlaybackMode:{type:"ProtoAdPlaybackMode",id:50},css:{type:"string",id:51},sessionId:{type:"string",id:52},playlistId:{type:"string",id:53},playerType:{type:"ProtoElementsTypeEnum",id:54},outstreamInitialRendering:{type:"ProtoOutstreamInitialRenderingEnum",id:55},outstreamHouseBackgroundColor:{type:"string",id:56},outstreamTotalAdBreakLength:{type:"int32",id:57},outstreamEndAdBreakPolicy:{type:"ProtoOutstreamEndAdBreakPolicyEnum",id:58},galleryOrientation:{type:"ProtoGalleryOrientationEnum",id:59},playlist:{rule:"repeated",type:"ProtoPlaylistItem",id:60},floatingAppendLocation:{type:"ProtoFloatingAppendLocationEnum",id:61},floatingYAxisPadding:{type:"int32",id:62},customJsCode:{type:"string",id:63},videoQuality:{type:"ProtoVideoQuality",id:64},initializationSettingsJson:{type:"string",id:65},skipAdAfter:{type:"int32",id:67,options:{default:5}},adBreaks:{rule:"repeated",type:"ProtoAdBreak",id:68},amazonTamSlotId:{type:"string",id:69},midRollOnlyOnLongContent:{type:"bool",id:70,options:{default:!0}},limitClientSideApiUse:{type:"bool",id:71},abTestId:{type:"string",id:72},skipMin:{type:"int32",id:73,options:{default:31}},skippability:{type:"ProtoPlayerSkippabilityType",id:74},logoResource:{type:"string",id:76},nonlinearPlayerSettings:{type:"ProtoNonlinearPlayerSettings",id:77},displayAdCountdown:{type:"bool",id:78},bandwidthLoggingState:{type:"ProtoBandwidthLoggingEnum",id:79},prefetchOnPreroll:{type:"bool",id:80,options:{default:!0}}}},ProtoElementsResponse:{fields:{errorMessage:{type:"string",id:1},players:{rule:"repeated",type:"ProtoElements",id:10},browser:{type:"Browser",id:11},geoLocation:{type:"GeoLocation",id:12},lineItems:{rule:"repeated",type:"ProtoLineItem",id:13},cookieSyncUrls:{keyType:"int32",type:"string",id:14},explorationMode:{type:"bool",id:15},supplyChain:{type:"ProtoSupplyChain",id:17},secondLevelDomain:{type:"string",id:18},userInformation:{type:"ProtoUserInformation",id:20},serverAb0:{type:"int32",id:21},serverAb1:{type:"int32",id:22},isSeoTraffic:{type:"bool",id:23},apiHostUrl:{type:"string",id:24},publisherNetworkCode:{type:"string",id:26},iOSAppID:{type:"string",id:27},hashedPageUrl:{type:"string",id:28},bundleAbId:{type:"string",id:29},bundlePart:{type:"string",id:30}}},ProtoLineItemAdBreakTargeting:{fields:{adRollType:{type:"ProtoAdBreakTypeEnum",id:1},adBreakTypeEnum:{type:"ProtoLineItemAdBreakTypeEnum",id:2}}},ProtoLineItemAdPodTargeting:{fields:{targetingType:{type:"ProtoLineItemTargetingTypeEnum",id:1},adSlotTargetingType:{type:"ProtoLineItemAdSlotTargetingTypeEnum",id:2},adSlotPositions:{rule:"repeated",type:"int32",id:3,options:{packed:!1}}}},ProtoLineItemAdBreakSettings:{fields:{adBreakTargeting:{rule:"repeated",type:"ProtoLineItemAdBreakTargeting",id:1},adPodTargeting:{type:"ProtoLineItemAdPodTargeting",id:2}}},ProtoLineItem:{oneofs:{ta:{oneof:["predictedFloorPrice"]},ia:{oneof:["floorPricesNew"]}},fields:{predictedFloorPrice:{type:"double",id:49,options:{proto3_optional:!0}},floorPricesNew:{type:"ProtoFloorPricesNewModel",id:57,options:{proto3_optional:!0}},publisherLineItemId:{type:"string",id:1},advertiserLineItemId:{type:"string",id:2},adTag:{type:"string",id:3},creativeType:{type:"ProtoCreativeTypeEnum",id:4},sound:{type:"bool",id:6},viewability:{type:"bool",id:7},impressionTimeSpent:{type:"int32",id:9},vendorId:{type:"string",id:10},trackers:{rule:"repeated",type:"CreativeTrackerViewModel",id:12},duration:{type:"int32",id:13},renditions:{rule:"repeated",type:"ProtoRendition",id:14},mediaCreativeId:{type:"string",id:15},ignoreFilledRequests:{type:"bool",id:16},requestCap:{type:"int32",id:17,options:{default:3}},impressionCap:{type:"int32",id:18},successRate:{type:"double",id:19},lineItemPriority:{type:"ProtoLineItemPriority",id:20},headerBidderBids:{type:"string",id:21},headerBidderTimeout:{type:"int32",id:22},mediaCreativeClickUrl:{type:"string",id:23},resetRequestsCapTime:{type:"int32",id:24,options:{default:60}},resetImpressionsCapTime:{type:"int32",id:25,options:{default:60}},resetCapType:{type:"ProtoResetCapTypeEnum",id:26},creativeHlsFileName:{type:"string",id:27},timeBetweenRequests:{type:"int32",id:28},skipMode:{type:"ProtoAdSkipMode",id:29},mediaIdTargeting:{type:"ProtoTargetingChoiceModel",id:30},mediaKeywordsTargeting:{type:"ProtoTargetingChoiceModel",id:31},mediaLanguageTargeting:{type:"ProtoTargetingChoiceModel",id:32},adType:{type:"ProtoAdType",id:33},overlayTime:{type:"int32",id:34,options:{default:30}},floorPrice:{type:"double",id:35},adBreakSettings:{type:"ProtoLineItemAdBreakSettings",id:36},floorPrices:{rule:"repeated",type:"double",id:38,options:{packed:!1}},bidRate:{type:"double",id:39},pauseAdOutOfView:{type:"ProtoLineItemPauseAdOutOfViewEnum",id:40},moatTrackingEnabled:{type:"bool",id:41},cnxCreativeId:{type:"string",id:42},blockedDomainsRevisionNumber:{type:"int32",id:44},advertiserContextualTargeting:{rule:"repeated",type:"ProtoContextualTargetingCaseModel",id:45},publisherContextualTargeting:{rule:"repeated",type:"ProtoContextualTargetingCaseModel",id:46},playerSizeTargetings:{type:"ProtoPlayerSizeTargetings",id:47},amazonDealId:{type:"string",id:48},playerOrientationTargeting:{type:"ProtoPlayerOrientationTargetingEnum",id:50},skipMin:{type:"int32",id:51,options:{default:6}},skippability:{type:"ProtoLineItemSkippabilityType",id:52},forceCallingInEveryAO:{type:"bool",id:53},networkExpiryTimeSeconds:{type:"int32",id:54,options:{default:21600}},nonlinearLineItemSettings:{type:"ProtoNonlinearLineItemSettings",id:55},floorPriceData:{rule:"repeated",type:"ProtoFloorPriceModel",id:56},prebidJsBidParamsJSONString:{type:"string",id:58},playerSize:{type:"string",id:101}}},ProtoTargetingChoiceModel:{fields:{choiceCriteria:{type:"ProtoChoiceCriteriaEnum",id:1},items:{rule:"repeated",type:"string",id:2}}},ProtoContextualTargetingCaseModel:{fields:{filters:{rule:"repeated",type:"ProtoContextualTargetingFilterModel",id:1}}},ProtoContextualTargetingFilterModel:{fields:{type:{type:"ProtoLineItemContextualTargetingEnum",id:1},items:{rule:"repeated",type:"string",id:2},level:{type:"ProtoContextualTargetingLevelEnum",id:3},hashedItemsIds:{rule:"repeated",type:"string",id:4}}},ProtoPlayerSizeTargetings:{fields:{sizeChoiceCriteria:{type:"ProtoSizeChoiceCriteriaEnum",id:1},minWidth:{type:"int32",id:2},maxWidth:{type:"int32",id:3}}},ProtoFloorPriceModel:{fields:{price:{type:"double",id:1},factor:{type:"double",id:2}}},ProtoFloorPricesData:{fields:{price:{type:"double",id:1},floorPriceBypassReason:{type:"FloorPriceBypassReasonEnum",id:2}}},ProtoFloorPricesNewModel:{fields:{floorPrices:{rule:"repeated",type:"ProtoFloorPricesData",id:1},recommended:{type:"int32",id:2}}},CreativeTrackerViewModel:{fields:{type:{type:"ProtoTrackerType",id:1},trigger:{type:"ProtoTrackerTriggerType",id:2},url:{type:"string",id:3}}},ProtoRendition:{fields:{height:{type:"int32",id:1},codec:{type:"string",id:2},file:{type:"string",id:3}}},ProtoNonlinearLineItemSettings:{fields:{nonLinearRequestType:{type:"ProtoNonlinearRequestType",id:1},nonLinearAdTimeSeconds:{type:"int32",id:2,options:{default:15}}}},Browser:{fields:{browserVersion:{type:"string",id:1},browserType:{type:"string",id:2},osCode:{type:"string",id:3},device:{type:"ProtoDeviceType",id:4}}},GeoLocation:{fields:{countryGeoId:{type:"int32",id:1},cityId:{type:"int32",id:2},subdivisionId:{type:"int32",id:3},dmaId:{type:"int32",id:4},ip:{type:"string",id:5},lat:{type:"double",id:6},lon:{type:"double",id:7},zipcode:{type:"string",id:8}}},ProtoSupplyChain:{fields:{businessDomain:{type:"string",id:1},supplyChainId:{type:"string",id:3}}},ProtoUserInformation:{fields:{userId:{type:"string",id:1},lookupId:{type:"string",id:3},lookupResponseCode:{type:"int32",id:4},callFraudSensor:{type:"bool",id:5},publisherAdsTxt:{type:"string",id:6}}},ProtoAdBreak:{fields:{types:{rule:"repeated",type:"ProtoAdBreakTypeEnum",id:1,options:{packed:!1}},maxAdPodDuration:{type:"int32",id:2},maxAdSlotDuration:{type:"int32",id:3,options:{default:180}},numberOfAdSlots:{type:"int32",id:4,options:{default:1}}}},ProtoNonlinearPlayerSettings:{fields:{numberOfNonlinearAds:{type:"int32",id:1},timeSecondsBetweenNonlinear:{type:"int32",id:2,options:{default:5}},timeSecondsBetweenLinearAndNonlinear:{type:"int32",id:3}}},ProtoOutstreamInitialRenderingEnum:{values:{ExpandWithAd:0,FullyRendered:1}},ProtoOutstreamEndAdBreakPolicyEnum:{values:{Hide:0,HouseScreen:1,Loop:2}},ProtoGalleryStyleMode:{values:{None:0,Detailed:1,Visual:2}},ProtoLogoPositionMode:{values:{None:0,ControlBar:1,BottomRight:2,BottomLeft:3,TopRight:4,TopLeft:5,Center:6}},ProtoGalleryOrientationEnum:{values:{Landscape:0,Portrait:1}},ProtoElementsTypeEnum:{values:{InStream:0,OutStream:1,InStreamInApp:2,Live:3}},ProtoPlayerUpNextMode:{values:{Loop:0,Next:1,Stop:2}},ProtoCreativeTypeEnum:{values:{ThirdParty:0,MediaFile:1,Rtb:2,External:3,HeaderBidder:4,Tam:7,TamDeal:8,TamPrivateAuction:9}},ProtoResetCapTypeEnum:{values:{TimeCapping:0,ContentCapping:1,OpportunityCapping:2}},ProtoAdSlotsEnum:{values:{PreRoll:0,MidRoll:1,PostRoll:2}},ProtoLineItemPriority:{values:{House:0,Default:1,Preferred:2,Top:3}},ProtoAdSkipMode:{values:{IfLongerThan31Sec:0,Always:1,Never:2,NotAplicable:3}},ProtoAdType:{values:{Video:0,Overlay:1,Nonlinear:2}},ProtoChoiceCriteriaEnum:{values:{Only:0,Except:1}},ProtoLineItemAdBreakTypeEnum:{values:{All:1,SingleAd:2,AdPod:3}},ProtoLineItemTargetingTypeEnum:{values:{Only:0,Except:1}},ProtoLineItemAdSlotTargetingTypeEnum:{values:{SpecificSlots:1,Interval:2}},ProtoLineItemPauseAdOutOfViewEnum:{values:{Default:0,Strict:1}},ProtoLineItemContextualTargetingEnum:{values:{IncludeAny:0,IncludeAll:1,ExcludeAny:2,ExcludeAll:3}},ProtoSizeChoiceCriteriaEnum:{values:{GreaterThan:0,SmallerThan:1,Between:2}},ProtoPlayerOrientationTargetingEnum:{values:{Both:0,Portrait:1,Landscape:2}},ProtoLineItemSkippabilityType:{values:{AllowPublisherToDetermineSkippability:0,RequirePublisherToAllowNonSkipAdsShorterThan:1,NotApplicable:2}},ProtoContextualTargetingLevelEnum:{values:{Media:0,Page:1,Both:2}},FloorPriceBypassReasonEnum:{values:{MinCpm:0,FixedCpm:1,MaxBidPrice:2,VideoOrBannerMin:3,PubMinFloor:4,AdvMinFloor:5,BidInHand:6,NoPredictionFound:7}},ProtoTrackerType:{values:{Image:0,Javascript:1}},ProtoTrackerTriggerType:{values:{Impression:0,Complete25Pc:1,Complete50Pc:2,Complete75Pc:3,ViewCompletion:4,VideoClick:5,Pause:6,Resume:7,Mute:8,Unmute:9}},ProtoPlayerPlaybackModeEnum:{values:{Autoplay:0,ScrollToPlay:1,ClickToPlay:2}},ProtoPlayerCloseButtonMode:{values:{Off:0,OnHover:1,OnHoverAfterFirstAd:2,AlwaysOn:3}},ProtoPlayerFloatingMode:{values:{Off:0,OnPageLoad:1,AfterInView:2,Always:3}},ProtoPlayerSoundMode:{values:{Mute:0,On:1,Hover:2}},ProtoPlayerInsertMode:{values:{WithinContainer:0,BeforeContainer:1,AfterContainer:2,ReplaceContainer:3,HideContainer:4}},ProtoAdViewabilityPolicy:{values:{Default:0,Strict:1}},ProtoSharingDestination:{values:{Facebook:0,Twitter:1,LinkedIn:2}},ProtoFloatingFixedPositionMode:{values:{Page:0,Element:1}},ProtoPositionMode:{values:{BottomRight:0,BottomLeft:1,TopRight:2,TopLeft:3}},ProtoAdPlaybackMode:{values:{Autoplay:0,ScrollToPlay:1}},ProtoFloatingAppendLocationEnum:{values:{Above:0,Below:1,Within:2}},ProtoPlayerAdSkippability:{values:{IfLongerThan:0,Always:1,NoRestrictions:2}},ProtoVideoQuality:{values:{Auto:0,High1080p:1,High720p:2,Medium360p:3}},ProtoImplementationType:{values:{Web:0,Amp:1}},ProtoAdBreakTypeEnum:{values:{None:0,PreRoll:1,MidRoll:2,PostRoll:3}},ProtoAdSlotAdTypeEnum:{values:{SingleAd:0,AdPod:1}},ProtoPlayerSkippabilityType:{values:{AllowNonSkipAdsIfTheyAreShorterThan:0,RequireAdsToBeSkippable:1}},ProtoBandwidthLoggingEnum:{values:{Disabled:0,Enabled:1,SaaS:2}},ProtoNonlinearRequestType:{values:{Banner:0,Video:1}},ProtoDeviceType:{values:{Desktop:0,Smartphone:1,Tablet:2,GameConsole:3,SmartTV:4,WearableComputer:5,PDA:6,Unrecognized:7}}})})?s.apply(i,n):s)||(t.exports=r)},3204:t=>{"use strict";t.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 22"><path d="M26,22H0V0H31.93L32,16A6,6,0,0,1,26,22Z" style="fill:#ffc800;fill-rule:evenodd"/><path d="M12,5.29h0L16.45,16.7H14.83l-1.06-2.85H8.86l-1,2.85H6.21L10.6,5.31h0Zm5.89,11.42V5.29h3.63A5.52,5.52,0,0,1,26.65,11a5.33,5.33,0,0,1-4.93,5.7H17.89Zm1.46-1.36h2.17c1.77,0,3.7-1.49,3.7-4.35s-1.93-4.28-3.7-4.28H19.35Zm-8-8.16-2,5.24h3.86Z" style="fill-rule:evenodd"/></svg>\n'},3653:t=>{"use strict";t.exports='<svg viewBox="0 0 44 44" xmlns="http://www.w3.org/2000/svg"><g fill="#FFF" fill-rule="evenodd"><rect class="cnx-live-icon-svg-rectangle" transform="rotate(90 22.06 21.43)" x="20.059" y="15.929"/><path d="M37.598 7.541c7.955 7.972 8.036 20.846.243 28.918l-.243.248-1.77-1.765c6.985-7 7.062-18.302.233-25.397l-.233-.238 1.77-1.766zm-4.722 5.225c4.34 4.926 4.415 12.803.224 17.831l-.224.262L31 29.206c3.515-3.989 3.583-10.465.203-14.55L31 14.42l1.876-1.653z" fill-rule="nonzero" opacity=".5"/><path d="M6.598 7.541c7.955 7.972 8.036 20.846.243 28.918l-.243.248-1.77-1.765c6.985-7 7.062-18.302.233-25.397l-.233-.238 1.77-1.766zm-4.722 5.225c4.34 4.926 4.415 12.803.224 17.831l-.224.262L0 29.206c3.515-3.989 3.583-10.465.203-14.55L0 14.42l1.876-1.653z" fill-rule="nonzero" opacity=".5" transform="matrix(-1 0 0 1 12.626 0)"/></g></svg>'},1505:t=>{"use strict";t.exports='<svg viewBox="0 0 44 44" xmlns="http://www.w3.org/2000/svg"><g fill="none" fill-rule="nonzero"><path d="M22 15.5a6.5 6.5 0 100 13 6.5 6.5 0 000-13z" fill="#FFF"/><path d="M22 18a4 4 0 110 8 4 4 0 010-8z" fill="#FF4047"/><path d="M37.598 7.541c7.955 7.972 8.036 20.846.243 28.918l-.243.248-1.77-1.765c6.985-7 7.062-18.302.233-25.397l-.233-.238 1.77-1.766zm-4.722 5.225c4.34 4.926 4.415 12.803.224 17.831l-.224.262L31 29.206c3.515-3.989 3.583-10.465.203-14.55L31 14.42l1.876-1.653z" fill="#FFF"/><path d="M6.598 7.541c7.955 7.972 8.036 20.846.243 28.918l-.243.248-1.77-1.765c6.985-7 7.062-18.302.233-25.397l-.233-.238 1.77-1.766zm-4.722 5.225c4.34 4.926 4.415 12.803.224 17.831l-.224.262L0 29.206c3.515-3.989 3.583-10.465.203-14.55L0 14.42l1.876-1.653z" fill="#FFF" transform="matrix(-1 0 0 1 12.626 0)"/></g></svg>'},2040:t=>{"use strict";t.exports='<svg class="cnx-color-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M21 3H3c-1.1 0-2 .9-2 2v3h2V5h18v14h-7v2h7c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zM1 18v3h3c0-1.66-1.34-3-3-3zm0-4v2c2.76 0 5 2.24 5 5h2c0-3.87-3.13-7-7-7zm0-4v2c4.97 0 9 4.03 9 9h2c0-6.08-4.93-11-11-11z" fill-rule="evenodd"/></svg>\n'},1215:t=>{"use strict";t.exports='<svg viewBox = "0 0 22 22" class="cnx-color-icon" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" ><path d="M18 5.4L16.6 4 11 9.6 5.4 4 4 5.4 9.6 11 4 16.6 5.4 18l5.6-5.6 5.6 5.6 1.4-1.4-5.6-5.6z"/></svg>\n'},5522:t=>{"use strict";t.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 73 18"><path d="M32.266 8.293c-.105.902-.439 1.6-1.002 2.092s-1.303.732-2.233.732c-1.008 0-1.816-.361-2.426-1.084s-.908-1.689-.908-2.9v-.82c0-.793.141-1.49.422-2.092s.688-1.062 1.207-1.383 1.121-.486 1.805-.486c.906 0 1.633.254 2.18.762s.865 1.203.955 2.098h-1.131c-.098-.68-.311-1.172-.639-1.477s-.779-.457-1.365-.457c-.719 0-1.283.266-1.693.797s-.609 1.287-.609 2.268v.826c0 .926.193 1.662.58 2.209s.928.82 1.623.82c.625 0 1.104-.141 1.436-.422s.559-.779.668-1.482h1.131zM34.815 11h-1.084V2h1.084v9zm1.453-3.229c0-.621.121-1.18.363-1.676s.586-.879 1.02-1.148a2.79 2.79 0 0 1 1.494-.404c.863 0 1.561.299 2.092.897s.803 1.393.803 2.385V7.9c0 .617-.119 1.172-.357 1.664a2.67 2.67 0 0 1-1.014 1.143c-.437.273-.941.41-1.512.41-.859 0-1.557-.299-2.092-.896s-.797-1.389-.797-2.373v-.076zm1.09.129c0 .703.162 1.268.486 1.693a1.57 1.57 0 0 0 1.312.639c.551 0 .988-.215 1.313-.645s.486-1.039.486-1.816c0-.695-.166-1.258-.498-1.687a1.56 1.56 0 0 0-1.312-.65c-.535 0-.967.213-1.295.639s-.492 1.035-.492 1.828zm9.732 1.418c0-.293-.111-.52-.334-.68s-.604-.305-1.154-.422-.982-.258-1.307-.422-.559-.359-.715-.586-.229-.496-.229-.809c0-.52.219-.959.656-1.318s1.004-.539 1.688-.539c.719 0 1.301.186 1.746.557s.674.846.674 1.424h-1.09c0-.297-.127-.553-.381-.768s-.566-.322-.949-.322c-.395 0-.703.086-.926.258a.81.81 0 0 0-.334.674c0 .262.104.459.311.592s.58.26 1.119.381.983.266 1.318.434.584.371.744.609a1.5 1.5 0 0 1 .246.861 1.63 1.63 0 0 1-.68 1.365c-.453.34-1.041.51-1.764.51-.508 0-.957-.09-1.348-.27s-.697-.43-.92-.75a1.84 1.84 0 0 1-.328-1.049h1.084c.02.363.164.652.433.867s.633.316 1.078.316c.41 0 .738-.082.984-.246a.77.77 0 0 0 .375-.668zm5.127 1.799c-.859 0-1.559-.281-2.098-.844s-.809-1.322-.809-2.267v-.199c0-.629.119-1.189.358-1.682s.578-.883 1.008-1.16a2.56 2.56 0 0 1 1.406-.422c.824 0 1.465.271 1.922.814s.686 1.32.686 2.332v.451h-4.295c.016.625.197 1.131.545 1.518s.797.574 1.336.574c.383 0 .707-.078.973-.234a2.44 2.44 0 0 0 .697-.621l.662.516c-.531.816-1.328 1.225-2.391 1.225zm-.135-5.684a1.44 1.44 0 0 0-1.102.481c-.297.316-.48.762-.551 1.336h3.176v-.082c-.031-.551-.18-.977-.445-1.277s-.625-.457-1.078-.457zM62.84 11c-.062-.125-.113-.348-.152-.668-.504.523-1.105.785-1.805.785-.625 0-1.139-.176-1.541-.527a1.71 1.71 0 0 1-.598-1.348c0-.66.25-1.172.75-1.535s1.211-.551 2.121-.551h1.055v-.498c0-.379-.113-.68-.34-.902s-.561-.34-1.002-.34c-.387 0-.711.098-.973.293s-.393.432-.393.709h-1.09c0-.316.111-.621.334-.914s.531-.531.914-.703.811-.258 1.272-.258c.73 0 1.303.184 1.717.551s.629.865.645 1.506v2.918c0 .582.074 1.045.223 1.389V11H62.84zm-1.799-.826c.34 0 .662-.088.967-.264s.525-.404.662-.686v-1.3h-.85c-1.328 0-1.992.389-1.992 1.166 0 .34.113.605.34.797s.517.287.873.287zm4.148-2.396c0-.973.23-1.754.691-2.344a2.18 2.18 0 0 1 1.811-.891c.742 0 1.33.254 1.764.762V2h1.084v9h-.996l-.053-.68c-.434.531-1.037.797-1.811.797a2.17 2.17 0 0 1-1.799-.902c-.461-.601-.691-1.387-.691-2.355v-.082zm1.084.123c0 .719.148 1.281.445 1.687s.707.609 1.23.609c.688 0 1.189-.309 1.506-.926V6.359a1.59 1.59 0 0 0-1.494-.896c-.531 0-.945.205-1.242.615s-.445 1.018-.445 1.822zM16 1.41L14.59 0 9 5.59 3.41 0 2 1.41 7.59 7 2 12.59 3.41 14 9 8.41 14.59 14 16 12.59 10.41 7 16 1.41z"/></svg>'},7089:t=>{"use strict";t.exports='<svg viewBox="0 0 25 25" xmlns="http://www.w3.org/2000/svg" fill-rule="evenodd"><path d="M5 21.453c2.022 1.627 4.6 2.602 7.387 2.602 3.973 0 7.485-1.967 9.622-4.977l-4.596-3.34a3.87 3.87 0 0 0-4.548 0L5 21.453zM22 4.977A11.75 11.75 0 0 0 12.387 0 11.74 11.74 0 0 0 5 2.602l7.9 5.74a3.81 3.81 0 0 0 4.479 0l4.63-3.364zm1.563 11.395c.494-1.3.767-2.712.767-4.186S24.057 9.3 23.563 8l-3.858 2.803a1.71 1.71 0 0 0 0 2.766l3.858 2.803z" fill="#fff"/><path d="M2.378 5c-.024-.017-.057-.012-.074.01A11.74 11.74 0 0 0 0 12.025a11.74 11.74 0 0 0 2.304 7.004c.017.023.05.028.074.01l8.013-5.822c.81-.59.81-1.797 0-2.386L2.378 5z" fill="#09f"/></svg>\n'},89:t=>{"use strict";t.exports='<svg class="cnx-color-icon" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 22 22"><path d="M11 7c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z" /></svg>\n'},4670:t=>{"use strict";t.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="2 2 20 20"><path d="M14 3v2h3.59l-9.83 9.83 1.41 1.41L19 6.41V10h2V3m-2 16H5V5h7V3H5a2 2 0 00-2 2v14a2 2 0 002 2h14a2 2 0 002-2v-7h-2v7z"/></svg>'},1639:t=>{"use strict";t.exports='<svg class="cnx-color-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9 21H3V3h6v18zm12 0h-6V3h6v18z" fill-rule="evenodd"/></svg>\n'},834:t=>{"use strict";t.exports='<svg class="cnx-color-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M5 4v16l16-8z" fill-rule="evenodd"/></svg>\n'},9335:t=>{"use strict";t.exports='<svg class="cnx-color-icon" xmlns="http://www.w3.org/2000/svg"><path d="M8.6 16.6l4.58-4.6L8.6 7.4 10 6l6 6-6 6-1.4-1.4z"/></svg>\n'},8808:t=>{"use strict";t.exports='<svg class="cnx-color-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.9 12.7c.05-.23.1-.46.1-.7s-.04-.47-.1-.7l7.05-4.1c.54.5 1.25.8 2.04.8 1.66 0 3-1.34 3-3s-1.34-3-3-3-3 1.34-3 3c0 .24.04.47.1.7L8.04 9.8C7.5 9.3 6.8 9 6 9c-1.66 0-3 1.34-3 3s1.34 3 3 3c.8 0 1.5-.3 2.04-.8l7.12 4.16a2.82 2.82 0 0 0-.08.65c0 1.6 1.3 2.92 2.92 2.92s2.92-1.3 2.92-2.92-1.3-2.92-2.92-2.92z" fill-rule="evenodd"/></svg>\n'},9040:t=>{"use strict";t.exports='<svg class="cnx-color-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18 21h3V3h-3v18zM3 21l14-9L3 3v18z" fill-rule="evenodd"/></svg>'}},i={},e,s,n,r,h;function o(e){var s=i[e];if(void 0!==s)return s.exports;var n=i[e]={id:e,loaded:!1,exports:{}};return t[e].call(n.exports,n,n.exports,o),n.loaded=!0,n.exports}o.m=t,e=[],o.O=(t,i,s,n)=>{if(!i){var r=1/0;for(l=0;l<e.length;l++){for(var[i,s,n]=e[l],h=!0,a=0;a<i.length;a++)(!1&n||r>=n)&&Object.keys(o.O).every((t=>o.O[t](i[a])))?i.splice(a--,1):(h=!1,n<r&&(r=n));if(h){e.splice(l--,1);var c=s();void 0!==c&&(t=c)}}return t}n=n||0;for(var l=e.length;l>0&&e[l-1][2]>n;l--)e[l]=e[l-1];e[l]=[i,s,n]},o.F={},o.E=t=>{Object.keys(o.F).map((i=>{o.F[i](t)}))},o.n=t=>{var i=t&&t.B?()=>t.default:()=>t;return o.d(i,{a:i}),i},n=Object.getPrototypeOf?t=>Object.getPrototypeOf(t):t=>t.__proto__,o.t=function(t,i){if(1&i&&(t=this(t)),8&i)return t;if("object"==typeof t&&t){if(4&i&&t.B)return t;if(16&i&&"function"==typeof t.then)return t}var e=Object.create(null);o.r(e);var r={};s=s||[null,n({}),n([]),n(n)];for(var h=2&i&&t;"object"==typeof h&&!~s.indexOf(h);h=n(h))Object.getOwnPropertyNames(h).forEach((i=>r[i]=()=>t[i]));return r.default=()=>t,o.d(e,r),e},o.d=(t,i)=>{for(var e in i)o.o(i,e)&&!o.o(t,e)&&Object.defineProperty(t,e,{enumerable:!0,get:i[e]})},o.f={},o.e=t=>Promise.all(Object.keys(o.f).reduce(((i,e)=>(o.f[e](t,i),i)),[])),o.u=t=>{if("hls"===t)return"hls.5b3b785f487abbe00eee.js"},o.miniCssF=t=>{},o.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),o.o=(t,i)=>Object.prototype.hasOwnProperty.call(t,i),r={},h="Connatix.Player:",o.l=(t,i,e,s)=>{if(r[t])r[t].push(i);else{var n,a;if(void 0!==e)for(var c=document.getElementsByTagName("script"),l=0;l<c.length;l++){var u=c[l];if(u.getAttribute("src")==t||u.getAttribute("data-webpack")==h+e){n=u;break}}n||(a=!0,(n=document.createElement("script")).charset="utf-8",n.timeout=120,o.nc&&n.setAttribute("nonce",o.nc),n.setAttribute("data-webpack",h+e),n.src=t),r[t]=[i];var d=(i,e)=>{n.onerror=n.onload=null,clearTimeout(p);var s=r[t];if(delete r[t],n.parentNode&&n.parentNode.removeChild(n),s&&s.forEach((t=>t(e))),i)return i(e)},p=setTimeout(d.bind(null,void 0,{type:"timeout",target:n}),12e4);n.onerror=d.bind(null,n.onerror),n.onload=d.bind(null,n.onload),a&&document.head.appendChild(n)}},o.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"B",{value:!0})},o.nmd=t=>(t.paths=[],t.children||(t.children=[]),t),(()=>{var t;o.g.importScripts&&(t=o.g.location+"");var i=o.g.document;if(!t&&i&&(i.currentScript&&(t=i.currentScript.src),!t)){var e=i.getElementsByTagName("script");e.length&&(t=e[e.length-1].src)}if(!t)throw new Error("Automatic publicPath is not supported in this browser");t=t.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),o.p=t})(),(()=>{var t={"connatix.player":0,player:0};o.f.j=(i,e)=>{var s=o.o(t,i)?t[i]:void 0;if(0!==s)if(s)e.push(s[2]);else{var n=new Promise(((e,n)=>s=t[i]=[e,n]));e.push(s[2]=n);var r=o.p+o.u(i),h=new Error;o.l(r,(e=>{if(o.o(t,i)&&(0!==(s=t[i])&&(t[i]=void 0),s)){var n=e&&("load"===e.type?"missing":e.type),r=e&&e.target&&e.target.src;h.message="Loading chunk "+i+" failed.\n("+n+": "+r+")",h.name="ChunkLoadError",h.type=n,h.request=r,s[1](h)}}),"chunk-"+i,i)}},o.F.j=i=>{if(!o.o(t,i)||void 0===t[i]){t[i]=null;var e=document.createElement("link");o.nc&&e.setAttribute("nonce",o.nc),e.rel="prefetch",e.as="script",e.href=o.p+o.u(i),document.head.appendChild(e)}},o.O.j=i=>0===t[i];var i=(i,e)=>{var s,n,[r,h,a]=e,c=0;if(r.some((i=>0!==t[i]))){for(s in h)o.o(h,s)&&(o.m[s]=h[s]);if(a)var l=a(o)}for(i&&i(e);c<r.length;c++)n=r[c],o.o(t,n)&&t[n]&&t[n][0](),t[n]=0;return o.O(l)},e=self.webpackChunkConnatix_Player=self.webpackChunkConnatix_Player||[];e.forEach(i.bind(null,0)),e.push=i.bind(null,e.push.bind(e))})(),o.O(0,["connatix.player"],(()=>{o.E("hls")}),5);var a={};(()=>{"use strict";o(8660);var t,i=o(45),e=o(1561),s=o(7726);!function(t){t.connatix="connatix.com",t.elements="elements.video"}(t||(t={}));const n={[t.connatix]:"cnx",[t.elements]:"cnxel"};const r=function(i){if(!i||!(0,e.NN)(i))return(0,s.n)({message:"Prerender_Elements_getBundleDomain_no_currentScript",level:s.D.CRITICAL}),null;const n=i.src;return n.includes(t.elements)?t.elements:n.includes(t.connatix)?t.connatix:((0,s.n)({message:"Prerender_Elements_getBundleDomain_unkown_src",level:s.D.CRITICAL}),null)}(window.document.currentScript);let h=`//cds.${r}/p/${i.g.version}/`;o.p=h;var a,c=o(7272),l=(o(6450),o(289)),u=o(8804),d=o(5880),p=o(782),f=o(3030),m=o(2820);!function(t){t.Deprecation="deprecation",t.Intervention="intervention",t.Crash="crash"}(a||(a={}));class g{constructor(t,i,e){this.$e=t,this.aa=i,this.ca=e,this.la=!1,this.ua=!1,this.da=()=>{"hidden"===this.$e.document.visibilityState&&this.pa()},this.pa=()=>{if(this.la||!this.fa)return;const t=this.fa.takeRecords();this.ma(t),this.la=!0},this.ma=t=>{t.filter((({body:t})=>"HeavyAdIntervention"===(null==t?void 0:t.id))).forEach((()=>{this.aa.trackHeavyAdIntervention(this.ca)}))},this.Yo()}destroy(){this.ua&&(this.$e.removeEventListener("pagehide",this.pa),this.$e.removeEventListener("visibilitychange",this.da))}ga(){return!!this.$e.ReportingObserver}Yo(){this.ga()&&(this.ua=!0,this.fa=new this.$e.ReportingObserver((t=>{this.ma(t)}),{buffered:!0,types:[a.Intervention]}),this.fa.observe(),this.$e.addEventListener("pagehide",this.pa),this.$e.addEventListener("visibilitychange",this.da))}}var v,y,b,x,w=o(4280),_=o(497);class S extends d._{constructor(t,i,e,s,n){super(),this.mediator=t,this.playerModel=i,this.app=e,this.va=s,this._appSettings=n,this.macroElements={player:[]},this.ya=!1,this.ba={description:"{{description}}",title:"{{title}}",player:"{{player}}"},this.xa=null,this.wa=500,this.createExperience(i,n),this._a=new g(i.global,this.app.services.TrackingService,{heavyAdBlockTypeEnum:l.ProtoHeavyAdBlockTypeEnum.Global}),this.Sa=new g(window,this.app.services.TrackingService,{heavyAdBlockTypeEnum:l.ProtoHeavyAdBlockTypeEnum.Script})}subscribeToEvents(){this.subscribe(p.Uh.Destroy,this.experience,(()=>{this.destroy()})),this.subscribe(p.Uh.CanStart,this.experience,(()=>{this.experience.start()})),this.subscribe(p.Xh.SessionRendered,this.experience,(()=>{this.va.wasPlayerReloaded||this.app.services.TrackingService.trackSessionRendered(w._.isBannerBlocked),this.mediator.publish(this,p.Xh.SessionRendered)})),this.subscribe(p.Xh.SessionView,this.experience,(()=>{this.va.wasPlayerInView||(this.app.services.TrackingService.trackSessionViewability(),this.mediator.publish(this,p.Xh.SessionView))})),Object.values(this.experience.events).forEach((t=>{this.subscribe(t,this.experience,(i=>{this.experienceApi.trigger(t,i.payload)}))}))}updateMacroContent(t,i){t&&t.forEach((t=>{t.textContent=i}))}le(){this.playerModel.css&&this.app.services.GlobalDomUtilsService.addCssString(this.playerModel.css,`cnx-custom-css-${this.app.config.appId}`)}Pa(t){return`<cnx>${t}</cnx>`.replace(/{\{([^}]+)}}/g,"<cnx-span>$&</cnx-span>")}Aa(){if(this.experienceContainer=this.Ia(),this.playerModel.html){const t=this.app.services.GlobalDomUtilsService.createElementByString(this.Pa(this.playerModel.html));this.ka(t);const i=this.macroElements.player[0];if(!i)throw Error("player macro was not found");i.innerHTML="",i.parentNode.insertBefore(this.experienceContainer,i),i.parentNode.removeChild(i);(0,f.Sz)(t.children).forEach((t=>{this.playerModel.targetContainer.parentNode.insertBefore(t,this.playerModel.targetContainer)}))}else this.playerModel.targetContainer.parentNode.insertBefore(this.experienceContainer,this.playerModel.targetContainer);this.playerModel.targetContainer.parentElement.removeChild(this.playerModel.targetContainer)}Ia(){const t=this.app.config.isMobile?m.s6.Mobile:m.s6.Desktop;return this.app.services.GlobalDomUtilsService.createElementByString(`<cnx class="${m.sN.MainContainer} ${t} ${this.Ca}"></cnx>`)}ka(t){(0,f.Sz)(t.children).forEach((t=>{t.children.length>0&&this.ka(t),Object.keys(this.ba).forEach((i=>{const e=this.ba[i];t.textContent.includes(e)&&this.Ta(i,t)}))}))}Ta(t,i){this.macroElements[t]||(this.macroElements[t]=[]),this.macroElements[t].push(i),i.textContent=""}Ma(){null!==this.xa&&(clearInterval(this.xa),this.xa=null)}init(t){this.le(),this.Aa();const i=this.app.config.device;return this.isSupportedBreakpoint(i)?(this.subscribeToEvents(),this.experience.Ea(this.playerModel,this.app,this.experienceContainer,t),this.xa=setInterval((()=>{this.ya?this.Ma():this.app.services.GlobalDomUtilsService.isDetachedFromDOM(this.experienceContainer)&&(this.destroy(),(0,s.n)({message:"player_removed_from_DOM",level:s.D.INFO}))}),this.wa),!0):(this.destroy(),!1)}getApiMethods(){return this.experienceApi.getApiMethods()}get playerContainer(){return this.experienceContainer}destroy(){try{_.S.playerDestroyed=!0,this.ya=!0,this.Ma(),this.app.services.TrackingService.destroy(),this.app.services.ResizeObserver.destroy(),this.app.services.ViewabilityService.destroy(),this.app.services.InteractionService.destroy(),this.experienceApi.setDestroyed(),this.unsubscribeAll(this.experience),this.experience&&(this.experience.destroy(),this.experience=null),this.experienceContainer.parentNode&&this.experienceContainer.parentNode.removeChild(this.experienceContainer),this._a.destroy(),this.Sa.destroy()}catch(t){(0,s.n)({callStack:t.stack,level:s.D.WARN,message:"Renderer_destroy",exception:t.message})}}}!function(t){t.Play="play",t.Playing="playing",t.Pause="pause",t.Mute="mute",t.Unmute="unmute",t.Canplay="canplay",t.Ended="ended",t.Timeupdate="timeupdate",t.Seeking="seeking",t.Seeked="seeked",t.Volumechange="volumechange",t.Durationchange="durationchange",t.Fullscreen="fullscreen",t.LoadedData="loadeddata",t.LoadedMetadata="loadedmetadata",t.Error="error"}(v||(v={})),function(t){t[t.Auto=0]="Auto",t[t.Strict=1]="Strict"}(y||(y={})),function(t){t[t.PlayingState=0]="PlayingState",t[t.PausedState=1]="PausedState",t[t.PrerollState=2]="PrerollState",t[t.PostrollState=3]="PostrollState",t[t.StoppedState=4]="StoppedState",t[t.ReplayState=5]="ReplayState",t[t.HiddenState=6]="HiddenState",t[t.BufferingState=7]="BufferingState",t[t.LiveStreamStarting=8]="LiveStreamStarting",t[t.LiveStreamEnded=9]="LiveStreamEnded",t[t.LiveStreamStopped=10]="LiveStreamStopped",t[t.LiveStreamNotSupported=11]="LiveStreamNotSupported"}(b||(b={})),function(t){t.H264="h264",t.Hevc="hevc"}(x||(x={}));const P="playError",A="newVideo",I="buffering",k="buffered",C="levelSwitching",T="endOfStream",M="liveNotPlayable",E="VideoQualityChanged",B="CurrentQuality",O="QualityListLoaded";var L;!function(t){t[t.Low144p=144]="Low144p",t[t.Low240p=240]="Low240p",t[t.Medium360p=360]="Medium360p",t[t.Medium480p=480]="Medium480p",t[t.High720p=720]="High720p",t[t.High1080p=1080]="High1080p"}(L||(L={}));const R="NewThumbnail",D=Object.assign(Object.assign({},p.dP),{FirstFramePlayed:"firstFramePlayed",ContentQuartiles:"contentQuartiles",MediaMetaUpdate:"mediaMetaUpdate",ChangeVideo:"changeVideo",VideoQueued:"videoQueued"}),j=Object.assign(Object.assign(Object.assign(Object.assign({},{VideoStarted:"videoStarted",VideoCompleted25:"videoCompleted25",VideoCompleted50:"videoCompleted50",VideoCompleted75:"videoCompleted75",VideoCompleted100:"videoCompleted100",NewVideo:"newVideo"}),{SubtitlesVisibilityChanged:"subtitlesVisibilityChanged"}),{PlayerClicked:"playerClicked"}),{GalleryCardClicked:"galleryCardClicked"}),F={Collapsed:"collapsed",AdCycleComplete:"adCycleComplete"};class V{constructor(t,i,e,s){this.Ba=t,this.Oa=s,this.La=this.Ra(e,i)}Ra(t,i){return Object.assign({},t[i]||t[l.ProtoDeviceType.Smartphone])}updateWidth(t){const i=this.Da(t);i!==this.currentBreakpointClass&&((0,e.IV)(this.Ba,this.currentBreakpointClass),(0,e.cn)(this.Ba,i),this.currentBreakpointClass=i)}Da(t){switch(!0){case t>=this.La.xxl:return this.Oa.Xxl;case t>=this.La.xl:return this.Oa.Xl;case t>=this.La.lg:return this.Oa.Lg;case t>=this.La.md:return this.Oa.Md;case t>=this.La.sm:return this.Oa.Sm;case t>=this.La.xs:return this.Oa.Xs;default:return this.Oa.Xxs}}}var $=o(7953);const N={xl:720,lg:320,md:204,sm:142,xs:0},U={[l.ProtoDeviceType.Desktop]:{xl:468,lg:388,md:248,sm:142,xs:0},[l.ProtoDeviceType.Tablet]:Object.assign({},N),[l.ProtoDeviceType.Smartphone]:Object.assign({},N)},H={xl:720,lg:320,md:204,sm:142,xs:0},q={[l.ProtoDeviceType.Desktop]:{xl:468,lg:388,md:248,sm:142,xs:0},[l.ProtoDeviceType.Tablet]:Object.assign({},H),[l.ProtoDeviceType.Smartphone]:Object.assign({},H)},z=176,W=160,G=144,J=112,Q={xl:H.xl+z,lg:H.lg+W,md:H.md+G,sm:H.sm+J},Y={[l.ProtoDeviceType.Desktop]:{xl:468+z,lg:388+W,md:248+G,sm:142+J,xs:0},[l.ProtoDeviceType.Tablet]:Object.assign({},Q),[l.ProtoDeviceType.Smartphone]:Object.assign({},Q)},X={lg:320,md:204,sm:0},Z={[l.ProtoDeviceType.Desktop]:{xl:468,lg:388,md:248,sm:0},[l.ProtoDeviceType.Tablet]:Object.assign({},X),[l.ProtoDeviceType.Smartphone]:Object.assign({},X)},K={xxl:1080,xl:0},tt={[l.ProtoDeviceType.Desktop]:{xxl:720,xl:0},[l.ProtoDeviceType.Tablet]:Object.assign({},K),[l.ProtoDeviceType.Smartphone]:Object.assign({},K)},it={[$.ProtoGalleryOrientationEnum.Landscape]:{[$.ProtoGalleryStyleMode.Detailed]:tt,[$.ProtoGalleryStyleMode.Visual]:Y},[$.ProtoGalleryOrientationEnum.Portrait]:{[$.ProtoGalleryStyleMode.Detailed]:Z,[$.ProtoGalleryStyleMode.Visual]:q}};var et;!function(t){t.MainContainer="cnx-scrollbar",t.Wrapper="cnx-scrollbar-wrapper",t.Content="cnx-scrollbar-content",t.Horizontal="cnx-scrollbar-horizontal",t.Handle="cnx-scrollbar-handle",t.PreventSelect="cnx-scrollbar-prevent-select",t.ShowOnHover="cnx-scrollbar-show-on-hover"}(et||(et={}));class st{constructor(t,i={}){if(this.ja=t,this.zt=i,this.Fa=0,this.Va=t=>{t.preventDefault(),this.$a=t.pageY,this.Na=t.pageX,(0,e.cn)(this.Ua,et.PreventSelect),(0,e.cn)(this.$e.document.body,et.PreventSelect),this.$e.document.addEventListener("mousemove",this.Ha),this.$e.document.addEventListener("mouseup",this.qa)},this.Ha=t=>{const i=this.zt.horizontal?t.pageX-this.Na:t.pageY-this.$a;this.$a=t.pageY,this.Na=t.pageX,(0,e.PM)(this.$e,(()=>{this.zt.horizontal?this.za.scrollLeft+=i/this.Wa:this.za.scrollTop+=i/this.Wa}))},this.qa=t=>{(0,e.IV)(this.Ua,et.PreventSelect),(0,e.IV)(this.$e.document.body,et.PreventSelect),this.$e.document.removeEventListener("mousemove",this.Ha),this.$e.document.removeEventListener("mouseup",this.qa)},this.Ga=t=>{if(!this.zt.horizontal)return;const i=t.deltaMode?100*(t.deltaY<0?-1:1):t.deltaY,s=Math.floor(i)/33*20,n=this.Fa+s;n>=-1*this.Ua.clientWidth&&n<=this.za.scrollWidth-this.Ua.clientWidth&&(this.Fa=n),(0,e.PM)(this.$e,(()=>this.za.scrollLeft=this.Fa))},this.Ja=()=>{clearTimeout(this.Qa),this.Qa=setTimeout((()=>{this.Ya()}),50)},this.Ya=()=>{const t=this.zt.horizontal?this.za.scrollWidth:this.za.scrollHeight,i=this.zt.horizontal?this.ja.clientWidth:this.ja.clientHeight;this.Wa=i/t;const s=-1*(this.ja.clientWidth-(this.Ua.clientWidth||4)-4),n=this.ja.clientHeight-this.Ua.clientHeight-4;(0,e.PM)(this.$e,(()=>{if(this.Wa>=1)(0,e.MV)(this.Ua);else{if((0,e.Ho)(this.Ua),this.zt.horizontal)return void(0,e.T7)(this.Ua,{width:`${Math.max(100*this.Wa,10)}%`,height:"",top:`${n}px`,right:"",left:this.za.scrollLeft/t*100+"%"});(0,e.T7)(this.Ua,{width:"",height:`${Math.max(100*this.Wa,10)}%`,top:this.za.scrollTop/t*100+"%",right:`${s}px`,left:""})}}))},this.$e=(0,e.LT)(t),!this.$e)throw new Error("window was not found");this.Xa(),this.Ua.addEventListener("mousedown",this.Va),this.zt.overrideNativeHorizontalScroll&&this.za.addEventListener("wheel",this.Ga,{passive:!0}),this.$e.addEventListener("resize",this.Ja),this.za.addEventListener("scroll",this.Ya),this.za.addEventListener("mouseenter",this.Ya),(0,e.cn)(this.ja,et.MainContainer,this.zt.horizontal?et.Horizontal:void 0,this.zt.showOnHover?et.ShowOnHover:void 0),this.Ya();const s=(0,e.Dx)(this.ja,this.$e);"0px"===s.height&&"0px"!==s.maxHeight&&(0,e.T7)(this.ja,{height:s.maxHeight})}Xa(){for(this.Ua=(0,e.G$)(`<cnx class="${et.Handle}">`,this.$e),this.Za=(0,e.G$)(`<cnx class="${et.Wrapper}">`,this.$e),this.za=(0,e.G$)(`<cnx class="${et.Content}">`,this.$e),this.Za.appendChild(this.za);this.ja.firstChild;)this.za.appendChild(this.ja.firstChild);this.ja.appendChild(this.Za),this.ja.insertAdjacentElement("beforeend",this.Ua)}destroy(){for(this.removeListeners(),(0,e.bX)(this.Ua);this.za.firstChild;)this.ja.appendChild(this.za.firstChild);(0,e.bX)(this.Za),(0,e.IV)(this.ja,et.MainContainer,et.Horizontal,et.ShowOnHover)}removeListeners(){this.$e.document.removeEventListener("mousemove",this.Ha),this.$e.document.removeEventListener("mouseup",this.qa),this.Ua.removeEventListener("mousedown",this.Va),this.za.removeEventListener("wheel",this.Ga),this.$e.removeEventListener("resize",this.Ja),this.za.removeEventListener("scroll",this.Ya),this.za.removeEventListener("mouseenter",this.Ya)}}const nt=t=>t.clientHeight||t.getBoundingClientRect().height||0,rt=t=>t.clientWidth||t.getBoundingClientRect().width||0,ht=(t,i,e=!1)=>{const s=t.offsetTop,n=((t,i)=>(parseInt(i.getMarginTopPropertyValue(t),10)||0)+(parseInt(i.getMarginBottomPropertyValue(t),10)||0))(t,i),r=nt(t),h=nt(t.parentElement);let o=s;if(e){const t=Math.floor(h/(r+n)),i=Math.floor(t/2);o=Math.max(s-i*(r+n),0)}t.parentElement.scrollTop=o},ot=(t,i,e=!1)=>{const s=t.offsetLeft,n=((t,i)=>(parseInt(i.getMarginLeftPropertyValue(t),10)||0)+(parseInt(i.getMarginRightPropertyValue(t),10)||0))(t,i),r=rt(t),h=rt(t.parentElement);let o=s;if(e){const t=Math.floor(h/(r+n)),i=Math.floor(t/2);o=Math.max(s-i*(r+n),0)}t.parentElement.scrollLeft=o};var at=o(5874);class ct{constructor(t,i,e={}){this.Ka=t,this.yr=i,this.tc=1.2,this.ic=16,this.ec="normal",this.sc={lines:0,useNativeClamping:!0},this.rc=!1,this.sc=Object.assign(Object.assign({},this.sc),e),this.rc=this.hc()}setLines(t){this.sc.lines=t}getClampedText(t){this.oc=t.trim(),this.ac=this.yr.createElementByString(`<cnx-span style="display:inline-block;width:100%;line-height:inherit;font-family:inherit;font-size:inherit;">${this.oc}</cnx-span>`),this.Ka.appendChild(this.ac);let i=0;try{i=this.cc()}catch(t){(0,s.n)({message:"LineClamp_getMaxLines",exception:t.message,callStack:t.stack,level:s.D.CRITICAL})}const n=this.lc(this.sc.lines,i),r=this.dc(n);return Math.ceil(this.ac.getBoundingClientRect().height)-1<=r?(this.fc(),this.oc):this.rc?void(0,e.T7)(this.Ka,{overflow:"hidden",textOverflow:"ellipsis",webkitBoxOrient:"vertical",display:"-webkit-box",webkitLineClamp:n}):this.mc(this.ac.firstChild,r)}hc(){return!!this.sc.useNativeClamping&&void 0!==this.Ka.style.webkitLineClamp}dc(t){return this.gc(this.Ka)*t+(this.vc(this.ac)+this.vc(this.Ka))+(this.yc(this.ac)+this.yc(this.Ka))}bc(t){if(t.getBoundingClientRect){const{height:i}=t.getBoundingClientRect();if(i>0)return Math.ceil(i)}const i=t.clientHeight;return i&&i>0?Math.ceil(i):t.parentNode?this.bc(t.parentNode):0}cc(){const t=this.bc(this.Ka),i=this.gc(this.Ka),e=this.vc(this.ac)+this.vc(this.Ka),s=this.yc(this.ac)+this.yc(this.Ka),n=Math.floor((t-e-s)/i+.05);return Math.max(n,0)}xc(t){const i=this.yr.getFontSizePropertyValue(t);return i?parseInt(i,10):this.ic}gc(t){let i=this.yr.getLineHeightPropertyValue(t);return i&&i!==this.ec||(i=""+this.tc*this.xc(t)),parseInt(i,10)}vc(t){if(!t)return 0;const i=this.yr.getPaddingTopPropertyValue(t);return parseInt(i,10)||0}yc(t){if(!t)return 0;const i=this.yr.getPaddingBottomPropertyValue(t);return parseInt(i,10)||0}lc(t,i){return t>0?0===i?t:Math.min(this.sc.lines,i):i}mc(t,i,e){if(!i)return;void 0===e&&(e=t.nodeValue.split(" "));const s=[...e];if(s.length>1){s.pop(),this.wc(t,`${s.join(" ")}...`);return t.parentNode.offsetHeight>i?this.mc(t,i,s):(this.fc(),`${s.join(" ")}...`)}}wc(t,i){t.nodeValue=i}fc(){this.Ka.innerHTML="",this.ac=null}}var lt,ut=o(2324),dt=o(7427);!function(t){t[t.CardClicked=0]="CardClicked"}(lt||(lt={}));const pt={width:160,height:90},ft={width:80,height:80};const mt='<cnx class="cnx-g-card"><cnx class="cnx-g-card-image-container"><cnx class="cnx-g-triangle"></cnx><cnx class="cnx-g-card-image"><cnx class="cnx-g-card-icon"><cnx class="cnx-ui-btn"><cnx class="cnx-icon-button cnx-ui-btn-hoverable cnx-mod-hover"><cnx class="cnx-btn-container"><cnx class="cnx-play-icon"><svg markup-inline class="cnx-color-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M5 4v16l16-8z" fill-rule="evenodd"/></svg></cnx></cnx></cnx></cnx></cnx></cnx></cnx><cnx class="cnx-g-card-text-container"><cnx class="cnx-g-card-text"><cnx-span></cnx-span></cnx></cnx></cnx>';class gt extends d._{constructor(t,i,s,n,r){super(),this.mediator=t,this.Tr=i,this._c=s,this.Sc=n,this.zt=r,this.kr=()=>{this.zt.metadata.title&&this.Pc()},this.Ac=()=>{this.mediator.publish(this,lt[lt.CardClicked],{payload:this.zt.id})},this.Ic=this._c.createElementByString(this.kc()),this.Cc=this.Ic.getElementsByClassName(m.Ih.CardImage)[0],this.Mc=this.Ic.getElementsByClassName(m.Ih.CardText)[0],this.Ec=this.Ic.getElementsByClassName(m.Ih.CardTextContainer)[0],this.zt.titleFont&&(0,e.T7)(this.Ec,{"font-family":this.zt.titleFont});const h=this._c.createElement("img");h.onload=()=>{this.Cc.appendChild(h)};const o=this.zt.metadata.getThumbnailUrl(this.Bc().width,this.Bc().height);if((0,dt.QM)(o)&&(h.src=o),h.alt=(0,dt.$K)(this.zt.metadata.altText)?this.zt.metadata.altText:"",this.zt.style===$.ProtoGalleryStyleMode.Detailed&&this.zt.metadata.duration){const t=this._c.createElementByString(`<cnx class="cnx-g-card-text-info">${(0,ut.to)(this.zt.metadata.duration)}</cnx>`);this.zt.bodyFont&&(0,e.T7)(t,{"font-family":this.zt.bodyFont}),this.Ec.appendChild(t)}this.Sc.register(this.Ic,this,this.Sc),this.subscribe(at.Z[at.Z.Click],this.Sc,(()=>{this.Ac()})),this.relay(at.Z[at.Z.Scroll],this.Sc,this,this.mediator),this.Oc=new ct(this.Mc,this._c,{lines:3,useNativeClamping:!1}),this.Tr.on(this.Ic,this.kr)}kc(){return this.zt.style===$.ProtoGalleryStyleMode.Visual?'<cnx class="cnx-g-card"><cnx class="cnx-g-triangle"></cnx><cnx class="cnx-g-card-image"></cnx><cnx class="cnx-g-card-text-container"><cnx class="cnx-g-card-text"></cnx></cnx><cnx class="cnx-g-card-icon"><cnx class="cnx-ui-btn"><cnx class="cnx-icon-button cnx-ui-btn-hoverable cnx-mod-hover"><cnx class="cnx-btn-container"><cnx class="cnx-play-icon"><svg markup-inline class="cnx-color-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M5 4v16l16-8z" fill-rule="evenodd"/></svg></cnx></cnx></cnx></cnx></cnx></cnx>':mt}Bc(){return this.zt.style===$.ProtoGalleryStyleMode.Visual?pt:ft}Pc(){const t=this.Oc.getClampedText(this.zt.metadata.title),i=this._c.createElementByString(`<cnx-span>${t}</cnx-span>`);(0,e.jG)(i,this.Mc)}get $element(){return this.Ic}setActiveState(t){t?(0,e.cn)(this.Ic,m.Gj.Active):(0,e.IV)(this.Ic,m.Gj.Active)}destroy(){this.Ic.removeEventListener("click",this.Ac),this.Tr.off(this.Ic,this.kr)}clampLines(){this.Pc()}}const vt=gt;class yt extends d._{constructor(t,i,e,s,n){if(super(),this.mediator=t,this.Tr=i,this._c=e,this.Sc=s,this.zt=n,this.Rc=!1,this.zt.$slot.innerHTML=`<cnx class="${m.Ih.CardPlaceholder}"></cnx>`,this.zt.style===$.ProtoGalleryStyleMode.Detailed){const t=e.createElementByString(this.Dc(mt));this.zt.$slot.firstChild.appendChild(t)}this.Sc.register(this.zt.$slot,this.mediator,this),this.relay(at.Z[at.Z.Scroll],this.Sc,this,this.mediator)}Dc(t){const i=[...Array(12)].map((()=>`<cnx-span style='width: ${10+Math.floor(40*Math.random())}%'></cnx-span> `)).reduce(((t,i)=>t+i),"");return t.replace("<cnx-span></cnx-span>",i)}setCardData(t){this.jc=new vt(this,this.Tr,this._c,this.Sc,{id:this.zt.id,style:this.zt.style,metadata:t,titleFont:this.zt.titleFont,bodyFont:this.zt.bodyFont}),this.subscribe(lt[lt.CardClicked],this.jc,(({payload:t})=>{this.mediator.publish(this,lt[lt.CardClicked],{payload:t})})),this.unsubscribeAll(this.Sc),this.relay(at.Z[at.Z.Scroll],this.jc,this,this.mediator),this.jc.setActiveState(this.Rc),this.zt.$slot.innerHTML="",this.zt.$slot.appendChild(this.jc.$element)}setActiveState(t){this.Rc=t,this.jc&&this.jc.setActiveState(this.Rc)}getContainer(){return this.zt.$slot}clampLines(){this.jc.clampLines()}}const bt=yt;class xt extends d._{constructor(t,i,s,n,r,h,o,a,c){super(),this.mediator=t,this.Tr=i,this._c=s,this.Sc=n,this.Fc=r,this.Vc=h,this.$c=o,this.Nc=a,this.Uc=[],this.Hc=[],this.qc=null,this.Wc=0,this.Gc=(0,e.nw)(this.Fc),this.Jc=(0,e.fj)(this.Fc);const l=this.$c===$.ProtoGalleryStyleMode.Detailed?m.Ih.StyleDetailed:m.Ih.StyleVisual;if((0,e.cn)(this.Fc,l),this.$c===$.ProtoGalleryStyleMode.Detailed&&(this.Fc.innerHTML=`<cnx class="${m.Ih.ExploreMore}">EXPLORE MORE</cnx>`),this.Qc=s.createElementByString(`<cnx class="${m.Ih.CardRail}"></cnx>`),this.Fc.appendChild(this.Qc),this.$c===$.ProtoGalleryStyleMode.Detailed){const t=s.createElementByString(`<cnx class="${m.Ih.FadeOut}"></cnx>`);this.Fc.appendChild(t)}this.Yc(c)}start(){this.Xc(),this.Zc()}onResize(t){this.Kc&&(this.Kc.updateWidth(t),this.tl(),this.il())}setCurrentIndex(t){this.Wc=t,this.Uc.forEach(((i,e)=>i.card.setActiveState(t===e))),this.il()}Yc(t){t.forEach(((t,i)=>{const e=this.el(i);this.Qc.appendChild(e.getContainer()),this.Uc.push({card:e,videoSource:t}),this.subscribe(lt[lt.CardClicked],e,(({payload:t})=>this.sl(t))),this.relay(at.Z[at.Z.Scroll],e,this,this.mediator)}))}il(){if((0,f.BZ)(this.Hc))return;const t=this.Uc[this.Wc].card.getContainer();this.Nc===$.ProtoGalleryOrientationEnum.Landscape?ht(t,this._c,true):ot(t,this._c,true)}el(t){const i=this._c.createElementByString(`<cnx class="${m.Ih.CardSlot}"></cnx>`);return new bt(this,this.Tr,this._c,this.Sc,{id:t,style:this.$c,$slot:i,titleFont:this.Gc,bodyFont:this.Jc})}sl(t){this.mediator.publish(this,D.ChangeVideo,{payload:{videoIndex:t}})}Xc(){this.Uc.forEach((t=>{t.videoSource.getMetadata((i=>{t.card.setCardData(i),t.card.clampLines()}))}))}nl(){this.Hc.forEach((t=>{this.unsubscribeAll(t),this.Qc.removeChild(t.getContainer())})),this.Hc=[]}hl(){const t=this.Nc===$.ProtoGalleryOrientationEnum.Portrait?this.Qc.clientWidth:this.Qc.clientHeight,i=this.Uc[0].card.getContainer(),e=this.Nc===$.ProtoGalleryOrientationEnum.Portrait?i.clientWidth:i.clientHeight,s=Math.ceil(t/e)+1-(this.Uc.length-1);if(s>this.Hc.length-1)for(let t=0;t<=s;t++){const i=this.el(t);this.Hc.push(i),this.relay(at.Z[at.Z.Scroll],i,this,this.mediator),this.Qc.appendChild(i.getContainer())}}tl(){this.ol()?(this.nl(),this.al()):(this.cl(),this.hl())}al(){null===this.qc&&(this.qc=new st(this.Qc,{horizontal:this.Nc===$.ProtoGalleryOrientationEnum.Portrait}),(0,e.cn)(this.Qc,m.Gj.HasCustomScrollbar))}cl(){null!==this.qc&&(this.qc.destroy(),this.qc=null,(0,e.IV)(this.Qc,m.Gj.HasCustomScrollbar))}ol(){const t=this.Uc[this.Uc.length-1].card.getContainer();return this.Nc===$.ProtoGalleryOrientationEnum.Landscape?t.offsetTop+t.clientHeight>this.Qc.clientHeight:t.offsetLeft+t.clientWidth>this.Qc.clientWidth}Zc(){const t=this.ll();this.Kc=new V(this.Fc,this.Vc,t,m.Rq)}ll(){return it[this.Nc][this.$c]}}var wt,_t,St=o(308),Pt=o(1995),At=o(2817),It=o(6716);!function(t){t.enter="enterFullscreen",t.exit="exitFullscreen"}(wt||(wt={}));class kt{constructor(t,i,e){if(this._c=t,this.Zt=e,this.ul=!1,this.dl=1e3,this.pl=!0,this.fl=new It.x,this.ml=new It.x,this.gl=!1,this.vl=()=>{this.ul&&this.yl()},this.bl=t=>{this.ul?null!==this.fullscreenElement?this.yl():this._l():this.fl.next(wt.exit)},this._l=()=>{this.gl=!1,this.Sl.reject(),this.ul=!1,clearTimeout(this.Pl)},this.Al=this._c.hasIosFullscreenBehaviour(e)?i.getElementsByTagName("video")[0]:i,!this.Al)throw new Error("element is missing");try{const t=this.Il();if(null==t)return void(this.pl=!1);this.kl=t.keys,this.Cl=t.name,this.Tl()}catch(t){this.pl=!1,(0,s.n)({message:"Fullscreen init failed",exception:t.message,callStack:t.stack,level:s.D.CRITICAL})}}Il(){let t;return t=this._c.hasIosFullscreenBehaviour(this.Zt)?this._c.getFullscreenKeys(this.Al):this._c.getFullscreenKeys(),t}get fullscreenElement(){return this._c.getDocumentProperty(this.kl.fullscreenElement)}get fullscreenEnabled(){return this._c.getDocumentProperty(this.kl.fullscreenEnabled)}enterFullScreen(){if(this.pl){this.Sl=new Pt.C,this.ul=!0,clearTimeout(this.Pl),this.Pl=setTimeout(this._l,this.dl);try{this.Al[this.kl.requestFullscreen]()}catch(t){this._l()}return this.Sl.promise}}exitFullScreen(){try{this._c.exitFullscreen(this.kl.exitFullscreen,this.Zt===St.M.Ios?this.Al:void 0)}catch(t){(0,s.n)({message:"fullscreen_exit",exception:t.message,callStack:t.stack,level:s.D.WARN})}this.gl=!1}Tl(){this.Cl===At.do.Moz||this.Cl===At.do.Ms?(this._c.addEventListenerOnGlobal(this.kl.fullscreenchange,this.bl),this._c.addEventListenerOnGlobal(this.kl.fullscreenerror,this._l)):(this.Al.addEventListener(this.kl.fullscreenchange,this.bl),this.Al.addEventListener(this.kl.fullscreenerror,this._l)),this._c.hasIosFullscreenBehaviour(this.Zt)&&(this.Al.addEventListener("webkitbeginfullscreen",this.vl),this.Al.addEventListener("webkitendfullscreen",this.bl))}Ml(){this.Cl===At.do.Moz||this.Cl===At.do.Ms?(this._c.removeEventListenerOnGlobal(this.kl.fullscreenchange,this.bl),this._c.removeEventListenerOnGlobal(this.kl.fullscreenerror,this._l)):(this.Al.removeEventListener(this.kl.fullscreenchange,this.bl),this.Al.removeEventListener(this.kl.fullscreenerror,this._l)),this.Zt===St.M.Ios&&(this.Al.removeEventListener("webkitbeginfullscreen",this.vl),this.Al.removeEventListener("webkitendfullscreen",this.bl))}yl(){this.gl=!0,this.ml.next(wt.enter),this.Sl.resolve(),this.ul=!1,clearTimeout(this.Pl)}get isFullscreen(){return this.gl}get onFullScreenExit(){return this.fl.asObservable()}get onFullScreenEnter(){return this.ml.asObservable()}destroy(){this.isFullscreen&&this.exitFullScreen(),this.Ml(),this.Sl&&this.Sl.isPending&&this.Sl.reject()}}!function(t){t[t.Play=0]="Play",t[t.Pause=1]="Pause",t[t.Replay=2]="Replay",t[t.Volume=3]="Volume",t[t.Mute=4]="Mute",t[t.Unmute=5]="Unmute",t[t.Seek=6]="Seek",t[t.DraggingStart=7]="DraggingStart",t[t.DraggingStopped=8]="DraggingStopped",t[t.SeekingStart=9]="SeekingStart",t[t.SeekingStopped=10]="SeekingStopped",t[t.Expand=11]="Expand",t[t.Collapse=12]="Collapse",t[t.Quality=13]="Quality",t[t.Close=14]="Close",t[t.Next=15]="Next",t[t.Prev=16]="Prev",t[t.Settings=17]="Settings",t[t.CaptionOn=18]="CaptionOn",t[t.CaptionOff=19]="CaptionOff",t[t.CaptionUpdate=20]="CaptionUpdate",t[t.VolumeHoverStart=21]="VolumeHoverStart",t[t.VolumeHoverStopped=22]="VolumeHoverStopped",t[t.OverlayClick=23]="OverlayClick",t[t.UIHideStart=24]="UIHideStart",t[t.UIShowStart=25]="UIShowStart",t[t.UIEndShowHide=26]="UIEndShowHide",t[t.AboutClick=27]="AboutClick",t[t.ContextClick=28]="ContextClick",t[t.SettingsMenu=29]="SettingsMenu",t[t.HoverStart=30]="HoverStart",t[t.HoverEnd=31]="HoverEnd",t[t.StateChanged=32]="StateChanged",t[t.RebindComponent=33]="RebindComponent",t[t.SkipAd=34]="SkipAd",t[t.LogoClicked=35]="LogoClicked",t[t.ContextMenuOpen=36]="ContextMenuOpen",t[t.ContextMenuClose=37]="ContextMenuClose",t[t.CaptionMenu=38]="CaptionMenu",t[t.NonLinearClose=39]="NonLinearClose"}(_t||(_t={}));var Ct,Tt=o(5055);!function(t){t.PreRoll="pre-roll",t.MidRoll="mid-roll",t.PostRoll="post-roll"}(Ct||(Ct={}));const Mt=Ct,Et={imageMaxHeight:160,ratioWidth:16,ratioHeight:9};var Bt;!function(t){t[t.Play=0]="Play",t[t.Pause=1]="Pause"}(Bt||(Bt={}));class Ot{constructor(t,i){switch(this.mediator=t,this.inView=!1,this.El=!1,this.Bl=!1,this.Ol=!1,this.Ll=()=>{},i){case l.ProtoPlayerPlaybackModeEnum.Autoplay:this.Rl(this.Dl);break;case l.ProtoPlayerPlaybackModeEnum.ClickToPlay:this.Rl(this.jl);break;case l.ProtoPlayerPlaybackModeEnum.ScrollToPlay:this.Rl(this.Fl)}}Rl(t){this.Ll=()=>{this.El||t.call(this)}}Dl(){this.Ol&&!this.Bl&&this.inView&&(this.Bl=!0,this.mediator.publish(this,Bt[Bt.Play]))}Fl(){this.Ol&&(this.Vl&&(this.$l=this.volume),this.inView||this.gl&&!this.inView?(this.mediator.publish(this,Bt[Bt.Play],{payload:{volume:this.$l}}),this.$l=null):(this.$l=this.volume,this.mediator.publish(this,Bt[Bt.Pause],{payload:{volume:0}})))}jl(){}setViewability(t){this.inView=t,this.Ll()}setIsAppBackgrounded(t){this.Vl=t}setSoundVolume(t){this.volume=t}setUserPlayback(t){!this.Bl&&t&&(this.Bl=t),this.El=!t}setCanPlay(t){this.Ol=t,this.El||!this.inView&&!this.Bl||this.Ll()}setIsFullscreen(t){this.gl=t}}var Lt,Rt,Dt=o(6515),jt=o(6243);!function(t){t[t.DirectionIn=0]="DirectionIn",t[t.DirectionOut=1]="DirectionOut",t[t.FadeIn=2]="FadeIn"}(Lt||(Lt={})),function(t){t.Float="float",t.Embed="embed"}(Rt||(Rt={}));const Ft=.5;var Vt,$t,Nt,Ut,Ht=o(9115),qt=o(9078);function zt(t,i){return!(i.skippability===l.ProtoPlayerSkippabilityType.AllowNonSkipAdsIfTheyAreShorterThan&&t<i.skipMin)}!function(t){t[t.None=0]="None",t[t.Portrait=1]="Portrait",t[t.Landscape=2]="Landscape"}(Vt||(Vt={})),function(t){t.PARALLEL_CALLS_DEFAULT=5,t.PARALLEL_WINS_DEFAULT=10,t.MAX_WINS_DEFAULT=-1,t.DEFAULT_DESIRED_BITRATE=1,t.REMOVE_BIDS_DEFAULT=!1,t.MID_SESSION_PREFETCH_MINIMUM_TIME=1e4,t.NON_LINEAR_MAX_HEIGHT_PERCENT=20,t.NON_LINEAR_MAX_WIDTH_PERCENT=80,t.DEFAULT_MAX_AD_DURATION=180}($t||($t={}));class Wt{constructor(t){this.Nl=t,this.Ul={breakType:l.ProtoAdBreakTypeEnum.None,currentPodNumber:0,maxAdSlotDuration:0,maxAdPodDuration:0,totalNumberOfAdSlots:0},this.Hl=null}get adBreaks(){return this.Nl}setNewBreak(t){this.Nl.forEach((i=>{i.types.forEach((e=>{(function(t,i){let e=!1;switch(t){case l.ProtoAdBreakTypeEnum.PreRoll:e=i===l.ProtoAdSlotsEnum.PreRoll;break;case l.ProtoAdBreakTypeEnum.MidRoll:e=i===l.ProtoAdSlotsEnum.MidRoll;break;case l.ProtoAdBreakTypeEnum.PostRoll:e=i===l.ProtoAdSlotsEnum.PostRoll}return e})(e,t)&&(this.Ul.currentPodNumber=i.numberOfAdSlots,this.Ul.maxAdSlotDuration=i.maxAdSlotDuration,this.Ul.maxAdPodDuration=i.maxAdPodDuration,this.Ul.totalNumberOfAdSlots=i.numberOfAdSlots)}))}))}adStarted(){this.ql(),0===this.Ul.currentPodNumber&&(this.Ul.currentPodNumber=this.Ul.totalNumberOfAdSlots),this.Ul.currentPodNumber--}endPod(){this.ql(),this.Ul.currentPodNumber=0}enterPodTimeout(t){this.ql(),this.Hl=setTimeout((()=>{this.ql(),t()}),5e3)}isInAdPod(){return this.Ul.currentPodNumber>0}isCurrentBreakInPod(){return this.Ul.totalNumberOfAdSlots>1}getMaxAdSlotDuration(){return this.Ul.maxAdSlotDuration}getMaxAdPodDuration(){return this.Ul.maxAdPodDuration}getMaxAdSlotPossibleDuration(){let t=0;for(let i=0;i<this.Nl.length;i++){if(0===this.Nl[i].maxAdSlotDuration)return 0;t=Math.max(t,this.Nl[i].maxAdSlotDuration)}return t}getCurrentSlotIndex(){return this.Ul.totalNumberOfAdSlots-this.Ul.currentPodNumber}getNextSlotIndex(){const t=this.getCurrentSlotIndex();return this.Ul.totalNumberOfAdSlots>t?t+1:1}getTotalNumberOfSlots(){return this.Ul.totalNumberOfAdSlots}isInPodTimeout(){return!!this.Hl}getAdBreakState(t){if(!(0,dt.$K)(t))return this.zl();const{adSlotDuration:i,adBreakType:e}=t;return{isAdPodBreak:this.isCurrentBreakInPod(),adPodSlotIndex:this.isCurrentBreakInPod()?this.getNextSlotIndex():0,maxAdDuration:Math.round(this.getMaxAdSlotDuration()/Ht.s_||$t.DEFAULT_MAX_AD_DURATION),remainingAdDuration:Math.round(i/Ht.s_),sessionMaxAdDuration:Math.round(this.getMaxAdSlotPossibleDuration()/Ht.s_),adBreakType:e}}zl(){let t=l.ProtoAdBreakTypeEnum.MidRoll;this.adBreaks.forEach((i=>{i.types.some((t=>t===l.ProtoAdBreakTypeEnum.PreRoll))&&(t=l.ProtoAdBreakTypeEnum.PreRoll)}));const i=this.getMaxAdSlotDuration();return this.getAdBreakState({adSlotDuration:i,adBreakType:t})}ql(){clearTimeout(this.Hl),this.Hl=null}}!function(t){t.ShowLinearEvent="showLinearEvent",t.HideLinearEvent="hideLinearEvent",t.PauseLinearEvent="pauseLinearEvent",t.ResumeLinearEvent="resumeLinearEvent",t.SkipLinearEvent="skipLinearEvent"}(Nt||(Nt={})),function(t){t.ShowNonLinearEvent="showNonLinearEvent",t.HideNonLinearEvent="hideNonLinearEvent"}(Ut||(Ut={}));const Gt="midRollCapped",Jt="totalAdBreakDurationExpired",Qt="enableLinearAds",Yt="disableLinearAds",Xt="ForceStopAdSlot",Zt="ForceStopAdPod",Kt="linearAdOpportunity",ti="AdPodRemainingTime",ii="disableNonLinearAds",ei="enableNonLinearAds";class si{constructor(t,i,e,s,n,r=0){this.Wl=t,this.zt=i,this.Ba=e,this.Vc=s,this.yr=n,this.Gl=r,this.Jl=void 0,this.Ql=null,this.Yl=!1,this.Zl=()=>{if(!this.Jl||!this.Kl)return;const t=this.tu(),i=!!this.Kl;this.eu(t,i)},this.su=()=>{var t;if(this.nu()&&(this.zt.width=null===(t=this.Kl)||void 0===t?void 0:t.clientWidth),this.ru(),this.Jl){const t=!1,i=this.tu();this.eu(i,t)}},this.ru=()=>{this.hu()?!this.ou||this.Jl||this.Yl?this.au():this.cu():this.Jl&&this.lu()},this.uu=t=>{if(this.du(t.propertyName))switch(this.transitionState){case Lt.DirectionIn:this.transitionState=void 0,this.pu();break;case Lt.DirectionOut:this.transitionState=void 0,this.fu();break;case Lt.FadeIn:this.transitionState=void 0,this.mu()}}}get transitionState(){return this.gu}set transitionState(t){this.gu===Lt.FadeIn&&this.vu(m.jG.FadeInBase,m.jG.FadeIn),this.gu=t}yu(...t){(0,e.cn)(this.Ba,...t)}vu(...t){(0,e.IV)(this.Ba,...t)}au(){this.Vc!==l.ProtoDeviceType.Smartphone&&(this.Ba.style.width=`${this.zt.width}px`);const t=this.Ba.getBoundingClientRect().width;this.Ba.style.height=this.zt.getHeight(t)}bu(){return(0,f.d3)(this.Vc,this.zt.floatingDeviceMode)}xu(){this.yr.addEventListenerOnGlobal("scroll",this.Zl)}wu(){this.yr.removeEventListenerOnGlobal("scroll",this.Zl)}_u(){this.Kl=this.yr.querySelector(this.zt.pageElement),this.Kl&&(clearInterval(this.Ql),this.zt.width=this.Kl.clientWidth,this.ru(),this.Wl.on(this.Kl,this.su))}Su(){var t,i;const e=null===(t=this.Kl)||void 0===t?void 0:t.getBoundingClientRect().top;return this.zt.appendLocation===l.ProtoFloatingAppendLocationEnum.Above?e-this.Ba.offsetHeight-this.zt.floatingYAxisPadding:this.zt.appendLocation===l.ProtoFloatingAppendLocationEnum.Below?e+(null===(i=this.Kl)||void 0===i?void 0:i.offsetHeight)+this.zt.floatingYAxisPadding:e}Pu(){this.Ql=setInterval((()=>{this._u()}),500),this._u()}nu(){return this.zt.floatingPosition===l.ProtoFloatingFixedPositionMode.Element}du(t){switch(this.transitionState){case Lt.DirectionIn:case Lt.DirectionOut:if("transform"===t)return!0;break;case Lt.FadeIn:if("opacity"===t)return!0}return!1}Au(){this.Ba.style.top="",this.Ba.style.bottom="",this.Ba.style.left="",this.Ba.style.right="",this.Ba.style.width="",this.Ba.style.height="",this.Ba.style.transform=""}fu(){this.Jl=!1,this.vu(m._7.MainClass,m._7.TransitionClass),this.Au(),this.Iu()}eu({x:t,y:i},e){this.ku(e);const s=()=>this.Ba.style.transform=`translate(${t}px, ${i}px)`;e?(this.yr.cancelRequestAnimationFrame(this.Cu),this.Cu=null,this.Cu=this.yr.requestAnimationFrameHelper((()=>{s()}))):s()}ku(t){t?this.yu(m._7.TransitionClass):this.vu(m._7.TransitionClass)}tu(){let t,i;if(this.nu()&&this.Kl){this.Tu();const e=this.zt.isPositionedLeft?this.zt.floatingGutterX:-this.zt.floatingGutterX;t=this.yr.getElementCoordinates(this.Kl).clientX+e;const s=this.Su();return i=s<this.zt.floatingGutterY?this.zt.floatingGutterY:s,{x:t,y:i}}if(this.zt.isPositionedLeft)t=this.zt.floatingGutterX;else{t=this.yr.getViewportWidth()-this.Ba.offsetWidth-this.zt.floatingGutterX}if(this.zt.isPositionedTop)i=this.zt.floatingGutterY;else{i=this.yr.getViewportHeight()-this.Ba.offsetHeight-this.zt.floatingGutterY}return{x:t,y:i}}Mu(){const t=(this.zt.floatingWidth||1e3)+20,i=this.yr.getViewportWidth();return this.zt.isPositionedLeft?-t:i+t}hu(){return(0,e.LT)(this.Ba).document.body.getBoundingClientRect().width>=this.Gl}cu(){if(!this.Eu())return;this.nu()&&this.xu(),this.Jl=!0,this.transitionState=Lt.DirectionIn,this.yu(m._7.MainClass),this.au();const t=this.tu(),i=this.Mu();this.Bu(),this.eu({x:i,y:t.y},!1),(0,e.Tp)(this.Ba);this.eu(t,!0)}Eu(){return!!this.hu()&&!(this.nu()&&(!this.Kl||this.Kl&&0===this.Kl.clientWidth))}Tu(){this.Kl&&(this.yr.getElementCoordinates(this.Kl).clientX<this.yr.getBodyDimensions().width/2?(this.zt.isPositionedLeft=!0,this.zt.isPositionedRight=!1):(this.zt.isPositionedLeft=!1,this.zt.isPositionedRight=!0))}lu(t=!0){t&&(this.transitionState=Lt.DirectionOut),this.nu()&&this.wu(),this.Ou();const{y:i}=this.tu(),e=this.Mu();this.eu({y:i,x:e},t),t||this.fu()}Lu(){this.Ba.addEventListener("transitionend",this.uu),this.Wl.on(this.Ba,this.ru),this.Wl.on(this.yr.getGlobalClosestTop().topFrame.document.body,this.su),this.nu()&&this.Pu()}Ru(){this.Wl.off(this.Ba,this.ru),this.Ba.removeEventListener("transitionend",this.uu),this.Wl.off(this.yr.getGlobalClosestTop().topFrame.document.body,this.su),this.Kl&&(this.Wl.off(this.Kl,this.su),this.wu(),clearInterval(this.Ql))}Du(t){void 0!==t.scrollPosition&&this.zt.setScrollPosition(t.scrollPosition),(null==t?void 0:t.floatingWidth)&&(this.zt.width=t.floatingWidth),(null==t?void 0:t.floatingGutterX)&&(this.zt.gutterX=t.floatingGutterX),(null==t?void 0:t.floatingGutterY)&&(this.zt.gutterY=t.floatingGutterY)}get isInFloating(){return this.Jl}}class ni extends si{constructor(t,i,e,s,n,r=0){super(t,e,i,s,n,r),this.ou=!0,this.Fu=new It.x}get onFloatingEnterStop(){return this.Fu.asObservable()}Bu(){}pu(){this.Fu.next()}Ou(){}Iu(){}mu(){}start(){this.bu()&&(this.yu(m._7.AlwaysFloating),super.Lu(),super.cu())}setFloatingSettings(t){this.Du(t),this.start()}}class ri extends si{constructor(t,i,e,s,n,r,h=0){super(i,s,e,n,r,h),this.Vu=t,this.$u=!0,this.Nu=!0,this.Uu=!1,this.ou=!1,this.Hu=new It.x,this.Fu=new It.x,this.qu=new It.x,this.zu=new It.x,this.Wu=t=>{const i=this.Vu.getIsTabInFocus();t&&this.isInFloating&&(this.ou=!1,this.lu()),this.$u&&this.zt.floatingMode===l.ProtoPlayerFloatingMode.AfterInView&&t&&(this.$u=!1),!t&&!this.$u&&this.Nu&&i&&(this.ou=!0,super.cu())},this.au=()=>{this.isInFloating&&super.au()}}get onFloatingEnterStart(){return this.Hu.asObservable()}get onFloatingEnterStop(){return this.Fu.asObservable()}get onFloatingExitStart(){return this.qu.asObservable()}get onFloatingExitStop(){return this.zu.asObservable()}isFloatingModeEnabled(){return this.$u&&(this.enabled=!1),this.enabled}enableFloatingMode(){this.$u=!1,this.Nu=!0,this.start()}disableFloatingMode(){this.Nu=!1,this.destroy()}setFloatingSettings(t){this.Du(t),this.start()}lu(){const t=!this.Uu;super.lu(t)}Ou(){this.qu.next()}Iu(){this.Gu()}Bu(){this.Hu.next()}Gu(){this.transitionState=Lt.FadeIn,this.vu(m.jG.FadeIn),this.yu(m.jG.FadeInBase),(0,e.Tp)(this.Ba),this.yu(m.jG.FadeIn)}pu(){this.Fu.next()}mu(){this.vu(m.jG.FadeInBase,m.jG.FadeIn),this.zu.next(),this.Yl&&super.Ru()}Ju(){this.Vu.on(this.Ba.parentElement,this.Wu,{threshold:Ft})}Qu(){this.Vu.off(this.Ba.parentElement,this.Wu)}start(){this.bu()&&(super.Lu(),this.zt.floatingMode===l.ProtoPlayerFloatingMode.OnPageLoad&&(this.$u=!1),this.Ju(),this.Wu(this.Vu.check({element:this.Ba.parentElement,threshold:Ft})))}canFloat(){return this.bu()&&this.zt.floatingMode!==l.ProtoPlayerFloatingMode.Off}destroy(){this.isInFloating?(this.fu(),this.Yl=!0):super.Ru(),this.Qu()}get enabled(){return this.Nu}set enabled(t){this.Nu=t}fullscreenStateChange(t){this.Uu=t,t?this.Qu():this.Ju(),this.Wu(t)}}var hi;!function(t){t[t.Portrait=0]="Portrait",t[t.Landscape=1]="Landscape"}(hi||(hi={}));const oi=hi;class ai{constructor(t){this.urlSuffixerService=t,this.Yu={},this.Xu=[]}getImage(t,i,e,s,n="",r=!1){return this.Zu=t,this.Ku=(0,dt.QM)(i)?i:"",this.td=e,this.ed=s,this.sd=n,this.nd=r,this.rd()}rd(){const t=this.hd();if(t)return t;const i=this.Zu+this.sd,e=new Image;return e.src=this.urlSuffixerService.appendParamsToUrl(i),e.alt=this.Ku,this.Yu[this.Zu]=this.Yu[this.Zu]||{},this.Yu[this.Zu][this.td]=this.Yu[this.Zu][this.td]||{},this.Yu[this.Zu][this.td][this.ed]=this.Yu[this.Zu][this.td][this.ed]||{},this.Yu[this.Zu][this.td][this.ed][this.sd]=e,e}hd(){const t=this.od();if(t)return t;if(!this.nd)return;this.ud();const i=this.dd();if(i)return i;const e=this.pd();return e||void 0}ud(){const t=[];if(!this.Yu[this.Zu])return void(this.Xu=[]);const i=this.Yu[this.Zu],e=this.td>this.ed?oi.Landscape:oi.Portrait;Object.keys(i).forEach((s=>{const n=parseInt(s,10);Object.keys(i[s]).filter((t=>!!i[s][t])).forEach((i=>{const s=parseInt(i,10);if((n>s?oi.Landscape:oi.Portrait)!==e)return;const r={area:n*s,img:this.fd(this.Zu,n,s)};t.push(r)}))})),this.Xu=[...t]}fd(t,i,e){if(this.Yu[t]&&this.Yu[t][i]&&this.Yu[t][i][e])return this.Yu[t][i][e][Object.keys(this.Yu[t][i][e])[0]]}od(){return this.Yu[this.Zu]&&this.Yu[this.Zu][this.td]&&this.Yu[this.Zu][this.td][this.ed]&&this.Yu[this.Zu][this.td][this.ed][this.sd]}dd(){if(0===this.Xu.length)return;const t=this.td*this.ed,i=this.Xu.filter((({area:i})=>i>t)).sort(((t,i)=>t.area-i.area));return 0!==i.length?i[0].img:void 0}pd(){if(0===this.Xu.length)return;const t=this.td*this.ed,i=this.Xu.filter((({area:i})=>i<t&&t/i<=1.3)).sort(((t,i)=>i.area-t.area));return 0!==i.length?i[0].img:void 0}}var ci,li;!function(t){t.LINEAR="LINEAR",t.NONLINEAR="NONLINEAR"}(ci||(ci={})),function(t){t[t.Rtb=1]="Rtb",t[t.HeaderBidder=2]="HeaderBidder",t[t.Tam=3]="Tam"}(li||(li={}));const ui={[l.ProtoCreativeTypeEnum.Rtb]:li.Rtb,[l.ProtoCreativeTypeEnum.HeaderBidder]:li.HeaderBidder,[l.ProtoCreativeTypeEnum.Tam]:li.Tam,[l.ProtoCreativeTypeEnum.TamDeal]:li.Tam,[l.ProtoCreativeTypeEnum.TamPrivateAuction]:li.Tam},di={[ci.LINEAR]:[l.ProtoAdType.Video,l.ProtoAdType.Overlay],[ci.NONLINEAR]:[l.ProtoAdType.Nonlinear]};function pi(t,i){return t.filter((t=>di[i].includes(t.adType)))}function fi(t){return(0,dt.$K)(ui[t])}function mi(t,i){return t.find((t=>t.adManagerLineItem.protoLineItem.advertiserLineItemId===i)).adManagerLineItem}const gi=({playerSkippability:t,playerSkipMin:i,playerSkipAfter:e,lineItemSkippability:s,lineItemSkipMin:n})=>{let r={skippable:!0,skipafter:e};switch(t){case l.ProtoPlayerSkippabilityType.AllowNonSkipAdsIfTheyAreShorterThan:r=function({skippabitySettings:t,playerSkipMin:i,lineItemSkippability:e,lineItemSkipMin:s}){if(e===l.ProtoLineItemSkippabilityType.RequirePublisherToAllowNonSkipAdsShorterThan)s<i?t.skipmin=i:(t.skipmin=s,t.minDuration=s);else t.skipmin=i;return t}({skippabitySettings:r,playerSkipMin:i,lineItemSkippability:s,lineItemSkipMin:n});break;case l.ProtoPlayerSkippabilityType.RequireAdsToBeSkippable:s===l.ProtoLineItemSkippabilityType.RequirePublisherToAllowNonSkipAdsShorterThan&&(r.skipmin=n,r.minDuration=n)}return r};function vi(t,i){return t===l.ProtoAdType.Nonlinear&&i===l.ProtoNonlinearRequestType.Banner}var yi=o(4959),bi=o(8423),xi=o(2231),wi=function(t,i,e,s){return new(e||(e=Promise))((function(n,r){function h(t){try{a(s.next(t))}catch(t){r(t)}}function o(t){try{a(s.throw(t))}catch(t){r(t)}}function a(t){var i;t.done?n(t.value):(i=t.value,i instanceof e?i:new e((function(t){t(i)}))).then(h,o)}a((s=s.apply(t,i||[])).next())}))};const _i=["com.accuweather.android"],Si=.05*Ht.s_;class Pi extends d._{constructor(t,i,s){super(),this.mediator=t,this._appSettings=i,this.gd=s,this.vd=.01,this.yd=.5,this.bd=2e3,this.xd=0,this.wd=!1,this._d=!1,this.Sd=!1,this.Pd=!1,this.Id=!1,this.Cd=!1,this.Td=!1,this.$s=l.ProtoAdSlotsEnum.PreRoll,this.gl=!1,this.Ed=!1,this.Bd=!1,this.Od=!1,this.Ld=[],this.Ai=[],this.Rd=[],this.Dd=0,this.jd=t=>{this.Ed=t,t&&(this.app.services.ViewabilityService.off(this.$playerContainer,this.jd),this.Fd())},this.Vd=t=>{t&&this.adHandler&&!this.Od&&setTimeout((()=>{this.adHandler.resumeWithoutUserInteraction(this.$s)}),Si)},this.$d=()=>{this.isBelowSmBreakpoint(this.$experienceContainer.clientWidth)||(0,e.IV)(this.$experienceContainer,m.Gj.NoHeight),!this._d&&this.Nd()&&(this.mediator.publish(this,p.Uh.CanStart),this.app.services.ResizeObserver.off(this.$experienceContainer,this.$d))},this.Ud=t=>{const{playback:i,isFullscreenClose:e}=t;this.floatingModule&&(0,dt.$K)(i)&&!e&&(this.floatingModule.enabled=i)},this.Hd=()=>{this.qd(1)},this.zd=()=>{this.qd(0)},this.Wd=t=>{this.Ud(t);const{playback:i}=t;(0,dt.$K)(i)&&(i?(this.app.services.EventsStorageService.emitAdPlay(),this.Od=!1):(this.app.services.EventsStorageService.emitAdPause(),this.Od=!0))},this.Gd=new ai(s)}Jd(){}Qd(t,i,e){this.app.services.EventsStorageService.emitAdImpression(t,i,e)}Yd(t){this.app.services.EventsStorageService.emitAdComplete(t)}Xd(){}Zd(){}Kd(){}ep(){}sp(){}np(){}rp(){}op(t){const i={state:t};this.app.services.EventsStorageService.emitAdStateChange(i)}ap(){const{clientWidth:t,clientHeight:i}=this.$playerContainer,e={width:t,height:i};this.app.services.EventsStorageService.emitPlayerResized(e)}cp(){this.app.services.EventsStorageService.emitOnEnterFullscreen()}lp(){this.app.services.EventsStorageService.emitOnExitFullscreen()}up(){this.app.services.EventsStorageService.emitOnPlayerCollapsed()}dp(){this.app.services.EventsStorageService.emitOnPlayerExpanded()}pp(t){this.fp(t),this.mp(t),this.gp(t),this.$s=t,this.vp(t)}mp(t){this.adHandler&&this.adHandler.adStateChange(t,this.yp.getMaxAdSlotDuration())}gp(t){this.bp.onAdStateChange(t,{maxAdPodDuration:this.yp.getMaxAdPodDuration(),maxAdSlotDuration:this.yp.getMaxAdSlotDuration()})}fp(t){this.yp.setNewBreak(t)}vp(t){this.op(yi.V[t])}xp(){var t;null===(t=this.adHandler)||void 0===t||t.contentChanged(),this.bp.contentChanged()}wp(){var t;null===(t=this.adHandler)||void 0===t||t.contentEnded()}_p(){var t,i,e,s,n,r;this.adHandler=this.Sp(),this.Pp(),null===(t=this.adHandler)||void 0===t||t.onLinearImpressionPrice.subscribe((t=>{this.mediator.publish(this,Tt.Km.ImpressionPrice,{payload:t})})),null===(i=this.adHandler)||void 0===i||i.onNonLinearImpressionPrice.subscribe((t=>{this.mediator.publish(this,Tt.Km.ImpressionPrice,{payload:t})})),null===(e=this.adHandler)||void 0===e||e.onLinearImpressionRevenue.subscribe((t=>{this.mediator.publish(this,Tt.Km.ImpressionRevenue,{payload:t})})),null===(s=this.adHandler)||void 0===s||s.onNonLinearImpressionRevenue.subscribe((t=>{this.mediator.publish(this,Tt.Km.ImpressionRevenue,{payload:t})})),null===(n=this.adHandler)||void 0===n||n.onLinearExperienceEvent.subscribe((t=>{p.Uh.UserInteraction===t.type&&this.Wd(t.payload)}));const h=()=>{this.app.services.TrackingService.setAdStart(),this.Bd=!0,this.Od=!1,this.Fd(),this.Ap.unsubscribe()};this.Ap=null===(r=this.adHandler)||void 0===r?void 0:r.onAdsEnable.subscribe((()=>{h()}))}Pp(){this.kp(),this.Cp(),this.Mp()}kp(){this.Rd.push(this.adHandler.onVpaidEvent.subscribe((t=>{switch(t.type){case qt.fI.AdImpression:{this.mediator.publish(this,Tt.Km.AdImpression,t.payload);const{adSourceData:i,customAdData:e,adType:s}=t.payload.payload;this.Qd(i,e,s);break}case qt.fI.AdStopped:{if(this.mediator.publish(this,Tt.Km.AdStopped,t.payload),this.Td&&this.Zd(),!t.payload)return;const{adType:i}=t.payload.payload;this.Yd(i),this.app.services.EventsStorageService.emitAdStopped(i);break}case qt.fI.AdError:{const{adType:i}=t.payload;this.mediator.publish(this,Tt.Km.AdError,t),this.app.services.EventsStorageService.emitAdError(i);break}case qt.fI.AdSkipped:{const{adType:i}=t.payload.payload;this.mediator.publish(this,Tt.Km.AdSkipped,t.payload),this.app.services.EventsStorageService.emitAdSkipped(i),this.Yd(i),this.Td&&this.Zd();break}case qt.fI.AdPaused:{const{adType:i}=t.payload.payload;this.app.services.TrackingService.setSessionPlayback(!1),this.app.services.EventsStorageService.emitAdPaused(i),this.mediator.publish(this,Tt.Km.AdPause,t.payload);break}case qt.fI.AdPlaying:{const{adType:i}=t.payload.payload;this.app.services.TrackingService.setSessionPlayback(!0),this.app.services.EventsStorageService.emitAdPlaying(i),this.mediator.publish(this,Tt.Km.AdPlay,t.payload);break}case qt.fI.AdVideoFirstQuartile:{const{adType:i}=t.payload.payload;this.mediator.publish(this,Tt.Km.AdCompleted25,t.payload),this.app.services.EventsStorageService.emitAdVideoFirstQuartile(i);break}case qt.fI.AdVideoMidpoint:{const{adType:i}=t.payload.payload;this.mediator.publish(this,Tt.Km.AdCompleted50,t.payload),this.app.services.EventsStorageService.emitAdVideoMidpoint(i);break}case qt.fI.AdVideoThirdQuartile:{const{adType:i}=t.payload.payload;this.mediator.publish(this,Tt.Km.AdCompleted75,t.payload),this.app.services.EventsStorageService.emitAdVideoThirdQuartile(i);break}case qt.fI.AdVideoComplete:{const{adType:i}=t.payload.payload;this.mediator.publish(this,Tt.Km.AdCompleted100,t.payload),this.app.services.EventsStorageService.emitAdVideoComplete(i);break}case qt.fI.AdClickThru:{const{adType:i}=t.payload.payload;this.mediator.publish(this,Tt.Km.AdClick,t.payload),this.app.services.EventsStorageService.emitAdClickThru(i);break}case qt.fI.AdInteraction:{const{adType:i}=t.payload.payload;this.app.services.EventsStorageService.emitAdInteraction(i);break}case qt.fI.AdUserAcceptInvitation:{const{adType:i}=t.payload.payload;this.app.services.EventsStorageService.emitAdInteraction(i);break}case qt.fI.AdUserClose:{const{adType:i}=t.payload.payload;this.app.services.EventsStorageService.emitAdInteraction(i);break}case qt.fI.AdUserMinimize:{const{adType:i}=t.payload.payload;this.app.services.EventsStorageService.emitAdInteraction(i);break}case qt.fI.AdVideoStart:{const{adSourceData:i,adType:e}=t.payload,s={duration:i&&i.length,mediaPlayerVolume:this.getVolume()};this.app.services.EventsStorageService.emitAdVideoStart(s,e);break}case qt.fI.AdLoaded:{const{payload:i}=t.payload,{adType:e}=i,{adLoadedData:s}=i;(null==s?void 0:s.skipOffset)<0&&(s.skipOffset=void 0);const n=this.Ep(s);this.app.services.EventsStorageService.emitAdLoaded(n,e);break}case qt.fI.AdVolumeChange:{const{adType:i}=t.payload.payload;this.app.services.EventsStorageService.emitAdVolumeChange(i);break}case qt.fI.AdLog:}})))}Cp(){this.Rd.push(this.adHandler.onMissedImpression.subscribe((t=>{t.setTimeUntilNextOpportunity(this.bp.getTheoreticalDurationUntilNextOpportuinity())})),this.adHandler.onLinearEvent.subscribe((t=>{switch(t.type){case Nt.ShowLinearEvent:this.bp.onAdImpression(t.payload,ci.LINEAR),this.Op();break;case Nt.HideLinearEvent:this.Lp();break;case Nt.PauseLinearEvent:this.bp.onLinearAdPause();break;case Nt.ResumeLinearEvent:this.bp.onLinearAdPlay();break;case Nt.SkipLinearEvent:const i=!0;this.floatingModule&&(this.floatingModule.enabled=!0),this.Lp(i)}})))}Mp(){this.Rd.push(this.adHandler.onNonLinearEvent.subscribe((t=>{switch(t.type){case Ut.ShowNonLinearEvent:this.bp.onAdImpression(t.payload,ci.NONLINEAR);break;case Ut.HideNonLinearEvent:const i=!1;this.bp.onAdFinished(this.adHandler.nonLinearInImpression,ci.NONLINEAR,i)}})))}Op(){this.yp.adStarted(),this.adHandler.showLinear()}Rp(){this.adHandler.hideLinear()}Lp(t=!1){let i=this.yp.isInAdPod();t&&(i=!1,this.yp.endPod()),this.bp.onAdFinished(this.adHandler.linearInImpression,ci.LINEAR,i),this.Rp(),this.Dp.isCloseButton&&this.adHandler&&this.adHandler.firstLinearAdShown&&(this.Dp.closeButtonMode!==l.ProtoPlayerCloseButtonMode.OnHoverAfterFirstAd||(0,e.pv)(this.$playerContainer,m.s6.CloseHover)||(0,e.cn)(this.$playerContainer,m.s6.CloseHover),this.Dp.floatingSettings.floatingCloseButtonMode!==l.ProtoPlayerCloseButtonMode.OnHoverAfterFirstAd||(0,e.pv)(this.$playerContainer,m.s6.CloseFloatHover)||(0,e.cn)(this.$playerContainer,m.s6.CloseFloatHover))}jp(t){this.adHandler.enterAdPodLoadingState(),this.yp.enterPodTimeout((()=>{this.yp.endPod(),t()}))}Fp(){(0,e.Tp)(this.$playerContainer),this.bp=this.Vp(),(0,f.BZ)(pi(this.Dp.lineItemSettings.lineItems,ci.LINEAR))||this.bp.onLinearNoDemand(),this.subscribe(ei,this.bp,(()=>{var t;null===(t=this.adHandler)||void 0===t||t.enableAds(ci.NONLINEAR)})),this.subscribe(ii,this.bp,(t=>{var i;const e=t.payload;null===(i=this.adHandler)||void 0===i||i.disableAds(ci.NONLINEAR,e)})),this.subscribe(Qt,this.bp,(()=>{var t;null===(t=this.adHandler)||void 0===t||t.enableAds(ci.LINEAR)})),this.subscribe(Yt,this.bp,(t=>{var i;const e=t.payload;null===(i=this.adHandler)||void 0===i||i.disableAds(ci.LINEAR,e)})),this.subscribe(Xt,this.bp,(()=>{var t;null===(t=this.adHandler)||void 0===t||t.stopAd("forceStopAdSlot")})),this.subscribe(Zt,this.bp,(()=>{if(this.adHandler)if(this.adHandler.linearInImpression)this.yp.endPod(),this.adHandler.stopAd("forceStopAdPod");else{const t=!0;this.Lp(t)}})),this.subscribe(ti,this.bp,(t=>{var i;null===(i=this.adHandler)||void 0===i||i.updateLinearPodRemainingTime(t.payload.remainingTime)})),this.subscribe(Kt,this.bp,(t=>{var i,e;const s=t.payload.adBreakType,n=null===(i=this.adHandler)||void 0===i?void 0:i.getLinearAdContainerWidth(),r={adBreak:s,playerWidth:(0,dt.$K)(n)?n:this.$playerContainer.clientWidth};this.app.services.TrackingService.trackAdOpportunity(r),null===(e=this.adHandler)||void 0===e||e.newLinearAdOpportunity()}))}$p(){this.app.services.ViewabilityService.on(this.$playerContainer,this.jd,{threshold:this.yd,callbackDelay:this.bd}),this.app.services.ViewabilityService.on(this.$playerContainer,((t,i)=>this.Wu(t,i)),{threshold:this.vd}),this.app.services.ViewabilityService.subscribe(Tt.rl.OmidViewabilityThreshold,(t=>{this.mediator.publish(this,Tt.rl.OmidViewabilityThreshold,{payload:{threshold:t}})})),this.app.config.os.os===St.M.Ios&&this.app.services.PageFocusService.on(this.Vd)}Fd(){this.Ed&&this.Bd&&this.mediator.publish(this,p.Xh.SessionView)}Wu(t,i=!1){this.bp.setToggleAdsReason({isAppBackgrounded:i}),this.app.config.isInApp&&(i?(this.$l=this.getVolume(),this.setVolume(0)):this.$l&&(this.setVolume(this.$l),this.$l=null)),this.Td=t,this.mediator.publish(this,Tt.Km.IsViewable,{payload:t}),this.bp.viewabilityStateChanged(this.checkFloatingViewability(t),this.yp.isInAdPod(),this.yp.isInPodTimeout()),this.app.services.TrackingService.setSessionViewability(t)}checkFloatingViewability(t){const i=this.app.services.ViewabilityService.getIsTabInFocus();return!(t||!this.floatingModule||!this.floatingModule.isInFloating||!i)||t}ks(){var t,i,e;const n=this.$playerContainer.clientWidth,r=this.$playerContainer.clientHeight,h=this.gl?qt.zc.Fullscreen:qt.zc.Normal;null===(t=this.adHandler)||void 0===t||t.resizeAd(n,r,h,this.$s);try{null===(i=this.bp)||void 0===i||i.onResize(n,r)}catch(t){(0,s.n)({message:"BaseExperience_onResize_player",callStack:t.stack,exception:t.message,level:s.D.WARN})}null===(e=this.adHandler)||void 0===e||e.setPlayerOrientation(this.Np(n,r)),this.breakPointsHandler.updateWidth(n),this.app.services.TrackingService.updatePlayerDimensions(n,r),setTimeout((()=>{this.mediator.publish(this,Tt.Km.SizeChanged,{payload:{width:n,height:r}}),this.qp()}))}isBelowSmBreakpoint(t){return t<this.Dd}Np(t,i){return t<i?Vt.Portrait:t>i?Vt.Landscape:Vt.None}qp(){this.gl||this.ap()}zp(){this.app.services.ResizeObserver.on(this.$playerContainer,(()=>{this.ks()}))}Wp(){var t;this.gl=!0,this.app.services.InteractionService.disableScrollEvent(),this.cp(),null===(t=this.adHandler)||void 0===t||t.setVastViewMode(qt.zc.Fullscreen)}Gp(){var t;this.gl=!1,this.app.services.InteractionService.enableScrollEvent(),this.lp(),null===(t=this.adHandler)||void 0===t||t.setVastViewMode(qt.zc.Normal)}Jp(){const t=`<cnx class='${m.oV}'></cnx>`,i=this.app.services.GlobalDomUtilsService.createElementByString(t);return this.Qp(i),i}Qp(t){(0,e.T7)(t,{"padding-bottom":`${this.Yp()}%`})}Yp(){return this.Dp.playerSize.ratioHeight/this.Dp.playerSize.ratioWidth*100}Xp(){this.Ld.push(this.floatingModule.onFloatingEnterStart.subscribe((()=>{this.mediator.publish(this,Tt.Zr.PlayerFloatChanged,{payload:Rt.Float}),this.mediator.publish(this,Tt.Zr.FloatingEnterStart,{payload:!0})})),this.floatingModule.onFloatingExitStart.subscribe((()=>{this.mediator.publish(this,Tt.Zr.FloatingExitStart,{payload:!0})})),this.floatingModule.onFloatingExitStop.subscribe((()=>{this.mediator.publish(this,Tt.Zr.PlayerFloatChanged,{payload:Rt.Embed}),this.mediator.publish(this,Tt.Zr.FloatingExitStop,{payload:!0})})),this.floatingModule.onFloatingEnterStop.subscribe((()=>{this.mediator.publish(this,Tt.Zr.FloatingEnterStop,{payload:!0}),this.Wu(!0)})))}Zp(){this.floatingModule=new ri(this.app.services.ViewabilityService,this.app.services.ResizeObserver,this.$playerContainer,this.Dp.floatingSettings,this.app.config.device,this.app.services.GlobalDomUtilsService,this.tf),this.Xp(),this.floatingModule.start()}if(){this.alwaysFloatingModule=new ni(this.app.services.ResizeObserver,this.$experienceContainer,this.Dp.floatingSettings,this.app.config.device,this.app.services.GlobalDomUtilsService),this.Ld.push(this.alwaysFloatingModule.onFloatingEnterStop.subscribe((()=>{this.app.services.ViewabilityService.triggerRecheck(this.$playerContainer)}))),this.alwaysFloatingModule.start()}setNewVolume(t){var i;null===(i=this.adHandler)||void 0===i||i.setLinearVolume(t)}ef(){var t;this.sf(),null===(t=this.adHandler)||void 0===t||t.onLinearExperienceEvent.subscribe((t=>{var i;t.type===p.Uh.UserInteraction&&(null===(i=t.payload)||void 0===i?void 0:i.volume)&&this.nf()}))}rf(t){this.subscribe(p.Uh.UserInteraction,t,(({payload:{volume:t}})=>{t&&this.nf()}))}ys(t){this.mediator.publish(this,Tt.Km.VolumeChanged,{payload:t}),this.app.services.EventsStorageService.emitVolumeChange(t)}qd(t){this.getVolume()!==t&&this.setNewVolume(t)}sf(){this.wd=!0,this.$playerContainer.addEventListener("mouseover",this.Hd),this.$playerContainer.addEventListener("mouseout",this.zd)}nf(){this.wd&&(this.wd=!1,this.$playerContainer.removeEventListener("mouseover",this.Hd),this.$playerContainer.removeEventListener("mouseout",this.zd))}hf(){this.breakPointsHandler=new V(this.$playerContainer,this.app.config.device,this.af,this.cf),this.breakPointsHandler.updateWidth(this.$playerContainer.clientWidth)}lf(){if(this.Dp.isCloseButton){switch(this.adHandler&&this.Ai.push(this.adHandler.onLinearUiComponentEvent.subscribe((t=>{t.type===_t.Close&&this.handleClose()}))),this.Dp.closeButtonMode){case l.ProtoPlayerCloseButtonMode.AlwaysOn:(0,e.cn)(this.$playerContainer,m.s6.CloseOn);break;case l.ProtoPlayerCloseButtonMode.Off:(0,e.cn)(this.$playerContainer,m.s6.CloseOff);break;case l.ProtoPlayerCloseButtonMode.OnHover:(0,e.cn)(this.$playerContainer,m.s6.CloseHover)}switch(this.Dp.floatingSettings.floatingCloseButtonMode){case l.ProtoPlayerCloseButtonMode.AlwaysOn:(0,e.cn)(this.$playerContainer,m.s6.CloseFloatOn);break;case l.ProtoPlayerCloseButtonMode.Off:(0,e.cn)(this.$playerContainer,m.s6.CloseFloatOff);break;case l.ProtoPlayerCloseButtonMode.OnHover:(0,e.cn)(this.$playerContainer,m.s6.CloseFloatHover)}}}Ep(t){const{skipOffset:i}=t;return{isAutoPlay:this.Dp.playbackMode===l.ProtoPlayerPlaybackModeEnum.Autoplay,skipOffset:i,isSkippable:(0,dt.kE)(i)}}uf(){this.Bd=!0,this.app.services.TrackingService.setContentStart(),this.Fd()}Nd(){const{clientWidth:t,clientHeight:i}=this.$experienceContainer;return!(0,xi.ON)({width:t,height:i})&&!this.isBelowSmBreakpoint(t)||((0,e.cn)(this.$experienceContainer,m.Gj.NoHeight),this.df())}df(){return _i.includes(this.app.config.bundleID)}pf(t){try{const{display:i,width:e,height:s,flex:n,maxWidth:r,minWidth:h}=this.app.services.GlobalDomUtilsService.getComputedStyle(t),{width:o,height:a}=t.getBoundingClientRect(),c={display:i,compWidth:e,boundWidth:o,compHeight:s,boundHeight:a,flex:n,maxWidth:r,minWidth:h};return{type:t.nodeName,styles:JSON.stringify(c)}}catch(t){return{err:"BaseExperience_getElementInfo_error"}}}ff(){if(!(0,bi.Vm)([95,5]))return;const t={parent:this.pf(this.$experienceContainer.parentElement),main:this.pf(this.$experienceContainer)};(0,s.n)({message:"BaseExperience_invalid_dimensions",level:s.D.INFO,exception:JSON.stringify(t)})}gf(){this.yp=new Wt(this.Dp.adBreaks)}Ea(t,i,e,s){this.Dp=t,this.app=i,this.$experienceContainer=e,s&&s(),this.Jd(),this.app.services.ViewabilityService.setViewableThreshold(this.xd),this.generateHTML(),this.gf(),this.app.services.ResizeObserver.on(this.$experienceContainer,this.$d),this.Nd()?this.mediator.publish(this,p.Uh.CanStart):this.ff()}start(){return wi(this,void 0,void 0,(function*(){this._d=!0,this.app.services.TrackingService.updatePlayerDimensions(this.$playerContainer.clientWidth,this.$playerContainer.clientHeight),(0,e.cn)(this.$experienceContainer,m.sN.MainContainerFlex),this.mediator.publish(this,p.Xh.SessionRendered),this.hf(),this.zp(),this.Dp.floatingSettings.floatingMode===l.ProtoPlayerFloatingMode.Always?this.if():(this.ap(),this.Zp()),this.Dp.lineItemSettings.lineItems.length>0&&!this.Dp.disableAdvertising&&!w._.isBannerBlocked&&(this.app.config.isOVPDomain?this.Ai.push(w._.onAdBlockerDetected().subscribe((t=>{t||this._p()}))):this._p()),this.app.config.isMobile||this.Dp.soundMode!==l.ProtoPlayerSoundMode.Hover||this.ef(),this.Dp.isCloseButton&&this.lf(),this.Dp.displayAdCountdown&&(0,e.cn)(this.$playerContainer,m.s6.AdShowCountdown);try{this.Fp()}catch(t){(0,s.n)({message:"BaseExperience_initAdsController",exception:t.message,callStack:t.stack,level:s.D.INFO})}w._.isBannerBlocked||w._.detectUsingScript().then((t=>{t&&(this.app.services.TrackingService.trackSessionAdBlocker(l.ProtoAdBlockDetectionTypeEnum.Network),this.bp.disableAdvertising())}))}))}play(){var t;null===(t=this.adHandler)||void 0===t||t.play()}pause(){var t;null===(t=this.adHandler)||void 0===t||t.pause()}setVolume(t){this.setNewVolume(t),this.nf()}getSize(){return{width:this.$experienceContainer.clientWidth,height:this.$experienceContainer.clientHeight}}setSize(t,i){(0,xi.ON)({width:t,height:i})||(0,e.T7)(this.$experienceContainer,{width:`${t}px`,height:`${i}px`})}setCustomMacros(t){this.app.services.MacrosService.addExtraMacros(t)}isViewable(){return this.app.services.ViewabilityService.check({element:this.$playerContainer,threshold:this.vd})}setViewableThreshold(t){this.app?this.app.services.ViewabilityService.setViewableThreshold(t):this.xd=t}setAmpUserConsent(t){this.app.services.UserManagerService.setAmpUserConsent(t)}triggerDestroy(){this.app.services.EventsStorageService.destroy(),this.mediator.publish(this,p.Uh.Destroy)}disableAdvertising(){this.bp.disableAdvertising()}enableAdvertising(){this.bp.enableAdvertising()}enableFloatingMode(){var t;null===(t=this.floatingModule)||void 0===t||t.enableFloatingMode()}disableFloatingMode(){var t;null===(t=this.floatingModule)||void 0===t||t.disableFloatingMode()}isFloatingModeEnabled(){return this.floatingModule?this.floatingModule.isFloatingModeEnabled():!!this.alwaysFloatingModule}setFloatingSettings(t){this.floatingModule?this.floatingModule.setFloatingSettings(t):this.alwaysFloatingModule.setFloatingSettings(t)}destroy(){(0,jt.i)(this.Ai),this.adHandler&&((0,jt.i)(this.Rd),this.Ap.unsubscribe(),this.adHandler.destroy()),this.bp&&this.bp.destroy(),this.floatingModule&&(this.floatingModule.destroy(),this.floatingModule=null,(0,jt.i)(this.Ld))}}var Ai,Ii,ki;!function(t){t[t.Unknown=0]="Unknown",t[t.TimeoutBetweenAds=1]="TimeoutBetweenAds",t[t.InImpression=2]="InImpression",t[t.LinearDemandMissing=3]="LinearDemandMissing"}(Ai||(Ai={}));class Ci extends d._{constructor(t,i,e,s,n,r,h,o){super(),this.mediator=t,this.Be=i,this.vf=e,this.yf=s,this.bf=n,this.xf=r,this.gd=h,this.wf=o,this.Sf=qt.zc.Normal,this.Pf=[],this.Af=new It.x,this.If=new It.x,this.kf=new It.x,this.Cf=new It.x,this.Tf=new It.x,this.Mf=new It.x,this.Ef=new It.x,this.Bf=new It.x,this.Lf=new It.x,this.Rf=new It.x,this.Df=new It.x,this.jf=new It.x,this.Ff=new It.x,this.Vf=this.$f(),this.Nf(),this.Uf=this.Hf(),this.qf(),this.zf=this.Wf(),this.zf&&this.Gf()}get onMissedImpression(){return this.Lf.asObservable()}Jf(t,i){const e=[{container:this.Qf,width:t,height:i,type:l.ProtoAdType.Overlay},{container:this.Qf,width:t,height:i,type:l.ProtoAdType.Video},{container:this.Yf,width:t,height:i,type:l.ProtoAdType.Nonlinear}];return this.Yf||e.pop(),e}Nf(){this.Pf.push(this.Vf.onAdsEnable.subscribe((t=>{this.Af.next(t)})))}Gf(){var t,i,e;this.Pf.push(null===(t=this.zf)||void 0===t?void 0:t.onVpaidEvent.subscribe((t=>{this.If.next(t)})),null===(i=this.zf)||void 0===i?void 0:i.onNonLinearEvent.subscribe((t=>{t.type===Ut.ShowNonLinearEvent&&this.linearInImpression&&this.zf.pause(),this.Rf.next(t)})),null===(e=this.zf)||void 0===e?void 0:e.onExperienceEvent.subscribe((t=>{this.Df.next({type:t.type,payload:t.payload})})),this.Vf.onNonlinearImpressionPrice.subscribe((t=>{this.jf.next(t)})),this.Vf.onNonlinearImpressionRevenue.subscribe((t=>{this.Ff.next(t)})))}qf(){this.Pf.push(this.Uf.onVpaidEvent.subscribe((t=>{this.If.next(t)})),this.Uf.onUiComponentEvent.subscribe((t=>{this.Cf.next(t)})),this.Uf.onExperienceEvent.subscribe((t=>{this.Tf.next({type:t.type,payload:t.payload})})),this.Uf.onLinearEvent.subscribe((t=>{var i;t.type===Nt.ShowLinearEvent&&(null===(i=this.zf)||void 0===i||i.pause()),this.kf.next(t)})),this.Vf.onLinearImpressionPrice.subscribe((t=>{this.Mf.next(t)})),this.Vf.onMissedImpression.subscribe((t=>{this.Lf.next(t)})),this.Vf.onLinearImpressionRevenue.subscribe((t=>{this.Ef.next(t)})),this.Vf.onLinearNoFill.subscribe((()=>{this.Bf.next()})))}Xf(t,i,e){this.Vf.initAd(t,i,this.Sf,1,e,this.Jf(t,i),this.xf)}adStateChange(t,i){var e;this.Uf.adStateChange(t,i),null===(e=this.zf)||void 0===e||e.adStateChange(t,i)}contentPlaybackStateChanged(t){var i;null===(i=this.zf)||void 0===i||i.contentPlaybackStateChanged(t)}disableAds(t,i){this.Vf.disableAds(t,i)}enableAds(t){this.Vf.enableAds(t)}start(t,i,e,s=!1,n=!1){n&&this.startNonLinear(),this.startLinear(e,s),this.Xf(t,i,e)}stopAd(t){var i;this.Uf.stopAd(t),null===(i=this.zf)||void 0===i||i.stopAd(t)}play(){this.Uf.play()}pause(){var t;this.Uf.pause(),null===(t=this.zf)||void 0===t||t.pause()}resumeWithoutUserInteraction(t){var i;this.Uf.resumeWithoutUserInteraction(),null===(i=this.zf)||void 0===i||i.resumeWithoutUserInteraction(t)}resizeAd(t,i,e,s){var n;this.setVastViewMode(e),this.Uf.resizeAd(t,i),null===(n=this.zf)||void 0===n||n.resizeAd(t,i,s)}setPlayerOrientation(t){this.Vf.setPlayerOrientation(t)}setVastViewMode(t){this.Sf=t,this.Vf.setVastViewMode(t)}contentChanged(){this.Vf.onContentChange()}newLinearAdOpportunity(){this.Vf.newLinearAdOpportunity()}destroy(){var t,i,e;(0,jt.i)(this.Pf),this.Uf.destroy(),null===(t=this.zf)||void 0===t||t.destroy(),null===(i=this.Vf)||void 0===i||i.disableAds(ci.LINEAR,{disableReason:Ai.Unknown}),null===(e=this.Vf)||void 0===e||e.disableAds(ci.NONLINEAR,{disableReason:Ai.Unknown}),this.Vf.destroy()}get onAdsEnable(){return this.Af.asObservable()}get onVpaidEvent(){return this.If.asObservable()}startNonLinear(){var t;null===(t=this.zf)||void 0===t||t.start()}contentEnded(){var t;null===(t=this.zf)||void 0===t||t.pause()}get onNonLinearEvent(){return this.Rf.asObservable()}get onNonLinearExperienceEvent(){return this.Df.asObservable()}get onNonLinearImpressionPrice(){return this.jf.asObservable()}get onNonLinearImpressionRevenue(){return this.Ff.asObservable()}get nonLinearInImpression(){return!!this.zf&&this.zf.inImpression}get Yf(){var t;return null===(t=this.zf)||void 0===t?void 0:t.adContainer}startLinear(t,i=!1){this.Uf.start(t,i)}setMediaRestrictions(t){this.Vf.setMediaRestrictions(t)}getLinearVolume(){return this.Uf.getVolume()}setLinearVolume(t){this.Uf.setVolume(t)}hideLinear(){this.Uf.hide()}showLinear(){this.Uf.show()}updateContinueReadingCard(){this.Uf.updateContinueReadingCard()}setContinueReadingCard(t){this.Uf.setContinueReadingCard(t)}hideContinueReadingCard(){this.Uf.hideContinueReadingCard()}setAdMarkerTitle(t){this.Uf.setAdMarkerTitle(t)}hideAdMarkerTitle(){this.Uf.hideAdMarkerTitle()}enterAdPodLoadingState(){this.Uf.enterAdPodLoadingState()}setAdLoadingBackgroundUrl(t){this.Uf.setAdLoadingBackgroundUrl(t)}updateLinearPodRemainingTime(t){this.Vf.updateLinearPodRemainingTime(t)}get onLinearEvent(){return this.kf.asObservable()}get onLinearUiComponentEvent(){return this.Cf.asObservable()}get onLinearExperienceEvent(){return this.Tf.asObservable()}get onLinearImpressionPrice(){return this.Mf.asObservable()}get onLinearImpressionRevenue(){return this.Ef.asObservable()}get onLinearNoFill(){return this.Bf.asObservable()}get linearInImpression(){return this.Uf.inImpression}get Qf(){return this.Uf.adContainer}get Zf(){return this.Uf.secondaryAdContainer}get linearAdUserInterface(){return this.Uf.adUserInterface}get onFullcreenChange(){return this.Uf.onFullcreenChange}get linearAdInWin(){return this.Uf.adInWin}get firstLinearAdShown(){return this.Uf.firstAdShown}get inAdPodLoadingState(){return this.Uf.inAdPodLoadingState}getLinearAdContainerWidth(){return this.Uf.getMainAdContainerWidth()}userInteraction(t){this.Vf.userInteraction(t)}}class Ti{constructor(){this.Kf=(0,bi.qs)()}get id(){return this.Kf}}!function(t){t[t.NoPrefetch=0]="NoPrefetch",t[t.StartSessionPrefetch=1]="StartSessionPrefetch",t[t.MidSessionPrefetch=2]="MidSessionPrefetch"}(Ii||(Ii={})),function(t){t[t.ON_BID=0]="ON_BID",t[t.ON_BID_LOADING=1]="ON_BID_LOADING",t[t.ON_BID_READY=2]="ON_BID_READY",t[t.ON_BID_STARTED=3]="ON_BID_STARTED",t[t.ON_BID_LOADING_CONSUMED=4]="ON_BID_LOADING_CONSUMED",t[t.ON_BID_READY_CONSUMED=5]="ON_BID_READY_CONSUMED"}(ki||(ki={}));function Mi(t){return 2*(t+41)}function Ei(t){return t/2-41}class Bi{constructor(){this.tm=Date.now(),this.im={advertiser:{}}}addPrebid(t){(0,dt.$K)(this.im.advertiser[t])||this.nm(t),this.im.advertiser[t].prebidData.push({timestamp:Date.now()})}addBid(t,i){(0,dt.$K)(this.im.advertiser[t])||this.nm(t),this.im.advertiser[t].bidsFloorPriceList.push({timestamp:Date.now(),floorPrice:i})}addImpression(t,i){(0,dt.$K)(this.im.advertiser[t])||this.nm(t),this.im.advertiser[t].impressionRevenueList.push({timestamp:Date.now(),obfuscatedPrice:i})}shouldRequestLineItem(t){const i=Date.now();return!(this.rm(i,3)&&this.hm(t,i,5)<-.5&&this.om(t,i,3)>=11.5&&this.am(t,i,10,.1)<.35)}rm(t,i){return t-this.tm>=i*Ht.uD}hm(t,i,e){const s=this.im.advertiser[t];if(!(0,dt.$K)(s))return-1;const n=this.lm(s.impressionRevenueList,i,e).map((t=>t.obfuscatedPrice));let r=0;return(0,f.BZ)(n)&&(r=n.reduce(((t,i)=>t+Mi(i)))),this.um(r)}om(t,i,e){const s=this.im.advertiser[t];if(!(0,dt.$K)(s))return-1;const n=this.lm(s.prebidData,i,e).length;return this.um(n)}am(t,i,e,s){const n=this.im.advertiser[t];if(!(0,dt.$K)(n))return-1;const r=this.lm(n.impressionRevenueList,i,e).map((t=>t.floorPrice)),h=this.dm(r,s);return this.um(h)}lm(t,i,e){const s=i-Ht.s_,n=i-e*Ht.uD,r=[];for(let i=t.length-1;i>=0&&t[i].timestamp>=n;i--)t[i].timestamp<=s&&r.push(t[i]);return r}um(t){return 0===t?-1:t}nm(t){this.im.advertiser[t]={prebidData:[],bidsFloorPriceList:[],impressionRevenueList:[]}}dm(t,i){if(0===t.length)return 0;if(i<=0)return t[0];if(i>=1)return t[t.length-1];const e=((t=t.sort(((t,i)=>t-i))).length-1)*i,s=Math.floor(e),n=s+1,r=e%1;return n>=t.length?t[s]:t[s]*(1-r)+t[n]*r}}class Oi{constructor(){this.creativeView=[],this.start=[],this.firstQuartile=[],this.midpoint=[],this.thirdQuartile=[],this.impression=[],this.viewable_impression=[],this.complete=[],this.mute=[],this.unmute=[],this.pause=[],this.rewind=[],this.resume=[],this.fullscreen=[],this.exitFullscreen=[],this.expand=[],this.collapse=[],this.close=[],this.closeLinear=[],this.acceptInvitationLinear=[],this.acceptInvitation=[],this.skip=[],this.progress=[],this.playerExpand=[],this.playerCollapse=[],this.adExpand=[],this.adCollapse=[],this.fullScreen=[],this.canPlayThrough=[],this.stalled=[],this.waiting=[],this.otherAdInteraction=[]}}class Li{constructor(t){this.clickTrackings=[],this.customClicks=[],this.errorUrls=[],this.impressions=[],this.trackingEvents=new Oi,t.inLine?this.pm(t.inLine):this.fm(t.wrapper)}pm(t){this.gm(t.errors),this.vm(t.impressions),this.bm(t.creatives)}fm(t){this.gm(t.errors),this.vm(t.impressions),this.bm(t.creatives)}xm(t){this.wm(t.trackingEvents),this._m(t.videoClicks)}_m(t){t&&(this.Pm(t.clickTrackings),this.Am(t.customClicks))}Pm(t){this.clickTrackings.push(...t)}Am(t){this.customClicks.push(...t)}wm(t){t.forEach((t=>{try{this.trackingEvents[t.name].push(t.uri)}catch(i){(0,s.n)({message:"AdManager_VastResponse_tracker",exception:`${t.name}`,callStack:i.stack,level:s.D.INFO})}}))}bm(t){t.forEach((t=>{t.linear?this.xm(t.linear):t.nonLinear&&this.wm(t.nonLinear.trackingEvents)}))}gm(t){this.errorUrls.push(...t)}vm(t){this.impressions.push(...t)}}const Ri={[l.ProtoTrackerTriggerType.Impression]:"adImpression",[l.ProtoTrackerTriggerType.Complete25Pc]:"adQuartileFirst",[l.ProtoTrackerTriggerType.Complete50Pc]:"adQuartileSecond",[l.ProtoTrackerTriggerType.Complete75Pc]:"adQuartileThird",[l.ProtoTrackerTriggerType.ViewCompletion]:"adQuartileFourth",[l.ProtoTrackerTriggerType.VideoClick]:"adClick",[l.ProtoTrackerTriggerType.Pause]:"adPause",[l.ProtoTrackerTriggerType.Resume]:"adResume",[l.ProtoTrackerTriggerType.Mute]:"adMute",[l.ProtoTrackerTriggerType.Unmute]:"adUnmute"};class Di{constructor(){this.adError=[],this.adWin=[],this.adImpression=[],this.adViewableImpression=[],this.adStarted=[],this.adVideoStart=[],this.adQuartileFirst=[],this.adQuartileSecond=[],this.adQuartileThird=[],this.adQuartileFourth=[],this.adClick=[],this.adPause=[],this.adResume=[],this.adSkip=[],this.adMute=[],this.adUnmute=[],this.adUserClose=[],this.adUserAcceptInvitation=[],this.adUserMinimize=[]}static track(t,i,s,n){if(!Array.isArray(t))return;const{width:r,height:h}=n.adContainerState.get(s.adType),{adBreakType:o}=n.adBreakState,{mediaDescription:a,mediaDuration:c,mediaId:u,mediaUrl:d,mediaTitle:p}=n.media;t.forEach((t=>{if(t.url)try{const n=i.replace(t.url,s.vendorId,{adMacros:{adWidth:r,adHeight:h,adPostion:o},mediaMacros:{mediaDescription:a,mediaDuration:c,mediaId:u,mediaUrl:d,mediaTitle:p}});switch(t.type){case l.ProtoTrackerType.Image:(0,bi.Hh)([n],window);break;case l.ProtoTrackerType.Javascript:(0,e.dZ)({src:n},window.document.head,window)}}catch(t){}}))}}function ji(t,i){t.forEach((t=>function(t,i){(function(t,i){return i[Ri[t]]})(t.trigger,i).push({type:t.type,url:t.url})}(t,i)))}function Fi(t){return{type:l.ProtoTrackerType.Image,url:t}}function Vi(t){return t.map((t=>Fi(t)))}var $i;!function(t){t[t.HandlingSdkUrl=0]="HandlingSdkUrl",t[t.NetworkRequestUrl=1]="NetworkRequestUrl",t[t.XmlInvalidString=2]="XmlInvalidString",t[t.XmlParseGeneral=3]="XmlParseGeneral",t[t.XmlInvalidTree=4]="XmlInvalidTree",t[t.XmlInvalidAd=5]="XmlInvalidAd",t[t.XmlAdaptorWrapperLimit=6]="XmlAdaptorWrapperLimit",t[t.HTMLUnknownMimeType=7]="HTMLUnknownMimeType",t[t.ImaAdsManagerInit=8]="ImaAdsManagerInit",t[t.ImaVastEmptyResponse=9]="ImaVastEmptyResponse",t[t.ImaRequestException=10]="ImaRequestException",t[t.ImaTimeout=11]="ImaTimeout",t[t.ImaInvalidResponse=12]="ImaInvalidResponse",t[t.InvalidCreativeUrl=13]="InvalidCreativeUrl",t[t.BidIsNotTargetingAllowedEver=14]="BidIsNotTargetingAllowedEver"}($i||($i={}));const Ni={[$i.HandlingSdkUrl]:l.ConnatixNoBidReasonEnum.CsRequestException,[$i.NetworkRequestUrl]:l.ConnatixNoBidReasonEnum.CsRequestException,[$i.XmlInvalidString]:l.ConnatixNoBidReasonEnum.CsEmptyResponse,[$i.XmlParseGeneral]:l.ConnatixNoBidReasonEnum.CsInvalidResponse,[$i.XmlInvalidTree]:l.ConnatixNoBidReasonEnum.CsInvalidResponse,[$i.XmlInvalidAd]:l.ConnatixNoBidReasonEnum.CsInvalidResponse,[$i.XmlAdaptorWrapperLimit]:l.ConnatixNoBidReasonEnum.CsInvalidResponse,[$i.HTMLUnknownMimeType]:l.ConnatixNoBidReasonEnum.CsInvalidResponse,[$i.ImaAdsManagerInit]:l.ConnatixNoBidReasonEnum.CsRequestException,[$i.ImaVastEmptyResponse]:l.ConnatixNoBidReasonEnum.CsInvalidResponse,[$i.ImaRequestException]:l.ConnatixNoBidReasonEnum.CsRequestException,[$i.ImaTimeout]:l.ConnatixNoBidReasonEnum.Timeout,[$i.ImaInvalidResponse]:l.ConnatixNoBidReasonEnum.CsInvalidResponse,[$i.InvalidCreativeUrl]:l.ConnatixNoBidReasonEnum.CsRequestException,[$i.BidIsNotTargetingAllowedEver]:l.ConnatixNoBidReasonEnum.BidIsNotTargetingAllowedEver};var Ui,Hi;!function(t){t.VOLUME_DETECTED="volume_detected",t.MALWARE_DETECTED="malware_detected",t.BADURI_DETECTED="baduri_detected"}(Ui||(Ui={})),function(t){t[t.None=0]="None",t[t.Mute=1]="Mute",t[t.ScrollHijack=2]="ScrollHijack",t[t.MemoryLeak=4]="MemoryLeak",t[t.Malware=8]="Malware",t[t.All=15]="All"}(Hi||(Hi={}));class qi{constructor(){this.If=new It.x}get onVpaidEvent(){return this.If.asObservable()}handshakeVersion(t="2.0"){return"2.0"}}var zi,Wi,Gi=o(2157);o(7417);!function(t){t.Timeout="timeout",t.TimeoutLoaded="timeout_loaded",t.ImaError="imaError",t.ImaScriptFailure="imaScriptFailure",t.ImaObjectNotFound="imaObjectNotFound",t.ImaManagerInit="imaManagerInit",t.ImaInitSdkError="initImasdkError",t.VastVideoTagEventError="vastVideoTagEventError",t.VastUnsupportedMedia="vastUnsupportedMedia",t.VastPlayPromiseReject="playPromiseReject",t.VastNonLinearImageLoadFailure="nonLinearVastImageLoadFailure",t.AdStopped="adStopped",t.MuteEnforce="muteEnforce",t.VpaidOnLoad="vpaidOnLoad",t.VpaidInvalid="vpaidInvalid",t.VpaidGetVpaidAdError="vpaidGetVpaidAdError",t.CnxMediaNoRenditions="noRenditions",t.CnxMediaSrcNotSupported="srcNotSupported",t.InvalidVpaidEvent="invalidVpaidEvent",t.AdxOverlayNoFill="adxOverlayNoFill",t.AdxOverlayGptScriptLoad="adxOverlayGptScriptLoad",t.DisplayIntegratorIframeLoad="displayIntegratorIframeLoad",t.EnforcementMalware="malwareDetected",t.EnforcementVolume="volumeDetected",t.Cancelled="adManagerRemoved",t.DomainBlocked="domainBlocked",t.AdaptorStartAdError="adaptorStartAdError",t.AdaptorInitAdError="adaptorInitAdError",t.WrapperStartAdError="wrapperStartAdError",t.WrapperInitAdError="wrapperInitAdError",t.NonLinearZeroDimensions="nonLinearzeroDimensions",t.NonLinearImageToLarge="nonLinearImageToLarge",t.NonLinearUnsupportedMedia="nonLinearUnsupportedMedia"}(zi||(zi={})),function(t){t[t.Win=0]="Win",t[t.AdLoaded=1]="AdLoaded",t[t.AdStarted=2]="AdStarted",t[t.AdImpression=3]="AdImpression"}(Wi||(Wi={}));class Ji{constructor(t){this.Im=t,this.km=new Map,(0,dt.$K)(this.Im.settings.bidLifecycle)||(this.Im.settings.bidLifecycle={})}onTrackingLifecycleEvent(t){switch(this.km.set(t,Date.now()),t){case Wi.AdLoaded:this.Cm();break;case Wi.AdImpression:this.Tm()}}Cm(){this.Im.settings.bidLifecycle.winToAdLoadedTime=this.Mm}Tm(){this.Im.settings.bidLifecycle.startAdToImpressionTime=this.Em}get Em(){return this.km.get(Wi.AdImpression)&&this.km.get(Wi.AdStarted)?this.km.get(Wi.AdImpression)-this.km.get(Wi.AdStarted):0}get Mm(){return this.km.get(Wi.AdLoaded)&&this.km.get(Wi.Win)?this.km.get(Wi.AdLoaded)-this.km.get(Wi.Win):0}}const Qi={[l.ProtoCreativeTypeEnum.External]:t=>t.floorPrice||t.customCpm,[l.ProtoCreativeTypeEnum.ThirdParty]:t=>t.floorPrice||t.customCpm,[l.ProtoCreativeTypeEnum.MediaFile]:t=>t.floorPrice||t.customCpm,[l.ProtoCreativeTypeEnum.HeaderBidder]:t=>t.cpm,[l.ProtoCreativeTypeEnum.Rtb]:t=>Mi(t.obfuscatedPrice),[l.ProtoCreativeTypeEnum.Tam]:t=>Mi(t.obfuscatedPrice),[l.ProtoCreativeTypeEnum.TamDeal]:t=>Mi(t.obfuscatedPrice),[l.ProtoCreativeTypeEnum.TamPrivateAuction]:t=>Mi(t.obfuscatedPrice)};function Yi(t){return(0,Qi[t.creativeType])(t)}var Xi;!function(t){t.IMPRESSION_TIMEOUT="IMPRESSION_TIMEOUT",t.VIEWABLE_IMPRESSION_TIMEOUT="VIEWABLE_IMPRESSION_TIMEOUT",t.SKIP_AD_TIMEOUT="SKIP_AD_TIMEOUT",t.STOP_AD_TIMEOUT="STOP_AD_TIMEOUT",t.AD_LOADED_TIMEOUT="AD_LOADED_TIMEOUT"}(Xi||(Xi={}));const Zi="cnx-ad-bid-slot-selected",Ki="Connatix Ad";class te extends qi{constructor(t,i){super(),this.Bm=t,this.settings=i,this.Om=null,this.Lm=null,this.Rm=null,this.Dm=null,this.jm=void 0,this.Fm=!1,this.Yl=!1,this.$m=!1,this.Nm=!1,this.Um=null,this.Pf=[],this.Hm=new It.x,this.qm=new It.x,this.zm=()=>{this.Wm({type:qt.fI.AdError,payload:{errorMessage:zi.Timeout}}),this.Gm()},this.Jm=()=>{this.Qm(),this.Ym(Xi.VIEWABLE_IMPRESSION_TIMEOUT).clearTimeout(),this.settings.viewabilityService.off(this.Om,this.Xm)},this.Xm=t=>{const i=this.Ym(Xi.VIEWABLE_IMPRESSION_TIMEOUT);this.qm.next(t),t?i.timeoutHandle.timeoutId||i.setTimeout():i.clearTimeout()},this.Zm=()=>{this.Wm({type:qt.fI.AdSkipped}),this.Gm()},this.tg=()=>{this.Wm({type:qt.fI.AdStopped,payload:{shouldTrackPostBid:!0}}),this.Gm()},this.ig=()=>{this.Wm({type:qt.fI.AdError,payload:{errorMessage:zi.TimeoutLoaded}}),this.Gm()},this.Ym=t=>{const i=this.eg[t];return{timeoutHandle:i,setTimeout:()=>{i.timeoutId=this.Bm.setTimeout((()=>{i.callback()}),i.timeout)},clearTimeout:()=>{null!==i.timeoutId&&(this.Bm.clearTimeout(i.timeoutId),i.timeoutId=null)}}},this.sg=Date.now(),this.creativeId=this.settings.externalCreativeId,this.ng=`cnx-ad-bid-slot-id-${this.settings.requestMetadata.data.cnxBidId}`,this.rg=`cnx-ad-slot-${this.settings.id}`;const{adType:e}=this.settings.adManagerLineItem.protoLineItem;this.eg={[Xi.IMPRESSION_TIMEOUT]:{callback:this.zm,timeout:25e3,timeoutId:null},[Xi.VIEWABLE_IMPRESSION_TIMEOUT]:{callback:this.Jm,timeout:Gi.xs[e],timeoutId:null},[Xi.SKIP_AD_TIMEOUT]:{callback:this.Zm,timeout:500,timeoutId:null},[Xi.STOP_AD_TIMEOUT]:{callback:this.tg,timeout:500,timeoutId:null},[Xi.AD_LOADED_TIMEOUT]:{callback:this.ig,timeout:25e3,timeoutId:null}},this.gd=i.urlSuffixerService}get createdTimestamp(){return this.sg}get onAdSlotViewabilityChanged(){return this.qm.asObservable()}getPrice(){const{advertiserLineItemId:t,creativeType:i,floorPrice:e,lineItemPriority:s,customCpm:n,successRate:r}=this.settings.adManagerLineItem.protoLineItem;return Yi({lineItemId:t,bidId:this.settings.id,creativeType:i,floorPrice:e,obfuscatedPrice:this.settings.obfuscatedPrice,successRate:this.settings.successRate||r,priority:s,cpm:this.settings.cpm,customCpm:n})}skipAd(){this.Ym(Xi.SKIP_AD_TIMEOUT).setTimeout()}stopAd(t){this.Ym(Xi.STOP_AD_TIMEOUT).setTimeout()}startAd(){this.Nm&&(0,s.n)({message:"AdManager_ABaseBidAdaptor_samebid",exception:"startAd",callStack:`adv:${this.settings.adManagerLineItem.protoLineItem.advertiserLineItemId} bidid: ${this.rg}`,level:s.D.CRITICAL}),this.Nm=!0,this.Ym(Xi.IMPRESSION_TIMEOUT).setTimeout()}initAd(t,i,e,n,r,h,o){this.$m&&(0,s.n)({message:"AdManager_ABaseBidAdaptor_samebid",exception:"initAd",callStack:`adv:${this.settings.adManagerLineItem.protoLineItem.advertiserLineItemId} bidid: ${this.rg}`,level:s.D.CRITICAL}),this.$m=!0,this.Ym(Xi.AD_LOADED_TIMEOUT).setTimeout(),this.hg(o),this.ag=new Ji(this),this.ag.onTrackingLifecycleEvent(Wi.Win)}setAdVolume(t){this.Lm.volume=t,(0,e.Q1)(this.Lm,t),t<=0?this.settings.adEnforcer.start(Hi.Mute):this.settings.adEnforcer.stop(Hi.Mute)}get impressionStarted(){return this.Fm}get creativeId(){return this.jm}set creativeId(t){(0,dt.QM)(this.creativeId)||(this.jm=t)}get onAdViewableImpression(){return this.Hm.asObservable()}cg(t){let i;(0,dt.kE)(t.payload.skipOffset)&&(i=t.payload.skipOffset);const e={type:qt.fI.AdLoaded,payload:{adType:this.settings.adManagerLineItem.protoLineItem.adType,adLoadedData:{skipOffset:i},adSkipMode:this.settings.adManagerLineItem.protoLineItem.skipMode}};return this.settings.adLoadedPayload=e,e}ug(t){return{type:qt.fI.AdImpression,payload:{adType:this.settings.adManagerLineItem.protoLineItem.adType,adSkipMode:this.settings.adManagerLineItem.protoLineItem.skipMode,adSourceData:{moatTrackingEnabled:this.settings.adManagerLineItem.protoLineItem.moatTrackingEnabled,creativeId:this.settings.adManagerLineItem.protoLineItem.cnxCreativeId,adId:this.settings.adManagerLineItem.protoLineItem.advertiserLineItemId,length:this.getAdDuration(),adVideoUrl:this.adVideoUrl,name:Ki,skipOffset:this.settings.adLoadedPayload.payload.adLoadedData.skipOffset},customAdData:{ADVERTISER:this.settings.requestMetadata.data.rtbAdomain,CREATIVE_ID:this.creativeId,CAMPAIGN_ID:this.settings.requestMetadata.data.rtbCampainId}}}}dg(t){return{type:qt.fI.AdVideoStart,payload:{adType:this.settings.adManagerLineItem.protoLineItem.adType,adSkipMode:this.settings.adManagerLineItem.protoLineItem.skipMode,adSourceData:{moatTrackingEnabled:this.settings.adManagerLineItem.protoLineItem.moatTrackingEnabled,creativeId:this.settings.adManagerLineItem.protoLineItem.cnxCreativeId,adId:this.settings.adManagerLineItem.protoLineItem.advertiserLineItemId,length:this.getAdDuration(),name:Ki},customAdData:{ADVERTISER:this.settings.requestMetadata.data.rtbAdomain,CREATIVE_ID:this.creativeId,CAMPAIGN_ID:this.settings.requestMetadata.data.rtbCampainId}}}}Wm(t){if(t.payload||(t.payload={}),t.payload.adType=this.settings.adManagerLineItem.protoLineItem.adType,this.pg(t))switch(t.type){case qt.fI.AdLoaded:0,this.ag.onTrackingLifecycleEvent(Wi.AdLoaded),this.Ym(Xi.AD_LOADED_TIMEOUT).clearTimeout(),this.If.next(this.cg(t));break;case qt.fI.AdImpression:this.ag.onTrackingLifecycleEvent(Wi.AdImpression),this.Ym(Xi.IMPRESSION_TIMEOUT).clearTimeout(),this.fg(),(0,e.cn)(this.Rm,Zi),this.If.next(this.ug(t)),this.Fm=!0;break;case qt.fI.AdVideoStart:this.ag.onTrackingLifecycleEvent(Wi.AdStarted),this.If.next(this.dg(t));break;case qt.fI.AdStopped:case qt.fI.AdSkipped:case qt.fI.AdError:this.Yl&&(0,s.n)({message:"AdManager_ABaseBidAdaptor_double_destroy",exception:this.settings.adManagerLineItem.protoLineItem.advertiserLineItemId,level:s.D.WARN}),this.Ru(),this.If.next(t);break;default:this.If.next(t)}else this.Wm({type:qt.fI.AdError,payload:{errorMessage:zi.InvalidVpaidEvent}})}hg(t){this.Dm=this.mg(),this.Rm=this.Dm.slotsContainer,(0,e.cn)(this.Rm,this.ng),this.Om=this.Dm.adSlot,this.Om.id=this.rg,this.Rm.id=this.settings.bidSlotId,this.Lm=this.Dm.videoSlot,this.Lm.volume=t,(0,e.Q1)(this.Lm,t),this.settings.adEnforcer.registerContainer(this.Rm,this.rg),this.Pf.push(this.settings.adEnforcer.onEnforcerEvent.subscribe((t=>{this.gg(t)}))),this.settings.adEnforcer.start(Hi.All)}mg(){return this.settings.adSlotContainerRecycler.requestAdSlot(this.settings.adContainer)}Ru(){this.Yl=!0,(0,e.IV)(this.Rm,Zi),(0,e.IV)(this.Rm,this.ng),this.Om.removeAttribute("id"),this.Rm.removeAttribute("id"),(0,jt.i)(this.Pf),this.Gm(),this.settings.adEnforcer.deregisterContainer(this.Rm),this.settings.viewabilityService.off(this.Om,this.Xm),null!==this.Um&&this.Bm.clearTimeout(this.Um),this.vg()}vg(){this.Um=this.Bm.setTimeout((()=>{this.settings.adSlotContainerRecycler.destroyAdSlot(this.Dm)}),500)}Qm(){const{advertiserLineItemId:t,publisherLineItemId:i}=this.settings.adManagerLineItem.protoLineItem;this.Hm.next({advertiserLineItemId:t,publisherLineItemId:i,rtbSeatId:this.settings.requestMetadata.data.rtbSeatId,dspId:this.settings.requestMetadata.data.dspId,rtbAdomain:this.settings.requestMetadata.data.rtbAdomain})}fg(){const t=Gi.fJ,i=this.Om;this.settings.viewabilityService.on(i,this.Xm,{threshold:t}),this.Xm(this.settings.viewabilityService.check({threshold:t,element:i}))}Gm(){Object.keys(this.eg).forEach((t=>{this.Ym(t).clearTimeout()}))}pg(t){return!(!this.Fm&&(t.type===qt.fI.AdStopped||t.type===qt.fI.AdSkipped))}gg(t){if(t.detectedContainer!==this.Rm)return;let i;switch(t.type){case Ui.BADURI_DETECTED:i="AdManager_enforcer_BadUri";break;case Ui.MALWARE_DETECTED:i="AdManager_enforcer_malware",this.Wm({type:qt.fI.AdError,payload:{errorMessage:zi.EnforcementMalware}});break;case Ui.VOLUME_DETECTED:i="AdManager_enforcer_soundBlock",this.Wm({type:qt.fI.AdError,payload:{errorMessage:zi.EnforcementVolume}})}(0,s.n)({message:i,exception:t.message,level:s.D.WARN})}yg(t,i,e){const n=this.settings.adManagerLineItem.protoLineItem.advertiserLineItemId,r=this.creativeId;(0,s.n)({message:`AdManager_${t}_${i}`,exception:`advertiserLineItemId:${n}_creativeId:${r}_errorMessage:${null==e?void 0:e.message}`,callStack:null==e?void 0:e.stack,level:s.D.WARN},{throttle:5})}}var ie;!function(t){t.BANNED_IMA_ADS_ID=["9026814","9053547"],t.KEYWORDS_FOR_BANNED_VAST=["nrb-v.ybp.yahoo.comvasterror","pr.ybp.yahoo.com/vasterror","//s.yimg.com/ff/vista.js"]}(ie||(ie={}));var ee=o(3640);class se extends qi{constructor(t,i,e,s,n,r,h){super(),this.bg=t,this.Zt=i,this.xg=e,this.wg=s,this._g=n,this.Sg=r,this.Pg=h,this.Ag=new It.x,this.kg=t=>{if(!this.Cg(t))return;let i="";try{i=t.getError().getMessage()+"_"+t.getError().getErrorCode()+"_"+t.getError().getVastErrorCode()}catch(t){}this.If.next({type:qt.fI.AdError,payload:{errorMessage:zi.ImaError+"_"+i}})},this.Tg=t=>{const i=this.bg.AdEvent.Type;switch(t.type){case i.CLICK:this.If.next({type:qt.fI.AdClickThru,payload:{}});break;case i.LOADED:this.As(t);break;case i.IMPRESSION:const e={adsManager:this._g,adContainer:this.Mg,viewMode:this.Eg(this.Bg),adTag:this.wg};this.If.next({type:qt.fI.AdVideoStart}),this.If.next({type:qt.fI.AdImpression,payload:{imaMetadata:e}});break;case i.STARTED:this.If.next({type:qt.fI.AdStarted});break;case i.FIRST_QUARTILE:this.If.next({type:qt.fI.AdVideoFirstQuartile});break;case i.MIDPOINT:this.If.next({type:qt.fI.AdVideoMidpoint});break;case i.THIRD_QUARTILE:this.If.next({type:qt.fI.AdVideoThirdQuartile});break;case i.COMPLETE:this.If.next({type:qt.fI.AdVideoComplete}),this.If.next({type:qt.fI.AdStopped,payload:{shouldTrackPostBid:!0}});break;case i.ALL_ADS_COMPLETED:break;case i.DURATION_CHANGE:this.If.next({type:qt.fI.AdDurationChange});break;case i.PAUSED:this.If.next({type:qt.fI.AdPaused});break;case i.RESUMED:this.If.next({type:qt.fI.AdPlaying});break;case i.LINEAR_CHANGED:this.If.next({type:qt.fI.AdLinearChange});break;case i.SKIPPABLE_STATE_CHANGED:this.If.next({type:qt.fI.AdSkippableStateChange});break;case i.SKIPPED:this.If.next({type:qt.fI.AdSkipped});break;case i.VOLUME_CHANGED:this.If.next({type:qt.fI.AdVolumeChange});break;case i.USER_CLOSE:this.If.next({type:qt.fI.AdUserClose});break;case i.LOG:this.If.next({type:qt.fI.AdLog})}},this.Og()}get onCreativeReceived(){return this.Ag.asObservable()}initAd(t,i,e,s,n,r){this.Mg=r.slot,this.Rg=r.videoSlot,this.Bg=e||qt.zc.Normal;try{this._g.setVolume(0),this._g.init(t,i,this.Eg(this.Bg))}catch(t){this.If.next({type:qt.fI.AdError,payload:{errorMessage:zi.ImaManagerInit}})}}startAd(){try{this._g.start()}catch(t){this.If.next({type:qt.fI.AdError,payload:{errorMessage:zi.WrapperStartAdError+`_${t.message}`}})}}stopAd(t){this._g.stop(),this.If.next({type:qt.fI.AdStopped,payload:{shouldTrackPostBid:!0}})}resizeAd(t,i,e){this._g.resize(t,i,this.Eg(e))}pauseAd(){this._g.pause()}resumeAd(){this._g.resume(),this.Zt===St.M.Ios&&(0,e.UR)(this.Rg)}expandAd(){this._g.expand()}collapseAd(){this._g.collapse()}skipAd(){this._g.skip()}getAdRemainingTime(){return this._g.getRemainingTime()||0}getAdDuration(){return this.Dg?this.Dg.getDuration():0}getAdVolume(){return this._g.getVolume()}getAdMediaWidth(){return this.Dg?this.Dg.getVastMediaWidth():0}getAdMediaHeight(){return this.Dg?this.Dg.getVastMediaHeight():0}setAdVolume(t){this._g.setVolume(t)}getMediaFile(){return this.Dg?this.Dg.getMediaUrl():void 0}Og(){this.xg.addEventListener(this.bg.AdErrorEvent.Type.AD_ERROR,this.kg),this._g.addEventListener(this.bg.AdErrorEvent.Type.AD_ERROR,this.kg),Object.keys(this.bg.AdEvent.Type).forEach((t=>{this._g.addEventListener(this.bg.AdEvent.Type[t],this.Tg,!1)}))}jg(){this.xg.removeEventListener(this.bg.AdErrorEvent.Type.AD_ERROR,this.kg),this._g.removeEventListener(this.bg.AdErrorEvent.Type.AD_ERROR,this.kg),Object.keys(this.bg.AdEvent.Type).forEach((t=>{this._g.removeEventListener(this.bg.AdEvent.Type[t],this.Tg,!1)}))}Eg(t){return t===qt.zc.Fullscreen?this.bg.ViewMode.FULLSCREEN:this.bg.ViewMode.NORMAL}Fg(t){return ie.BANNED_IMA_ADS_ID.some((i=>i===t))}Cg(t){const i=t.getUserRequestContext();return!i||i.id===this.Sg.id}As(t){if(this.Dg=t.getAd(),this.Fg(this.Dg.getAdId()))return void this.If.next({type:qt.fI.AdError,payload:{errorMessage:zi.VpaidInvalid}});this.Ag.next(this.Dg.getCreativeId());let i=-1,e="";try{i=this.Dg.getSkipTimeOffset();const s=t.getAdData().clickThroughUrl;e=(0,dt.QM)(s)?s:void 0}catch(t){}(0,ee.A)(this.Pg,e).then((t=>{t?this.If.next({type:qt.fI.AdError,payload:{errorMessage:zi.DomainBlocked}}):this.If.next({type:qt.fI.AdLoaded,payload:{skipOffset:i}})}))}destroy(){try{this.jg(),setTimeout((()=>{this._g.destroy()}))}catch(t){}}}const ne={ImaObjectNotFound:zi.ImaObjectNotFound,ImaScriptFailure:zi.ImaScriptFailure},re="//imasdk.googleapis.com/js/sdkloader/ima3.js";class he{static preloadImaSdk(t){(0,e._w)(re,t)}static fetchImaSdk(t,i){return new Promise(((n,r)=>{const h=he.Vg(t);if(h)return void n(h);const o=i&&1===(0,bi.Vm)([95,5]);(0,e.dZ)({src:re},t.document.head,t,(()=>{const i=he.Vg(t);i?n(i):(o&&(0,s.n)({message:"AdManager_ImaIntegrator_no_image_object_found_after_loading_script",level:s.D.CRITICAL},{throttle:2,sendMaxLog:!1}),r(ne.ImaObjectNotFound))}),(()=>{r(ne.ImaScriptFailure)}),o,"AdManager_ImaIntegrator_unable_to_insert_ima_sdk_script")}))}static Vg(t){return t.google&&t.google.ima}}class oe extends te{constructor(t,i){super(t,i),this.Bm=t,this.settings=i,this.Dm=null,this.adMediaType="ima",this.adSourceType=l.ProtoAdsourceTypeEnum.Ima,this.$g=[],this.Dm=this.settings.imaAdSlotContainer,this.Ug=new se(this.settings.imaSdk,this.settings.os,this.settings.imaAdsLoader,this.settings.url,this.settings.imaAdsManager,this.settings.requestAdsContext,this.settings.adManagerLineItem.protoLineItem.publisherLineItemId)}initAd(t,i,e,s,n,r,h){try{super.initAd(t,i,e,s,n,r,h),this.settings.adManagerLineItem.protoLineItem.moatTrackingEnabled&&this.Hg(),this.$g.push(this.Ug.onVpaidEvent.subscribe((t=>{this.Wm(t)})),this.Ug.onCreativeReceived.subscribe((t=>{this.creativeId=t}))),this.Ug.initAd(t,i,e,s,n,{slot:this.Om,videoSlot:this.Lm})}catch(t){this.If.next({type:qt.fI.AdError,payload:{errorMessage:zi.AdaptorInitAdError+`_${t.message}`}})}}startAd(){try{super.startAd(),this.Ug.startAd()}catch(t){this.If.next({type:qt.fI.AdError,payload:{errorMessage:zi.AdaptorStartAdError+`_${t.message}`}})}}stopAd(t){try{super.stopAd(t),this.Ug.stopAd(t)}catch(t){this.yg("ImaBidAdaptor","stopAd",t)}}resizeAd(t,i,e){try{this.Ug.resizeAd(t,i,e)}catch(t){this.yg("ImaBidAdaptor","resizeAd",t)}}pauseAd(){try{this.Ug.pauseAd()}catch(t){this.yg("ImaBidAdaptor","pauseAd",t)}}resumeAd(){try{this.Ug.resumeAd()}catch(t){this.yg("ImaBidAdaptor","resumeAd",t)}}expandAd(){try{this.Ug.expandAd()}catch(t){this.yg("ImaBidAdaptor","expandAd",t)}}collapseAd(){try{this.Ug.collapseAd()}catch(t){this.yg("ImaBidAdaptor","collapseAd",t)}}skipAd(){try{super.skipAd(),this.Ug.skipAd()}catch(t){this.yg("ImaBidAdaptor","skipAd",t)}}getAdRemainingTime(){try{return this.Ug.getAdRemainingTime()}catch(t){return this.yg("ImaBidAdaptor","getAdRemainingTime",t),0}}getAdDuration(){try{return this.Ug&&this.Ug.getAdDuration()||this.settings.adManagerLineItem.protoLineItem.duration}catch(t){return this.yg("ImaBidAdaptor","getAdDuration",t),0}}getAdVolume(){try{return this.Ug.getAdVolume()}catch(t){return this.yg("ImaBidAdaptor","getAdVolume",t),0}}getAdMediaSize(){return{width:this.Ug.getAdMediaWidth(),height:this.Ug.getAdMediaHeight()}}setAdVolume(t){try{super.setAdVolume(t),this.Ug.setAdVolume(t)}catch(t){this.yg("ImaBidAdaptor","setAdVolume",t)}}get adVideoUrl(){return this.Ug.getMediaFile()}get declaredDurationInSeconds(){return this.Ug.getAdDuration()}ug(t){const i=super.ug(t);return i.payload.adSourceData.imaMetadata=t.payload.imaMetadata,i}mg(){return this.Dm}vg(){this.settings.adSlotContainerRecycler.recycleAdSlot(this.Dm)}Hg(){he.fetchImaSdk(this.settings.globalDomUtilsService.getGlobalClosestTop().topFrame,!1)}Ru(){try{super.Ru(),(0,jt.i)(this.$g),this.Ug.destroy()}catch(t){this.yg("ImaBidAdaptor","_destroy",t)}}}class ae{constructor(t,i,e,s,n,r,h){this.bg=t,this.xg=i,this.td=e,this.ed=s,this.wg=n,this.Rg=r,this.Fe=h,this.qg=new It.x,this.zg=new It.x,this.Wg={id:(0,bi.qs)()},this._g=null,this.kg=t=>{if(!this.Cg(t))return;switch(t.getError().getErrorCode()){case this.bg.AdError.ErrorCode.VAST_EMPTY_RESPONSE:this.Jg($i.ImaVastEmptyResponse);break;case this.bg.AdError.ErrorCode.VAST_WRAPPER_ERROR:case this.bg.AdError.ErrorCode.VAST_MALFORMED_RESPONSE:this.Jg($i.ImaInvalidResponse);break;default:this.Jg($i.ImaRequestException)}},this.Qg=t=>{this.Cg(t)&&(this._g=t.getAdsManager(this.Rg,{loadVideoTimeout:25*Ht.s_}),this.Yg(),this.qg.next({imaAdsManager:this._g,requestAdsContext:this.Wg}))},this.xg.addEventListener(this.bg.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,this.Qg),this.xg.addEventListener(this.bg.AdErrorEvent.Type.AD_ERROR,this.kg)}get onSuccess(){return this.qg.asObservable()}get onError(){return this.zg.asObservable()}loadAd(){const t=new this.bg.AdsRequest;t.adTagUrl=this.wg,t.linearAdSlotWidth=t.nonLinearAdSlotWidth=this.td,t.linearAdSlotHeight=t.nonLinearAdSlotHeight=this.ed,t.pageUrl=this.Fe,this.xg.requestAds(t,this.Wg)}Jg(t){this.zg.next(t)}Yg(){this.xg.removeEventListener(this.bg.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,this.Qg),this.xg.removeEventListener(this.bg.AdErrorEvent.Type.AD_ERROR,this.kg)}Cg(t){const i=t.getUserRequestContext();return!i||i.id===this.Wg.id}destroy(){var t;try{this.Yg(),null===(t=this._g)||void 0===t||t.destroy()}catch(t){}}}var ce;!function(t){t[t.Transient=0]="Transient",t[t.Singleton=1]="Singleton",t[t.ResolutionScoped=2]="ResolutionScoped",t[t.ContainerScoped=3]="ContainerScoped"}(ce||(ce={}));const le=ce;var ue=function(t,i){return ue=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var e in i)i.hasOwnProperty(e)&&(t[e]=i[e])},ue(t,i)};function de(t,i){function e(){this.constructor=t}ue(t,i),t.prototype=null===i?Object.create(i):(e.prototype=i.prototype,new e)}function pe(t){var i="function"==typeof Symbol&&Symbol.iterator,e=i&&t[i],s=0;if(e)return e.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&s>=t.length&&(t=void 0),{value:t&&t[s++],done:!t}}};throw new TypeError(i?"Object is not iterable.":"Symbol.iterator is not defined.")}function fe(t,i){var e="function"==typeof Symbol&&t[Symbol.iterator];if(!e)return t;var s,n,r=e.call(t),h=[];try{for(;(void 0===i||i-- >0)&&!(s=r.next()).done;)h.push(s.value)}catch(t){n={error:t}}finally{try{s&&!s.done&&(e=r.return)&&e.call(r)}finally{if(n)throw n.error}}return h}function me(){for(var t=[],i=0;i<arguments.length;i++)t=t.concat(fe(arguments[i]));return t}function ge(t){return!!t.useClass}function ve(t){return!!t.useFactory}var ye=function(){function t(t){this.wrap=t,this.reflectMethods=["get","getPrototypeOf","setPrototypeOf","getOwnPropertyDescriptor","defineProperty","has","set","deleteProperty","apply","construct","ownKeys"]}return t.prototype.createProxy=function(t){var i,e=this,s=!1;return new Proxy({},this.createHandler((function(){return s||(i=t(e.wrap()),s=!0),i})))},t.prototype.createHandler=function(t){var i={};return this.reflectMethods.forEach((function(e){i[e]=function(){for(var i=[],s=0;s<arguments.length;s++)i[s]=arguments[s];i[0]=t();var n=Reflect[e];return n.apply(void 0,me(i))}})),i},t}();function be(t){return"string"==typeof t||"symbol"==typeof t}function xe(t){return"object"==typeof t&&"token"in t&&"transform"in t}function we(t){return!!t.useToken}function _e(t){return null!=t.useValue}const Se=function(){function t(){this.Xg=new Map}return t.prototype.entries=function(){return this.Xg.entries()},t.prototype.getAll=function(t){return this.ensure(t),this.Xg.get(t)},t.prototype.get=function(t){this.ensure(t);var i=this.Xg.get(t);return i[i.length-1]||null},t.prototype.set=function(t,i){this.ensure(t),this.Xg.get(t).push(i)},t.prototype.setAll=function(t,i){this.Xg.set(t,i)},t.prototype.has=function(t){return this.ensure(t),this.Xg.get(t).length>0},t.prototype.clear=function(){this.Xg.clear()},t.prototype.ensure=function(t){this.Xg.has(t)||this.Xg.set(t,[])},t}();const Pe=function(t){function i(){return null!==t&&t.apply(this,arguments)||this}return de(i,t),i}(Se);const Ae=function(){this.scopedResolutions=new Map};function Ie(t,i,e){var s,n,r=fe(t.toString().match(/constructor\(([\w, ]+)\)/)||[],2)[1],h=function(t,i){return null===t?"at position #"+i:'"'+t.split(",")[i].trim()+'" at position #'+i}(void 0===r?null:r,i);return s="Cannot inject the dependency "+h+' of "'+t.name+'" constructor. Reason:',void 0===n&&(n="    "),me([s],e.message.split("\n").map((function(t){return n+t}))).join("\n")}var ke=function(t){function i(){return null!==t&&t.apply(this,arguments)||this}return de(i,t),i}(Se),Ce=function(t){function i(){return null!==t&&t.apply(this,arguments)||this}return de(i,t),i}(Se);const Te=function(){this.preResolution=new ke,this.postResolution=new Ce};var Me=new Map,Ee=function(){function t(t){this.parent=t,this.Zg=new Pe,this.interceptors=new Te}return t.prototype.register=function(t,i,e){var s;if(void 0===e&&(e={lifecycle:le.Transient}),s=function(t){return ge(t)||_e(t)||we(t)||ve(t)}(i)?i:{useClass:i},we(s))for(var n=[t],r=s;null!=r;){var h=r.useToken;if(n.includes(h))throw new Error("Token registration cycle detected! "+me(n,[h]).join(" -> "));n.push(h);var o=this.Zg.get(h);r=o&&we(o.provider)?o.provider:null}if((e.lifecycle===le.Singleton||e.lifecycle==le.ContainerScoped||e.lifecycle==le.ResolutionScoped)&&(_e(s)||ve(s)))throw new Error('Cannot use lifecycle "'+le[e.lifecycle]+'" with ValueProviders or FactoryProviders');return this.Zg.set(t,{provider:s,options:e}),this},t.prototype.registerType=function(t,i){return be(i)?this.register(t,{useToken:i}):this.register(t,{useClass:i})},t.prototype.registerInstance=function(t,i){return this.register(t,{useValue:i})},t.prototype.registerSingleton=function(t,i){if(be(t)){if(be(i))return this.register(t,{useToken:i},{lifecycle:le.Singleton});if(i)return this.register(t,{useClass:i},{lifecycle:le.Singleton});throw new Error('Cannot register a type name as a singleton without a "to" token')}var e=t;return i&&!be(i)&&(e=i),this.register(t,{useClass:e},{lifecycle:le.Singleton})},t.prototype.resolve=function(t,i){void 0===i&&(i=new Ae);var e=this.getRegistration(t);if(!e&&be(t))throw new Error('Attempted to resolve unregistered dependency token: "'+t.toString()+'"');if(this.executePreResolutionInterceptor(t,"Single"),e){var s=this.resolveRegistration(e,i);return this.executePostResolutionInterceptor(t,s,"Single"),s}if(function(t){return"function"==typeof t||t instanceof ye}(t)){s=this.construct(t,i);return this.executePostResolutionInterceptor(t,s,"Single"),s}throw new Error("Attempted to construct an undefined constructor. Could mean a circular dependency problem. Try using `delay` function.")},t.prototype.executePreResolutionInterceptor=function(t,i){var e,s;if(this.interceptors.preResolution.has(t)){var n=[];try{for(var r=pe(this.interceptors.preResolution.getAll(t)),h=r.next();!h.done;h=r.next()){var o=h.value;"Once"!=o.options.frequency&&n.push(o),o.callback(t,i)}}catch(t){e={error:t}}finally{try{h&&!h.done&&(s=r.return)&&s.call(r)}finally{if(e)throw e.error}}this.interceptors.preResolution.setAll(t,n)}},t.prototype.executePostResolutionInterceptor=function(t,i,e){var s,n;if(this.interceptors.postResolution.has(t)){var r=[];try{for(var h=pe(this.interceptors.postResolution.getAll(t)),o=h.next();!o.done;o=h.next()){var a=o.value;"Once"!=a.options.frequency&&r.push(a),a.callback(t,i,e)}}catch(t){s={error:t}}finally{try{o&&!o.done&&(n=h.return)&&n.call(h)}finally{if(s)throw s.error}}this.interceptors.postResolution.setAll(t,r)}},t.prototype.resolveRegistration=function(t,i){if(t.options.lifecycle===le.ResolutionScoped&&i.scopedResolutions.has(t))return i.scopedResolutions.get(t);var e,s=t.options.lifecycle===le.Singleton,n=t.options.lifecycle===le.ContainerScoped,r=s||n;return e=_e(t.provider)?t.provider.useValue:we(t.provider)?r?t.instance||(t.instance=this.resolve(t.provider.useToken,i)):this.resolve(t.provider.useToken,i):ge(t.provider)?r?t.instance||(t.instance=this.construct(t.provider.useClass,i)):this.construct(t.provider.useClass,i):ve(t.provider)?t.provider.useFactory(this):this.construct(t.provider,i),t.options.lifecycle===le.ResolutionScoped&&i.scopedResolutions.set(t,e),e},t.prototype.resolveAll=function(t,i){var e=this;void 0===i&&(i=new Ae);var s=this.getAllRegistrations(t);if(!s&&be(t))throw new Error('Attempted to resolve unregistered dependency token: "'+t.toString()+'"');if(this.executePreResolutionInterceptor(t,"All"),s){var n=s.map((function(t){return e.resolveRegistration(t,i)}));return this.executePostResolutionInterceptor(t,n,"All"),n}var r=[this.construct(t,i)];return this.executePostResolutionInterceptor(t,r,"All"),r},t.prototype.isRegistered=function(t,i){return void 0===i&&(i=!1),this.Zg.has(t)||i&&(this.parent||!1)&&this.parent.isRegistered(t,!0)},t.prototype.reset=function(){this.Zg.clear(),this.interceptors.preResolution.clear(),this.interceptors.postResolution.clear()},t.prototype.clearInstances=function(){var t,i;try{for(var e=pe(this.Zg.entries()),s=e.next();!s.done;s=e.next()){var n=fe(s.value,2),r=n[0],h=n[1];this.Zg.setAll(r,h.filter((function(t){return!_e(t.provider)})).map((function(t){return t.instance=void 0,t})))}}catch(i){t={error:i}}finally{try{s&&!s.done&&(i=e.return)&&i.call(e)}finally{if(t)throw t.error}}},t.prototype.createChildContainer=function(){var i,e,s=new t(this);try{for(var n=pe(this.Zg.entries()),r=n.next();!r.done;r=n.next()){var h=fe(r.value,2),o=h[0],a=h[1];a.some((function(t){return t.options.lifecycle===le.ContainerScoped}))&&s.Zg.setAll(o,a.map((function(t){return t.options.lifecycle===le.ContainerScoped?{provider:t.provider,options:t.options}:t})))}}catch(t){i={error:t}}finally{try{r&&!r.done&&(e=n.return)&&e.call(n)}finally{if(i)throw i.error}}return s},t.prototype.beforeResolution=function(t,i,e){void 0===e&&(e={frequency:"Always"}),this.interceptors.preResolution.set(t,{callback:i,options:e})},t.prototype.afterResolution=function(t,i,e){void 0===e&&(e={frequency:"Always"}),this.interceptors.postResolution.set(t,{callback:i,options:e})},t.prototype.getRegistration=function(t){return this.isRegistered(t)?this.Zg.get(t):this.parent?this.parent.getRegistration(t):null},t.prototype.getAllRegistrations=function(t){return this.isRegistered(t)?this.Zg.getAll(t):this.parent?this.parent.getAllRegistrations(t):null},t.prototype.construct=function(t,i){var e=this;if(t instanceof ye)return t.createProxy((function(t){return e.resolve(t,i)}));var s=Me.get(t);if(!s||0===s.length){if(0===t.length)return new t;throw new Error('TypeInfo not known for "'+t.name+'"')}var n=s.map(this.resolveParams(i,t));return new(t.bind.apply(t,me([void 0],n)))},t.prototype.resolveParams=function(t,i){var e=this;return function(s,n){var r,h,o,a;try{return"object"==typeof(a=s)&&"token"in a&&"multiple"in a?xe(s)?s.multiple?(r=e.resolve(s.transform)).transform.apply(r,me([e.resolveAll(s.token)],s.transformArgs)):(h=e.resolve(s.transform)).transform.apply(h,me([e.resolve(s.token,t)],s.transformArgs)):s.multiple?e.resolveAll(s.token):e.resolve(s.token,t):xe(s)?(o=e.resolve(s.transform,t)).transform.apply(o,me([e.resolve(s.token,t)],s.transformArgs)):e.resolve(s,t)}catch(t){throw new Error(Ie(i,n,t))}}},t}(),Be=new Ee;var Oe="injectionTokens";const Le=function(){return function(t){Me.set(t,function(t){var i=Reflect.getMetadata("design:paramtypes",t)||[],e=Reflect.getOwnMetadata(Oe,t)||{};return Object.keys(e).forEach((function(t){i[+t]=e[t]})),i}(t))}};const Re=function(){return function(t){Le()(t),Be.registerSingleton(t)}};if("undefined"==typeof Reflect||!Reflect.getMetadata)throw new Error("tsyringe requires a reflect polyfill. Please add 'import \"reflect-metadata\"' to the top of your entry point.");class De{constructor(t=Be){this.Kg=t}static getInstance(){return this.tv||(this.tv=new De),this.tv}static getGlobalContainer(){return this.getInstance().globalContainer}get globalContainer(){return this.Kg}}var je=o(655),Fe=o(5720),Ve=function(t){function i(i,e){return t.call(this)||this}return(0,je.ZT)(i,t),i.prototype.schedule=function(t,i){return void 0===i&&(i=0),this},i}(Fe.w0),$e={setInterval:function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];var e=$e.delegate;return((null==e?void 0:e.setInterval)||setInterval).apply(void 0,(0,je.ev)([],(0,je.CR)(t)))},clearInterval:function(t){var i=$e.delegate;return((null==i?void 0:i.clearInterval)||clearInterval)(t)},delegate:void 0},Ne=o(3699),Ue=function(t){function i(i,e){var s=t.call(this,i,e)||this;return s.scheduler=i,s.work=e,s.pending=!1,s}return(0,je.ZT)(i,t),i.prototype.schedule=function(t,i){if(void 0===i&&(i=0),this.closed)return this;this.state=t;var e=this.id,s=this.scheduler;return null!=e&&(this.id=this.recycleAsyncId(s,e,i)),this.pending=!0,this.delay=i,this.id=this.id||this.requestAsyncId(s,this.id,i),this},i.prototype.requestAsyncId=function(t,i,e){return void 0===e&&(e=0),$e.setInterval(t.flush.bind(t,this),e)},i.prototype.recycleAsyncId=function(t,i,e){if(void 0===e&&(e=0),null!=e&&this.delay===e&&!1===this.pending)return i;$e.clearInterval(i)},i.prototype.execute=function(t,i){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var e=this.iv(t,i);if(e)return e;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},i.prototype.iv=function(t,i){var e,s=!1;try{this.work(t)}catch(t){s=!0,e=t||new Error("Scheduled action threw falsy error")}if(s)return this.unsubscribe(),e},i.prototype.unsubscribe=function(){if(!this.closed){var i=this.id,e=this.scheduler,s=e.actions;this.work=this.state=this.scheduler=null,this.pending=!1,(0,Ne.P)(s,this),null!=i&&(this.id=this.recycleAsyncId(e,i,null)),this.delay=null,t.prototype.unsubscribe.call(this)}},i}(Ve),He={now:function(){return(He.delegate||Date).now()},delegate:void 0},qe=function(){function t(i,e){void 0===e&&(e=t.now),this.schedulerActionCtor=i,this.now=e}return t.prototype.schedule=function(t,i,e){return void 0===i&&(i=0),new this.schedulerActionCtor(this,t).schedule(e,i)},t.now=He.now,t}(),ze=new(function(t){function i(i,e){void 0===e&&(e=qe.now);var s=t.call(this,i,e)||this;return s.actions=[],s.sv=!1,s.nv=void 0,s}return(0,je.ZT)(i,t),i.prototype.flush=function(t){var i=this.actions;if(this.sv)i.push(t);else{var e;this.sv=!0;do{if(e=t.execute(t.state,t.delay))break}while(t=i.shift());if(this.sv=!1,e){for(;t=i.shift();)t.unsubscribe();throw e}}},i}(qe))(Ue),We=ze,Ge=o(1480),Je=o(8474);function Qe(t){return t&&(0,Je.m)(t.schedule)}function Ye(t,i,e){void 0===t&&(t=0),void 0===e&&(e=We);var s=-1;return null!=i&&(Qe(i)?e=i:s=i),new Ge.y((function(i){var n,r=(n=t)instanceof Date&&!isNaN(n)?+t-e.now():t;r<0&&(r=0);var h=0;return e.schedule((function(){i.closed||(i.next(h++),0<=s?this.schedule(void 0,s):i.complete())}),r)}))}var Xe,Ze=function(t,i,e,s){var n,r=arguments.length,h=r<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)h=Reflect.decorate(t,i,e,s);else for(var o=t.length-1;o>=0;o--)(n=t[o])&&(h=(r<3?n(h):r>3?n(i,e,h):n(i,e))||h);return r>3&&h&&Object.defineProperty(i,e,h),h},Ke=function(t,i){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,i)};let ts=Xe=class{constructor(){var t,i;this.rv=new Map,this.hv=0,this.ov=(void 0===(t=Xe.TIME_BETWEEN_TICKS)&&(t=0),void 0===i&&(i=ze),t<0&&(t=0),Ye(t,t,i)),this.ov.subscribe((()=>this.av()))}setTimeout(t,i=0){return this.lv(t,i,!0)}clearTimeout(t){this.rv.delete(t)}setInterval(t,i=0){return this.lv(t,i,!1)}clearInterval(t){this.rv.delete(t)}uv(t){try{t.callback()}catch(t){(0,s.n)({message:"TimerService_error",callStack:t.stack,exception:t.message,level:s.D.INFO},{throttle:1})}}av(){const t=(new Date).getTime(),i=[];for(const[e,s]of this.rv)t-s.startTime<s.duration*(s.intervalTimesCalled+1)||(this.uv(s),s.isTimeout?i.push(e):s.intervalTimesCalled++);for(const t of i)this.rv.delete(t)}lv(t,i,e){const s=++this.hv;return this.rv.set(s,{startTime:(new Date).getTime(),isTimeout:e,callback:t,duration:i,intervalTimesCalled:0}),s}};ts.TIME_BETWEEN_TICKS=100,ts=Xe=Ze([Re(),Ke("design:paramtypes",[])],ts);class is{constructor(t){this.settings=t,this.dv=!1,this.fv=[],this.metrics={created:(new Date).getTime()}}fetchBid(){this.metrics.fetchStart=(new Date).getTime(),this.mv=this.settings.adSlotContainerRecycler.requestAdSlotIma(this.settings.adContainer);const t=new Promise(((t,i)=>{setTimeout((()=>{i($i.ImaTimeout)}),25e3)})),i=this.gv(this.mv);return Promise.race([i,t]).then((t=>(this.metrics.fetchEnd=(new Date).getTime(),this.dv=!0,this.vv&&(0,jt.i)(this.fv),t))).catch((t=>{throw this.metrics.fetchEnd=(new Date).getTime(),this.dv=!0,this.vv&&((0,jt.i)(this.fv),this.vv.destroy(),this.settings.adSlotContainerRecycler.recycleAdSlot(this.mv)),t}))}gv(t){return t.fetchImaDependencies().then((t=>(this.yv=t,this.bv(t)))).then((t=>this.xv(t))).catch((t=>{throw(0,dt.$K)(t)?t:$i.ImaRequestException}))}bv(t){return this.dv?Promise.reject():new Promise(((i,e)=>{const s=this.wv();this.vv=new ae(t.imaSdk,t.imaAdsLoader,s.width,s.height,this.settings.url,this.mv.videoSlot,this.settings.pageUrl),this.fv.push(this.vv.onSuccess.subscribe((t=>{i(t)})),this.vv.onError.subscribe((t=>{e(t)}))),this.vv.loadAd()}))}wv(){return this.settings.callingState.adContainerState.get(this.settings.adManagerLineItem.protoLineItem.adType)}xv(t){const i=De.getGlobalContainer().resolve(ts);return new oe(i,{id:this.settings.id,adManagerLineItem:this.settings.adManagerLineItem,trackers:this.settings.trackersInformation,url:this.settings.url,requestMetadata:this.settings.requestMetadata,callingState:this.settings.callingState,adContainer:this.settings.adContainer,globalDomUtilsService:this.settings.globalDomUtilsService,viewabilityService:this.settings.viewabilityService,cpm:this.settings.cpm,obfuscatedPrice:this.settings.obfuscatedPrice,adEnforcer:this.settings.adEnforcer,successRate:this.settings.successRate,os:this.settings.os,adSlotContainerRecycler:this.settings.adSlotContainerRecycler,externalCreativeId:this.settings.creativeId,imaSdk:this.yv.imaSdk,imaAdsLoader:this.yv.imaAdsLoader,imaAdsManager:t.imaAdsManager,requestAdsContext:t.requestAdsContext,imaAdSlotContainer:this.mv,bidSlotId:this.settings.bidSlotId,pageUrl:this.settings.pageUrl,urlSuffixerService:this.settings.urlSuffixerService})}}var es,ss,ns,rs;!function(t){t[t.Javascript=0]="Javascript",t[t.Video=1]="Video"}(es||(es={})),function(t){function i(t){return/^\s*$/.test(t)?null:/^(?:true|false)$/i.test(t)?"true"===t.toLowerCase():isFinite(t)?parseFloat(t):isFinite(Date.parse(t))?new Date(t):"string"==typeof t?t.trim():t}t.JXONTree=function t(e){let s=0,n="";if(this.keyAttributes||(this.keyAttributes={}),e.hasChildNodes()){for(let i,s,r,h=0;h<e.childNodes.length;h++)i=e.childNodes.item(h),(i.nodeType-1|1)===Node.TEXT_NODE?n+=i.nodeType===Node.TEXT_NODE?i.nodeValue.trim():i.nodeValue:1!==i.nodeType||i.prefix||(s=i.nodeName.toLowerCase(),r=new t(i),this.hasOwnProperty(s)?(this[s].constructor!==Array&&(this[s]=[this[s]]),this[s].push(r)):this[s]=r);this.keyValue=n?i(n):null}if(void 0===e.hasAttributes?e.attributes.length>0:e.hasAttributes()){let t;for(;s<e.attributes.length;s++)t=e.attributes.item(s),this.keyAttributes[t.name.toLowerCase()]=i(t.value.trim())}},t.getKeyValue=function(t){if(t&&t.keyValue)return t.keyValue},t.decodeXMLText=function(t){if("string"==typeof t)return t.replace(/&apos;/g,"'").replace(/&quot;/g,'"').replace(/&gt;/g,">").replace(/&lt;/g,"<").replace(/&amp;/g,"&")}}(ss||(ss={}));class hs{constructor(t){this._v=["text/javascript","text/javascript1.0","text/javascript1.2","text/javascript1.4","text/jscript","application/javascript","application/x-javascript","text/ecmascript","text/ecmascript1.0","text/ecmascript1.2","text/ecmascript1.4","text/livescript","application/ecmascript","application/x-ecmascript"],this.Sv="VPAID",this.delivery=void 0,this.type=void 0,this.width=0,this.height=0,this.codec=void 0,this.id=void 0,this.bitrate=void 0,this.minBitrate=void 0,this.maxBitrate=void 0,this.scalable=void 0,this.maintainAspectRatio=void 0,this.apiFramework=void 0,this.src=void 0,this.delivery=t.keyAttributes.delivery,this.type=t.keyAttributes.type,this.width=t.keyAttributes.width,this.height=t.keyAttributes.height,this.codec=t.keyAttributes.codec,this.id=t.keyAttributes.id,this.bitrate=t.keyAttributes.bitrate,this.minBitrate=t.keyAttributes.minbitrate,this.maxBitrate=t.keyAttributes.maxbitrate,this.scalable=t.keyAttributes.scalable,this.maintainAspectRatio=t.keyAttributes.maintainaspectratio,this.apiFramework=t.keyAttributes.apiframework,this.src=ss.getKeyValue(t)}isSupported(){return!("application/x-shockwave-flash"===this.type||"video/x-flv"===this.type)}getMediaFileType(){return this.apiFramework===this.Sv||(0,f.d3)(this.type,this._v)?es.Javascript:es.Video}}class os{constructor(t){this.clickThrough=void 0,this.clickTrackings=[],this.customClicks=[],this.clickThrough=ss.getKeyValue(t.clickthrough),this.clickTrackings=this.Pv((0,f.qo)(t.clicktracking)),this.customClicks=this.Pv((0,f.qo)(t.customclick))}Pv(t){const i=[];return void 0!==t[0]&&t.forEach((t=>{i.push(ss.getKeyValue(t))})),i}}class as{constructor(t){this.duration=void 0,this.mediaFiles=[],this.trackingEvents=[],this.skipoffset=void 0,this.videoClicks=void 0,this.duration=(0,ut.pP)(ss.getKeyValue(t.duration)),this.skipoffset=(0,ut.QI)(t.keyAttributes.skipoffset,this.duration),t.mediafiles&&(this.mediaFiles=this.Iv((0,f.qo)(t.mediafiles.mediafile))),t.trackingevents&&(this.trackingEvents=ns.parseTrackingEvents((0,f.qo)(t.trackingevents.tracking),this.duration)),t.videoclicks&&(this.videoClicks=new os(t.videoclicks)),t.adparameters&&(this.adParameters=ss.getKeyValue(t.adparameters),t.adparameters["@xmlEncoded"]&&(this.adParameters=ss.decodeXMLText(this.adParameters)))}Iv(t){const i=[];return void 0!==t[0]&&t.forEach((t=>{const e=new hs(t);e.isSupported()&&i.push(e)})),i}isSupported(){return!0}}class cs{constructor(t){var i;this.minSuggestedDuration=void 0,this.staticResource={},this.htmlResource={},this.iframeResource={},this.nonLinearClickTracking={},this.id=t.keyAttributes.id,this.width=t.keyAttributes.width,this.height=t.keyAttributes.height,this.expandedWidth=t.keyAttributes.expandedheight,this.expandedHeight=t.keyAttributes.expandedwidth,this.scalable=t.keyAttributes.scalable,this.maintainAspectRatio=t.keyAttributes.maintainaspectratio,this.apiFramework=t.keyAttributes.apiframework,this.minSuggestedDuration=(0,ut.pP)(t.keyAttributes.minsuggestedduration),this.nonLinearClickThrough=null===(i=t.nonlinearclickthrough)||void 0===i?void 0:i.keyValue,t.nonlinearclicktracking&&(this.nonLinearClickTracking.id=t.nonlinearclicktracking.keyAttributes.id,this.nonLinearClickTracking.uri=t.nonlinearclicktracking.keyValue),t.staticresource&&(this.staticResource.creativeType=t.staticresource.keyAttributes.creativetype,this.staticResource.uri=t.staticresource.keyValue),t.iframeresource&&(this.iframeResource.uri=t.iframeresource.keyValue),t.htmlresource&&(this.htmlResource.uri=t.htmlresource.keyValue)}isSupported(){return"VPAID"===this.apiFramework?((0,s.n)({message:"AdManager_NonLinearAd_VPAID_found",level:s.D.INFO}),!1):this.width&&this.height?!(!this.staticResource.creativeType||!this.staticResource.uri)||(this.htmlResource.uri&&(0,s.n)({message:"AdManager_NonLinearAd_htmlResource_found",level:s.D.INFO}),this.iframeResource.uri&&(0,s.n)({message:"AdManager_NonLinearAd_iframeResource_found",level:s.D.INFO}),!1):((0,s.n)({message:"AdManager_NonLinearAd_no_dimensions",level:s.D.INFO}),!1)}}class ls{constructor(t){this.nonLinearAdList=[],this.trackingEvents=[],t.nonlinear&&(this.nonLinearAdList=this.kv((0,f.qo)(t.nonlinear))),t.trackingevents&&(this.trackingEvents=ns.parseTrackingEvents((0,f.qo)(t.trackingevents.tracking))),t.adparameters&&(this.adParameters=ss.getKeyValue(t.adparameters),t.adparameters["@xmlEncoded"]&&(this.adParameters=ss.decodeXMLText(this.adParameters)))}isSupported(){return!0}kv(t){const i=[];return t.forEach((t=>{const e=new cs(t);e.isSupported()&&i.push(e)})),i}}class us{constructor(t){if(this.id=void 0,this.sequence=void 0,this.adId=void 0,this.linear=void 0,this.nonLinear=void 0,this.id=t.keyAttributes.id,this.sequence=t.keyAttributes.sequence,this.adId=t.keyAttributes.adid,t.linear)try{this.linear=new as(t.linear)}catch(t){(0,s.n)({callStack:t.stack,level:s.D.WARN,exception:t.message,message:"Creative_Linear"})}if(t.nonlinearads)try{this.nonLinear=new ls(t.nonlinearads)}catch(t){(0,s.n)({callStack:t.stack,level:s.D.WARN,exception:t.message,message:"Creative_NonLinear"})}}isSupported(){return!0}}class ds{constructor(t,i){this.name=t.keyAttributes.event,this.uri=ss.getKeyValue(t),"progress"===this.name&&(this.offset=(0,ut.QI)(t.keyAttributes.offset,i))}}!function(t){function i(t){const i=[];return void 0!==t[0]&&t.forEach((t=>{i.push(ss.getKeyValue(t))})),i}t.parseImpressions=function(t){return i(t)},t.parseCretives=function(t){const i=[];return t.forEach((t=>{i.push(new us(t))})),i},t.parseErrors=function(t){return i(t)},t.parseTrackingEvents=function(t,i){const e=[];return void 0!==t[0]&&t.forEach((t=>{e.push(new ds(t,i))})),e}}(ns||(ns={}));class ps{constructor(t){var i;this.description=void 0,this.advertiser=void 0,this.surveys=void 0,this.errors=void 0,this.pricing=void 0,this.extensions=void 0,this.adTitle=ss.getKeyValue(t.adtitle),this.adSystem=ss.getKeyValue(t.adsystem),this.impressions=ns.parseImpressions((0,f.qo)(t.impression)),this.creatives=(null===(i=t.creatives)||void 0===i?void 0:i.creative)?ns.parseCretives((0,f.qo)(t.creatives.creative)):[],this.description=ss.getKeyValue(t.description),this.advertiser=ss.getKeyValue(t.advertiser),this.surveys=ss.getKeyValue(t.survey),this.errors=ns.parseErrors((0,f.qo)(t.error)),this.pricing=ss.getKeyValue(t.pricing),this.extensions=ss.getKeyValue(t.extensions)}isSupported(){return!0}}class fs{constructor(t){var i;this.adSystem=void 0,this.impressions=[],this.VASTAdTagURI=void 0,this.creatives=[],this.errors=void 0,this.extensions=void 0,this.fallowAdditionalWrappers=void 0,this.allowMultipleAds=void 0,this.fallbackOnNoAd=void 0,this.adSystem=ss.getKeyValue(t.adsystem),this.impressions=ns.parseImpressions((0,f.qo)(t.impression)),this.VASTAdTagURI=ss.getKeyValue(t.vastadtaguri),this.creatives=(null===(i=t.creatives)||void 0===i?void 0:i.creative)?ns.parseCretives((0,f.qo)(t.creatives.creative)):[],this.errors=ns.parseErrors((0,f.qo)(t.error)),this.extensions=t.extensions,this.fallowAdditionalWrappers=!t.keyAttributes.followadditionalwrappers||t.keyAttributes.followadditionalwrappers,this.allowMultipleAds=t.keyAttributes.allowmultipleads,this.fallbackOnNoAd=t.keyAttributes.fallbackonnoad}}class ms{constructor(t){Array.isArray(t)?this.Cv(t):this.Tv(t)}isSupported(){return!0}Tv(t){this.id=t.keyAttributes.id,this.sequence=t.keyAttributes.sequence,t.inline?this.inLine=new ps(t.inline):t.wrapper&&(this.wrapper=new fs(t.wrapper))}Cv(t){const i=t.filter((t=>{const i=this.Mv(t).filter((t=>t.linear));return!!(0,f.BZ)(i)}));(0,f.BZ)(i)&&this.Tv(i[0])}Mv(t){return t.inline?(0,f.qo)(t.inline.creatives.creative):t.wrapper?(0,f.qo)(t.wrapper.creatives.creative):[]}}class gs{constructor(t=2){this.Ev=t}parseVastXml(t){try{if(!this.Bv(t))return{error:!0,errorReason:$i.XmlInvalidString};if(this.Ov(t))return{error:!0,errorReason:$i.XmlInvalidAd};const i=(new DOMParser).parseFromString(t,"application/xml"),e=new ss.JXONTree(i.documentElement);if(!this.Rv(e,this.Ev))return{error:!0,errorReason:$i.XmlInvalidTree};const s=new ms(e.ad);return this.Dv(s)?{error:!1,result:s}:{error:!0,errorReason:$i.XmlInvalidAd}}catch(t){return{error:!0,errorReason:$i.XmlParseGeneral}}}Bv(t){return(0,dt.QM)(t)}Ov(t){return ie.KEYWORDS_FOR_BANNED_VAST.some((i=>t.includes(i)))}Rv(t,i){if(!t.ad)return!1;const e=parseInt(t.keyAttributes.version,10);return!(e&&e<i)}Dv(t){const i=t.wrapper,e=t.inLine;if(!e&&!i)return!1;if(i&&!i.VASTAdTagURI)return!1;if(!i){const t=[...e.creatives].filter((t=>{var i;return null===(i=null==t?void 0:t.linear)||void 0===i?void 0:i.mediaFiles.length})),i=[...e.creatives].filter((t=>{var i;return null===(i=null==t?void 0:t.nonLinear)||void 0===i?void 0:i.nonLinearAdList.length}));if(!(0,f.BZ)(t)&&!(0,f.BZ)(i))return!1}return!0}}class vs{constructor(t){this.mediaFiles=[],this.nonLinearFiles=[],this.adTitle=void 0,this.adParameters=void 0,this.linearClickThrough=void 0,this.creativeId=void 0,t.forEach((t=>{t.inLine?(this.adTitle=t.inLine.adTitle,this.bm(t.inLine.creatives)):t.wrapper&&this.bm(t.wrapper.creatives)}))}xm(t){this.duration=t.duration,this.jv(t.mediaFiles),this.Fv(t.skipoffset),this.Vv(t.adParameters),t.videoClicks&&t.videoClicks.clickThrough&&this.$v(t.videoClicks.clickThrough)}Nv(t){this.Uv(t.nonLinearAdList),this.Vv(t.adParameters)}Uv(t){this.nonLinearFiles=[...this.nonLinearFiles,...t]}Vv(t){this.adParameters=t}Fv(t){this.skipoffset=t}jv(t){this.mediaFiles=[...this.mediaFiles,...t]}$v(t){this.linearClickThrough=t}bm(t){t.forEach((t=>{this.creativeId=t.id,t.linear&&this.xm(t.linear),t.nonLinear&&this.Nv(t.nonLinear)}))}}!function(t){t[t.FirstQuartile=0]="FirstQuartile",t[t.SecondQuartile=1]="SecondQuartile",t[t.ThirdQuartile=2]="ThirdQuartile",t[t.FourthQuartile=3]="FourthQuartile"}(rs||(rs={}));var ys,bs,xs,ws;!function(t){t.absolute="absolute",t.relative="relative"}(ys||(ys={})),function(t){t.auto="auto",t.all="all"}(bs||(bs={})),function(t){t.errorIframe="Error creating iframe"}(xs||(xs={}));class _s{constructor(t,i,e){this.yr=t,this.aa=i,this.Ks=e}Hv(t,i,e){let s=!1;return n=>{n.contentWindow&&!s&&(s=!0,this.qv(n,this.zv(t,i),e))}}Wv(t,i,e,s,n,r,h,o,a,c=!0){return this.Gv(t,this.Hv(i,e,s),n,r,h,o,a,c)}Gv(t,i,e=ys.absolute,s=bs.auto,n,r,h,o=!0){const a=this.yr.createElement("iframe",r);let c="100%",l="100%";return(null==h?void 0:h.scalable)?(c=h.scalable.maxHeightPercent+"%",l=h.scalable.maxWidthPercent+"%"):(null==h?void 0:h.width)&&(null==h?void 0:h.height)&&(c=h.height+"px",l=h.width+"px"),a.allow="autoplay",a.src="javascript:false",a.srcdoc="",a.width=l,a.height=c,a.style.position=e,a.style.left="0",a.style.top="0",a.style.margin="0px",a.style.padding="0px",a.style.border="0px",a.style.width=l,a.style.height=c,a.style.pointerEvents=s,o||(a.style.display="none"),a.setAttribute("SCROLLING","NO"),null==n||n.forEach((t=>{a.setAttribute(t.key,t.value)})),a.onload=()=>{i(a)},t.appendChild(a),i(a),a}qv(t,i,s){const n=(0,e.LT)(t);(class{static executeAsync(t,i){this.Jv(t)(i)}static Qv(t){return!!t.cnxProxyTask}static Jv(t){return this.Qv(t)||this.Yv(t),t.cnxProxyTask}static Yv(t){const i=t.document.head;(0,e.ML)(i,t,"\n    window.cnxProxyTask = function(task) {\n        setTimeout(function(){\n            task();\n        }, 0);\n    }\n")}}).executeAsync(n,(()=>{try{const e=t.contentWindow&&t.contentWindow.document;e.open(),e.write(i)}catch(i){this.Xv(t,i),t=null}s(t)}))}zv(t,i){return Object.keys(i).forEach((function(e){const s="object"==typeof i[e]?JSON.stringify(i[e]):i[e];t=t.replace(new RegExp(`{{${e}}}`,"g"),s)})),t}loadIframe(t){const i='<!DOCTYPE html><html lang="en"><head>'+(t.customHead?t.customHead:"")+'<meta charset="UTF-8"></head><body style="margin:0;padding:0">'+(t.customHtml?t.customHtml:"")+'<script type="text/javascript">window.postMessage(\'{"event": "ready", "id": "{{iframeID}}"}\', \'*\');<\/script></body></html>',e="cnx-iframe_"+(0,bi.qs)();return new Promise(((n,r)=>{const h=i=>{if(null===i)return void r(xs.errorIframe);const s=t=>{let h;try{h=JSON.parse(t.data)}catch(t){return}h.id===e&&(i.contentWindow?(i.contentWindow.document.close(),i.contentWindow.removeEventListener("message",s),n({iframe:i})):r("The Iframe is no longer in the DOM"))};try{if(i.contentWindow.addEventListener("message",s),!t.customReportingLog||!this.aa)return;const{advertiserLineItemId:e,heavyAdBlockTypeEnum:n}=t.customReportingLog;this.Zv=new g(this.Kv.contentWindow,this.aa,{advertiserLineItemId:e,heavyAdBlockTypeEnum:n})}catch(t){this.Xv(i,t),r("Iframe callback error")}};try{this.Kv=this.Wv(t.container,i,{iframeID:e},h,t.iframePosition,t.iframePointerEvents,t.customIframeAttributes,this.Ks,t.iframeCustomDimensions,t.visible)}catch(t){(0,s.n)({message:"IframeLoader_error_creating_iframe",level:s.D.WARN,exception:t.message,callStack:t.stack})}}))}get iframe(){return this.Kv}destroy(){var t;null===(t=this.Zv)||void 0===t||t.destroy(),this.Kv=null}Xv(t,i){this.yr.isDetachedFromDOM(t)?(0,s.n)({message:"iframeLoader_(inDom_false)",exception:i.message,callStack:i.stack,level:s.D.WARN},{sendMaxLog:!1,throttle:1}):(0,s.n)({message:"iframeLoader_(inDom_true)",exception:i.message,callStack:i.stack,level:s.D.WARN},{sendMaxLog:!1,throttle:1}),(0,e.bX)(t)}}!function(t){t.Html="text/html",t.Javascript="application/javascript"}(ws||(ws={}));const Ss=`\n            <div id=cnx-htmlBidAdaptor-id class=cnx-ad-close-non-linear-button>\n                ${o(5522)}\n            </div>`.trim();class Ps{constructor(t,i,e,s,n,r,h,o){this.ty=t,this.iy=i,this.ey=e,this.Om=s,this.yr=n,this.aa=r,this.sy=h,this.ny=o,this.hy="div-cnx-display",this.oy=new It.x,this.ly=new It.x,this.zg=new It.x,this.uy=new It.x,this.py=t=>{this.ly.next()},this.my=t=>{this.uy.next()}}get onDisplayAd(){return this.oy.asObservable()}get onError(){return this.zg.asObservable()}get onClickClose(){return this.ly.asObservable()}get onClickAd(){return this.uy.asObservable()}createBanner(t){this.gy=new _s(this.yr,this.aa),this.vy=t?this.yy(this.Om,t):this.Om;let i="";this.ey===ws.Html&&(i=this.iy);let s="",n="";switch(this.ty){case l.ProtoAdType.Overlay:s=`#${this.hy}{position:absolute;left:50%;top:50%;transform:translate(-50%,-50%)}`,n=`#${this.hy}{border:3px solid white}`;break;case l.ProtoAdType.Nonlinear:s=`#${this.hy}{width: 100%; height: 100%}`}const r="<style>html, body {position:relative;width:100%;height:100%}"+s+n+"#"+this.hy+" iframe{display:block}</style>";this.gy.loadIframe({customHead:r,customHtml:'<div id="'+this.hy+'">'+i+"</div>",container:this.vy,customReportingLog:{heavyAdBlockTypeEnum:l.ProtoHeavyAdBlockTypeEnum.OverlayIframe,advertiserLineItemId:this.sy},iframePosition:this.ty===l.ProtoAdType.Nonlinear?ys.relative:ys.absolute,iframeCustomDimensions:this.ny?this.ny:void 0,iframePointerEvents:bs.all}).then((t=>{this.by=t.iframe;const i=this.by.contentWindow;if(this.xy=i.document.getElementById(this.hy),this.ey===ws.Javascript&&(0,e.ML)(this.xy,i,this.iy),""===this.by.contentWindow.document.head.innerHTML){const t=r;this.wy(t)}(0,e.AX)(this.by.contentWindow,"AdHtmlWrapper"),this.ty===l.ProtoAdType.Nonlinear&&this._y(),this.oy.next()})).catch((t=>{this.zg.next()}))}getAdMediaDimensions(){return{width:this.xy.clientWidth||this.by.contentWindow.document.body.clientWidth,height:this.xy.clientHeight||this.by.contentWindow.document.body.clientHeight}}destroy(){var t;null===(t=this.xy)||void 0===t||t.removeEventListener("click",this.my),this.Sy&&(this.Sy.removeEventListener("click",this.py),this.vy.removeChild(this.Sy)),this.by&&this.Om&&(0,e.bX)(this.by),this.gy&&(this.gy.destroy(),this.gy=null)}_y(){var t;this.Sy=this.yr.createElementByString(Ss),this.vy.appendChild(this.Sy),this.Sy.addEventListener("click",this.py),null===(t=this.xy)||void 0===t||t.addEventListener("click",this.my)}wy(t){const i=this.by.contentWindow.document.createElement("style"),e=this.by.contentWindow.document.createTextNode(t);i.appendChild(e),this.by.contentWindow.document.head.appendChild(i)}yy(t,i){if(!i.width||!i.height)return t;let e,s;if(this.ty===l.ProtoAdType.Nonlinear)e=s="100%";else e=i.width+"px",s=i.height+"px";const n=this.yr.createElementByString(`<div class="cnx-iframe-container" style="width: ${e}; height: ${s}"></div>`);return t.appendChild(n),n}}class As extends d._{constructor(t,i,e,s){super(),this.imageUrl=t,this._c=i,this.aa=e,this.sy=s,this.oy=new It.x,this.zg=new It.x,this.uy=new It.x,this.ly=new It.x,this.Pf=[]}get onDisplayAd(){return this.oy.asObservable()}get onError(){return this.zg.asObservable()}get onClickAd(){return this.uy.asObservable()}get onClickClose(){return this.ly.asObservable()}destroy(){var t;null===(t=this.Py)||void 0===t||t.destroy()}initializeAd(t,i,e,s){this.Ay=t,this.Iy(s,i,e)}getAdMediaDimensions(){var t;return null===(t=this.Py)||void 0===t?void 0:t.getAdMediaDimensions()}Iy(t,i,e){this.ky=this._c.createElement("img"),this.ky.onload=()=>{this.Cy(t,i,e)},this.ky.onerror=()=>{this.zg.next(zi.VastNonLinearImageLoadFailure)},this.ky.src=this.imageUrl}Cy(t,i,e){const s=this.Ty(t,i,e);this.My(s,t,i)}Ty(t,i,e){let s;return s=t?this.Ey(i,e):`height:${i.height}px; width: ${i.width}px;`,`<img src="${this.imageUrl}" style="${s} display: block; pointer-events: all; cursor: pointer">`}My(t,i,e){this.Py=new Ps(l.ProtoAdType.Nonlinear,t,ws.Html,this.Ay,this._c,this.aa,this.sy,{height:e.height,width:e.width,scalable:i?{maxHeightPercent:$t.NON_LINEAR_MAX_HEIGHT_PERCENT,maxWidthPercent:$t.NON_LINEAR_MAX_WIDTH_PERCENT}:null}),this.Pf.push(this.Py.onDisplayAd.subscribe((()=>{this.oy.next()})),this.Py.onClickClose.subscribe((()=>{this.ly.next()})),this.Py.onClickAd.subscribe((()=>{this.uy.next()})),this.Py.onError.subscribe((()=>{this.zg.next(zi.DisplayIntegratorIframeLoad)}))),this.Py.createBanner(e)}Ey(t,i){const e=(0,xi.Tc)(i.height,$t.NON_LINEAR_MAX_HEIGHT_PERCENT),s=(0,xi.Tc)(i.width,$t.NON_LINEAR_MAX_WIDTH_PERCENT),n=t.height/e;return t.width/s>n?"width: 100%;":"height: 100%;"}}class Is{constructor(t,i=0,e=1e3){this.Bm=t,this.timerDuration=i,this.By=e,this.Oy=0,this.Ly=null,this.Ry=!1,this.Dy=!1,this.jy=new It.x,this.Fy=new It.x,this.Vy=new It.x,this.$y=[{event:rs.FirstQuartile,quartile:1},{event:rs.SecondQuartile,quartile:2},{event:rs.ThirdQuartile,quartile:3},{event:rs.FourthQuartile,quartile:4}],this.Ny=null,this.Uy=()=>{this.Hy(),this.jy.next(),this.zy(this.Oy,this.timerDuration),this.Wy(),this.Gy=(new Date).getTime()},i||this.disable()}start(){this.Dy=!0,null===this.Ly&&this.Jy()}stop(){this.Dy=!1,null!==this.Ly&&(this.Hy(),this.Qy())}reset(t){t&&(this.timerDuration=t),this.Oy=0,this.Ry=!1,this.Ny=null,(null!==this.Ly||this.Dy)&&(this.Qy(),this.Jy())}get timeElapsed(){return this.Oy}get timeRemaining(){return this.timerDuration-this.Oy}disable(){this.Ry=!0,this.Qy()}get onTimeUpdate(){return this.jy.asObservable()}get onTimeElapsed(){return this.Fy.asObservable()}get onQuartile(){return this.Vy.asObservable()}Hy(){this.Oy+=(new Date).getTime()-this.Gy}Jy(){this.Ry||(this.Wy(),this.Gy=(new Date).getTime(),this.Ly=this.Bm.setInterval(this.Uy,this.By))}Qy(){this.Bm.clearInterval(this.Ly),this.Ly=null}Yy(){this.disable(),this.Fy.next(),this.Oy=0}Wy(){this.Oy/Ht.s_>=this.timerDuration/Ht.s_&&this.Yy()}zy(t,i){const e=Math.floor((0,xi.dQ)(0,i,1,4,t));this.Ny<=e&&this.$y.forEach((({event:t,quartile:i})=>{i===e&&i!==this.Ny&&(this.Vy.next(t),this.Ny=i)}))}}const ks={[rs.FirstQuartile]:qt.fI.AdVideoFirstQuartile,[rs.SecondQuartile]:qt.fI.AdVideoMidpoint,[rs.ThirdQuartile]:qt.fI.AdVideoThirdQuartile,[rs.FourthQuartile]:qt.fI.AdVideoComplete};class Cs extends te{constructor(t,i){super(t,i),this.Bm=t,this.settings=i,this.adMediaType="nonLinearVast",this.adSourceType=l.ProtoAdsourceTypeEnum.VastMedia,this.Xy=[],this.By=500,this.Zy=0,this.nonLinearOnClick=()=>{this.Ky.nonLinearClickTracking.uri&&this.settings.globalDomUtilsService.trackWithImages([this.Ky.nonLinearClickTracking.uri]),this.Ky.nonLinearClickThrough&&this.settings.globalDomUtilsService.open(this.Ky.nonLinearClickThrough,At.bS.Blank),this.Wm({type:qt.fI.AdClickThru,payload:{}})}}initAd(t,i,e,s,n,r,h){try{if(super.initAd(t,i,e,s,n,r,h),this.Ky=this.tb(),!this.Ky)return void this.Wm({type:qt.fI.AdError,payload:{errorMessage:zi.NonLinearUnsupportedMedia}});this.ib(),this.eb(),this.Wm({type:qt.fI.AdLoaded,payload:{}})}catch(t){this.Wm({type:qt.fI.AdError,payload:{errorMessage:zi.AdaptorInitAdError+`_${t.message}`}})}}startAd(){super.startAd(),this.sb.start(),this.Xy.push(this.nb.onDisplayAd.subscribe((()=>{this.Wm({type:qt.fI.AdStarted}),this.Wm({type:qt.fI.AdVideoStart}),this.Wm({type:qt.fI.AdImpression,payload:{}})})),this.nb.onError.subscribe((t=>{this.Wm({type:qt.fI.AdError,payload:{errorMessage:t}})})),this.nb.onClickAd.subscribe((()=>this.nonLinearOnClick())),this.nb.onClickClose.subscribe((()=>{this.Wm({type:qt.fI.AdUserClose,payload:{}}),this.stopAd(qt.r5)})));const t={height:this.Ky.height,width:this.Ky.width},i={height:this.Lm.clientHeight,width:this.Lm.clientWidth};this.nb.initializeAd(this.Om,t,i,this.Ky.scalable)}get adVideoUrl(){return this.rb}get declaredDurationInSeconds(){return this.Zy/Ht.s_}getAdMediaSize(){var t;return null===(t=this.nb)||void 0===t?void 0:t.getAdMediaDimensions()}resizeAd(t,i,e){}pauseAd(){this.sb.stop()}resumeAd(){this.sb.start()}expandAd(){}collapseAd(){}getAdRemainingTime(){return this.sb.timeRemaining}getAdDuration(){return this.Zy/Ht.s_}getAdVolume(){return 0}ib(){this.Ky.staticResource&&(this.nb=new As(this.Ky.staticResource.uri,this.settings.globalDomUtilsService,this.settings.trackingService,this.settings.adManagerLineItem.protoLineItem.advertiserLineItemId),this.rb=this.Ky.staticResource.creativeType,this.hb())}hb(){this.Lm.style.visibility="hidden"}eb(){var t;this.Zy=(null===(t=this.settings.adManagerLineItem.protoLineItem.nonlinearLineItemSettings)||void 0===t?void 0:t.nonLinearAdTimeSeconds)*Ht.s_,this.sb=new Is(this.Bm,this.Zy,this.By),this.Xy.push(this.sb.onTimeUpdate.subscribe((()=>{this.Wm({type:qt.fI.AdRemainingTimeChange})})),this.sb.onTimeElapsed.subscribe((()=>{this.stopAd("nonLinearTimerElapsed")})),this.sb.onQuartile.subscribe((t=>{this.Wm({type:ks[t],payload:{}})})))}Ru(){var t,i;try{super.Ru(),null===(t=this.sb)||void 0===t||t.stop(),(0,jt.i)(this.Xy),null===(i=this.nb)||void 0===i||i.destroy()}catch(t){this.yg("NonLinearBidAdaptor","_destroy",t)}}tb(){let t;if(t=this.settings.vastResponse.nonLinearFiles.find((t=>!0===t.scalable)),!t){const i=(0,xi.Tc)(this.Lm.clientHeight,$t.NON_LINEAR_MAX_HEIGHT_PERCENT);t=this.settings.vastResponse.nonLinearFiles.find((t=>t.height<=i&&t.width<=this.Lm.clientWidth))}return t}}function Ts(t,i){t.sort(((t,i)=>t.width===i.width?t.bitrate-i.bitrate:t.width-i.width));for(let e=0;e<t.length;e++)if(t[e].width>=i)return t[e-1]||t[e];return t[t.length-1]}const Ms=()=>`cnx_bid_slot_${(0,bi.qs)()}`,Es={enableWorker:!1,capLevelToPlayerSize:!0,cnxRenderWindow:window,maxBufferSize:5e6,maxBufferLength:5,maxMaxBufferLength:10,liveBackBufferLength:0};class Bs{constructor(t,i,e,s,n){this.ob=t,this.ab=i,this.cb=e,this._c=s,this.lb=n,this.ub=[],this.pb=(t,i)=>{if(i.fatal)switch(i.type){case this.ob.ErrorTypes.NETWORK_ERROR:if(i.details===this.ob.ErrorDetails.MANIFEST_PARSING_ERROR||i.details===this.ob.ErrorDetails.MANIFEST_LOAD_ERROR)return void this.fb();this.mb.startLoad();break;case this.ob.ErrorTypes.MEDIA_ERROR:this.mb.recoverMediaError();break;default:this.fb()}},this.gb=()=>{this.mb.off(this.ob.Events.MEDIA_ATTACHED,this.gb),this.mb.loadSource(this.ab),this.mb.once(this.ob.Events.MANIFEST_PARSED,this.vb)},this.vb=()=>{this.mb.off(this.ob.Events.MANIFEST_PARSED,this.vb),this.yb(),this.lb.forceMaxLevel&&this.bb(),this.lb.forceResolutionHeight&&this.xb(this.lb.forceResolutionHeight),this.wb()},(this.lb.forceMaxLevel||this.lb.forceResolutionHeight)&&(Es.capLevelToPlayerSize=!1)}start(t,i){this.wb=t,this.fb=i,this.ob&&this.ob.isSupported()?(this.mb=new this.ob(Object.assign(Object.assign({},Es),{cnxRenderWindow:this._c.global})),this._b()):this.fb()}destroy(){this.mb&&(this.mb.destroy(),this.mb=null)}_b(){this.mb.on(this.ob.Events.ERROR,this.pb),this.mb.attachMedia(this.cb),this.mb.once(this.ob.Events.MEDIA_ATTACHED,this.gb)}bb(){const t=this.mb.levels.length-1;this.Sb(t)}xb(t){const i=this.ub.find((i=>i.height===t));i&&this.Sb(i.level)}Sb(t){this.mb.currentLevel=t,this.mb.startLevel=t,this.mb.nextLevel=t}yb(){this.mb.levels.forEach(((t,i)=>{this.ub.find((({height:i})=>i===t.height))||this.ub.push({level:i,height:t.height})}))}}var Os=o(2356);const Ls="huffpost",Rs=540;class Ds extends qi{constructor(t,i,e,n,r,h,o,a,c,l=!1,u){super(),this.yr=t,this.Pb=i,this.Rg=e,this.Zt=n,this.Ab=r,this.Ib=h,this.kb=o,this.Cb=a,this.ob=c,this.Tb=l,this.ei=u,this.Mb=!1,this.pageFocus=new Os.v(this.yr),this.Eb=Object.values(v),this.Bb=!1,this.Ob=!0,this.Lb=!1,this.Rb=[{event:qt.fI.AdVideoStart,position:0},{event:qt.fI.AdVideoFirstQuartile,position:25},{event:qt.fI.AdVideoMidpoint,position:50},{event:qt.fI.AdVideoThirdQuartile,position:75},{event:qt.fI.AdVideoComplete,position:100}],this.Db=this.Rb[0],this.jb=t=>{try{switch(t.type){case v.Pause:if(this.Ib&&!this.Ob)return this.Ob=!0,void this.Fb("pause_event_loopAd");this.Bb=!1;break;case v.Play:if(!this.Bb&&this.Tb)return void this.Rg.pause();break;case v.Canplay:case v.Durationchange:this.Vb();break;case v.Timeupdate:this.$b();break;case v.Error:this.If.next({type:qt.fI.AdError,payload:{errorMessage:zi.VastVideoTagEventError}});break;case"click":this.If.next({type:qt.fI.AdClickThru,payload:{}})}}catch(t){(0,s.n)({level:s.D.CRITICAL,callStack:t.stack,message:"AdManager_VastIntegrator_onVideoEvent",exception:t.message},{throttle:10,sendMaxLog:!1})}}}initAd(t,i,e,s,n,r){try{this.Rg=r.videoSlot,this.width=t,this.height=i,this.$v(this.Ab,this.Rg.parentElement),this.resizeAd(t,i,e),this.addVideoEvents(this.Rg),this.Cb&&this.ob&&this.ob.isSupported()?this.Ub(this.ob):(this.Rg.setAttribute("src",this.Pb),this.Rg.setAttribute("preload","metadata"),this.Rg.load()),this.pageFocus.isDocumentVisible()||this.Vb()}catch(t){this.If.next({type:qt.fI.AdError,payload:{errorMessage:zi.WrapperInitAdError+`_${t.message}`}})}}startAd(){try{(0,e.cn)(this.Rg,"cnx-ad-video-slot"),this.Bb=!0,this.pageFocus.isDocumentVisible()?this.Rg.play().then((()=>{this.If.next({type:qt.fI.AdStarted}),this.If.next({type:qt.fI.AdImpression,payload:{}})})).catch((t=>{this.If.next({type:qt.fI.AdError,payload:{errorMessage:zi.VastPlayPromiseReject}})})):(this.If.next({type:qt.fI.AdStarted}),this.If.next({type:qt.fI.AdImpression,payload:{}}),this.Rg.play())}catch(t){this.If.next({type:qt.fI.AdError,payload:{errorMessage:zi.WrapperStartAdError+`_${t.message}`}})}}stopAd(t){this.Tb&&this.Rg.pause(),"videoComplete"===t&&this.Ib?this.If.next({type:qt.fI.AdStopped,payload:{shouldTrackPostBid:!1}}):this.If.next({type:qt.fI.AdStopped,payload:{shouldTrackPostBid:!0}})}resizeAd(t,i,s){(0,e.T7)(this.Rg,{width:`${t}px`,height:`${i}px`}),this.If.next({type:qt.fI.AdSizeChange})}pauseAd(){this.Bb=!1,this.kb&&void 0===this.Db&&(this.Db=this.Rb[0]),this.Rg.pause(),this.If.next({type:qt.fI.AdPaused})}resumeAd(){this.Ib&&void 0===this.Db&&(this.Db=this.Rb[0]),this.Bb=!0,this.Fb("resumeAd"),this.Zt===St.M.Ios&&(0,e.UR)(this.Rg),this.If.next({type:qt.fI.AdPlaying})}expandAd(){}collapseAd(){}skipAd(){this.If.next({type:qt.fI.AdSkipped})}getAdRemainingTime(){return this.Rg.duration-this.Rg.currentTime}getAdDuration(){return this.Rg.duration?this.Rg.duration:0}getAdVolume(){return this.Rg.volume}setAdVolume(t){this.Rg.volume=t}getAdMediaWidth(){return this.Rg.videoWidth}getAdMediaHeight(){return this.Rg.videoHeight}destroy(){if(!this.kb&&!this.Ib)try{(0,e.IV)(this.Rg,"cnx-ad-video-slot"),this.Hb(this.Rg),this.Rg.removeAttribute("src"),this.qb&&(this.qb.destroy(),this.qb=null)}catch(t){(0,s.n)({level:s.D.WARN,message:"AdManager_VastIntegrator_destroyAd",exception:t.message,callStack:t.stack})}}Ub(t){let i={forceMaxLevel:!0};this.ei&&this.ei.includes(Ls)&&(i={forceMaxLevel:!1,forceResolutionHeight:Rs}),this.qb=new Bs(t,this.Pb,this.Rg,this.yr,i),this.qb.start((()=>{this.Vb()}),(()=>{this.If.next({type:qt.fI.AdError,payload:{errorMessage:zi.CnxMediaSrcNotSupported}})}))}$v(t,i){this.zb=this.yr.createElement("a"),t&&(this.zb.href=t,this.zb.target="_blank"),(0,e.cn)(this.zb,"cnx-ad-slot"),i.appendChild(this.zb),this.zb.addEventListener("click",this.jb)}addVideoEvents(t){this.Eb.forEach((i=>{t.addEventListener(i,this.jb)})),this.zb&&this.zb.addEventListener("click",this.jb)}Hb(t){this.Eb.forEach((i=>{t.removeEventListener(i,this.jb)})),this.zb&&this.zb.removeEventListener("click",this.jb)}Vb(){this.Mb||(this.Mb=!0,this.If.next({type:qt.fI.AdLoaded,payload:{}}))}$b(){this.If.next({type:qt.fI.AdRemainingTimeChange});const t=(0,xi.dQ)(0,this.Rg.duration,0,100,this.Rg.currentTime);if(this.Db&&t>=this.Db.position){this.Lb||this.If.next({type:this.Db.event});const t=this.Db;this.Db=this.Rb[this.Rb.indexOf(this.Db)+1],t.event===qt.fI.AdVideoComplete&&(this.Ib&&(this.Rg.currentTime=.01),this.Ob=!1,this.stopAd("videoComplete"),this.Lb=!0)}}Fb(t){try{this.Rg.play().catch((i=>(0,s.n)({level:s.D.WARN,message:`AdManager_VastIntegrator_play_${t}`,exception:`playError: ${i.message}`,callStack:i.stack})))}catch(i){(0,s.n)({level:s.D.WARN,message:`AdManager_VastIntegrator__play_${t}`,exception:`promiseError: ${i.message}`,callStack:i.stack})}}}class js{constructor(t,i,e,s,n){this.Gb=t,this.yr=i,this.aa=e,this.Qt=s,this.sy=n,this.Jb={bodyTamplate:`<div class="ad-element" id="cnx-ad-element"></div><script type="text/javascript" src="${this.Gb}"><\/script>'\n        <script type="text/javascript">\n            window.Object.defineProperty(Object.prototype, 'cnxInnerTag', { enumerable: !1, writable: !0, value: '${this.Qt}' });\n            window.Object.defineProperty(Function.prototype, 'cnxInnerTag',\n            { enumerable: !1, writable: !0, value: '${this.Qt}' });\n            cnxtimeouts = [];\n            cnxintervals = [];\n            oldSetTimeout = setTimeout;\n            setTimeout = function (e, t) { var n = oldSetTimeout.apply(null, arguments); return cnxtimeouts.push(n), n };\n            oldSetInterval = setInterval;\n            setInterval = function (e, t) { var n = oldSetInterval.apply(null, arguments); return cnxintervals.push(n), n };\n            clearAll = function () {\n                setTimeout = function () { };\n                setInterval = function () { };\n                for (var e = 0; e < cnxtimeouts.length; e++) {\n                    clearTimeout(cnxtimeouts[e]);\n                }\n                for (e = 0; e < cnxintervals.length; e++) {\n                    clearInterval(cnxintervals[e]);\n                }\n            };\n        <\/script>`,headTamplate:" <style>\n            html,\n            body,\n            .ad-element {\n                width: 100%;\n                height: 100%;\n            }\n            </style>"},this.gy=new _s(this.yr,this.aa)}Qb(t){return this.gy.loadIframe({customHead:this.Jb.headTamplate,customHtml:this.Jb.bodyTamplate,container:t,customReportingLog:{heavyAdBlockTypeEnum:l.ProtoHeavyAdBlockTypeEnum.VpaidIframe,advertiserLineItemId:this.sy}})}loadAdUnitIframe(t){return new Promise(((i,e)=>{this.Qb(t).then((t=>{t.adContainer=t.iframe.contentWindow.document.querySelector(".ad-element"),i(t)})).catch((t=>{e(t)}))}))}destroyAdUnit(){try{const t=this.gy.iframe.contentWindow.clearAll;t&&t()}catch(t){(0,s.n)({message:"AdManager_VPAIClient_destroyAdUnit",exception:null==t?void 0:t.message,callStack:null==t?void 0:t.stack,level:s.D.WARN},{throttle:2,sendMaxLog:!0})}this.gy.destroy(),this.gy=null}}var Fs;!function(t){t[t.handshakeVersion=0]="handshakeVersion",t[t.initAd=1]="initAd",t[t.startAd=2]="startAd",t[t.stopAd=3]="stopAd",t[t.skipAd=4]="skipAd",t[t.resizeAd=5]="resizeAd",t[t.pauseAd=6]="pauseAd",t[t.resumeAd=7]="resumeAd",t[t.expandAd=8]="expandAd",t[t.collapseAd=9]="collapseAd",t[t.subscribe=10]="subscribe",t[t.unsubscribe=11]="unsubscribe"}(Fs||(Fs={}));class Vs extends qi{constructor(t,i,e,n,r,h,o){super(),this.Pb=t,this.yr=i,this.aa=e,this.Yb=n,this.sy=r,this.jm=h,this.Zt=o,this.Xb=[],this.Zb=new Set,this.Kb=new Set,this.tx=(t,i,e)=>{const s={url:t,playerHandles:e};this.sx(qt.fI.AdClickThru,s)},this.sx=(t,i)=>{if(this.Kb.add(t),!this.Zb.has(t))return t!==qt.fI.AdImpression||this.Kb.has(qt.fI.AdLoaded)?void this.nx(t,i):((0,s.n)({message:"AdManager_AdVpaidWrapper_ImpressionBeforeAdLoaded",exception:`advertiserLineItemId:${this.sy}_creativeId:${this.jm}_vpaidSrc:${this.Pb}`,callStack:JSON.stringify((0,f.ee)(this.Kb)),level:s.D.WARN},{throttle:1e3}),this.Zb.add(qt.fI.AdLoaded),void this.nx(qt.fI.AdLoaded,i))},this.nx=(t,i)=>{switch(t){case qt.fI.AdError:this.If.next({type:qt.fI.AdError,payload:{errorMessage:(0,dt.HD)(i)?i:JSON.stringify(i)}});break;case qt.fI.AdLoaded:this.If.next({type:qt.fI.AdLoaded,payload:{skipOffset:(0,dt.as)(i)?i.skipOffset:void 0}});break;case qt.fI.AdImpression:this.If.next({type:qt.fI.AdImpression,payload:{}});break;case qt.fI.AdClickThru:this.If.next({type:qt.fI.AdClickThru,payload:(0,dt.as)(i)?i:{}});break;default:this.If.next({type:qt.fI[t]})}}}initAd(t,i,e,s,n,r){try{this.td=t,this.ed=i,this.Bg=e,this.hx=s,this.ox=n,this.lx=r,this.ux=new js(this.Pb,this.yr,this.aa,this.Yb,this.sy),this.mx=this.ux.loadAdUnitIframe(r.slot).then((t=>{this.gx(t)})).catch((t=>{this.If.next({type:qt.fI.AdError,payload:{errorMessage:zi.VpaidOnLoad}})}))}catch(t){this.If.next({type:qt.fI.AdError,payload:{errorMessage:zi.VpaidOnLoad}})}}startAd(){try{this.Kb.has(qt.fI.AdImpression)&&!this.Zb.has(qt.fI.AdImpression)&&((0,s.n)({message:"AdManager_AdVpaidWrapper_brokenImpressionHandle",exception:`advertiserLineItemId:${this.sy}_creativeId:${this.jm}_vpaidSrc:${this.Pb}`,callStack:JSON.stringify((0,f.ee)(this.Kb)),level:s.D.WARN},{throttle:1e3}),this.Zb.add(qt.fI.AdImpression),this.If.next({type:qt.fI.AdImpression,payload:{}})),this.vx.startAd()}catch(t){this.If.next({type:qt.fI.AdError,payload:{errorMessage:zi.WrapperStartAdError}})}}stopAd(t){var i;null===(i=this.mx)||void 0===i||i.then((()=>{this.vx?this.vx.stopAd(t):(0,s.n)({message:"stopAd",exception:t,level:s.D.WARN})}))}resizeAd(t,i,e){this.vx.resizeAd(t,i,e)}pauseAd(){this.vx.pauseAd()}resumeAd(){this.vx.resumeAd(),this.Zt===St.M.Ios&&(0,e.UR)(this.lx.videoSlot)}expandAd(){this.vx.expandAd()}collapseAd(){this.vx.collapseAd()}skipAd(){this.vx.skipAd()}getAdRemainingTime(){return this.vx.getAdRemainingTime()}getAdDuration(){var t;return null===(t=this.vx)||void 0===t?void 0:t.getAdDuration()}getAdVolume(){return this.vx.getAdVolume()}setAdVolume(t){this.vx.setAdVolume(t)}destroy(){var t;this.yx(),this.Xb.length=0,this.vx=null,null===(t=this.ux)||void 0===t||t.destroyAdUnit()}gx(t){const i=t.iframe.contentWindow.getVPAIDAd;if("function"==typeof i){const e=i();this.vx=e,this.xx(),this.wx(e)?e.initAd(this.td,this.ed,this.Bg,this.hx,this.ox,{slot:t.adContainer,videoSlot:this.lx.videoSlot}):this.If.next({type:qt.fI.AdError,payload:{errorMessage:zi.VpaidInvalid}})}else this.If.next({type:qt.fI.AdError,payload:{errorMessage:zi.VpaidGetVpaidAdError}})}xx(){Object.keys(qt.fI).forEach((t=>{let i=this.sx.bind(this,qt.fI[t]);qt.fI[t]===qt.fI.AdClickThru&&(i=this.tx),this.Xb.push({handler:i,event:t}),this.vx.subscribe(i,t)}))}yx(){this.Xb.forEach((t=>{this.vx.unsubscribe(t.handler,t.event)}))}wx(t){return Object.keys((0,f.ti)(Fs)).every((i=>(0,dt.mf)(t[Fs[i]])))}}var $s=o(525);class Ns extends te{constructor(t,i){super(t,i),this.Bm=t,this.settings=i,this.adSourceType=l.ProtoAdsourceTypeEnum.Unknown,this._x=[],this.creativeId=i.vastResponse.creativeId}initAd(t,i,e,s,n,r,h){try{super.initAd(t,i,e,s,n,r,h),(0,ee.A)(this.settings.adManagerLineItem.protoLineItem.publisherLineItemId,this.settings.vastResponse.linearClickThrough).then((n=>{var r;if(n)return void this.Wm({type:qt.fI.AdError,payload:{errorMessage:zi.DomainBlocked}});if(this.Sx=this.Px(t,this.Lm),null===this.Sx)return void this.Wm({type:qt.fI.AdError,payload:{errorMessage:zi.VastUnsupportedMedia}});(null===(r=this.Sx.src)||void 0===r?void 0:r.includes($s.n.endPoints.base.video))&&(this.Sx.src=this.gd.appendParamsToUrl(this.Sx.src)),this.adMediaType=this.Sx.type,this.Sx.getMediaFileType()===es.Video?(this.Ax=new Ds(this.settings.globalDomUtilsService,this.Sx.src,this.Lm,this.settings.os,this.settings.vastResponse.linearClickThrough,this.settings.loopAdWhenFinished),this.adSourceType=l.ProtoAdsourceTypeEnum.VastMedia):(this.Ax=new Vs(this.Sx.src,this.settings.globalDomUtilsService,this.settings.trackingService,this.rg,this.settings.adManagerLineItem.protoLineItem.advertiserLineItemId,this.creativeId,this.settings.os),this.adSourceType=l.ProtoAdsourceTypeEnum.Vpaid),this._x.push(this.Ax.onVpaidEvent.subscribe((t=>{if(t.type===qt.fI.AdLoaded&&(t.payload.skipOffset=this.settings.vastResponse.skipoffset),t.type===qt.fI.AdClickThru){this.Ix=t.payload.url;const i=t.payload.url||this.settings.vastResponse.linearClickThrough;i&&t.payload.playerHandles&&this.settings.globalDomUtilsService.open(i,At.bS.Blank)}this.Wm(t)})));const h={AdParameters:this.settings.vastResponse.adParameters,adParameters:this.settings.vastResponse.adParameters};this.Ax.initAd(t,i,e,s,h,{slot:this.Om,videoSlot:this.Lm})})).catch((t=>this.kx(t)))}catch(t){this.kx(t)}}startAd(){try{super.startAd(),this.Ax.startAd()}catch(t){this.If.next({type:qt.fI.AdError,payload:{errorMessage:zi.AdaptorStartAdError+`_${t.message}`}})}}stopAd(t){super.stopAd(t),this.Ax?this.Ax.stopAd(t):(0,s.n)({message:"stopAd",exception:t,level:s.D.WARN})}resizeAd(t,i,e){try{this.Ax.resizeAd(t,i,e)}catch(t){this.yg("VastBidAdaptor","resizeAd",t)}}pauseAd(){try{this.Ax.pauseAd()}catch(t){this.yg("VastBidAdaptor","pauseAd",t)}}resumeAd(){try{this.Ax.resumeAd()}catch(t){this.yg("VastBidAdaptor","resumeAd",t)}}expandAd(){try{this.Ax.expandAd()}catch(t){this.yg("VastBidAdaptor","expandAd",t)}}collapseAd(){try{this.Ax.collapseAd()}catch(t){this.yg("VastBidAdaptor","collapseAd",t)}}skipAd(){try{super.skipAd(),this.Ax.skipAd()}catch(t){this.yg("VastBidAdaptor","skipAd",t)}}getAdRemainingTime(){try{return this.Ax.getAdRemainingTime()}catch(t){return this.yg("VastBidAdaptor","getAdRemainingTime",t),0}}getAdDuration(){try{return this.Ax&&this.Ax.getAdDuration()||Math.round(this.settings.vastResponse.duration/Ht.s_)}catch(t){return this.yg("VastBidAdaptor","getAdDuration",t),0}}getAdVolume(){try{return this.Ax.getAdVolume()}catch(t){return this.yg("VastBidAdaptor","getAdVolume",t),0}}getAdMediaSize(){let t=0,i=0;return this.Ax instanceof Ds?(t=this.Ax.getAdMediaWidth(),i=this.Ax.getAdMediaHeight()):(t=this.Sx.width,i=this.Sx.height),{width:t,height:i}}setAdVolume(t){try{super.setAdVolume(t),this.Ax.setAdVolume(t)}catch(t){this.yg("VastBidAdaptor","setAdVolume",t)}}get adVideoUrl(){var t;return null===(t=this.Sx)||void 0===t?void 0:t.src}get declaredDurationInSeconds(){return this.settings.vastResponse.duration/Ht.s_}dg(t){const i=super.dg(t);return this.Cx(i)}ug(t){const i=super.ug(t);return this.Cx(i)}Ru(){var t;if(!this.settings.loopAdWhenFinished)try{super.Ru(),(0,jt.i)(this._x),null===(t=this.Ax)||void 0===t||t.destroy()}catch(t){this.yg("VastBidAdaptor","_destroy",t)}}Cx(t){var i;return t.payload.adSourceData.name=null===(i=this.settings.vastResponse)||void 0===i?void 0:i.adTitle,t.payload.clickThroughUrl=this.Ix||this.settings.vastResponse.linearClickThrough,t}Tx(t,i){return t.filter((t=>t.getMediaFileType()===es.Video&&i.canPlayType(t.type)))}Px(t,i){const e=this.Tx(this.settings.vastResponse.mediaFiles,i),s=e.filter((t=>"video/mp4"===t.type));if(s.length)return Ts(s,t);if(e.length)return Ts(e,t);const n=this.settings.vastResponse.mediaFiles.filter((t=>t.getMediaFileType()===es.Javascript));return n.length?Ts(n,t):null}kx(t){this.If.next({type:qt.fI.AdError,payload:{errorMessage:zi.AdaptorInitAdError+`_${t.message}`}})}}class Us{constructor(t){this.settings=t,this.metrics={created:(new Date).getTime()},this.settings.vastAdsChain||(this.settings.vastAdsChain=[]),void 0===this.settings.maxWrapperLimit&&(this.settings.maxWrapperLimit=10)}fetchBid(){return this.metrics.fetchStart=(new Date).getTime(),this.Mx(this.settings.xml).then((t=>(this.metrics.fetchEnd=(new Date).getTime(),t))).catch((t=>{throw this.metrics.fetchEnd=(new Date).getTime(),t}))}Mx(t){return new Promise(((i,e)=>{const s=new gs(2).parseVastXml(t);!0!==s.error?(this.Ex(s.result),i(this.Bx(s.result))):e(s.errorReason)}))}Bx(t){return new Promise(((i,e)=>{if(t.wrapper){this.settings.maxWrapperLimit<=0&&e($i.XmlAdaptorWrapperLimit);const s=this.settings.maxWrapperLimit-1;i(new Ws({id:this.settings.id,adManagerLineItem:this.settings.adManagerLineItem,trackersInformation:this.settings.trackersInformation,maxWrapperLimit:s,url:t.wrapper.VASTAdTagURI,replaceTrackingMacros:!1,requestMetadata:this.settings.requestMetadata,callingState:this.settings.callingState,adMacroReplacer:this.settings.adMacroReplacer,adContainer:this.settings.adContainer,globalDomUtilsService:this.settings.globalDomUtilsService,viewabilityService:this.settings.viewabilityService,trackingService:this.settings.trackingService,cpm:this.settings.cpm,obfuscatedPrice:this.settings.obfuscatedPrice,adEnforcer:this.settings.adEnforcer,requestWithCredentials:this.settings.requestWithCredentials,successRate:this.settings.successRate,os:this.settings.os,adSlotContainerRecycler:this.settings.adSlotContainerRecycler,creativeId:this.settings.creativeId,bidSlotId:this.settings.bidSlotId,loopAdWhenFinished:this.settings.loopAdWhenFinished,pageUrl:this.settings.pageUrl,urlSuffixerService:this.settings.urlSuffixerService}).fetchBid())}else{let t;const e={id:this.settings.id,adManagerLineItem:this.settings.adManagerLineItem,trackers:this.settings.trackersInformation,requestMetadata:this.settings.requestMetadata,callingState:this.settings.callingState,adContainer:this.settings.adContainer,globalDomUtilsService:this.settings.globalDomUtilsService,viewabilityService:this.settings.viewabilityService,cpm:this.settings.cpm,obfuscatedPrice:this.settings.obfuscatedPrice,adEnforcer:this.settings.adEnforcer,successRate:this.settings.successRate,os:this.settings.os,adSlotContainerRecycler:this.settings.adSlotContainerRecycler,externalCreativeId:this.settings.creativeId,bidSlotId:this.settings.bidSlotId,urlSuffixerService:this.settings.urlSuffixerService},s=De.getGlobalContainer().resolve(ts);if(this.settings.adManagerLineItem.protoLineItem.adType===l.ProtoAdType.Nonlinear){const i=Object.assign(Object.assign({},e),{trackingService:this.settings.trackingService,vastResponse:new vs(this.settings.vastAdsChain)});t=new Cs(s,i)}else{const i=Object.assign(Object.assign({},e),{vastResponse:new vs(this.settings.vastAdsChain),trackingService:this.settings.trackingService,loopAdWhenFinished:this.settings.loopAdWhenFinished});t=new Ns(s,i)}i(t)}}))}Ex(t){!function(t,i){const e=new Li(t);i.adError.push(...Vi(e.errorUrls)),i.adImpression.push(...Vi(e.impressions)),i.adViewableImpression.push(...Vi(e.trackingEvents.viewable_impression)),i.adClick.push(...Vi(e.clickTrackings)),i.adMute.push(...Vi(e.trackingEvents.mute)),i.adPause.push(...Vi(e.trackingEvents.pause)),i.adQuartileFirst.push(...Vi(e.trackingEvents.firstQuartile)),i.adQuartileSecond.push(...Vi(e.trackingEvents.midpoint)),i.adQuartileThird.push(...Vi(e.trackingEvents.thirdQuartile)),i.adQuartileFourth.push(...Vi(e.trackingEvents.complete)),i.adResume.push(...Vi(e.trackingEvents.resume)),i.adSkip.push(...Vi(e.trackingEvents.skip)),i.adStarted.push(...Vi(e.trackingEvents.creativeView)),i.adVideoStart.push(...Vi([...e.trackingEvents.start])),i.adUnmute.push(...i.adUnmute,...Vi(e.trackingEvents.unmute)),i.adUserAcceptInvitation.push(...Vi([...e.trackingEvents.acceptInvitation,...e.trackingEvents.acceptInvitationLinear])),i.adUserClose.push(...Vi(e.trackingEvents.close)),i.adUserMinimize.push(...i.adUserMinimize,...Vi([...e.trackingEvents.collapse,...e.trackingEvents.playerCollapse,...e.trackingEvents.adCollapse]))}(t,this.settings.trackersInformation),this.settings.vastAdsChain.push(t)}}var Hs,qs=o(158);!function(t){t[t.None=0]="None",t[t.Ima=1]="Ima"}(Hs||(Hs={}));const zs={[Hs.Ima]:".g.doubleclick.net"};class Ws{constructor(t){this.settings=t,void 0===this.settings.requestWithCredentials&&(this.settings.requestWithCredentials=true),this.metrics={created:(new Date).getTime()}}fetchBid(){return this.metrics.fetchStart=(new Date).getTime(),this.Ox(this.settings.url).then((t=>t.fetchBid())).then((t=>(this.metrics.fetchEnd=(new Date).getTime(),t))).catch((t=>{throw this.metrics.fetchEnd=(new Date).getTime(),t}))}Lx(t){let i=Hs.None;return Object.keys(zs).forEach((e=>{t.includes(zs[e])&&(i=parseInt(e,10))})),i}Ox(t){let i;try{i=this.Rx(t)}catch(t){return Promise.reject($i.InvalidCreativeUrl)}let e=this.Lx(t);switch(this.settings.adManagerLineItem.protoLineItem.adType===l.ProtoAdType.Nonlinear&&(e===Hs.Ima&&(0,s.n)({message:"AdManager_VastUrlCallAdaptor_found_ima_in_nonLinear",level:s.D.INFO}),e=Hs.None),e){case Hs.None:return this.jx(i);case Hs.Ima:return this.Fx(i);default:return Promise.reject($i.HandlingSdkUrl)}}Fx(t){return Promise.resolve(new is({url:t,id:this.settings.id,adManagerLineItem:this.settings.adManagerLineItem,trackersInformation:this.settings.trackersInformation,replaceTrackingMacros:!1,requestMetadata:this.settings.requestMetadata,callingState:this.settings.callingState,adContainer:this.settings.adContainer,globalDomUtilsService:this.settings.globalDomUtilsService,viewabilityService:this.settings.viewabilityService,cpm:this.settings.cpm,obfuscatedPrice:this.settings.obfuscatedPrice,adEnforcer:this.settings.adEnforcer,successRate:this.settings.successRate,os:this.settings.os,adSlotContainerRecycler:this.settings.adSlotContainerRecycler,creativeId:this.settings.creativeId,bidSlotId:this.settings.bidSlotId,pageUrl:this.settings.pageUrl,urlSuffixerService:this.settings.urlSuffixerService}))}jx(t){return qs.n.fetchXMLRequest(t,this.settings.requestWithCredentials).catch((()=>!1===this.settings.requestWithCredentials?Promise.reject($i.NetworkRequestUrl):qs.n.fetchXMLRequest(t,!1))).catch((()=>Promise.reject($i.NetworkRequestUrl))).then((t=>new Us({id:this.settings.id,adManagerLineItem:this.settings.adManagerLineItem,trackersInformation:this.settings.trackersInformation,vastAdsChain:this.settings.vastAdsChain,xml:t,replaceTrackingMacros:!1,requestMetadata:this.settings.requestMetadata,callingState:this.settings.callingState,adMacroReplacer:this.settings.adMacroReplacer,adContainer:this.settings.adContainer,globalDomUtilsService:this.settings.globalDomUtilsService,viewabilityService:this.settings.viewabilityService,trackingService:this.settings.trackingService,cpm:this.settings.cpm,obfuscatedPrice:this.settings.obfuscatedPrice,adEnforcer:this.settings.adEnforcer,requestWithCredentials:this.settings.requestWithCredentials,successRate:this.settings.successRate,os:this.settings.os,adSlotContainerRecycler:this.settings.adSlotContainerRecycler,creativeId:this.settings.creativeId,bidSlotId:this.settings.bidSlotId,loopAdWhenFinished:this.settings.loopAdWhenFinished,pageUrl:this.settings.pageUrl,urlSuffixerService:this.settings.urlSuffixerService,interactionService:this.settings.interactionService})))}Rx(t){const{width:i,height:e}=this.settings.callingState.adContainerState.get(this.settings.adManagerLineItem.protoLineItem.adType),s={adHeight:e,adWidth:i,adPostion:this.settings.callingState.adBreakState.adBreakType},n={mediaDescription:this.settings.callingState.media.mediaDescription,mediaDuration:this.settings.callingState.media.mediaDuration,mediaId:this.settings.callingState.media.mediaId,mediaTitle:this.settings.callingState.media.mediaTitle,mediaUrl:this.settings.callingState.media.mediaUrl};return this.settings.adMacroReplacer.replace(t,this.settings.adManagerLineItem.protoLineItem.vendorId,{adMacros:s,mediaMacros:n})}}class Gs{constructor(t){this.data=t,(0,dt.QM)(this.data.cnxBidId)||(this.data.cnxBidId=(0,bi.qs)())}}var Js=o(7577);class Qs{constructor(t,i,e,s,n,r,h){this.Vx=t,this.$x=i,this.sy=e,this.yr=s,this.aa=n,this.ty=r,this.Nx=h,this.oy=new It.x,this.ly=new It.x,this.zg=new It.x,this.Pf=[]}get onDisplayAd(){return this.oy.asObservable()}get onError(){return this.zg.asObservable()}get onClickClose(){return this.ly.asObservable()}initializeAd(t,i){try{let e;if(this.ty===l.ProtoAdType.Nonlinear){const{width:t,height:i}=this.Nx;e={width:t,height:i}}this.Py=new Ps(this.ty,this.$x,this.Vx,t,this.yr,this.aa,this.sy,e),this.Pf.push(this.Py.onDisplayAd.subscribe((()=>{this.oy.next()})),this.Py.onError.subscribe((()=>{this.zg.next(zi.DisplayIntegratorIframeLoad)})),this.Py.onClickClose.subscribe((()=>{this.ly.next()}))),this.Py.createBanner(i)}catch(t){this.zg.next(zi.WrapperInitAdError)}}getAdMediaDimensions(){var t;return null===(t=this.Py)||void 0===t?void 0:t.getAdMediaDimensions()}destroy(){var t;(0,jt.i)(this.Pf),null===(t=this.Py)||void 0===t||t.destroy()}}const Ys={[rs.FirstQuartile]:qt.fI.AdVideoFirstQuartile,[rs.SecondQuartile]:qt.fI.AdVideoMidpoint,[rs.ThirdQuartile]:qt.fI.AdVideoThirdQuartile,[rs.FourthQuartile]:qt.fI.AdVideoComplete};class Xs extends te{constructor(t,i){var e;let s;super(t,i),this.Bm=t,this.settings=i,this.adSourceType=l.ProtoAdsourceTypeEnum.Unknown,this.By=500,this.Ux=[],this.settings.adManagerLineItem.protoLineItem.adType===l.ProtoAdType.Nonlinear?(this.adMediaType="displayHtmlNonLinear",this.rb="htmlNonLinear",s=null===(e=this.settings.adManagerLineItem.protoLineItem.nonlinearLineItemSettings)||void 0===e?void 0:e.nonLinearAdTimeSeconds):(this.adMediaType="displayHtml",this.rb="html",s=this.settings.adManagerLineItem.protoLineItem.overlayTime);const n=s*Ht.s_;this.sb=new Is(this.Bm,n,this.By),this.Ux.push(this.sb.onTimeUpdate.subscribe((()=>{this.Wm({type:qt.fI.AdRemainingTimeChange})})),this.sb.onTimeElapsed.subscribe((()=>{this.stopAd("htmlTimerElapsed")})),this.sb.onQuartile.subscribe((t=>{this.Wm({type:Ys[t],payload:{}})})))}get adVideoUrl(){return this.rb}get declaredDurationInSeconds(){return this.settings.adManagerLineItem.protoLineItem.overlayTime}initAd(t,i,e,s,n,r,h){try{super.initAd(t,i,e,s,n,r,h),this.td=t,this.ed=i,this.Wm({type:qt.fI.AdLoaded,payload:{}})}catch(t){this.Wm({type:qt.fI.AdError,payload:{errorMessage:zi.AdaptorInitAdError+`_${t.message}`}})}}startAd(){try{super.startAd(),this.sb.start(),this.Hx=new Qs(this.settings.mime,this.settings.html,this.settings.adManagerLineItem.protoLineItem.advertiserLineItemId,this.settings.globalDomUtilsService,this.settings.trackingService,this.settings.adManagerLineItem.protoLineItem.adType,this.settings.dimensions),this.Ux.push(this.Hx.onDisplayAd.subscribe((()=>{this.Wm({type:qt.fI.AdStarted}),this.Wm({type:qt.fI.AdVideoStart}),this.Wm({type:qt.fI.AdImpression,payload:{}})})),this.Hx.onError.subscribe((t=>{this.Wm({type:qt.fI.AdError,payload:{errorMessage:t}}),this.sb.stop()})),this.Hx.onClickClose.subscribe((()=>{this.Wm({type:qt.fI.AdUserClose,payload:{}}),this.stopAd(qt.r5)}))),this.Hx.initializeAd(this.Om,{width:this.td,height:this.ed})}catch(t){this.Wm({type:qt.fI.AdError,payload:{errorMessage:zi.AdaptorStartAdError+`_${t.message}`}})}}stopAd(t){try{super.stopAd(t),this.sb.stop(),this.Wm({type:qt.fI.AdStopped,payload:{shouldTrackPostBid:!0}})}catch(t){this.yg("HtmlBidAdaptor","stopAd",t)}}skipAd(){try{super.skipAd(),this.Wm({type:qt.fI.AdSkipped})}catch(t){this.yg("HtmlBidAdaptor","skipAd",t)}}pauseAd(){try{this.sb.stop(),this.Wm({type:qt.fI.AdPaused})}catch(t){this.yg("HtmlBidAdaptor","pauseAd",t)}}resumeAd(){try{this.sb.start(),this.Wm({type:qt.fI.AdPlaying})}catch(t){this.yg("HtmlBidAdaptor","resumeAd",t)}}collapseAd(){}expandAd(){}getAdDuration(){return this.sb.timerDuration/Ht.s_}getAdRemainingTime(){return this.sb.timeRemaining/Ht.s_}getAdVolume(){return 0}getAdMediaSize(){var t;return null===(t=this.Hx)||void 0===t?void 0:t.getAdMediaDimensions()}setAdVolume(t){}resizeAd(t,i,e){this.td=t,this.ed=i}Ru(){var t;try{super.Ru(),this.sb.stop(),(0,jt.i)(this.Ux),null===(t=this.Hx)||void 0===t||t.destroy()}catch(t){this.yg("HtmlBidAdaptor","_destroy",t)}}}class Zs{constructor(t){this.settings=t,this.metrics={created:(new Date).getTime()}}fetchBid(){if(this.metrics.fetchStart=(new Date).getTime(),!this.qx(this.settings.mime))return Promise.reject($i.HTMLUnknownMimeType);const t=De.getGlobalContainer().resolve(ts),i=new Xs(t,{id:this.settings.id,adManagerLineItem:this.settings.adManagerLineItem,trackers:this.settings.trackersInformation,html:this.settings.html,mime:this.settings.mime,minDimensions:this.settings.dimensions,requestMetadata:this.settings.requestMetadata,callingState:this.settings.callingState,globalDomUtilsService:this.settings.globalDomUtilsService,trackingService:this.settings.trackingService,viewabilityService:this.settings.viewabilityService,adContainer:this.settings.adContainer,cpm:this.settings.cpm,obfuscatedPrice:this.settings.obfuscatedPrice,adEnforcer:this.settings.adEnforcer,successRate:this.settings.successRate,os:this.settings.os,adSlotContainerRecycler:this.settings.adSlotContainerRecycler,externalCreativeId:this.settings.creativeId,bidSlotId:this.settings.bidSlotId,urlSuffixerService:this.settings.urlSuffixerService,dimensions:this.settings.dimensions});return this.metrics.fetchEnd=(new Date).getTime(),Promise.resolve(i)}qx(t){return Object.keys(ws).some((i=>ws[i]===t))}}var Ks=o(6615),tn=o(1886),en=o(5348);class sn{constructor(t,i,e,s,n,r,h,o){this.zx=t,this.Wx=i,this.xf=e,this.Gx=s,this.Jx=n,this.Qx=r,this.Yx=h,this.Xx=o,this.Zx=new Map,this.Kx=new Map}request(t){const{width:i,height:e}=t.callingState,n=this.tw(i,e),r=this.iw(t);return!n||Object.keys(r.lineItems).length<=0?Promise.resolve({bids:[],noBids:[]}):this.ew(r).then((i=>(r.liveRampAtsEnvelope&&en.$.setEnvelopeStatus(i.liveRampEnvelopeStatus),this.rw(i,t)))).catch((t=>((0,s.n)({message:"RtbCallAggregator",exception:t.message,level:s.D.CRITICAL}),{bids:[],noBids:[]})))}destroy(){}rw(t,i){const e={bids:[],noBids:[]};return t.lineItemResponses.forEach((n=>{const r=mi(i.lineItemRequestDataList,n.id);if((0,dt.$K)(n.cachedFloorPrice))this.Kx.set(n.id,n.cachedFloorPrice);else{const t={cachedFloorPriceOld:(0,dt.r)(n.cachedFloorPriceOld)?n.cachedFloorPriceOld:void 0,predictedFloorPrice:n.predictedFloorPrice};this.Zx.set(n.id,t)}n.bids.forEach((n=>{const h=r.protoLineItem;if(n=Object.assign(Object.assign({},n),this.hw(h)),this.ow(h,n))return(0,s.n)({level:s.D.WARN,message:"RtbCallAggregator_nonLinear_banner_0_dimensions",exception:`lineItemId:${r.protoLineItem.advertiserLineItemId}`},{throttle:5}),void e.noBids.push(this.aw({connatixReason:l.ConnatixNoBidReasonEnum.InvalidResponse,floorPriceFactorIndex:n.floorPriceFactorIndex,partnerCustomHeaders:"",partnerReason:l.PartnerNoBidReasonEnum.Unknown,requestedFloorPrice:n.requestedFloorPrice,syncedUser:n.syncedUser},r,t));const o=this.cw(n,r,t,i.callingState);o&&e.bids.push(o)})),n.noBids.forEach((i=>{e.noBids.push(this.aw(i,r,t))}))})),e}hw(t){return{}}ow(t,i){var e;return vi(t.adType,null===(e=t.nonlinearLineItemSettings)||void 0===e?void 0:e.nonLinearRequestType)&&(!i.height||!i.width)}aw(t,i,e){var s;const n=null===(s=this.Zx.get(i.protoLineItem.advertiserLineItemId))||void 0===s?void 0:s.predictedFloorPrice;return{lineItem:i,requestMetadata:new Gs({requestedFloorPrice:t.requestedFloorPrice,requestedFloorPriceIndex:t.floorPriceFactorIndex,requestNumber:i.historicalMetrics.requestNumber,syncedUser:t.syncedUser,partnerCustomHeaders:t.partnerCustomHeaders,partnerReason:t.partnerReason,requestTrackingHandledByServer:!0,predictedFloorPrice:n}),reason:t.connatixReason}}cw(t,i,e,s){var n;const r=t,h=this.lw(r,i);let o;this.Zx.has(i.protoLineItem.advertiserLineItemId)&&(o=null===(n=this.Zx.get(i.protoLineItem.advertiserLineItemId))||void 0===n?void 0:n.predictedFloorPrice);const a=new Gs({requestedFloorPrice:r.requestedFloorPrice,requestedFloorPriceIndex:r.floorPriceFactorIndex,syncedUser:r.syncedUser,requestNumber:i.historicalMetrics.requestNumber,encryptedPrice:r.encryptedPrice,dspId:r.dspId,rtbAdomain:r.adomain,rtbSeatId:r.seatId,rtbCampainId:r.campaignId,cnxBidId:r.cnxBidId,requestTrackingHandledByServer:!0,logAuctionInformation:r.logAuctionInformation,predictedFloorPrice:o,auctionBidId:r.auctionBidId,rtbRequestId:r.rtbRequestId,liveRampAts:r.liveRampAts,floorPriceFactor:r.floorPriceFactor,floorPriceBypassReason:r.floorPriceBypassReason,floorPriceInformation:r.floorPriceInformation}),c=Ms(),l={id:(0,bi.qs)(),adContainer:this.Jx.get(i.protoLineItem.adType),adEnforcer:this.Yx,adManagerLineItem:i,adSlotContainerRecycler:this.Xx,bidSlotId:c,callingState:s,globalDomUtilsService:this.xf.services.GlobalDomUtilsService,os:this.xf.config.os.os,replaceTrackingMacros:!0,requestMetadata:a,trackersInformation:h,urlSuffixerService:this.xf.services.UrlSuffixerService,viewabilityService:this.xf.services.ViewabilityService,creativeId:r.creativeId,interactionService:this.xf.services.InteractionService,obfuscatedPrice:r.gtkpbp,successRate:r.successRate,trackingService:this.xf.services.TrackingService};return this.uw(i.protoLineItem)?new Us(Object.assign(Object.assign({},l),{xml:r.vastTag,adMacroReplacer:this.Gx,pageUrl:this.xf.config.pageUrl})):new Zs(Object.assign(Object.assign({},l),{dimensions:{width:r.width,height:r.height},html:r.vastTag,mime:r.mime}))}uw(t){var i;return t.adType===l.ProtoAdType.Nonlinear&&(null===(i=t.nonlinearLineItemSettings)||void 0===i?void 0:i.nonLinearRequestType)===l.ProtoNonlinearRequestType.Video||t.adType===l.ProtoAdType.Video}lw(t,i){const e=new Di;ji(i.protoLineItem.trackers,e);const s=[...t.billingNoticeUrlList,t.adQualityCheckUrl].filter((t=>(0,dt.QM)(t))).map((t=>Fi(t)));return e.adImpression.push(...s),(0,dt.QM)(t.winNoticeUrl)&&e.adWin.push(Fi(t.winNoticeUrl)),e}dw(t,i){if(t.protoLineItem.adType!==l.ProtoAdType.Overlay)return null;const e=i.adContainerState.get(l.ProtoAdType.Video),s=i.adContainerState.get(l.ProtoAdType.Overlay);return e.height!==s.height||e.width!==s.width?{width:s.width,height:s.height}:void 0}pw(t,i){const e={};return t.filter((t=>this.fw(t))).forEach((t=>{const s=t.adManagerLineItem,n=this.dw(s,i);let r,h;this.Kx.has(s.protoLineItem.advertiserLineItemId)?h=this.Kx.get(s.protoLineItem.advertiserLineItemId):this.Zx.has(s.protoLineItem.advertiserLineItemId)&&(r=this.Zx.get(s.protoLineItem.advertiserLineItemId));const o=this.mw(s);e[s.protoLineItem.advertiserLineItemId]=Object.assign({availableRequests:t.maxAvailableRequests,gdprConsent:this.xf.services.UserManagerService.isConsent(s.protoLineItem.vendorId),cachedFloorPriceOld:null==r?void 0:r.cachedFloorPriceOld,predictedFloorPrice:null==r?void 0:r.predictedFloorPrice,cachedFloorPrice:h,publisherLineItemId:s.protoLineItem.publisherLineItemId,slotHeight:null==n?void 0:n.height,slotWidth:null==n?void 0:n.width,requestNumber:s.historicalMetrics.requestNumber},o)})),e}mw(t){const i=gi({playerSkippability:this.Wx.skippability,playerSkipMin:this.Wx.skipMin,playerSkipAfter:this.Wx.skipAdAfter,lineItemSkippability:t.protoLineItem.skippability,lineItemSkipMin:t.protoLineItem.skipMin}),e=i.skippable?l.ProtoSkipEnabledEnum.Yes:l.ProtoSkipEnabledEnum.No;return Object.assign(Object.assign({},i),{skip:e})}fw(t){return!!t.adManagerLineItem.protoLineItem.forceCallingInEveryAO||this.Qx.shouldRequestLineItem(t.adManagerLineItem.protoLineItem.advertiserLineItemId)}iw(t){const{width:i,height:e,viewability:s}=t.callingState,{playerWidth:n,playerHeight:r}=this.xf.services.TrackingService.getPlayerSize();return{metadata:this.xf.services.TrackingService.getMetadataModel(),gdprCompliant:this.xf.services.UserManagerService.isGDPR(),gdprConsentData:this.xf.services.UserManagerService.getConsentPayload(),soundOn:t.callingState.sound,videoHeight:e,videoWidth:i,testMode:"true"===(0,Ks.Ph)("cnxRtbTest",this.xf.config.pageUrl),explorationMode:this.xf.config.explorationMode,viewability:s,outstream:this.zx,domainURL:this.xf.config.domainURL,isClickToPlay:t.callingState.clickToPlay,appVersion:this.xf.config.appVersion,deviceID:this.xf.services.UserManagerService.getDeviceId(),isCcpaBlockingUserInfo:!this.xf.services.UserManagerService.isSellUserAllowed(),usPrivacyString:this.xf.services.UserManagerService.getUsPrivacyString(),gdprConsentMode:this.xf.services.UserManagerService.gdprConsentMode,customMacros:this.xf.services.MacrosService.getExtraMacros(),maxAdDuration:t.maxAdDuration,lineItems:this.pw(t.lineItemRequestDataList,t.callingState),maxBidPrice:t.maxBidPrice,playerWidth:n,playerHeight:r,useNewSkippability:!0,liveRampAtsEnvelope:this.xf.services.UserManagerService.identityEnvelope}}ew(t){return qs.n.sendProtoRequest({endpoint:$s.n.endPoints.api.rtb,ProtoRequest:l.ProtoRtbRequest,ProtoResponse:l.ProtoRtbResponse,requestData:t,queryParams:Object.assign({[Js.Fk]:i.g.version},tn.f.getCidKeyValueObject()),logError:!1})}tw(t,i){return 0!==t&&0!==i||((0,s.n)({message:"AdManager_BidderCaller_dimensions",exception:`width:${t}_height:${i}_destroyed:${_.S.playerDestroyed}`,level:s.D.CRITICAL},{throttle:5}),!1)}}var nn;!function(t){t.AppNexus="appnexus",t.DistrictM="districtm",t.IndexExchange="ix",t.OneVideo="oneVideo",t.OpenX="openx",t.Pubmatic="pubmatic",t.RhythmOne="rhythmone",t.Rubicon="rubicon",t.SpotX="spotx",t.Telaria="telaria",t.MediaNet="medianet",t.Adman="adman",t.SynacorMedia="synacormedia",t.Undertone="undertone",t.AmxRTB="amx",t.Smaato="smaato",t.SmartAdServer="smartadserver",t.TheMediaGrid="grid",t.Rise="rise",t.YahooSSP="yahoossp",t.Unruly="unruly",t.Kargo="kargo",t.SmileWanted="smilewanted",t.TrustX="trustx",t.EmxDigital="emx_digital",t.KrushMedia="krushmedia"}(nn||(nn={}));const rn=(t,i)=>{try{const e=JSON.parse(t);return e.length>1&&(0,s.n)({message:"AdManager_AdSourceWrappe_multiple_bidders",level:s.D.WARN,callStack:i,exception:t},{throttle:1,sendMaxLog:!1}),e[0].bidder}catch(e){(0,s.n)({message:"AdManager_AdSourceWrapper_cannot_get_bidder",level:s.D.WARN,callStack:i,exception:t},{throttle:2,sendMaxLog:!1})}},hn=1,on=["video/mp4","video/webm","application/javascript","video/ogg","video/mpeg"],an={VAST_1:1,VAST_2:2,VAST_3:3,VAST_1_WRAPPER:4,VAST_2_WRAPPER:5,VAST_3_WRAPPER:6,VAST_4:7,VAST_4_WRAPPER:8},cn={VPAID_1:1,VPAID_2:2},ln=[an.VAST_2_WRAPPER,an.VAST_2,an.VAST_3,an.VAST_3_WRAPPER],un=[cn.VPAID_1,cn.VPAID_2],dn=(t,i,e,s,n)=>{const{skip:r,skippable:h,skipmin:o,skipafter:a}=n;return{video:{playerSize:[Math.floor(t),Math.floor(i)],context:e?"outstream":"instream",mimes:on,protocols:ln,linearity:hn,api:un,frameworks:[cn.VPAID_1,cn.VPAID_2],maxduration:s,minDuration:0,skip:r,skippable:h,skipmin:o,skipafter:a}}},pn="https://prebid.adnxs.com/pbc/v1/cache",fn=()=>({cmpApi:"iab",timeout:2e3,defaultGdprScope:!0,allowAuctionWithoutConsent:!1,rules:[{purpose:"storage",enforcePurpose:!0,enforceVendor:!0},{purpose:"basicAds",enforcePurpose:!0,enforceVendor:!0},{purpose:"measurement",enforcePurpose:!0,enforceVendor:!0}]}),mn=()=>({cmpApi:"iab",timeout:2e3});var gn;!function(t){t.CACHE_ID="CACHE_ID"}(gn||(gn={}));var vn;!function(t){t.Banner="banner",t.Video="video",t.All="all"}(vn||(vn={}));const yn=(t,i,e,s)=>{const n=Object.assign(Object.assign(Object.assign(Object.assign({usePrebidCache:!0},{userSync:{syncEnabled:!0,iframeEnabled:!0,pixelEnabled:!0,filterSettings:{iframe:{bidders:"*",filter:"include"},image:{bidders:"*",filter:"include"}},syncsPerBidder:0,syncDelay:3e3,auctionDelay:0,aliasSyncEnabled:!0,userIds:[{name:"criteo"},{name:"pubCommonId",params:{enableSharedId:!0},storage:{type:"cookie",name:"_pubcid",expires:180}},{name:"flocId",params:{token:"A3dHTSoNUMjjERBLlrvJSelNnwWUCwVQhZ5tNQ+sll7y+LkPPVZXtB77u2y7CweRIxiYaGwGXNlW1/dFp8VMEgIAAAB+eyJvcmlnaW4iOiJodHRwczovL3NoYXJlZGlkLm9yZzo0NDMiLCJmZWF0dXJlIjoiSW50ZXJlc3RDb2hvcnRBUEkiLCJleHBpcnkiOjE2MjYyMjA3OTksImlzU3ViZG9tYWluIjp0cnVlLCJpc1RoaXJkUGFydHkiOnRydWV9"}},{name:"uid2"}]}}),{ix:{timeout:900}}),{targetingControls:{addTargetingKeys:[gn.CACHE_ID]}}),{yahoossp:{mode:vn.Video}});return(0,dt.QM)(s)&&(n.pageUrl=s),n.usePrebidCache&&(n.cache={url:pn}),e&&(n.schain=(t=>({validation:"strict",config:{ver:"1.0",complete:1,nodes:[{asi:t.businessDomain,hp:1,sid:(0,dt.QM)(t.supplyChainId)?t.supplyChainId:null}]}}))(e)),(t||i)&&(n.consentManagement=((t,i)=>t?{gdpr:fn()}:i?{usp:mn()}:{})(t,i)),n};class bn{constructor(t){this.yr=t,this.gy=new _s(this.yr)}loadPrebidJs(t){return new Promise(((i,e)=>{if(this.gw)return i(this.gw);this.insertPrebidJs().then((e=>{this.gw=e,this.gw.setConfig(t),i(e)})).catch((t=>e(t)))}))}insertPrebidJs(){return new Promise(((t,i)=>{this.gy.loadIframe({customHead:"<style> html, body {display: none}</style>",customHtml:`<script id='cnx-prebid-loader' type='text/javascript' src='${$s.n.endPoints.assets.plugins.prebidScript}'><\/script>`,customIframeAttributes:[{key:"class",value:"cnx-prebid-loader"}],container:this.yr.querySelector("body"),visible:!1}).then((e=>{if(e.iframe.contentWindow.pbjs)return t(e.iframe.contentWindow.pbjs);i(new Error("pbjs could not be found on the iframe window"))})).catch((t=>{i(t)}))}))}}class xn{get config(){return this.yw}}const wn={[nn.AppNexus]:new class extends xn{constructor(){super(...arguments),this.yw={vendorId:32,gdprSupport:!0,ccpaSupport:!0}}getBidParams(t,i){const e=Object.assign({},t),{floorPrice:s,skippabilitySettings:{skip:n,skipafter:r}}=i;return(0,dt.r)(s)&&(e.reserve=s),e.video=Object.assign(Object.assign({},e.video),{skippable:!!n,skipoffset:r}),e}},[nn.DistrictM]:new class extends xn{constructor(){super(...arguments),this.yw={vendorId:144,gdprSupport:!0,ccpaSupport:!0}}getBidParams(t,i){const e=Object.assign({},t),{floorPrice:s,skippabilitySettings:{skip:n,skipafter:r}}=i;return(0,dt.r)(s)&&(e.reserve=s),e.video=Object.assign(Object.assign({},e.video),{skippable:!!n,skipoffset:r}),e}},[nn.IndexExchange]:new class extends xn{constructor(){super(...arguments),this.yw={vendorId:10,gdprSupport:!0,ccpaSupport:!0}}getBidParams(t,i){const e=t.siteId,{playerWidth:n,playerHeight:r,maxDuration:h,floorPrice:o,lineItemId:a}=i;if(!(0,dt.QM)(e))return void(0,s.n)({level:s.D.CRITICAL,message:"PrebidJS_IX_adapter_missing_siteId",callStack:a});const c={siteId:e,size:[Math.floor(n),Math.floor(r)],video:{mimes:on,minduration:0,maxduration:h,protocols:Object.keys(an).map((t=>an[t]))}};return(0,dt.kE)(t.minduration)&&(c.video.minduration=t.minduration),(0,dt.kE)(t.maxduration)&&t.maxduration<=h&&(c.video.maxduration=t.maxduration),(0,dt.QM)(t.id)&&(c.id=t.id),(0,dt.r)(o)&&(c.bidFloor=o,c.bidFloorCur="USD"),c}},[nn.OneVideo]:new class extends xn{constructor(){super(...arguments),this.yw={vendorId:25,gdprSupport:!0,ccpaSupport:!0}}getBidParams(t,i){(0,dt.QM)(t.pubId)||(0,s.n)({message:"AdManager_HeaderBidder_OneVideo_pubId_missing",level:s.D.CRITICAL},{throttle:2,sendMaxLog:!1});const{playerWidth:e,playerHeight:n,pageUrl:r,floorPrice:h}=i,o=Object.assign(Object.assign({},t),{pubId:t.pubId,video:{playerWidth:Math.floor(e),playerHeight:Math.floor(n),mimes:on,protocols:ln,api:un},site:{page:r}});return(0,dt.r)(h)&&(o.bidfloor=h),o}},[nn.OpenX]:new class extends xn{constructor(){super(...arguments),this.yw={vendorId:69,gdprSupport:!0,ccpaSupport:!0}}getBidParams(t,i){const e=Object.assign({},t),{floorPrice:s}=i;return(0,dt.r)(s)&&(e.customFloor=s),e}},[nn.Pubmatic]:new class extends xn{constructor(){super(...arguments),this.yw={vendorId:76,gdprSupport:!0,ccpaSupport:!0}}getBidParams(t,i){const e=Object.assign({},t),s=i.floorPrice;(0,dt.r)(s)&&(e.kadfloor=String(s));const n=e.dctr;if((0,dt.$K)(n)){const t=[];Object.keys(n).forEach((i=>{t.push(`${i}=${n[i]}`)})),e.dctr=t.join("|")}return e}},[nn.RhythmOne]:new class extends xn{constructor(){super(...arguments),this.yw={vendorId:36,gdprSupport:!0,ccpaSupport:!1}}getBidParams(t,i){return(0,dt.QM)(t.placementId)||(0,s.n)({level:s.D.CRITICAL,message:"PrebidJS_RhythmOne_adapter_missing_placementId",callStack:i.lineItemId}),t}},[nn.Rubicon]:new class extends xn{constructor(){super(...arguments),this.yw={vendorId:52,gdprSupport:!0,ccpaSupport:!0}}getBidParams(t,i){const e=Object.assign({},t),s=i.floorPrice;return(0,dt.r)(s)&&(e.floor=s),e}},[nn.SpotX]:new class extends xn{constructor(){super(...arguments),this.yw={vendorId:165,gdprSupport:!0,ccpaSupport:!0}}getBidParams(t,i){const e=Object.assign({},t),{floorPrice:s,isOutstream:n,bidSlotId:r}=i;return e.hide_skin=!0,(0,dt.r)(s)&&(e.price_floor=s),n&&(e.outstream_options={slot:r}),e}},[nn.Telaria]:new class extends xn{constructor(){super(...arguments),this.yw={vendorId:52,gdprSupport:!0,ccpaSupport:!1}}getBidParams(t,i){const e=Object.assign({},t);return t.srcPageUrl||(e.srcPageUrl=i.pageUrl),e}},[nn.MediaNet]:new class extends xn{constructor(){super(...arguments),this.yw={vendorId:142,gdprSupport:!0,ccpaSupport:!0}}getBidParams(t,i){const e=Object.assign({},t),{playerWidth:n,playerHeight:r,maxDuration:h,lineItemId:o,floorPrice:a}=i;return(0,dt.QM)(e.cid)||(0,s.n)({level:s.D.CRITICAL,message:"PrebidJS_MediaNet_adapter_missing_cid",callStack:o}),(0,dt.QM)(e.crid)||(0,s.n)({level:s.D.CRITICAL,message:"PrebidJS_MediaNet_adapter_missing_crid",callStack:o}),(0,dt.r)(a)&&(e.bidFloor=a),e.video={api:Object.keys(cn).map((t=>cn[t])),mimes:Object.keys(on).map((t=>on[t])),protocols:Object.keys(an).map((t=>an[t])),maxDuration:h,w:Math.floor(n),h:Math.floor(r)},e}},[nn.Adman]:new class extends xn{constructor(){super(...arguments),this.yw={vendorId:149,gdprSupport:!0,ccpaSupport:!0}}getBidParams(t,i){const e=Object.assign({},t),{lineItemId:n,floorPrice:r}=i;return(0,dt.QM)(e.placementId)||(0,s.n)({level:s.D.CRITICAL,message:"PrebidJS_Adman_adapter_missing_placementId",callStack:n}),(0,dt.r)(r)&&(e.bidfloor=r),e}},[nn.SynacorMedia]:new class extends xn{constructor(){super(...arguments),this.yw={vendorId:void 0,gdprSupport:!1,ccpaSupport:!0}}getBidParams(t,i){const e=Object.assign({},t);(0,dt.QM)(e.seatId)||(0,s.n)({level:s.D.CRITICAL,message:"PrebidJS_SynacorMedia_adapter_missing_seatId",callStack:i.lineItemId}),(0,dt.QM)(e.tagId)||(0,s.n)({level:s.D.CRITICAL,message:"PrebidJS_SynacorMedia_adapter_missing_tagId",callStack:i.lineItemId});const{floorPrice:n,maxDuration:r}=i;return(0,dt.r)(n)&&(e.bidfloor=n),e.video={api:Object.keys(cn).map((t=>cn[t])),mimes:Object.keys(on).map((t=>on[t])),protocols:Object.keys(an).map((t=>an[t])),maxduration:r},e}},[nn.Undertone]:new class extends xn{constructor(){super(...arguments),this.yw={vendorId:677,gdprSupport:!0,ccpaSupport:!0}}getBidParams(t,i){const e=Object.assign({},t);return(0,dt.QM)(e.placementId)||(0,s.n)({level:s.D.CRITICAL,message:"PrebidJS_Undertone_adapter_missing_placementId",callStack:i.lineItemId}),(0,dt.kE)(e.publisherId)||(0,s.n)({level:s.D.CRITICAL,message:"PrebidJS_Undertone_adapter_missing_publisherId",callStack:i.lineItemId}),e.video=Object.assign(Object.assign({},e.video),{skippable:!!i.skippabilitySettings.skip}),e}},[nn.AmxRTB]:new class extends xn{constructor(){super(...arguments),this.yw={vendorId:737,gdprSupport:!0,ccpaSupport:!0}}getBidParams(t,i){const e=Object.assign({},t),s=i.floorPrice;return(0,dt.r)(s)&&(e.floor=s),e}},[nn.Smaato]:new class extends xn{constructor(){super(...arguments),this.yw={vendorId:82,gdprSupport:!0,ccpaSupport:!0}}getBidParams(t,i){const e=Object.assign({},t),{lineItemId:n}=i;return(0,dt.QM)(e.publisherId)||(0,s.n)({level:s.D.CRITICAL,message:"PrebidJS_Smaato_adapter_missing_publisherId",callStack:n}),(0,dt.QM)(e.adspaceId)||(0,s.n)({level:s.D.CRITICAL,message:"PrebidJS_Smaato_adapter_missing_adspaceId",callStack:n}),e}},[nn.SmartAdServer]:new class extends xn{constructor(){super(...arguments),this.yw={vendorId:18,gdprSupport:!0,ccpaSupport:!0}}getBidParams(t,i){const e=Object.assign({},t),{floorPrice:n,lineItemId:r}=i;(0,dt.r)(n)&&(e.bidfloor=n);const h=Object.assign(Object.assign({},t.video),{protocol:an.VAST_3_WRAPPER});return e.video=h,(0,dt.r)(e.networkId)||(0,s.n)({level:s.D.CRITICAL,message:"PrebidJS_SmartAdServer_adapter_missing_networkId_integer",callStack:r}),(0,dt.r)(e.formatId)||(0,s.n)({level:s.D.CRITICAL,message:"PrebidJS_SmartAdServer_adapter_missing_formatId_integer",callStack:r}),(0,dt.r)(e.pageId)||(0,s.n)({level:s.D.CRITICAL,message:"PrebidJS_SmartAdServer_adapter_missing_pageId_integer",callStack:r}),(0,dt.r)(e.siteId)||(0,s.n)({level:s.D.CRITICAL,message:"PrebidJS_SmartAdServer_adapter_missing_siteId_integer",callStack:r}),e}},[nn.TheMediaGrid]:new class extends xn{constructor(){super(...arguments),this.yw={vendorId:686,gdprSupport:!0,ccpaSupport:!0}}getBidParams(t,i){const e=Object.assign({},t),{floorPrice:n}=i;return(0,dt.r)(n)&&(e.bidFloor=n),(0,dt.r)(e.uid)||(0,s.n)({level:s.D.CRITICAL,message:"PrebidJS_TheMediaGrid_adapter_missing_uid_integer",callStack:i.lineItemId}),e}},[nn.Rise]:new class extends xn{constructor(){super(...arguments),this.yw={vendorId:1043,gdprSupport:!0,ccpaSupport:!0}}getBidParams(t,i){const e=Object.assign({},t),{lineItemId:n,floorPrice:r}=i;return(0,dt.QM)(e.org)||(0,s.n)({level:s.D.CRITICAL,message:"PrebidJS_Rise_adapter_missing_org",callStack:n}),(0,dt.r)(r)&&(e.floorPrice=r),e}},[nn.YahooSSP]:new class extends xn{constructor(){super(...arguments),this.yw={vendorId:25,gdprSupport:!0,ccpaSupport:!0}}getBidParams(t,i){let e=Object.assign({},t);const n=e.bidOverride||{},r=n.imp||{},h=(0,dt.QM)(e.pos)&&(0,dt.QM)(e.dcn),o=(0,dt.QM)(e.pubId);return h||o||(0,s.n)({level:s.D.CRITICAL,message:"PrebidJS_YahooSSP_adapter_missing_required_fields",callStack:i.lineItemId}),(0,dt.r)(i.floorPrice)&&(e=Object.assign(Object.assign({},e),{bidOverride:Object.assign(Object.assign({},n),{imp:Object.assign(Object.assign({},r),{bidfloor:i.floorPrice})})})),e}},[nn.Unruly]:new class extends xn{constructor(){super(...arguments),this.yw={vendorId:36,gdprSupport:!1,ccpaSupport:!1}}getBidParams(t,i){const e=Object.assign({},t);return(0,dt.kE)(e.siteId)||(0,s.n)({level:s.D.CRITICAL,message:"PrebidJS_Unruly_adapter_missing_publisherId",callStack:i.lineItemId}),i.isOutstream&&(e.featureOverrides={canRunUnmissable:!0}),(0,dt.r)(i.floorPrice)&&(e.floor=i.floorPrice),e}},[nn.Kargo]:new class extends xn{constructor(){super(...arguments),this.yw={vendorId:972,gdprSupport:!0,ccpaSupport:!0}}getBidParams(t,i){const e=Object.assign({},t);return(0,dt.QM)(e.placementId)||(0,s.n)({level:s.D.CRITICAL,message:"PrebidJS_Kargo_adapter_missing_placementId",callStack:i.lineItemId}),e}},[nn.SmileWanted]:new class extends xn{constructor(){super(...arguments),this.yw={vendorId:639,gdprSupport:!0,ccpaSupport:!0}}getBidParams(t,i){const e=Object.assign({},t);return(0,dt.QM)(e.zoneId)||(0,s.n)({level:s.D.CRITICAL,message:"PrebidJS_SmileWanted_adapter_missing_zoneId",callStack:i.lineItemId}),(0,dt.r)(i.floorPrice)&&(e.bidfloor=i.floorPrice),e}},[nn.TrustX]:new class extends xn{constructor(){super(...arguments),this.yw={vendorId:void 0,gdprSupport:!0,ccpaSupport:!0}}getBidParams(t,i){const e=Object.assign({},t);return(0,dt.kE)(e.uid)||(0,s.n)({level:s.D.CRITICAL,message:"PrebidJS_TrustX_adapter_missing_uid",callStack:i.lineItemId}),(0,dt.r)(i.floorPrice)&&(e.bidFloor=i.floorPrice),e}},[nn.EmxDigital]:new class extends xn{constructor(){super(...arguments),this.yw={vendorId:183,gdprSupport:!0,ccpaSupport:!0}}getBidParams(t,i){const e=Object.assign({},t);return(0,dt.QM)(e.tagid)||(0,s.n)({level:s.D.CRITICAL,message:"PrebidJS_EmxDigital_adapter_missing_tagid",callStack:i.lineItemId}),(0,dt.r)(i.floorPrice)&&(e.bidfloor=i.floorPrice.toString()),e}},[nn.KrushMedia]:new class extends xn{constructor(){super(...arguments),this.yw={vendorId:void 0,gdprSupport:!0,ccpaSupport:!0}}getBidParams(t,i){const e=Object.assign({},t);return(0,dt.QM)(e.key)||(0,s.n)({level:s.D.CRITICAL,message:"PrebidJS_KrushMedia_adapter_missing_key",callStack:i.lineItemId}),(0,dt.r)(i.floorPrice)&&(e.bidfloor=i.floorPrice),e}}};class _n{constructor(t,i,e,s,n,r,h,o){this.bw=t,this.Fe=i,this.zx=e,this.xw=s,this.ww=n,this.yr=r,this.Sw=h,this.Pw=o,this.Aw=new bn(this.yr)}requestHeaderBidder(t,i,e){return new Promise(((s,n)=>{this.Iw().then((n=>{const r=t.map((t=>this.kw(n,t,i,e).then((t=>t))));Promise.all(r).then((t=>{s(t)}))})).catch((t=>{n(l.ConnatixNoBidReasonEnum.NoBid)}))}))}Cw(t,i){const e={lineItemSkippability:t,lineItemSkipMin:i,playerSkippability:this.Sw.skippability,playerSkipMin:this.Sw.skipMin,playerSkipAfter:this.Sw.skipAdAfter},s=gi(e),n=s.skippable?1:0;return Object.assign({skip:n},s)}kw(t,i,e,s){return new Promise((n=>{let r=[];if(i.availableRequests>0)if((0,dt.$K)(i.lineItem.floorPricesNew)&&(0,f.BZ)(i.lineItem.floorPricesNew.floorPrices)){const n=i.lineItem.floorPricesNew.floorPrices.map((t=>t.price));r=this.Tw(i.lineItem.floorPricesNew,i.availableRequests,i.maxBidPrice).map((r=>this.Mw(t,i.lineItem,e,s,n,i.maxAdDuration,r)))}else if((0,f.BZ)(i.lineItem.floorPriceData)){const n=i.lineItem.floorPriceData.map((t=>t.price));r=this.Ew(i.lineItem.floorPriceData,i.availableRequests,i.maxBidPrice).map((r=>this.Mw(t,i.lineItem,e,s,n,i.maxAdDuration,r)))}else{const n=i.lineItem.floorPriceData.map((t=>t.price)),h={floorPrice:i.lineItem.floorPrice,floorPriceIndex:-1,floorPriceFactor:null,floorPriceBypassReason:l.FloorPriceBypassReasonEnum.FixedCpm},o=this.Mw(t,i.lineItem,e,s,n,i.maxAdDuration,h);r.push(o)}Promise.all(r).then((t=>{const e=[],s=[],r=i.lineItem.advertiserLineItemId;t.forEach((t=>{t.reason?s.push(t):e.push(t)}));n({bids:e,noBids:s,lineItemId:r})}))}))}Mw(t,i,e,s,n,r,h){return new Promise((o=>{this.Bw(t,i,e,s,n,r,h).then((t=>{o(t)})).catch((t=>{o(t)}))}))}Iw(){const t=yn(this.xw,this.ww,this.bw,this.Fe);return new Promise(((i,e)=>{this.Aw.loadPrebidJs(t).then((t=>{i(t)})).catch((t=>{(0,s.n)({message:"AdManager_HeaderBidder_unable_to_load_prebidJs_script",exception:t.message,callStack:t.stack,level:s.D.CRITICAL}),e(t)}))}))}Bw(t,i,e,n,r,h,o){return new Promise(((a,c)=>{const u=this.Cw(i.skippability,i.skipMin),d=rn(i.headerBidderBids,i.advertiserLineItemId),p=((t,i,e,s,n,r,h)=>{const o={code:(0,bi.qs)(),mediaTypes:dn(t,i,e,s,r),bids:[]};return e||h!==nn.Smaato||(o.mediaTypes.video.startdelay=0),(0,dt.r)(n)&&(o.floors=(t=>({currency:"USD",schema:{fields:["mediaType"]},values:{video:t}}))(n)),o})(e,n,this.zx,h,o.floorPrice,u,d);try{const t=this.Pw.replaceMacrosInJsonString(i.headerBidderBids);p.bids=JSON.parse(t)}catch(t){return(0,s.n)({message:"AdManager_HeaderBidder_unable_to_parse_header_bidder",exception:t.message,callStack:t.stack,level:s.D.WARN}),void c({bidderName:d,reason:l.ConnatixNoBidReasonEnum.NoBid,floorPrice:o.floorPrice,floorPriceIndex:o.floorPriceIndex})}const f=Ms();p.bids.forEach((t=>this.Ow(t,e,n,o.floorPrice,i.advertiserLineItemId,h,f,u))),t.que.push((()=>{t.addAdUnits(p);const e={timeout:i.headerBidderTimeout,adUnits:[p],bidsBackHandler:()=>{try{const e=t.getHighestCpmBids(p.code)[0];if(!e)return void c({bidderName:d,reason:l.ConnatixNoBidReasonEnum.CsEmptyResponse,floorPrice:o.floorPrice,floorPriceIndex:o.floorPriceIndex});let n,h;if(this.Lw(e))n=(t=>`${pn}?uuid=${t.adserverTargeting.hb_cache_id}`)(e);else if(n=e.vastUrl,h=e.vastXml,!n&&!h)return(0,s.n)({level:s.D.WARN,message:"AdManager_HeaderBidder_no_content",exception:JSON.stringify(e)}),void c({bidderName:d,reason:l.ConnatixNoBidReasonEnum.CsInvalidResponse,floorPrice:o.floorPrice,floorPriceIndex:o.floorPriceIndex});const u=e.cpm||e.adResponse.ad.cpm,{advertiserLineItemId:m}=i,g=Object.assign(Object.assign({},o),{bidderName:d,adTagUrl:n,adTagXml:h,lineItemId:m,cpm:u,slotId:f,bidId:p.code});(0,dt.r)(o.floorPrice)&&u<o.floorPrice&&(0,s.n)({message:"AdManager_HeaderBidderRequester_cpm_lower_than_floorprice",level:s.D.WARN,exception:`floorPrices_${r}_index_${o.floorPriceIndex}_floorPrice_${o.floorPrice}_cpm_${u}_li_${i.advertiserLineItemId}`,callStack:rn(i.headerBidderBids,i.advertiserLineItemId)},{sendMaxLog:!1,throttle:5}),a(g)}catch(t){(0,s.n)({level:s.D.WARN,message:"AdManager_HeaderBidder_Prebidjs_error",exception:t.message,callStack:t.stack}),c({bidderName:d,reason:l.ConnatixNoBidReasonEnum.NoBid,floorPrice:o.floorPrice,floorPriceIndex:o.floorPriceIndex})}}};t.requestBids(e)}))}))}Ow(t,i,e,s,n,r,h,o){const a=wn[t.bidder].getBidParams;a&&(t.params=a(t.params,{playerWidth:i,playerHeight:e,maxDuration:r,pageUrl:this.Fe,floorPrice:s,lineItemId:n,isOutstream:this.zx,bidSlotId:h,skippabilitySettings:o}))}Lw(t){return t.adserverTargeting&&(0,dt.QM)(t.adserverTargeting.hb_cache_id)}Tw(t,i,e){if(0===i)return[];const{floorPrices:s,recommended:n}=t,r=s.map(((t,i)=>{if(i<n)return{floorPrice:t.price,floorPriceIndex:i,floorPriceBypassReason:t.floorPriceBypassReason}})).filter((t=>(0,dt.$K)(t)));return this.Rw(r,i,e,!1)}Ew(t,i,e){if(0===i)return[];const s=t.map(((t,i)=>({floorPrice:t.price,floorPriceIndex:i,floorPriceFactor:t.factor,floorPriceBypassReason:null})));return this.Rw(s,i,e,!0)}Rw(t,i,e,s){let n=i;const r=t.filter((({floorPrice:t})=>t>=e&&n>0&&(n--,!0)));if((0,f.BZ)(r))return r;const h={floorPrice:e,floorPriceIndex:-1,floorPriceBypassReason:l.FloorPriceBypassReasonEnum.BidInHand};return s&&(h.floorPriceFactor=null),[h]}}var Sn=o(7432);class Pn{constructor(t){this.th=t}isAdapterCallable(t){const i=(t=>{const i=Object.keys(nn).find((i=>nn[i]===t));if(i)return nn[i]})(t);return!!i&&(this.th.isGDPR()?this.Dw(i):!this.th.isCcpaApplicable()||this.jw(i))}Fw(t){return wn[t].config.gdprSupport}Dw(t){if(this.Fw(t))return!0;const i=wn[t].config.vendorId,e=(0,dt.kE)(i)?`${i}`:"";return this.th.isConsent(e,Sn.Z)}jw(t){return!!wn[t].config.ccpaSupport||!!this.th.isSellUserAllowed()}}class An{constructor(t,i,e,s,n,r,h,o,a){this.zx=t,this.bw=i,this.xf=e,this.Gx=s,this.Jx=n,this.Yx=r,this.Xx=h,this.Ib=o,this.Sw=a,this.Vw=new Map,this.$w=new _n(this.bw,this.xf.config.pageUrl,this.zx,this.xf.services.UserManagerService.isGDPR(),this.xf.services.UserManagerService.isCcpaApplicable(),this.xf.services.GlobalDomUtilsService,this.Sw,this.xf.services.MacrosService),this.Nw=new Pn(this.xf.services.UserManagerService)}request(t){const{width:i,height:e}=t.callingState,s=this.tw(i,e),n=this.Uw(t.lineItemRequestDataList);return(0,f.BZ)(n)&&s?(t.lineItemRequestDataList=n,this.Hw(t).then((i=>Promise.resolve(this.qw(i,t)))).catch((()=>Promise.resolve({bids:[],noBids:[]})))):Promise.resolve({bids:[],noBids:[]})}destroy(){}qw(t,i){const e={bids:[],noBids:[]};return t.forEach((t=>{const s=mi(i.lineItemRequestDataList,t.lineItemId);t.bids.forEach((t=>{const n=t.bidId,r=new Di,h=new Gs({requestedFloorPrice:t.floorPrice,requestedFloorPriceIndex:t.floorPriceIndex,prebidJsBidderName:t.bidderName,requestNumber:s.historicalMetrics.requestNumber,predictedFloorPrice:s.protoLineItem.predictedFloorPrice,floorPriceFactor:t.floorPriceFactor,floorPriceBypassReason:t.floorPriceBypassReason,floorPriceInformation:this.zw(s,t.floorPriceIndex,t.floorPriceBypassReason)});ji(s.protoLineItem.trackers,r),t.adTagUrl?e.bids.push(new Ws({id:n,adManagerLineItem:s,replaceTrackingMacros:!0,requestMetadata:h,trackersInformation:r,url:t.adTagUrl,callingState:i.callingState,adMacroReplacer:this.Gx,adContainer:this.Jx.get(s.protoLineItem.adType),globalDomUtilsService:this.xf.services.GlobalDomUtilsService,viewabilityService:this.xf.services.ViewabilityService,trackingService:this.xf.services.TrackingService,cpm:t.cpm,adEnforcer:this.Yx,os:this.xf.config.os.os,adSlotContainerRecycler:this.Xx,bidSlotId:t.slotId,loopAdWhenFinished:this.Ib,pageUrl:this.xf.config.pageUrl,urlSuffixerService:this.xf.services.UrlSuffixerService})):t.adTagXml&&e.bids.push(new Us({id:n,adManagerLineItem:s,replaceTrackingMacros:!0,requestMetadata:h,trackersInformation:r,xml:t.adTagXml,callingState:i.callingState,adMacroReplacer:this.Gx,adContainer:this.Jx.get(s.protoLineItem.adType),globalDomUtilsService:this.xf.services.GlobalDomUtilsService,viewabilityService:this.xf.services.ViewabilityService,trackingService:this.xf.services.TrackingService,cpm:t.cpm,adEnforcer:this.Yx,os:this.xf.config.os.os,adSlotContainerRecycler:this.Xx,bidSlotId:t.slotId,loopAdWhenFinished:this.Ib,pageUrl:this.xf.config.pageUrl,urlSuffixerService:this.xf.services.UrlSuffixerService}))})),t.noBids.forEach((t=>{const i=new Gs({requestedFloorPrice:t.floorPrice,requestedFloorPriceIndex:t.floorPriceIndex,requestNumber:s.historicalMetrics.requestNumber,predictedFloorPrice:s.protoLineItem.predictedFloorPrice,prebidJsBidderName:t.bidderName,floorPriceInformation:this.zw(s,t.floorPriceIndex)});e.noBids.push({lineItem:s,requestMetadata:i,reason:t.reason})}))})),e}zw(t,i,e){if(!(0,dt.$K)(t.protoLineItem.floorPricesNew))return;const s={floorPrices:t.protoLineItem.floorPricesNew.floorPrices.map((t=>t.price)),floorPriceIndexUsed:i};return(0,dt.$K)(e)&&(s.floorPriceBypassReason=e),s}Hw(t){const{width:i,height:e}=t.callingState,s=t.lineItemRequestDataList.map((i=>this.Ww(i,t.maxAdDuration,t.maxBidPrice)));return this.$w.requestHeaderBidder(s,i,e)}Ww(t,i,e){const s=t.adManagerLineItem;return{availableRequests:t.maxAvailableRequests,lineItem:s.protoLineItem,maxAdDuration:i,maxBidPrice:e}}Uw(t){return t.filter((t=>{const i=this.Gw(t.adManagerLineItem);return this.Vw.has(t.adManagerLineItem)||this.Vw.set(t.adManagerLineItem,i),this.Qw(i)}))}tw(t,i){return 0!==t&&0!==i||((0,s.n)({message:"AdManager_PrebidAggregator_dimensions",exception:`width:${t}_height:${i}_destroyed:${_.S.playerDestroyed}`,level:s.D.CRITICAL},{throttle:5}),!1)}Qw(t){return this.Nw.isAdapterCallable(t)}Gw(t){const i=this.Vw.get(t);return(0,dt.QM)(i)?i:rn(t.protoLineItem.headerBidderBids,t.protoLineItem.advertiserLineItemId)||""}}var In,kn=function(t,i,e,s){return new(e||(e=Promise))((function(n,r){function h(t){try{a(s.next(t))}catch(t){r(t)}}function o(t){try{a(s.throw(t))}catch(t){r(t)}}function a(t){var i;t.done?n(t.value):(i=t.value,i instanceof e?i:new e((function(t){t(i)}))).then(h,o)}a((s=s.apply(t,i||[])).next())}))};class Cn{constructor(t){this.xf=t}callCoreTam(t){return kn(this,void 0,void 0,(function*(){const i=t.map((t=>{const i={lineItemId:t.lineItemId,code:t.coreTamCode,metadata:this.xf.services.TrackingService.getMetadataModel(),exploration:this.xf.config.explorationMode};return this.Yw(i)}));return Promise.all(i)}))}Yw(t){return kn(this,void 0,void 0,(function*(){try{const e=yield qs.n.sendProtoRequest({endpoint:$s.n.endPoints.api.tam,ProtoRequest:l.ProtoCoreTamBidRequest,ProtoResponse:l.ProtoCoreTamBidResponse,requestData:t,queryParams:{[Js.Fk]:i.g.version},logError:!0});return(0,dt.QM)(e.errorMessage)?{lineItemId:t.lineItemId,coreTamCode:t.code,coreTamBidResponse:null,rejectReason:l.ConnatixNoBidReasonEnum.RequestException}:(0,dt.QM)(e.encryptedBidPrice)?{lineItemId:t.lineItemId,coreTamCode:t.code,coreTamBidResponse:e,rejectReason:null}:{lineItemId:t.lineItemId,coreTamCode:t.code,coreTamBidResponse:null,rejectReason:l.ConnatixNoBidReasonEnum.InvalidResponse}}catch(i){return{lineItemId:t.lineItemId,coreTamCode:t.code,coreTamBidResponse:null,rejectReason:l.ConnatixNoBidReasonEnum.RequestException}}}))}}!function(t){t.SDK_NAME_ON_PUB_WINDOW="apstag",t.MEDIA_TYPE="video",t.VAST_TAG_BASE_URL="https://aax.amazon-adsystem.com/e/dtb/vast"}(In||(In={}));class Tn{constructor(t){this.Xw=t.amznbid,this.Zw=t.amzniid}static getTargetingFromBid(t){var i,e;return{amzniid:t.amzniid||(null===(i=t.targeting)||void 0===i?void 0:i.amzniid),amznbid:t.amznbid||(null===(e=t.targeting)||void 0===e?void 0:e.amznbid)}}static hasTargeting(t){const i=Tn.getTargetingFromBid(t);return(0,dt.QM)(i.amzniid)&&(0,dt.QM)(i.amznbid)}get amazonBidCode(){return this.Xw}getVast(){return`${In.VAST_TAG_BASE_URL}?b=${this.Zw}&pp=${this.Xw}&rnd=${(0,bi.qs)()}`}}class Mn{constructor(t){this.Kw=t.targetingDeal,this.t_=t.targetingKey,this.i_=t.targetingValue}static hasTargetings(t){const i=Mn.getTargetingsFromBid(t);return(0,f.BZ)(i)}static getTargetingsFromBid(t){const i=Mn.getDeals(t);return(0,f.BZ)(i)?i.map((i=>{const e=`${i}amzniid`;return{targetingDeal:i,targetingKey:e,targetingValue:t.targeting[e]}})).filter((t=>(0,dt.QM)(t.targetingValue))):[]}static getDeals(t){var i;return t.amzndeals||(null===(i=t.targeting)||void 0===i?void 0:i.amzndeals)}get targetingDeal(){return this.Kw}get targetingKey(){return this.t_}get targetingValue(){return this.i_}getVast(){return`${In.VAST_TAG_BASE_URL}?b=${this.i_}&rnd=${(0,bi.qs)()}`}}class En{constructor(t){this.Xw=t.amznbid_sp,this.Zw=t.amzniid_sp}static getTargetingFromBid(t){var i,e;return{amzniid_sp:t.amzniid_sp||(null===(i=t.targeting)||void 0===i?void 0:i.amzniid_sp),amznbid_sp:t.amznbid_sp||(null===(e=t.targeting)||void 0===e?void 0:e.amznbid_sp)}}static hasTargeting(t){const i=En.getTargetingFromBid(t);return(0,dt.QM)(i.amzniid_sp)&&(0,dt.QM)(i.amznbid_sp)}get amazonBidCode(){return this.Xw}getVast(){return`${In.VAST_TAG_BASE_URL}?b=${this.Zw}&rnd=${(0,bi.qs)()}`}}class Bn{constructor(t,i){this.e_=t,this.n_=[],i.forEach((t=>{const i=class{static createObjects(t,i){const e=[];switch(t.creativeType){case l.ProtoCreativeTypeEnum.Tam:if(Tn.hasTargeting(i)){const t=Tn.getTargetingFromBid(i);e.push(new Tn(t))}break;case l.ProtoCreativeTypeEnum.TamDeal:if(Mn.hasTargetings(i)){const s=Mn.getTargetingsFromBid(i).filter((i=>i.targetingDeal===t.amazonDealId)).map((t=>new Mn(t)));e.push(...s)}break;case l.ProtoCreativeTypeEnum.TamPrivateAuction:if(En.hasTargeting(i)){const t=En.getTargetingFromBid(i);e.push(new En(t))}}return e}}.createObjects(this.e_,t);this.n_.push(...i)}))}get amazonBidList(){return this.n_}get lineItem(){return this.e_}get hasCoreTamDependency(){return this.n_.every((t=>(0,dt.QM)(t.amazonBidCode)))}}var On=function(t,i,e,s){return new(e||(e=Promise))((function(n,r){function h(t){try{a(s.next(t))}catch(t){r(t)}}function o(t){try{a(s.throw(t))}catch(t){r(t)}}function a(t){var i;t.done?n(t.value):(i=t.value,i instanceof e?i:new e((function(t){t(i)}))).then(h,o)}a((s=s.apply(t,i||[])).next())}))};const Ln="load";class Rn{constructor(t,i,e){this.xf=t,this.r_=i,this.o_=e,this.a_=()=>{this.c_||this.l_(),this.u_&&clearInterval(this.u_),this.c_||(0,s.n)({message:"TamRequester_TAM_lib_not_found_on_page_loaded",level:s.D.WARN})};const n=this.xf.config.topWindow;this.d_=(0,bi.pE)(n).topFrame,this.l_()}requestBids(t){return this.p_(t)}destroy(){this.u_&&clearInterval(this.u_),this.d_.removeEventListener(Ln,this.a_)}p_(t){return On(this,void 0,void 0,(function*(){try{const i=yield this.f_(),e=this.m_(t,i),s=yield this.g_(e);return this.v_(e,s)}catch(i){return this.y_(t,i)}}))}y_(t,i){return i.message?t.map((t=>({bids:[],lineItemId:t.advertiserLineItemId,noBids:[{reason:l.ConnatixNoBidReasonEnum.CsRequestException}]}))):t.map((t=>({bids:[],lineItemId:t.advertiserLineItemId,noBids:[{reason:i}]})))}v_(t,i){return t.map((t=>{const e=i.filter((i=>t.lineItem.advertiserLineItemId===i.lineItemId));return this.b_(t,e)}))}b_(t,i){return t.hasCoreTamDependency?this.x_(t,i):this.w_(t)}w_(t){const i=t.amazonBidList.map((i=>({encryptedPrice:null,vastTag:i.getVast(),ofskp:Ei(t.lineItem.floorPrice),successRate:t.lineItem.successRate,slotId:Ms()})));return(0,f.BZ)(i)?{bids:i,lineItemId:t.lineItem.advertiserLineItemId,noBids:[]}:{bids:[],lineItemId:t.lineItem.advertiserLineItemId,noBids:[{reason:l.ConnatixNoBidReasonEnum.NoBid}]}}x_(t,i){const e=i.map((i=>this.__(t,i))).filter((t=>t.amazonBid&&!(0,dt.Cz)(t.coreTamRequestOutput.rejectReason,l.ConnatixNoBidReasonEnum))).map((t=>({encryptedPrice:t.coreTamRequestOutput.coreTamBidResponse.encryptedBidPrice,vastTag:t.amazonBid.getVast(),ofskp:t.coreTamRequestOutput.coreTamBidResponse.ofskp,successRate:t.coreTamRequestOutput.coreTamBidResponse.successRate,slotId:Ms()}))),s=i.filter((t=>t.rejectReason)).map((t=>({reason:t.rejectReason})));return(0,f.BZ)(e)||(0,f.BZ)(s)?{bids:e,noBids:s,lineItemId:t.lineItem.advertiserLineItemId}:{bids:[],lineItemId:t.lineItem.advertiserLineItemId,noBids:[{reason:l.ConnatixNoBidReasonEnum.NoBid}]}}__(t,i){return{coreTamRequestOutput:i,amazonBid:t.amazonBidList.find((t=>t.amazonBidCode===i.coreTamCode))}}g_(t){return On(this,void 0,void 0,(function*(){const i=t.reduce(this.S_,[]);return this.P_(i)}))}S_(t,i){return[...t,...i.amazonBidList.filter((t=>t.amazonBidCode)).map((t=>({lineItemId:i.lineItem.advertiserLineItemId,coreTamCode:t.amazonBidCode})))]}m_(t,i){return t.map((t=>new Bn(t,i)))}P_(t){return this.o_.callCoreTam(t)}f_(){return new Promise(((t,i)=>{this.c_?this.c_.fetchBids({slots:[{slotID:this.r_,mediaType:In.MEDIA_TYPE}]},(e=>{(0,f.BZ)(e)?t(e):i(l.ConnatixNoBidReasonEnum.EmptyResponse)})):i(l.ConnatixNoBidReasonEnum.NoLibInPage)}))}l_(){const t=this.d_[In.SDK_NAME_ON_PUB_WINDOW];t?this.c_=t:this.u_||"complete"!==this.d_.document.readyState&&(this.d_.addEventListener(Ln,this.a_),this.u_=setInterval((()=>{this.l_()}),Ht.s_)),this.c_&&clearInterval(this.u_)}}class Dn{constructor(t,i,e,s,n,r){this.xf=t,this.A_=i,this.Gx=e,this.Jx=s,this.Yx=n,this.Xx=r,this.I_=new Rn(this.xf,this.A_,new Cn(this.xf))}request(t){const{width:i,height:e}=t.callingState;return this.tw(i,e)?this.k_(t).then((i=>Promise.resolve(this.C_(i,t)))).catch((()=>Promise.resolve({bids:[],noBids:[]}))):Promise.resolve({bids:[],noBids:[]})}destroy(){this.I_.destroy()}k_(t){const i=t.lineItemRequestDataList.map((t=>t.adManagerLineItem.protoLineItem));return this.I_.requestBids(i)}C_(t,i){const e={bids:[],noBids:[]};return t.forEach((t=>{const s=mi(i.lineItemRequestDataList,t.lineItemId);t.bids.forEach((t=>{const n=new Di,r=new Gs({encryptedPrice:t.encryptedPrice,requestNumber:s.historicalMetrics.requestNumber});ji(s.protoLineItem.trackers,n),e.bids.push(new Ws({id:(0,bi.qs)(),adManagerLineItem:s,replaceTrackingMacros:!0,requestMetadata:r,trackersInformation:n,url:t.vastTag,bidSlotId:t.slotId,callingState:i.callingState,adMacroReplacer:this.Gx,adContainer:this.Jx.get(s.protoLineItem.adType),globalDomUtilsService:this.xf.services.GlobalDomUtilsService,viewabilityService:this.xf.services.ViewabilityService,trackingService:this.xf.services.TrackingService,adEnforcer:this.Yx,requestWithCredentials:!1,successRate:t.successRate,obfuscatedPrice:t.ofskp,os:this.xf.config.os.os,adSlotContainerRecycler:this.Xx,pageUrl:this.xf.config.pageUrl,urlSuffixerService:this.xf.services.UrlSuffixerService}))})),t.noBids.forEach((t=>{e.noBids.push({lineItem:s,requestMetadata:new Gs({requestNumber:s.historicalMetrics.requestNumber}),reason:t.reason})}))})),e}tw(t,i){return 0!==t&&0!==i||((0,s.n)({message:"AdManager_PrebidAggregator_dimensions",exception:`width:${t}_height:${i}_destroyed:${_.S.playerDestroyed}`,level:s.D.CRITICAL},{throttle:5}),!1)}}const jn=[[88,31],[120,20],[120,30],[120,60],[120,90],[125,125],[168,28],[168,42],[180,150],[200,200],[200,446],[216,36],[216,54],[220,90],[234,60],[240,133],[250,250],[250,360],[292,30],[300,31],[300,50],[300,75],[300,100],[300,250],[320,50],[320,100],[320,240],[336,280],[400,350],[468,60],[480,320]];class Fn{constructor(t,i,e){this.T_=t,this.M_=i,this.E_=e,this.hy=`div-gpt-ad-1589549806211-${(0,bi.qs)()}`,this.oy=new It.x,this.zg=new It.x,this.Ag=new It.x}get onCreativeReceived(){return this.Ag.asObservable()}get onDisplayAd(){return this.oy.asObservable()}get onError(){return this.zg.asObservable()}getAdMediaHeight(){return this.B_?this.B_.clientHeight:0}getAdMediaWidth(){return this.B_?this.B_.clientWidth:0}initializeAd(t,i){try{this.O_=t,this.hg(t);const e=this.R_(i.width,i.height);this.T_.cmd.push((()=>{this.D_=this.T_.defineSlot(this.E_,e,this.hy).addService(this.T_.pubads()).setTargeting("domains",this.M_),this.T_.enableServices(),this.j_(this.D_),this.T_.pubads().isInitialLoadDisabled()&&this.T_.pubads().refresh([this.D_]),this.T_.display(this.hy)}))}catch(t){this.zg.next(zi.WrapperInitAdError)}}destroy(){this.T_.cmd.push((()=>{this.T_.destroySlots&&this.D_&&this.T_.destroySlots([this.D_])}))}j_(t){this.T_.pubads().addEventListener("slotOnload",(i=>{var e,n;if(i.slot===t){try{const t=null===(n=null===(e=null==i?void 0:i.slot)||void 0===e?void 0:e.getResponseInformation())||void 0===n?void 0:n.creativeId;t&&this.Ag.next(t.toString())}catch(t){(0,s.n)({message:"AdManager_GptWrapper_creativeId",level:s.D.WARN,exception:t.message,callStack:t.stack})}this.oy.next()}})),this.T_.pubads().addEventListener("slotRenderEnded",(t=>{var i;if(t.slot===this.D_){try{this.B_=null===(i=this.O_)||void 0===i?void 0:i.getElementsByTagName("iframe")[0],(0,dt.$K)(this.D_)&&(0,e.AX)(this.B_.contentWindow,"GPTWrapper")}catch(t){}t.isEmpty&&this.zg.next(zi.AdxOverlayNoFill)}}))}hg(t){t.id=this.hy}R_(t,i){return jn.filter((e=>!Array.isArray(e)||!(0,f.fn)(e)||(0,f.BZ)(e)&&e[0]<=t&&e[1]<=i))}}var Vn=o(5049);class $n extends te{constructor(t,i){super(t,i),this.Bm=t,this.settings=i,this.adMediaType="displayAdx",this.adSourceType=l.ProtoAdsourceTypeEnum.Unknown,this.rb="adx",this.F_={[rs.FirstQuartile]:qt.fI.AdVideoFirstQuartile,[rs.SecondQuartile]:qt.fI.AdVideoMidpoint,[rs.ThirdQuartile]:qt.fI.AdVideoThirdQuartile,[rs.FourthQuartile]:qt.fI.AdVideoComplete},this.V_=[];const e=this.settings.adManagerLineItem.protoLineItem.overlayTime*Ht.s_;this.sb=new Is(this.Bm,e,500),this.V_.push(this.sb.onTimeUpdate.subscribe((()=>{this.Wm({type:qt.fI.AdRemainingTimeChange})})),this.sb.onTimeElapsed.subscribe((()=>{this.stopAd("adxTimerElapsed")})),this.sb.onQuartile.subscribe((t=>{this.Wm({type:this.F_[t],payload:{}})})))}initAd(t,i,e,s,n,r,h){try{super.initAd(t,i,e,s,n,r,h),this.N_={width:t,height:i},this.U_().then((t=>{this.H_=new Fn(t,this.settings.domain,this.settings.adxAdUnitPath),this.V_.push(this.H_.onCreativeReceived.subscribe((t=>{this.creativeId=t}))),this.Wm({type:qt.fI.AdLoaded,payload:{skipOffset:0}})})).catch((t=>{this.Wm({type:qt.fI.AdError,payload:{errorMessage:zi.AdxOverlayGptScriptLoad+`_${t.message}`}})}))}catch(t){this.Wm({type:qt.fI.AdError,payload:{errorMessage:zi.AdaptorInitAdError+`_${t.message}`}})}}startAd(){try{super.startAd(),this.V_.push(this.H_.onDisplayAd.subscribe((()=>{this.Wm({type:qt.fI.AdStarted}),this.Wm({type:qt.fI.AdVideoStart}),this.Wm({type:qt.fI.AdImpression,payload:{}}),this.sb.start()})),this.H_.onError.subscribe((t=>{this.Wm({type:qt.fI.AdError,payload:{errorMessage:t}}),this.sb.stop()}))),this.H_.initializeAd(this.Om,this.N_)}catch(t){this.Wm({type:qt.fI.AdError,payload:{errorMessage:zi.AdaptorStartAdError+`_${t.exception}`}})}}stopAd(t){try{super.stopAd(t),this.sb.stop(),this.Wm({type:qt.fI.AdStopped,payload:{shouldTrackPostBid:!0}})}catch(t){this.yg("AdxBidAdaptor","stopAd",t)}}resizeAd(t,i,e){this.N_&&(this.N_.width=t,this.N_.height=i)}pauseAd(){try{this.sb.stop(),this.Wm({type:qt.fI.AdPaused})}catch(t){this.yg("AdxBidAdaptor","pauseAd",t)}}resumeAd(){try{this.sb.start(),this.Wm({type:qt.fI.AdPlaying})}catch(t){this.yg("AdxBidAdaptor","resumeAd",t)}}expandAd(){}collapseAd(){}skipAd(){try{super.skipAd(),this.Wm({type:qt.fI.AdSkipped})}catch(t){this.yg("AdxBidAdaptor","skipAd",t)}}getAdRemainingTime(){return this.sb.timeRemaining/Ht.s_}getAdDuration(){return this.sb.timerDuration/Ht.s_}getAdVolume(){return 0}getAdMediaSize(){return{width:this.H_.getAdMediaWidth(),height:this.H_.getAdMediaHeight()}}setAdVolume(t){}get adVideoUrl(){return this.rb}get declaredDurationInSeconds(){return this.settings.adManagerLineItem.protoLineItem.duration}U_(){const t=(0,bi.pE)(window).topFrame;if(t.googletag)return Promise.resolve(t.googletag);{const i={cmd:[]};return t.googletag=window.googletag||i,new Promise(((i,s)=>{(0,e.dZ)({src:Vn.x},t.document.head,t,(()=>{i(t.googletag)}),(()=>{s()}))}))}}Ru(){var t;try{super.Ru(),this.sb.stop(),(0,jt.i)(this.V_),null===(t=this.H_)||void 0===t||t.destroy()}catch(t){this.yg("AdxBidAdaptor","_destroy",t)}}}class Nn{constructor(t){this.settings=t,this.metrics={created:(new Date).getTime()}}fetchBid(){this.metrics.fetchStart=(new Date).getTime();const t=De.getGlobalContainer().resolve(ts),i=new $n(t,{id:this.settings.id,adManagerLineItem:this.settings.adManagerLineItem,trackers:this.settings.trackersInformation,adxAdUnitPath:this.q_(this.settings.url),requestMetadata:this.settings.requestMetadata,callingState:this.settings.callingState,domain:this.settings.pageDomain,adContainer:this.settings.adContainer,globalDomUtilsService:this.settings.globalDomUtilsService,viewabilityService:this.settings.viewabilityService,cpm:this.settings.cpm,successRate:this.settings.successRate,obfuscatedPrice:this.settings.obfuscatedPrice,adEnforcer:this.settings.adEnforcer,os:this.settings.os,adSlotContainerRecycler:this.settings.adSlotContainerRecycler,bidSlotId:this.settings.bidSlotId,urlSuffixerService:this.settings.urlSuffixerService});return this.metrics.fetchEnd=(new Date).getTime(),Promise.resolve(i)}q_(t){return t.substr("https://adx.connatix.com".length)}}var Un=function(t,i,e,s){return new(e||(e=Promise))((function(n,r){function h(t){try{a(s.next(t))}catch(t){r(t)}}function o(t){try{a(s.throw(t))}catch(t){r(t)}}function a(t){var i;t.done?n(t.value):(i=t.value,i instanceof e?i:new e((function(t){t(i)}))).then(h,o)}a((s=s.apply(t,i||[])).next())}))};function Hn(){return Un(this,void 0,void 0,(function*(){try{const t=yield(0,bi.Up)((()=>Un(this,void 0,void 0,(function*(){return yield o.e("hls").then(o.t.bind(o,490,23))}))));if(!t||"object"!=typeof t)throw new Error("no_hls_module");if("function"==typeof t.isSupported)return t;if("function"!=typeof t.default||0===Object.keys(t.default).length)throw new Error("empty_hls_module");if("function"!=typeof t.default.isSupported)throw new Error("no_hls_isSupported");return t.default}catch(t){return(0,s.n)({callStack:t.stack,exception:t.message,level:s.D.WARN,message:"HLS_dynamicImport"}),null}}))}class qn extends te{constructor(t,i){super(t,i),this.Bm=t,this.settings=i,this.adMediaType="cnxMedia",this.adSourceType=l.ProtoAdsourceTypeEnum.CnxMedia,this.z_=[]}initAd(t,i,e,s,n,r,h){try{let o;super.initAd(t,i,e,s,n,r,h);let a=!1;if((0,dt.QM)(this.settings.externalMediaFile))o=this.W_(this.settings.externalMediaFile);else if((0,dt.QM)(this.settings.externalHlsFile))o=this.W_(this.settings.externalHlsFile),a=!0;else{if(!(0,f.BZ)(this.settings.renditions))return void this.Wm({type:qt.fI.AdError,payload:{errorMessage:zi.CnxMediaNoRenditions}});o=this.G_(this.settings.renditions,i,this.settings.mediaId)}this.J_=o,this.Q_=new Ds(this.settings.globalDomUtilsService,this.J_,this.Lm,this.settings.os,this.settings.clickUrl,this.settings.loopAdWhenFinished,this.settings.pauseAdWhenFinished,a,this.settings.hlsModule,this.settings.inApp,this.settings.pageDomain),this.z_.push(this.Q_.onVpaidEvent.subscribe((t=>{this.Wm(t)}))),this.Q_.initAd(t,i,e,s,n,{slot:this.Om,videoSlot:this.Lm})}catch(t){this.Wm({type:qt.fI.AdError,payload:{errorMessage:zi.AdaptorInitAdError+`_${t.message}`}})}}startAd(){try{super.startAd(),this.Q_.startAd()}catch(t){this.Wm({type:qt.fI.AdError,payload:{errorMessage:zi.AdaptorStartAdError+`_${t.message}`}})}}stopAd(t){super.stopAd(t),this.Q_?this.Q_.stopAd(t):(0,s.n)({message:"stopAd",exception:t,level:s.D.WARN})}resizeAd(t,i,e){try{this.Q_.resizeAd(t,i,e)}catch(t){this.yg("CnxMediaBidAdaptor","resizeAd",t)}}pauseAd(){try{this.Q_.pauseAd()}catch(t){this.yg("CnxMediaBidAdaptor","pauseAd",t)}}resumeAd(){try{this.Q_.resumeAd()}catch(t){this.yg("CnxMediaBidAdaptor","resumeAd",t)}}expandAd(){try{this.Q_.expandAd()}catch(t){this.yg("CnxMediaBidAdaptor","expandAd",t)}}collapseAd(){try{this.Q_.collapseAd()}catch(t){this.yg("CnxMediaBidAdaptor","collapseAd",t)}}skipAd(){try{super.skipAd(),this.Q_.skipAd()}catch(t){this.yg("CnxMediaBidAdaptor","skipAd",t)}}getAdRemainingTime(){try{return this.Q_.getAdRemainingTime()}catch(t){return this.yg("CnxMediaBidAdaptor","getAdRemainingTime",t),0}}getAdDuration(){try{return this.Q_?this.Q_.getAdDuration():this.settings.adManagerLineItem.protoLineItem.duration}catch(t){return this.yg("CnxMediaBidAdaptor","getAdDuration",t),0}}getAdVolume(){try{return this.Q_.getAdVolume()}catch(t){return this.yg("CnxMediaBidAdaptor","getAdVolume",t),0}}getAdMediaSize(){return{width:this.Q_.getAdMediaWidth(),height:this.Q_.getAdMediaHeight()}}setAdVolume(t){try{super.setAdVolume(t),this.Q_.setAdVolume(t)}catch(t){this.yg("CnxMediaBidAdaptor","setAdVolume",t)}}get adVideoUrl(){return this.J_}get declaredDurationInSeconds(){return this.settings.adManagerLineItem.protoLineItem.duration}Ru(){var t;if(!this.settings.pauseAdWhenFinished&&!this.settings.loopAdWhenFinished)try{super.Ru(),(0,jt.i)(this.z_),null===(t=this.Q_)||void 0===t||t.destroy()}catch(t){this.yg("CnxMediaBidAdaptor","_destroy",t)}}W_(t){return(null==t?void 0:t.includes($s.n.endPoints.base.video))?this.gd.appendParamsToUrl(t):t}G_(t,i,e){let s;s=t.filter((t=>t.codec===x.H264));const n=(0,xi.DE)(i,s.map((t=>t.height)));return s=s.filter((t=>t.height===n)),s.length>0?this.gd.appendParamsToUrl(`${$s.n.endPoints.base.video}${e}/${s[0].file}`):null}}var zn,Wn,Gn,Jn=function(t,i,e,s){return new(e||(e=Promise))((function(n,r){function h(t){try{a(s.next(t))}catch(t){r(t)}}function o(t){try{a(s.throw(t))}catch(t){r(t)}}function a(t){var i;t.done?n(t.value):(i=t.value,i instanceof e?i:new e((function(t){t(i)}))).then(h,o)}a((s=s.apply(t,i||[])).next())}))};class Qn{constructor(t){this.settings=t,this.metrics={created:(new Date).getTime()}}fetchBid(){return Jn(this,void 0,void 0,(function*(){let t;if(this.metrics.fetchStart=(new Date).getTime(),(0,dt.QM)(this.settings.adManagerLineItem.protoLineItem.externalHlsFile)&&(t=yield Hn(),!t))throw $i.NetworkRequestUrl;const i=De.getGlobalContainer().resolve(ts),e=new qn(i,{hlsModule:t,id:this.settings.id,adManagerLineItem:this.settings.adManagerLineItem,trackers:this.settings.trackersInformation,mediaId:this.settings.mediaId,renditions:this.settings.renditions,clickUrl:this.settings.clickUrl,requestMetadata:this.settings.requestMetadata,callingState:this.settings.callingState,globalDomUtilsService:this.settings.globalDomUtilsService,viewabilityService:this.settings.viewabilityService,adContainer:this.settings.adContainer,cpm:this.settings.cpm,obfuscatedPrice:this.settings.obfuscatedPrice,adEnforcer:this.settings.adEnforcer,externalMediaFile:this.settings.adManagerLineItem.protoLineItem.externalMediaFile,externalHlsFile:this.settings.adManagerLineItem.protoLineItem.externalHlsFile,pauseAdWhenFinished:this.settings.pauseAdWhenFinished,loopAdWhenFinished:this.settings.loopAdWhenFinished,inApp:this.settings.inApp,os:this.settings.os,adSlotContainerRecycler:this.settings.adSlotContainerRecycler,bidSlotId:this.settings.bidSlotId,urlSuffixerService:this.settings.urlSuffixerService,pageDomain:this.settings.pageDomain});return this.metrics.fetchEnd=(new Date).getTime(),e}))}}!function(t){t[t.IDLE=0]="IDLE",t[t.RUNNING=1]="RUNNING",t[t.STOPPING=2]="STOPPING"}(zn||(zn={}));class Yn{constructor(t){this.Y_=t,this.X_=zn.IDLE,this.Z_=Promise.resolve()}start(){(this.X_===zn.IDLE||this.X_===zn.STOPPING)&&(this.X_=zn.RUNNING,this.K_())}stop(){this.X_=zn.STOPPING}setPromiseNotifier(t){return this.tS=t,this}setIdleNotifier(t){return this.iS=t,this}getState(){return this.X_}eS(){const t=this.Y_();void 0!==t?this.Z_=t.then((t=>{this.tS&&this.tS(t)})).then((()=>{this.X_===zn.STOPPING&&(this.X_=zn.IDLE)})):this.X_=zn.IDLE}K_(){this.X_===zn.IDLE?this.iS&&this.iS():this.X_===zn.RUNNING&&(this.eS(),this.Z_.then((()=>{this.K_()})))}}class Xn{constructor(t,i=1){this.Y_=t,this.sS=i,this.nS=[],this.rS(i)}start(){return this.nS.forEach((t=>{t.start()})),this}stop(){return this.nS.forEach((t=>{t.stop()})),this}setPromiseNotifier(t){return this.nS.forEach((i=>{i.setPromiseNotifier(t)})),this}setAllThreadsIdleNotifier(t){return this.hS=t,this.oS(),this}setNumberOfThreads(t){if(t<=0)return;this.sS=t;const i=t-this.sS;i>0?this.rS(i):i<0&&this.aS(i)}getState(){return this.nS.reduce(((t,i)=>(t[i.getState()]++,t)),{[zn.IDLE]:0,[zn.RUNNING]:0,[zn.STOPPING]:0})}rS(t){for(let i=0;i<t;i++){const t=new Yn(this.Y_).setPromiseNotifier(this.tS);this.nS.push(t)}}aS(t){t=Math.min(t,this.nS.length);for(let i=0;i<t;i++)this.nS.pop().stop()}oS(){const t=()=>{this.getState()[zn.IDLE]===this.nS.length&&this.hS()};this.nS.forEach((i=>{i.setIdleNotifier(t)}))}}!function(t){t[t.IDLE=0]="IDLE",t[t.LOADING=1]="LOADING",t[t.READY=2]="READY",t[t.STARTED=3]="STARTED",t[t.IMPRESSION=4]="IMPRESSION"}(Wn||(Wn={})),function(t){t[t.BID_LOADING_CONSUMED=0]="BID_LOADING_CONSUMED",t[t.BID_READY_CONSUMED=1]="BID_READY_CONSUMED",t[t.BID_INVALIDATED=2]="BID_INVALIDATED"}(Gn||(Gn={}));class Zn{constructor(){this.cS=new Set}static getInstance(){return this.tv||(this.tv=new Zn),this.tv}addPlatformCappedLineItemIdList(t,i){i||(0,s.n)({message:"PlatformCappedLineItemRepository_bidPool_not_provided",level:s.D.CRITICAL,exception:`${t}`},{throttle:1,sendMaxLog:!1}),t.forEach((t=>{if((0,dt.QM)(t)&&!this.cS.has(t)&&(this.cS.add(t),i)){i.getAllBidsForLineItem(t).forEach((t=>i.consumeBid(t,Gn.BID_INVALIDATED)))}}))}isLineItemPlatformCapped({advertiserLineItemId:t,publisherLineItemId:i}){return this.cS.has(t)||this.cS.has(i)}clear(){this.cS.clear()}}class Kn{constructor(t){this.settings=t,this.lS=new Map,this.Pf=[],this.uS=!1,this.dS=new It.x,this.pS=()=>{const t=this.fS();if(t)return this.mS(t.lineItemList),this.gS(t.lineItemList,t.state).then((()=>{this.vS(t.lineItemList),this.yS()})).catch((()=>{this.vS(t.lineItemList),this.yS()}));this.settings.auctionManager.onNothingToCall()},this.xS=(t,i)=>this.settings.adCallerYo.getWinningYoScore(i.settings.adManagerLineItem.protoLineItem.advertiserLineItemId,i.settings.id)-this.settings.adCallerYo.getWinningYoScore(t.settings.adManagerLineItem.protoLineItem.advertiserLineItemId,t.settings.id),this.settings.lineItemList.forEach((t=>{fi(t.protoLineItem.creativeType)?t.protoLineItem.timeBetweenRequests=10:t.protoLineItem.timeBetweenRequests=6})),this.Pf.push(this.settings.lineItemServices.lineItemServicesTimer.onTimer().subscribe((()=>{this.wS()})),this.settings.adBidPool.getBidPoolBidEvents(ki.ON_BID_LOADING).subscribe((()=>{this.wS()})),this.settings.adBidPool.getBidPoolBidEvents(ki.ON_BID_LOADING_CONSUMED).subscribe((()=>{this.wS()})),this.settings.adBidPool.getBidPoolBidEvents(ki.ON_BID_READY_CONSUMED).subscribe((()=>{this.wS()}))),this._S=new Xn(this.pS,5),this.SS(li.Rtb)&&this.lS.set(li.Rtb,{auctionPending:!1,caller:new sn(this.settings.isOutstream,this.settings.skipAdSettings,this.settings.app,this.settings.adMacroReplacer,this.settings.adContainerMap,this.settings.adRequestGatekeeper,this.settings.adEnforcer,this.settings.adSlotContainerRecycler)}),this.SS(li.HeaderBidder)&&this.lS.set(li.HeaderBidder,{auctionPending:!1,caller:new An(this.settings.isOutstream,this.settings.schainSettings,this.settings.app,this.settings.adMacroReplacer,this.settings.adContainerMap,this.settings.adEnforcer,this.settings.adSlotContainerRecycler,this.settings.loopAdWhenFinished,this.settings.skipAdSettings)}),this.SS(li.Tam)&&this.lS.set(li.Tam,{auctionPending:!1,caller:new Dn(this.settings.app,this.settings.amazonSlotId,this.settings.adMacroReplacer,this.settings.adContainerMap,this.settings.adEnforcer,this.settings.adSlotContainerRecycler)}),this._S.setAllThreadsIdleNotifier((()=>{this.settings.lineItemServices.lineItemServicesTimer.start()}))}get onFirstAggregatedBatchFinished(){return this.dS.asObservable()}call(t){this._S.setNumberOfThreads(t.maxParallelCalls),this.PS=t,this.uS=!0,this.wS()}stop(){this.uS=!1,this._S.stop()}destroy(){this.stop(),this.settings.callingValidationAggregator.destroy(),this.lS.forEach((t=>{t.caller.destroy()})),(0,jt.i)(this.Pf)}SS(t){return this.settings.lineItemList.some((i=>ui[i.protoLineItem.creativeType]===t))}yS(){let t=!0;this.lS.forEach((i=>{i.auctionPending&&(t=!1)})),t&&this.dS.next()}wS(){this.uS&&this._S.start()}fS(){const t=this.settings.adCallerYo.getCallableLineItems(this.settings.lineItemList,this.PS.stateSettings),i=this.settings.adCallerYo.getBestLineItem(t,this.PS.stateSettings);if(i)return i}mS(t){this.settings.adCallingPool.addCallingLineItems(t)}vS(t){this.settings.adCallingPool.removeCallingLineItems(t)}gS(t,i){return fi(t[0].protoLineItem.creativeType)?this.AS(t,i):this.kS(t[0],i)}kS(t,i){const e=this.CS(t,i);return this.settings.callingValidationAggregator.registerRequestForLineItem(t,this.TS()),t.historicalMetrics.requestNumber++,this.MS(e),this.ES(e)}AS(t,i){const e=this.lS.get(ui[t[0].protoLineItem.creativeType]);t.forEach((t=>t.aggregators.add(e.caller))),e.auctionPending=!0;const s={lineItemRequestDataList:t.map((t=>({adManagerLineItem:t,maxAvailableRequests:this.settings.lineItemServices.requestCapsService.getAvailableRequestsForLineItem(t,this.TS())}))),callingState:i,maxAdDuration:i.adBreakState.maxAdDuration,maxBidPrice:this.BS(i)};return e.caller.request(s).then((s=>{s.bids.length||s.noBids.length||t.forEach((t=>{this.settings.callingValidationAggregator.registerRequestForLineItem(t,this.TS())})),t.forEach((t=>{t.aggregators.delete(e.caller),t.historicalMetrics.requestNumber++})),s.noBids.forEach((t=>{this.settings.callingValidationAggregator.registerRequestForLineItem(t.lineItem,this.TS()),this.OS(i,t.lineItem,t.reason,t.requestMetadata)})),s.bids.forEach((t=>this.MS(t))),s.bids.sort(this.xS);const n=s.bids.map((t=>(this.settings.callingValidationAggregator.registerRequestForLineItem(t.settings.adManagerLineItem,this.TS()),this.ES(t))));return Promise.all(n)})).catch().then((()=>{e.auctionPending=!1}))}ES(t){return t.settings.adManagerLineItem.callers.add(t),t.fetchBid().catch((i=>{t.settings.adManagerLineItem.callers.delete(t);const e=t.settings.adManagerLineItem.protoLineItem.advertiserLineItemId,s=t.settings.id;this.settings.adCallerYo.registerPreBidFromBid(e,s);const n=Ni[i]?Ni[i]:l.ConnatixNoBidReasonEnum.RequestException;return this.OS(t.settings.callingState,t.settings.adManagerLineItem,n,t.settings.requestMetadata,t.settings.trackersInformation,Date.now()-t.metrics.fetchStart),Promise.reject()})).then((i=>{t.settings.adManagerLineItem.callers.delete(t),this.LS(i,Date.now()-t.metrics.fetchStart)})).catch((t=>{void 0!==t&&(0,s.n)({message:"AdManager_AdCallerController_handleCallAdaptorRequest",exception:t.message,callStack:t.stack,level:s.D.CRITICAL},{throttle:5})}))}LS(t,i){const e=t.settings.adManagerLineItem,s=t.settings.requestMetadata;if(t.settings.requestMetadata.data.requestTrackingHandledByServer||this.settings.trackingService.addBid({advertiserLineItemId:e.protoLineItem.advertiserLineItemId,publisherLineItemId:e.protoLineItem.publisherLineItemId,requestedFloorPrice:s.data.requestedFloorPrice,requestNumber:s.data.requestNumber,syncedUser:s.data.syncedUser,prebidJsBidderName:s.data.prebidJsBidderName,customClientPrice:t.settings.cpm,timeSpent:i,dspId:s.data.dspId,encryptedPrice:s.data.encryptedPrice,rtbAdomain:s.data.rtbAdomain,creativeId:t.creativeId,rtbSeatId:s.data.rtbSeatId,cnxBidId:t.settings.requestMetadata.data.cnxBidId,predictedFloorPrice:t.settings.requestMetadata.data.predictedFloorPrice,floorPriceFactor:t.settings.requestMetadata.data.floorPriceFactor,floorPriceFactorBypassReason:t.settings.requestMetadata.data.floorPriceBypassReason,floorPriceInformation:t.settings.requestMetadata.data.floorPriceInformation}),this.settings.adRequestGatekeeper.addBid(e.protoLineItem.advertiserLineItemId,s.data.requestedFloorPrice),!this.settings.adCallerYo.isBidTargetingAllowedEverInSession(t,t.settings.callingState)||Zn.getInstance().isLineItemPlatformCapped(t.settings.adManagerLineItem.protoLineItem)){0;const i=t.settings.id,e=t.settings.adManagerLineItem.protoLineItem.advertiserLineItemId;return this.settings.adCallerYo.registerPreBidFromBid(e,i),void this.settings.auctionInfoLogging.bidIsNotWinnableEverInSession(t)}this.settings.adBidPool.addBid(t)}OS(t,i,e,s,n,r){n&&Di.track(n.adError,this.settings.adMacroReplacer,i.protoLineItem,t),s.data.requestTrackingHandledByServer||this.settings.trackingService.addPrebid({advertiserLineItemId:i.protoLineItem.advertiserLineItemId,publisherLineItemId:i.protoLineItem.publisherLineItemId,partnerCustomHeaders:s.data.partnerCustomHeaders,partnerReason:s.data.partnerReason,requestedFloorPrice:s.data.requestedFloorPrice,requestNumber:s.data.requestNumber,syncedUser:s.data.syncedUser,prebidJsBidderName:s.data.prebidJsBidderName,reason:e,timeSpent:r,predictedFloorPrice:s.data.predictedFloorPrice,floorPriceInformation:s.data.floorPriceInformation}),this.settings.adRequestGatekeeper.addPrebid(i.protoLineItem.advertiserLineItemId)}CS(t,i){const e=new Di;ji(t.protoLineItem.trackers,e);const s={id:(0,bi.qs)(),adManagerLineItem:t,replaceTrackingMacros:!0,requestMetadata:new Gs({requestNumber:t.historicalMetrics.requestNumber}),trackersInformation:e,callingState:i,adContainer:this.settings.adContainerMap.get(t.protoLineItem.adType),globalDomUtilsService:this.settings.app.services.GlobalDomUtilsService,viewabilityService:this.settings.app.services.ViewabilityService,cpm:t.protoLineItem.floorPrice||t.protoLineItem.customCpm,adEnforcer:this.settings.adEnforcer,os:this.settings.os,adSlotContainerRecycler:this.settings.adSlotContainerRecycler,bidSlotId:Ms(),urlSuffixerService:this.settings.app.services.UrlSuffixerService,interactionService:this.settings.app.services.InteractionService};switch(t.protoLineItem.creativeType){case l.ProtoCreativeTypeEnum.External:case l.ProtoCreativeTypeEnum.ThirdParty:return t.protoLineItem.adType===l.ProtoAdType.Overlay?new Nn(Object.assign(Object.assign({},s),{url:t.protoLineItem.adTag,pageDomain:this.settings.app.config.pageDomain})):new Ws(Object.assign(Object.assign({},s),{url:t.protoLineItem.adTag,adMacroReplacer:this.settings.adMacroReplacer,trackingService:this.settings.trackingService,loopAdWhenFinished:this.settings.loopAdWhenFinished,pageUrl:this.settings.app.config.pageUrl}));case l.ProtoCreativeTypeEnum.MediaFile:return new Qn(Object.assign(Object.assign({},s),{clickUrl:t.protoLineItem.mediaCreativeClickUrl,mediaId:t.protoLineItem.mediaCreativeId,renditions:t.protoLineItem.renditions,pauseAdWhenFinished:this.settings.pauseAdWhenFinished,loopAdWhenFinished:this.settings.loopAdWhenFinished,inApp:this.settings.app.config.isInApp,pageDomain:this.settings.app.config.pageDomain}))}}MS(t){const{creativeType:i,floorPrice:e,successRate:s,advertiserLineItemId:n,lineItemPriority:r,customCpm:h}=t.settings.adManagerLineItem.protoLineItem;this.settings.adCallerYo.registerBiddingInformation({creativeType:i,floorPrice:e,lineItemId:n,priority:r,bidId:t.settings.id,cpm:t.settings.cpm,obfuscatedPrice:t.settings.obfuscatedPrice,successRate:t.settings.successRate||s,customCpm:h})}TS(){return(this.PS.stateSettings.currentState||this.PS.stateSettings.predictedState).adOpportunity.id}BS(t){const i=[...this.settings.adBidPool.getBidsByStatus([Wn.IDLE,Wn.LOADING,Wn.READY])].filter((i=>this.settings.adCallerYo.isBidTargetingAllowed(i,t,this.settings.lineItemServices.impressionCapsService)));return(0,f.BZ)(i)?Math.max(...i.map((t=>t.getPrice()))):0}}const tr="uncategorized";class ir{resetCapsBasedOnExternalEvent(t){const i=this.St.keys();for(const e of i)this.RS(e,t)&&this.DS(e,tr)}RS(t,i){return t.protoLineItem.resetCapType===i}jS(t){return this.RS(t,l.ProtoResetCapTypeEnum.TimeCapping)&&this.FS(t)>0}}class er{constructor(t){this.VS=t,this.$S=new Map}setNumberOfImpressions({value:t,categoryId:i}){(0,dt.$K)(i)&&this.VS===l.ProtoResetCapTypeEnum.OpportunityCapping||(i=tr),this.$S.set(i,t)}getNumberOfImpressions({categoryId:t}){return(0,dt.$K)(t)&&this.VS===l.ProtoResetCapTypeEnum.OpportunityCapping||(t=tr),this.$S.get(t)||0}}class sr extends ir{constructor(t=Date.now()){super(),this.HS=t,this.St=new Map}canCall(t,i){this.qS(t);const e=this.St.get(t);return void 0===e||(0===t.protoLineItem.impressionCap||e.getNumberOfImpressions({categoryId:i})<t.protoLineItem.impressionCap)}registerImpressionForLineItem(t,i){let e=this.St.get(t);return void 0===e&&(this.St.set(t,new er(t.protoLineItem.resetCapType)),e=this.St.get(t),this.jS(t)&&(e.nextImpressionCapResetTimestamp=this.zS(this.FS(t)))),e.setNumberOfImpressions({value:e.getNumberOfImpressions({categoryId:i})+1,categoryId:i}),this}registerRequestForLineItem(t,i){return this}destroy(){this.St.clear()}DS(t,i){this.St.get(t).setNumberOfImpressions({value:0,categoryId:i})}FS(t){return t.protoLineItem.resetImpressionsCapTime*Ht.s_}qS(t,i=Date.now()){if(!this.jS(t))return;const e=this.St.get(t);void 0!==e&&this.WS(t,i)&&(e.setNumberOfImpressions({value:0}),e.nextImpressionCapResetTimestamp=this.zS(this.FS(t),i))}WS(t,i){return i>=this.St.get(t).nextImpressionCapResetTimestamp}zS(t,i=Date.now()){const e=Math.ceil((i-this.HS)/t)*t;return this.HS+e}}class nr{constructor(t){this.VS=t,this.GS=new Map}setNumberOfRequests({value:t,categoryId:i}){(0,dt.$K)(i)&&this.VS===l.ProtoResetCapTypeEnum.OpportunityCapping||(i=tr),this.GS.set(i,t)}getNumberOfRequests({categoryId:t}){return(0,dt.$K)(t)&&this.VS===l.ProtoResetCapTypeEnum.OpportunityCapping||(t=tr),this.GS.get(t)||0}}class rr extends ir{constructor(t=Date.now()){super(),this.HS=t,this.allowResetOnTime=!0,this.St=new Map}canCall(t,i){this.qS(t);const e=this.St.get(t);return void 0===e||(0===t.protoLineItem.requestCap||e.getNumberOfRequests({categoryId:i})<t.protoLineItem.requestCap)}registerRequestForLineItem(t,i,e=Date.now()){let s=this.St.get(t);return void 0===s&&(this.St.set(t,new nr(t.protoLineItem.resetCapType)),s=this.St.get(t),this.jS(t)&&(s.nextRequestCapResetTimestamp=this.zS(this.FS(t)))),s.setNumberOfRequests({value:s.getNumberOfRequests({categoryId:i})+1,categoryId:i}),this}registerImpressionForLineItem(t){return this}getAvailableRequestsForLineItem(t,i){const e=this.St.get(t);return void 0===e?t.protoLineItem.requestCap:t.protoLineItem.requestCap-e.getNumberOfRequests({categoryId:i})}restoreOneCapForLineItem(t,i){if(t.protoLineItem.ignoreFilledRequests){const e=this.St.get(t);if(void 0===e)return;const s=e.getNumberOfRequests({categoryId:i});s>0&&e.setNumberOfRequests({value:s-1,categoryId:i})}}destroy(){this.St.clear()}DS(t,i){this.St.get(t).setNumberOfRequests({value:0,categoryId:i})}FS(t){return t.protoLineItem.resetRequestsCapTime*Ht.s_}qS(t,i=Date.now()){if(!this.jS(t))return;const e=this.St.get(t);void 0!==e&&this.WS(t,i)&&(e.setNumberOfRequests({value:0}),e.nextRequestCapResetTimestamp=this.zS(this.FS(t),i))}WS(t,i){return i>=this.St.get(t).nextRequestCapResetTimestamp&&this.allowResetOnTime}zS(t,i=Date.now()){const e=Math.ceil((i-this.HS)/t)*t;return this.HS+e}}class hr{constructor(){this.St=new Map}registerRequestForLineItem(t,i,e=Date.now()){let s=this.St.get(t);return void 0===s&&(this.St.set(t,{}),s=this.St.get(t)),s.lastRequestTimestamp=e,s.categoryId=i,this}registerImpressionForLineItem(t){return this}canCall(t,i,e=Date.now()){const s=this.St.get(t);if(void 0===s)return!0;if(0===t.protoLineItem.timeBetweenRequests)return!0;if(e>=s.lastRequestTimestamp+t.protoLineItem.timeBetweenRequests*Ht.s_)return!0;return!(s.categoryId===i||t.protoLineItem.resetCapType!==l.ProtoResetCapTypeEnum.OpportunityCapping)}destroy(){this.St.clear()}}class or{constructor(t){this.Bm=t,this.JS=null,this.QS=new It.x}start(){return this.YS(),this}stop(){return this.XS(),this}onTimer(){return this.QS.asObservable()}destroy(){this.XS()}YS(){null===this.JS&&(this.JS=this.Bm.setInterval((()=>{this.QS.next()}),500))}XS(){this.Bm.clearInterval(this.JS),this.JS=null}}class ar extends d._{constructor(t,i,e,s){super(),this.ZS=t,this.KS=i,this.tP=e,this.Vu=s,this.iP=new It.x,this.eP=new Map,this.sP=[],this.forceTriggerUpdateState=()=>{this.sP.forEach((t=>this.nP(t)))},this.nP=(t,i)=>{this.eP.set(t,this.rP(this.KS.get(t),i))},this.hP=t=>{this.oP([l.ProtoAdType.Video],t)},this.aP=t=>{this.oP([l.ProtoAdType.Overlay],t)},this.cP=t=>{this.oP([l.ProtoAdType.Nonlinear],t)},this.kr=()=>{this.oP(this.sP)},this.oP=(t,i)=>{t.forEach((t=>this.nP(t,i))),this.iP.next()},this.lP={[l.ProtoAdType.Video]:this.hP,[l.ProtoAdType.Overlay]:this.aP,[l.ProtoAdType.Nonlinear]:this.cP},this.sP=[...this.KS.keys()],this.sP.forEach((t=>this.nP(t))),this.uP()}get onContainerStateUpdate(){return this.iP.asObservable()}getContainerMap(){return this.KS}getContainerStateMap(){return this.eP}getMainContainer(){return this.KS.get(this.ZS)}getMainContainerState(){return this.getContainerStateMap().get(this.ZS)}destroy(){this.KS.forEach(((t,i)=>{this.tP.off(t,this.kr),this.Vu.off(t,this.lP[i])}))}uP(){this.KS.forEach(((t,i)=>{this.tP.on(t,this.kr),this.Vu.on(t,this.lP[i],{threshold:Ft})}))}rP(t,i){let e=i;return void 0===e&&(e=this.Vu.check({element:t,threshold:Ft})),{width:t.clientWidth,height:t.clientHeight,viewability:e}}}const cr="cnxpl-vl",lr="cnxpl-rf";class ur{constructor(){this.fP=!0,this.mP=new It.x,this.gP=[],this.vP=t=>{if(this.fP)return;const i=t.target;if(i.volume>0&&(i.volume=0,!i.paused)){const t=i.getAttribute(lr);this.mP.next(t)}t.preventDefault?t.preventDefault():t.returnValue=!1}}get onVolumeDetected(){return this.mP.asObservable()}enforce(t,i){let e=t;(0,dt.cL)(t)&&(e=t.contentDocument||t.contentWindow.document),this.fP=!1;(0,f.Sz)(e.getElementsByTagName("video")).forEach((t=>{this.yP(t,i)}))}stopEnforce(){this.fP=!0}clearEnforce(t){try{const i=[];this.gP=this.gP.filter((e=>e.getAttribute(lr)!==t||(i.push(e),!1))),i.forEach((t=>{t.removeAttribute(cr),t.removeAttribute(lr),t.removeEventListener("volumechange",this.vP)}))}catch(t){}}yP(t,i){t&&!t.getAttribute("cnxpl-vl")&&(t.volume=0,t.setAttribute(cr,"true"),t.setAttribute(lr,i),t.addEventListener("volumechange",this.vP),this.gP.push(t))}}class dr{bP(t){const i=function(){};t.Element.prototype.scrollIntoView=i,t.Element.prototype.scrollIntoViewIfNeeded=i,t.scroll=i,t.scrollTo=i,t.scrollBy=i}enforce(t){(0,dt.cL)(t)&&this.bP(t.contentWindow)}stopEnforce(){}clearEnforce(){}}class pr{constructor(t){this.xP=t=>t.cnxEnfStorage?t.cnxEnfStorage:null,this.$e=t;try{this.xP(this.$e)||this.wP(this.$e)}catch(t){(0,s.n)({message:"AdManager_EnforcerMemory_bind_enforcement",exception:t.message,callStack:t.stack,level:s.D.CRITICAL})}}wP(t){(0,e.ML)(t.document.head,t,'!function(){function n(n){window["cnx"+n]||(window["cnx"+n]=window[n],window[n]=function(e){var t="";try{e&&(t=function n(e,t){try{if(!e)return"";if(e.cnxInnerTag)return e.cnxInnerTag;if(t<2){var r=t+1;return n(e.caller,r)}}catch(n){return""}return""}(e))}catch(n){}var r=window["cnx"+n].apply(null,arguments);if(t){var i=window.cnxEnfStorage;i[n][t]=i[n][t]||[],i[n][t].push(r)}return r})}window.cnxEnfStorage={setTimeout:{},setInterval:{},eventListeners:{},errors:[]};var e=window.location.hostname.split("."),t=window.btoa(e[e.length-2]+"."+e[e.length-1]);-1===["dG16LmNvbQ==","YmlsbGJvYXJkLmNvbQ==","aG9sbHl3b29kcmVwb3J0ZXIuY29t","dmliZS5jb20=","aG9yb3Njb3BlLmNvbQ==","YXN0cm9sb2d5LmNvbQ==","YWhvcmFtaXNtby5jb20="].indexOf(t)&&(!function(){const n=window.EventTarget?window.EventTarget.prototype:window.document;n.cnxAddEventListener||(n.cnxAddEventListener=n.addEventListener,n.addEventListener=function(n,e,t){var r=this||window;if(e&&e.cnxInnerTag){var i=window.cnxEnfStorage;i.eventListeners[e.cnxInnerTag]=i.eventListeners[e.cnxInnerTag]||[],i.eventListeners[e.cnxInnerTag].push({element:r,type:n,handler:e,options:t})}try{r.cnxAddEventListener(n,e,t)}catch(n){n.message="adlstn_"+n.message,i.errors.push(n)}})}(),n("setTimeout"),n("setInterval"))}();')}enforce(t,i){if((0,dt.cL)(t))try{t.contentWindow.self===top||t.contentWindow.Function.prototype.cnxInnerTag||t.contentWindow.Object.defineProperty(t.contentWindow.Function.prototype,"cnxInnerTag",{enumerable:!1,writable:!0,value:i}),t.contentWindow.self===top||t.contentWindow.Object.prototype.cnxInnerTag||t.contentWindow.Object.defineProperty(t.contentWindow.Object.prototype,"cnxInnerTag",{enumerable:!1,writable:!0,value:i})}catch(t){}}stopEnforce(){}clearEnforce(t){try{const i=this.xP(this.$e);i.eventListeners[t]&&(i.eventListeners[t].forEach((t=>{t.element.removeEventListener(t.type,t.handler,t.options)})),i.eventListeners[t]=[]),i.setInterval[t]&&(i.setInterval[t].forEach((t=>this.$e.clearInterval(t))),i.setInterval[t]=[]),i.setTimeout[t]&&(i.setTimeout[t].forEach((t=>this.$e.clearTimeout(t))),i.setTimeout[t]=[])}catch(t){}}}class fr{constructor(){this._P=["viralgains","serving-sys.com","commercialadsdistributor"],this.SP=["beachfrontmedia","commercialadsdistributor"],this.PP=["commercialadsdistributor"],this.AP=["pixel.clearstream.tv","pixel.clrstm.com"],this.IP=new It.x,this.kP=new It.x}get onMalwareDetected(){return this.IP.asObservable()}get onBadUriDetected(){return this.kP.asObservable()}enforce(t,i){if((0,dt.cL)(t)){this.CP=i;try{this.TP(t),this.MP(t),this.EP(t),this.BP(t)}catch(t){}}}stopEnforce(){}clearEnforce(){}OP(t,i,e,s){t.every((t=>!e.includes(t)))&&!i.getAttribute("cnx")&&(i.setAttribute("cnx","true"),this.kP.next({referenceId:this.CP,enforcementMessage:`${s}-${i}`}))}TP(t){const i=t.getAttribute("src");i&&(this._P.forEach((t=>{i.includes(t)&&this.IP.next({referenceId:this.CP,enforcementMessage:`malware-${t}`})})),this.OP(["//","about:blank","about:self","javascript:"],t,i,"iframe"))}MP(t){(0,f.Sz)(t.contentDocument.getElementsByTagName("script")).forEach((t=>{const i=t.getAttribute("src");i&&(this.SP.forEach((t=>{i.includes(t)&&this.IP.next({referenceId:this.CP,enforcementMessage:`malware-${t}`})})),this.OP(["//"],t,i,"script"))}))}EP(t){(0,f.Sz)(t.contentDocument.getElementsByTagName("a")).forEach((t=>{const i=t.getAttribute("href");i&&this.PP.forEach((t=>{i.includes(t)&&this.IP.next({referenceId:this.CP,enforcementMessage:`malware-${t}`})}))}))}BP(t){(0,f.Sz)(t.contentDocument.getElementsByTagName("img")).forEach((t=>{const i=t.getAttribute("src");i&&this.AP.forEach((t=>{i.includes(t)&&this.IP.next({referenceId:this.CP,enforcementMessage:`malware-${t}`})}))}))}}class mr{constructor(t,i,e){if(this.LP=e,this.RP=null,this.DP=new Map,this.jP=Hi.None,this.FP=300,this.Pf=[],this.VP=new Map,this.gg=new It.x,this.DP.set(Hi.MemoryLeak,new pr(i)),e||this.DP.set(Hi.ScrollHijack,new dr),!t){const t=new ur;this.DP.set(Hi.Mute,t),this.Pf.push(t.onVolumeDetected.subscribe((t=>{this.$P(Ui.VOLUME_DETECTED,t,"")})))}const s=new fr;this.Pf.push(s.onBadUriDetected.subscribe((t=>{this.$P(Ui.BADURI_DETECTED,t.referenceId,t.enforcementMessage)})),s.onMalwareDetected.subscribe((t=>{this.$P(Ui.MALWARE_DETECTED,t.referenceId,t.enforcementMessage)}))),this.DP.set(Hi.Malware,s)}get onEnforcerEvent(){return this.gg.asObservable()}registerContainer(t,i){this.VP.get(t)||this.VP.set(t,i)}deregisterContainer(t){this.VP.get(t)&&(this.DP.forEach((i=>{i.clearEnforce(this.VP.get(t))})),this.VP.delete(t),this.VP.size||this.stop(Hi.All))}start(t){this.LP&&(t^=Hi.ScrollHijack),this.jP|=t,null===this.RP&&(this.RP=setInterval((()=>{try{this.VP.forEach(((t,i)=>{this.NP(i,t)}))}catch(t){}}),this.FP))}stop(t){this.jP&=~t,this.jP===Hi.None&&(clearInterval(this.RP),this.RP=null),this.DP.forEach(((i,e)=>{t&e&&i.stopEnforce()}))}destroy(){this.stop(Hi.All),(0,jt.i)(this.Pf),this.VP.forEach(((t,i)=>{this.deregisterContainer(i)}))}NP(t,i){(0,f.Sz)(t.getElementsByTagName("iframe")).forEach((t=>{try{this.NP(t,i)}catch(t){}})),this.DP.forEach(((e,s)=>{this.jP&s&&e.enforce(t,i)}))}$P(t,i,e){let s;this.VP.forEach(((t,e)=>{t===i&&(s=e)})),this.gg.next({message:e,type:t,detectedContainer:s})}}class gr{constructor(){this.UP={},this.HP=Date.now()}setOutOfViewAdPrice(t){this.UP.outOfViewAdPrice=t}setOutOfViewAdLineItemId(t){this.UP.outOfViewAdLineItemId=t}setInViewAdPrice(t){this.UP.inViewAdPrice=t}setDistanceWhenOutOfViewStarted(t){this.UP.distanceWhenOutOfViewStarted=t}setTimeUntilNextOpportunity(t){this.UP.timeUntilNextOpportunity=t}setSessionId(t){this.UP.sessionId=t}get missedImpressionsLogs(){return this.UP.timeUntilNextOpportunity=Date.now()-this.HP,this.UP}}class vr{static createRecord(t){const i=new gr;return vr.qP.set(t,i),i}static getPlayerRecord(t){return vr.qP.get(t)}}vr.qP=new Map;class yr{constructor(t){this.zt=t,this.zP=!1,this.WP=void 0,this.GP=!1,this.JP=[],this.Pf=[],this.QP=!1,this.YP=new It.x,this.XP=new It.x,this.Lf=new It.x,this.ZP=!1,this.KP=[],this.Pf.push(this.zt.adBidPool.getBidPoolBidEvents(ki.ON_BID_READY).subscribe((()=>{this.tA()})),this.zt.impressionCapsTimer.onTimer().subscribe((()=>{this.tA()})))}get onAdSelected(){return this.YP.asObservable()}get onAdFinished(){return this.XP.asObservable()}start(t){this.iA=t,this.zP=!0,this.tA()}stop(){this.zP=!1}destroy(){this.stop(),(0,jt.i)(this.Pf),this.WP||this.sA()}get onMissedImpression(){return this.Lf.asObservable()}tA(){if(!this.zP||this.GP)return;const t=this.nA(this.iA);if(!t)return;const i=this.rA(t);this.WP&&this.zt.removeBidIfHigherYoScore&&i?(this.sA(),this.WP.stopAd("removeStartedBid"),this.hA(t)):this.WP||this.hA(t)}hA(t){this.WP=t,this.KP=[],this.zt.adBidPool.changeBidStatus(t,Wn.STARTED),this.YP.next(t),this.oA(t),t.startAd()}sA(){this.WP&&((0,jt.i)(this.JP),this.JP=[],this.zt.adBidPool.consumeBid(this.WP,Gn.BID_READY_CONSUMED),this.WP=void 0,this.KP=[])}nA(t){const i=this.zt.adBidPool.getBidsByStatus([Wn.READY]);return this.zt.adImpressionerYo.getBestBid(i,t,this.zt.impressionCapsService)}rA(t){return!!this.WP&&this.zt.adImpressionerYo.getBetterBid(t,this.WP)!==this.WP}aA(t,i,e){this.GP&&(0,s.n)({message:"AdManager_ABaseBidAdaptor_multipleImpressions",exception:`advertiserLineItemId:${t.settings.adManagerLineItem.protoLineItem.advertiserLineItemId}_creativeId:${t.creativeId}`,callStack:`${t.adMediaType}`,level:s.D.CRITICAL},{throttle:1e3}),this.zt.adImpressionerYo.registerImpression(t.settings.adManagerLineItem.protoLineItem.advertiserLineItemId,t.settings.id),this.QP=this.cA(e,t.getAdDuration()),this.GP=!0,this.zt.adRequestGatekeeper.addImpression(t.settings.adManagerLineItem.protoLineItem.advertiserLineItemId,t.settings.obfuscatedPrice),this.zt.impressionCapsService.registerImpressionForLineItem(t.settings.adManagerLineItem,this.iA.adOpportunity.id),this.zt.requestCapsService.restoreOneCapForLineItem(t.settings.adManagerLineItem,this.iA.adOpportunity.id),this.zt.adBidPool.changeBidStatus(t,Wn.IMPRESSION);const n=this.zt.auctionInfoLogging.onImpression(t);this.lA(t,i,n)}uA(t,i,e,s=!0){this.dA(t,i,e,s),this.zt.loopAdWhenFinished?t.resumeAd():this.zt.pauseAdWhenFinished?t.pauseAd():(this.XP.next(t),this.sA(),this.tA())}dA(t,i,e,s=!0){if(this.GP)return this.ZP=!1,void(this.GP=!1);if(!s)return;this.zt.adImpressionerYo.registerPostBid(t.settings.adManagerLineItem.protoLineItem.advertiserLineItemId,t.settings.id);const n=this.zt.auctionInfoLogging.onPostBid(t);this.pA(t,e,i,n)}fA(t,i){this.ZP=!0,t.setOutOfViewAdLineItemId(i.settings.adManagerLineItem.protoLineItem.advertiserLineItemId),t.setOutOfViewAdPrice(i.getPrice());const s=this.mA();(0,dt.r)(s)&&t.setInViewAdPrice(s);const n=(0,e.oW)(i.settings.adContainer);t.setDistanceWhenOutOfViewStarted(n.top)}mA(){const t=this.zt.adBidPool.getBidsByStatus([Wn.READY]).filter((t=>t.settings.adManagerLineItem.protoLineItem.viewability)).map((t=>t.getPrice())).sort(((t,i)=>t-i));if((0,f.BZ)(t))return Math.max(...t);return-1}lA(t,i,e){var s,n;const r=this.iA.adBreakState,h=(0,dt.kE)((0,xi.oK)(t.getAdDuration(),2))?(0,xi.oK)(t.getAdDuration(),2):0,o=(0,dt.kE)((0,xi.oK)(t.declaredDurationInSeconds,2))?(0,xi.oK)(t.declaredDurationInSeconds,2):0,a=h-o,c=(0,ut.H8)(t.createdTimestamp),l=this.iA.adContainerState.get(t.settings.adManagerLineItem.protoLineItem.adType).viewability;l||this.fA(vr.createRecord(this.zt.playerId),t);const u={adPodSlotPosition:r.adPodSlotIndex,adsourceType:t.adSourceType,advertiserLineItemId:t.settings.adManagerLineItem.protoLineItem.advertiserLineItemId,publisherLineItemId:t.settings.adManagerLineItem.protoLineItem.publisherLineItemId,customClientPrice:t.settings.cpm,encryptedPrice:t.settings.requestMetadata.data.encryptedPrice,prebidJsBidderName:t.settings.requestMetadata.data.prebidJsBidderName,rtbAdomain:t.settings.requestMetadata.data.rtbAdomain,creativeId:t.creativeId,rtbSeatId:t.settings.requestMetadata.data.rtbSeatId,syncedUser:t.settings.requestMetadata.data.syncedUser,timeSpent:i,vastMediaType:t.adMediaType,dspId:t.settings.requestMetadata.data.dspId,cnxBidId:t.settings.requestMetadata.data.cnxBidId,winToAdLoadedTime:null===(s=t.settings.bidLifecycle)||void 0===s?void 0:s.winToAdLoadedTime,startAdToImpressionTime:null===(n=t.settings.bidLifecycle)||void 0===n?void 0:n.startAdToImpressionTime,impressionDuration:a,declaredDuration:o,useExploration:this.zt.explorationMode,requestNumber:t.settings.requestMetadata.data.requestNumber,floorPrice:t.settings.requestMetadata.data.requestedFloorPrice,predictedFloorPrice:t.settings.requestMetadata.data.predictedFloorPrice,floorPriceFactor:t.settings.requestMetadata.data.floorPriceFactor,floorPriceBypassReason:t.settings.requestMetadata.data.floorPriceBypassReason,floorPriceInformation:t.settings.requestMetadata.data.floorPriceInformation,bidElapsedTimeSeconds:c,adBreakType:r.adBreakType,liveRampAts:t.settings.requestMetadata.data.liveRampAts,dynamicElkFieldsValues:{1:t.settings.requestMetadata.data.rtbRequestId,2:t.settings.requestMetadata.data.auctionBidId,4:`${l}`,5:`${t.settings.adManagerLineItem.protoLineItem.viewability}`},hasAdSkip:this.QP};(0,dt.$K)(e)&&(u.auctionInformation=e),this.zt.trackingService.trackVideoAdImpression(u)}pA(t,i,e,s){var n;const r=this.iA.adBreakState,h=(0,ut.H8)(t.createdTimestamp),o={adPodSlotPosition:r.adPodSlotIndex,adsourceType:t.adSourceType,advertiserLineItemId:t.settings.adManagerLineItem.protoLineItem.advertiserLineItemId,publisherLineItemId:t.settings.adManagerLineItem.protoLineItem.publisherLineItemId,error:i,loaded:!0,prebidJsBidderName:t.settings.requestMetadata.data.prebidJsBidderName,vastMediaType:t.adMediaType,syncedUser:t.settings.requestMetadata.data.syncedUser,rtbSeatId:t.settings.requestMetadata.data.rtbSeatId,rtbAdomain:t.settings.requestMetadata.data.rtbAdomain,creativeId:t.creativeId,timeSpent:e,dspId:t.settings.requestMetadata.data.dspId,cnxBidId:t.settings.requestMetadata.data.cnxBidId,winToAdLoadedTime:null===(n=t.settings.bidLifecycle)||void 0===n?void 0:n.winToAdLoadedTime,requestNumber:t.settings.requestMetadata.data.requestNumber,floorPrice:t.settings.requestMetadata.data.requestedFloorPrice,predictedFloorPrice:t.settings.requestMetadata.data.predictedFloorPrice,floorPriceInformation:t.settings.requestMetadata.data.floorPriceInformation,liveRampAts:t.settings.requestMetadata.data.liveRampAts,bidElapsedTimeSeconds:h,adBreakType:r.adBreakType};(0,dt.$K)(s)&&(o.auctionInformation=s,o.auctionPostbidReason=this.zt.auctionInfoLogging.getGeneralPostbidReason(i)),this.zt.trackingService.addPostBid(o)}gA(t,i){const e=this.KP.indexOf(i)>=0&&!(this.zt.pauseAdWhenFinished||this.zt.loopAdWhenFinished),n=this.iA.adBreakState;e?1===(0,bi.Vm)([99,1])&&(0,s.n)({message:"AdManager_AdImpressionerController_handleQuartilesTracking_track_same_quartile_twice",level:s.D.WARN,exception:t.settings.adManagerLineItem.protoLineItem.advertiserLineItemId,callStack:t.adMediaType}):(this.KP.push(i),this.zt.trackingService.trackVideoAdQuartile({advertiserLineItemId:t.settings.adManagerLineItem.protoLineItem.advertiserLineItemId,publisherLineItemId:t.settings.adManagerLineItem.protoLineItem.publisherLineItemId,quartile:i,rtbSeatId:t.settings.requestMetadata.data.rtbSeatId,dspId:t.settings.requestMetadata.data.dspId,adBreakType:n.adBreakType,hasAdSkip:this.QP,rtbAdomain:t.settings.requestMetadata.data.rtbAdomain}))}oA(t){const i=Date.now();this.JP.push(t.onAdSlotViewabilityChanged.subscribe((t=>{if(t&&this.ZP){const t=vr.getPlayerRecord(this.zt.playerId);this.Lf.next(t),this.ZP=!1}})),t.onVpaidEvent.subscribe((e=>{var n;const r=function(t,i){switch(t){case qt.fI.AdImpression:return i.adImpression;case qt.fI.AdClickThru:return i.adClick;case qt.fI.AdStarted:return i.adStarted;case qt.fI.AdVideoStart:return i.adVideoStart;case qt.fI.AdVideoFirstQuartile:return i.adQuartileFirst;case qt.fI.AdVideoMidpoint:return i.adQuartileSecond;case qt.fI.AdVideoThirdQuartile:return i.adQuartileThird;case qt.fI.AdVideoComplete:return i.adQuartileFourth;case qt.fI.AdPaused:return i.adPause;case qt.fI.AdPlaying:return i.adResume;case qt.fI.AdSkipped:return i.adSkip;case qt.fI.AdUserClose:return i.adUserClose;case qt.fI.AdUserAcceptInvitation:return i.adUserAcceptInvitation;case qt.fI.AdUserMinimize:return i.adUserMinimize;case qt.fI.AdError:return i.adError}}(e.type,t.settings.trackers),h=Date.now()-i;switch(r||e.type!==qt.fI.AdImpression||(this.vA("AdManager_AdImpressionController_tracker_impression_not_found"),(0,s.n)({message:"AdManager_AdImpressionController_tracker_impression_not_found",level:s.D.CRITICAL},{sendMaxLog:!1})),Di.track(r,this.zt.adMacroReplacer,t.settings.adManagerLineItem.protoLineItem,t.settings.callingState),e.type){case qt.fI.AdError:this.uA(t,h,e.payload.errorMessage);break;case qt.fI.AdSkipped:this.uA(t,h,zi.AdStopped);break;case qt.fI.AdStopped:this.uA(t,h,zi.AdStopped,null===(n=e.payload)||void 0===n?void 0:n.shouldTrackPostBid);break;case qt.fI.AdImpression:this.aA(t,h,e.payload.adSourceData.skipOffset);break;case qt.fI.AdVideoFirstQuartile:this.gA(t,l.ProtoQuartilesEnum.First);break;case qt.fI.AdVideoMidpoint:this.gA(t,l.ProtoQuartilesEnum.Second);break;case qt.fI.AdVideoThirdQuartile:this.gA(t,l.ProtoQuartilesEnum.Third);break;case qt.fI.AdVideoComplete:this.gA(t,l.ProtoQuartilesEnum.Fourth)}}))),this.JP.push(t.onAdViewableImpression.subscribe((i=>{i.adBreakType=this.iA.adBreakState.adBreakType,i.hasAdSkip=this.QP,this.zt.trackingService.trackVideoAdImpressionViewable(i),Di.track(t.settings.trackers.adViewableImpression,this.zt.adMacroReplacer,t.settings.adManagerLineItem.protoLineItem,t.settings.callingState)})))}cA(t,i){if((0,dt.kE)(t)&&t>=0)return!0;return zt(i,this.zt.skipAdSettings)}vA(t,i){(0,s.n)({message:t,level:s.D.CRITICAL,exception:null==i?void 0:i.message,callStack:null==i?void 0:i.stack},{sendMaxLog:!1})}}const br={[l.ProtoAdBreakTypeEnum.PreRoll]:"preRoll",[l.ProtoAdBreakTypeEnum.MidRoll]:"midRoll",[l.ProtoAdBreakTypeEnum.PostRoll]:"postRoll"};class xr{constructor(t,i){this.Pw=t,this.th=i}replace(t,i,e){this.Pw.setAdWidth(e.adMacros.adWidth),this.Pw.setAdHeight(e.adMacros.adHeight),this.Pw.setAdPosition(br[e.adMacros.adPostion]),e.mediaMacros.mediaDescription&&this.Pw.setVideoDescription(e.mediaMacros.mediaDescription),e.mediaMacros.mediaDuration&&this.Pw.setVideoDuration(e.mediaMacros.mediaDuration),e.mediaMacros.mediaId&&this.Pw.setVideoId(e.mediaMacros.mediaId),e.mediaMacros.mediaTitle&&this.Pw.setVideoTitle(e.mediaMacros.mediaTitle),e.mediaMacros.mediaUrl&&this.Pw.setVideoUrl(e.mediaMacros.mediaUrl);const s=this.th.isConsent(i);this.Pw.setGDPR(this.th.isConsentRequired()?1:0),this.Pw.setConsent(s?1:0),this.Pw.setGDPRConsent(this.th.getConsentPayload()),this.Pw.setNPA(this.th.isPersonalisedAdsAllowed()?0:1);const n=this.th.getTrackableUser(),r=this.th.isConsentConnatix()&&s?n:void 0;return this.Pw.setUUID(r),this.Pw.setupMacros(t)}}var wr=o(6798),_r=o(2566);function Sr(t,i){return(0,wr.e)((function(e,s){var n=0;e.subscribe((0,_r.x)(s,(function(e){s.next(t.call(i,e,n++))})))}))}var Pr=function(t){return t&&"number"==typeof t.length&&"function"!=typeof t};function Ar(t){return(0,Je.m)(null==t?void 0:t.then)}var Ir=o(6766);function kr(t){return(0,Je.m)(t[Ir.L])}function Cr(t){return Symbol.asyncIterator&&(0,Je.m)(null==t?void 0:t[Symbol.asyncIterator])}function Tr(t){return new TypeError("You provided "+(null!==t&&"object"==typeof t?"an invalid object":"'"+t+"'")+" where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.")}var Mr="function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator";function Er(t){return(0,Je.m)(null==t?void 0:t[Mr])}function Br(t){return(0,je.FC)(this,arguments,(function(){var i,e,s;return(0,je.Jh)(this,(function(n){switch(n.label){case 0:i=t.getReader(),n.label=1;case 1:n.trys.push([1,,9,10]),n.label=2;case 2:return[4,(0,je.qq)(i.read())];case 3:return e=n.sent(),s=e.value,e.done?[4,(0,je.qq)(void 0)]:[3,5];case 4:return[2,n.sent()];case 5:return[4,(0,je.qq)(s)];case 6:return[4,n.sent()];case 7:return n.sent(),[3,2];case 8:return[3,10];case 9:return i.releaseLock(),[7];case 10:return[2]}}))}))}function Or(t){return(0,Je.m)(null==t?void 0:t.getReader)}var Lr=o(5);function Rr(t){if(t instanceof Ge.y)return t;if(null!=t){if(kr(t))return n=t,new Ge.y((function(t){var i=n[Ir.L]();if((0,Je.m)(i.subscribe))return i.subscribe(t);throw new TypeError("Provided object does not correctly implement Symbol.observable")}));if(Pr(t))return s=t,new Ge.y((function(t){for(var i=0;i<s.length&&!t.closed;i++)t.next(s[i]);t.complete()}));if(Ar(t))return e=t,new Ge.y((function(t){e.then((function(i){t.closed||(t.next(i),t.complete())}),(function(i){return t.error(i)})).then(null,Lr.h)}));if(Cr(t))return Dr(t);if(Er(t))return i=t,new Ge.y((function(t){var e,s;try{for(var n=(0,je.XA)(i),r=n.next();!r.done;r=n.next()){var h=r.value;if(t.next(h),t.closed)return}}catch(t){e={error:t}}finally{try{r&&!r.done&&(s=n.return)&&s.call(n)}finally{if(e)throw e.error}}t.complete()}));if(Or(t))return Dr(Br(t))}var i,e,s,n;throw Tr(t)}function Dr(t){return new Ge.y((function(i){(function(t,i){var e,s,n,r;return(0,je.mG)(this,void 0,void 0,(function(){var h,o;return(0,je.Jh)(this,(function(a){switch(a.label){case 0:a.trys.push([0,5,6,11]),e=(0,je.KL)(t),a.label=1;case 1:return[4,e.next()];case 2:if((s=a.sent()).done)return[3,4];if(h=s.value,i.next(h),i.closed)return[2];a.label=3;case 3:return[3,1];case 4:return[3,11];case 5:return o=a.sent(),n={error:o},[3,11];case 6:return a.trys.push([6,,9,10]),s&&!s.done&&(r=e.return)?[4,r.call(e)]:[3,8];case 7:a.sent(),a.label=8;case 8:return[3,10];case 9:if(n)throw n.error;return[7];case 10:return[7];case 11:return i.complete(),[2]}}))}))})(t,i).catch((function(t){return i.error(t)}))}))}function jr(t,i,e,s,n){void 0===s&&(s=0),void 0===n&&(n=!1);var r=i.schedule((function(){e(),n?t.add(this.schedule(null,s)):this.unsubscribe()}),s);if(t.add(r),!n)return r}function Fr(t,i,e){return void 0===e&&(e=1/0),(0,Je.m)(i)?Fr((function(e,s){return Sr((function(t,n){return i(e,t,s,n)}))(Rr(t(e,s)))}),e):("number"==typeof i&&(e=i),(0,wr.e)((function(i,s){return function(t,i,e,s,n,r,h,o){var a=[],c=0,l=0,u=!1,d=function(){!u||a.length||c||i.complete()},p=function(t){return c<s?f(t):a.push(t)},f=function(t){r&&i.next(t),c++;var o=!1;Rr(e(t,l++)).subscribe((0,_r.x)(i,(function(t){null==n||n(t),r?p(t):i.next(t)}),(function(){o=!0}),void 0,(function(){if(o)try{c--;for(var t=function(){var t=a.shift();h?jr(i,h,(function(){return f(t)})):f(t)};a.length&&c<s;)t();d()}catch(t){i.error(t)}})))};return t.subscribe((0,_r.x)(i,p,(function(){u=!0,d()}))),function(){null==o||o()}}(i,s,t,e)})))}var Vr=o(278);function $r(t){return void 0===t&&(t=1/0),Fr(Vr.y,t)}var Nr=new Ge.y((function(t){return t.complete()}));function Ur(t){return t[t.length-1]}function Hr(t){return Qe(Ur(t))?t.pop():void 0}function qr(t,i){return"number"==typeof Ur(t)?t.pop():i}function zr(t,i){return void 0===i&&(i=0),(0,wr.e)((function(e,s){e.subscribe((0,_r.x)(s,(function(e){return jr(s,t,(function(){return s.next(e)}),i)}),(function(){return jr(s,t,(function(){return s.complete()}),i)}),(function(e){return jr(s,t,(function(){return s.error(e)}),i)})))}))}function Wr(t,i){return void 0===i&&(i=0),(0,wr.e)((function(e,s){s.add(t.schedule((function(){return e.subscribe(s)}),i))}))}function Gr(t,i){if(!t)throw new Error("Iterable cannot be null");return new Ge.y((function(e){jr(e,i,(function(){var s=t[Symbol.asyncIterator]();jr(e,i,(function(){s.next().then((function(t){t.done?e.complete():e.next(t.value)}))}),0,!0)}))}))}function Jr(t,i){if(null!=t){if(kr(t))return function(t,i){return Rr(t).pipe(Wr(i),zr(i))}(t,i);if(Pr(t))return function(t,i){return new Ge.y((function(e){var s=0;return i.schedule((function(){s===t.length?e.complete():(e.next(t[s++]),e.closed||this.schedule())}))}))}(t,i);if(Ar(t))return function(t,i){return Rr(t).pipe(Wr(i),zr(i))}(t,i);if(Cr(t))return Gr(t,i);if(Er(t))return function(t,i){return new Ge.y((function(e){var s;return jr(e,i,(function(){s=t[Mr](),jr(e,i,(function(){var t,i,n;try{i=(t=s.next()).value,n=t.done}catch(t){return void e.error(t)}n?e.complete():e.next(i)}),0,!0)})),function(){return(0,Je.m)(null==s?void 0:s.return)&&s.return()}}))}(t,i);if(Or(t))return function(t,i){return Gr(Br(t),i)}(t,i)}throw Tr(t)}function Qr(t,i){return i?Jr(t,i):Rr(t)}var Yr=o(4975);function Xr(t,i){return void 0===i&&(i=!1),(0,wr.e)((function(e,s){var n=0;e.subscribe((0,_r.x)(s,(function(e){var r=t(e,n++);(r||i)&&s.next(e),!r&&s.complete()})))}))}function Zr(t,i,e){var s=(0,Je.m)(t)||i||e?{next:t,error:i,complete:e}:t;return s?(0,wr.e)((function(t,i){var e;null===(e=s.subscribe)||void 0===e||e.call(s);var n=!0;t.subscribe((0,_r.x)(i,(function(t){var e;null===(e=s.next)||void 0===e||e.call(s,t),i.next(t)}),(function(){var t;n=!1,null===(t=s.complete)||void 0===t||t.call(s),i.complete()}),(function(t){var e;n=!1,null===(e=s.error)||void 0===e||e.call(s,t),i.error(t)}),(function(){var t,i;n&&(null===(t=s.unsubscribe)||void 0===t||t.call(s)),null===(i=s.finalize)||void 0===i||i.call(s)})))})):Vr.y}class Kr{constructor(t){this.bid=t,this.cancelled=!1,this.bA=new It.x,this.xA=!1,this.qg=this.bid.onVpaidEvent.pipe((0,Yr.h)((t=>t.type===qt.fI.AdLoaded)),Xr((()=>!this.xA)),Zr((()=>{this.xA=!0}))),this.zg=this.bid.onVpaidEvent.pipe((0,Yr.h)((t=>t.type===qt.fI.AdError)),Sr((t=>t.payload.errorMessage)),Xr((()=>!this.xA)),Zr((()=>{this.xA=!0})))}get onSuccess(){return this.qg}get onFailure(){return function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];var e=Hr(t),s=qr(t,1/0),n=t;return n.length?1===n.length?Rr(n[0]):$r(s)(Qr(n,e)):Nr}(this.bA,this.zg)}loadBid(t,i,e,s,n){this.bid.initAd(t,i,e,s,void 0,void 0,n)}}class th{constructor(t){this.zt=t,this.wA=new Set,this.Pf=[],this.Nu=!1,this._A=()=>{const t=Date.now();if(this.SA())return void this.zt.auctionManager.onNothingToWin();const i=this.PA(),{selectedBid:e}=i;return e?(this.zt.auctionInfoLogging.winBid(e),this.AA(i,this.IA.vastViewMode).catch((s=>{const n=this.zt.auctionInfoLogging.onPostBid(i.selectedBid);throw this.kA(e,t,s,n),this.CA(),i})).then((()=>{this.CA()})).catch((t=>{if(t===i)return;let e="";try{e=JSON.stringify(t)}catch(t){}(0,s.n)({message:"AdManager_winBid_failed",level:s.D.CRITICAL,exception:t,callStack:e},{throttle:3,sendMaxLog:!1})}))):void 0},this._S=new Xn(this._A,10),this.Pf.push(this.zt.adBidPool.getBidPoolBidEvents(ki.ON_BID).subscribe((t=>{const i=this.PA();this.zt.auctionInfoLogging.newBidAdded(t,i),this.CA()})),this.zt.adBidPool.getBidPoolBidEvents(ki.ON_BID_STARTED).subscribe((()=>{this.CA()})),this.zt.adBidPool.getBidPoolBidEvents(ki.ON_BID_READY_CONSUMED).subscribe((()=>{this.CA()})),this.zt.impressionCapsTimer.onTimer().subscribe((()=>{this.CA()})))}isLoadingBids(){return this.wA.size>0}win(t){this.IA=t,this._S.setNumberOfThreads(t.maxParallelWins),this.Nu=!0,this.CA()}stop(){this.Nu=!1,this._S.stop()}destroy(){this.stop(),(0,jt.i)(this.Pf)}CA(){this.Nu&&this._S.start()}PA(){const t=this.TA(),i=this.MA();return this.EA(t,i)}EA(t,i){const e=Object.assign({},t);return t.selectedBid&&i.selectedBid?(this.BA(i.selectedBid,t.selectedBid)&&(e.selectedBid=void 0,e.unselectedBidList.push({bid:t.selectedBid,lossReason:l.ProtoAuctionLossReasonEnum.CompetitorPriority})),e):e}SA(){if(-1===this.zt.maxNumberOfWins)return!1;const t=this.zt.adBidPool.getBidsByStatus([Wn.READY]),i=this.zt.adBidPool.getBidsByStatus([Wn.STARTED]),e=this.zt.adBidPool.getBidsByStatus([Wn.IMPRESSION]);this.OA(i,e);return t.length+this.wA.size+(i[0]?1:0)+(e[0]?1:0)>=this.zt.maxNumberOfWins}OA(t,i){t.length+i.length<=1||(0,s.n)({message:"AdWinnerController_multiple_bids_started",level:s.D.CRITICAL,callStack:`${t.length}`,exception:`${i.length}`},{throttle:2,sendMaxLog:!1})}TA(){return this.LA(this.zt.adBidPool.getBidsByStatus([Wn.IDLE]))}MA(){const t=[...(0,f.ee)(this.wA).map((t=>t.bid)),...this.zt.adBidPool.getBidsByStatus([Wn.READY])];return this.LA(t)}LA(t){return this.zt.adWinnerYo.selectBestBid(t,this.IA.stateSettings,this.zt.impressionCapsService)}BA(t,i){return!(this.zt.adWinnerYo.getWinningYoScore(t.settings.adManagerLineItem.protoLineItem.advertiserLineItemId,t.settings.id)<=this.zt.adWinnerYo.getWinningYoScore(i.settings.adManagerLineItem.protoLineItem.advertiserLineItemId,i.settings.id))}AA(t,i){return new Promise(((e,s)=>{const{selectedBid:n,state:r}=t,h=new Kr(n);this.wA.add(h),this.zt.adBidPool.changeBidStatus(n,Wn.LOADING),h.onSuccess.subscribe((()=>{this.wA.delete(h),this.RA(n),this.zt.adBidPool.changeBidStatus(n,Wn.READY),e()})),h.onFailure.subscribe((t=>{this.wA.delete(h),this.zt.adBidPool.consumeBid(n,Gn.BID_LOADING_CONSUMED),s(t)}));const{width:o,height:a}=r.adContainerState.get(n.settings.adManagerLineItem.protoLineItem.adType);h.loadBid(o,a,i,this.zt.desiredBitRateForWins,r.soundValue),Di.track(n.settings.trackers.adWin,this.zt.adMacroReplacer,n.settings.adManagerLineItem.protoLineItem,r)}))}RA(t){const{creativeType:i,floorPrice:e,customCpm:s,successRate:n,advertiserLineItemId:r,lineItemPriority:h}=t.settings.adManagerLineItem.protoLineItem,{id:o,cpm:a,obfuscatedPrice:c,successRate:l}=t.settings,u=t.getAdDuration();this.zt.adWinnerYo.registerWinningInformation({lineItemId:r,bidId:o,creativeType:i,floorPrice:e,obfuscatedPrice:c,cpm:a,successRate:l||n,priority:h,adDuration:u,customCpm:s})}kA(t,i,e,s){this.DA(t,Date.now()-i,e,s),this.zt.adWinnerYo.registerPostBid(t.settings.adManagerLineItem.protoLineItem.advertiserLineItemId,t.settings.id)}DA(t,i,e,s){var n,r,h,o,a;Di.track(t.settings.trackers.adError,this.zt.adMacroReplacer,t.settings.adManagerLineItem.protoLineItem,t.settings.callingState);const c=(null===(r=null===(n=this.IA.stateSettings)||void 0===n?void 0:n.currentState)||void 0===r?void 0:r.adBreakState)||(null===(o=null===(h=this.IA.stateSettings)||void 0===h?void 0:h.predictedState)||void 0===o?void 0:o.adBreakState),l=(0,ut.H8)(t.createdTimestamp),u={adPodSlotPosition:c.adPodSlotIndex,adsourceType:t.adSourceType,advertiserLineItemId:t.settings.adManagerLineItem.protoLineItem.advertiserLineItemId,publisherLineItemId:t.settings.adManagerLineItem.protoLineItem.publisherLineItemId,error:e,loaded:!1,prebidJsBidderName:t.settings.requestMetadata.data.prebidJsBidderName,vastMediaType:t.adMediaType,syncedUser:t.settings.requestMetadata.data.syncedUser,rtbSeatId:t.settings.requestMetadata.data.rtbSeatId,rtbAdomain:t.settings.requestMetadata.data.rtbAdomain,creativeId:t.creativeId,timeSpent:i,dspId:t.settings.requestMetadata.data.dspId,cnxBidId:t.settings.requestMetadata.data.cnxBidId,winToAdLoadedTime:null===(a=t.settings.bidLifecycle)||void 0===a?void 0:a.winToAdLoadedTime,requestNumber:t.settings.requestMetadata.data.requestNumber,floorPrice:t.settings.requestMetadata.data.requestedFloorPrice,predictedFloorPrice:t.settings.requestMetadata.data.predictedFloorPrice,floorPriceInformation:t.settings.requestMetadata.data.floorPriceInformation,liveRampAts:t.settings.requestMetadata.data.liveRampAts,bidElapsedTimeSeconds:l};(0,dt.$K)(s)&&(u.auctionInformation=s,u.auctionPostbidReason=this.zt.auctionInfoLogging.getGeneralPostbidReason(e)),this.zt.trackingService.addPostBid(u)}}var ih,eh,sh;!function(t){function i(t,i){return!t.protoLineItem.sound||i.sound}function e(t,i){const e=i.adContainerState.get(t.protoLineItem.adType).viewability;return!t.protoLineItem.viewability||e}function s(t,i){return!t.protoLineItem.adBreakSettings||t.protoLineItem.adBreakSettings.adBreakTargeting.some((t=>{if(t.adRollType===i.adBreakState.adBreakType)return function(t,i){switch(t){case l.ProtoLineItemAdBreakTypeEnum.All:return!0;case l.ProtoLineItemAdBreakTypeEnum.AdPod:return i;case l.ProtoLineItemAdBreakTypeEnum.SingleAd:return!i}}(t.adBreakTypeEnum,i.adBreakState.isAdPodBreak)}))}function n(t,i){return!(t.protoLineItem.mediaIdTargeting&&!c(i.media.mediaId,t.protoLineItem.mediaIdTargeting))&&(!(t.protoLineItem.mediaKeywordsTargeting&&!c(i.media.mediaKeywords,t.protoLineItem.mediaKeywordsTargeting))&&!(t.protoLineItem.mediaLanguageTargeting&&!c(i.media.mediaLanguage,t.protoLineItem.mediaLanguageTargeting)))}function r(t,i){var e,s,n;const{advertiserContextualTargeting:r,publisherContextualTargeting:h}=t.protoLineItem,o=(null===(e=i.media.mediaInsights)||void 0===e?void 0:e.insights)||[],a=!!(null===(s=i.media.mediaInsights)||void 0===s?void 0:s.insightsFallback),c=(null===(n=i.page.insights)||void 0===n?void 0:n.insights)||[];return!((0,f.BZ)(r)&&!u(r,o,a,c))&&!((0,f.BZ)(h)&&!u(h,o,a,c))}function h(t,i){const{playerSizeTargetings:e}=t.protoLineItem,{width:s}=i.adContainerState.get(t.protoLineItem.adType);return!(0,dt.as)(e)||!(0,dt.kE)(s)||(e.sizeChoiceCriteria===l.ProtoSizeChoiceCriteriaEnum.GreaterThan?!(0,dt.kE)(e.minWidth)||s>=e.minWidth:e.sizeChoiceCriteria===l.ProtoSizeChoiceCriteriaEnum.SmallerThan?!(0,dt.kE)(e.maxWidth)||s<=e.maxWidth:e.sizeChoiceCriteria!==l.ProtoSizeChoiceCriteriaEnum.Between||(!(0,dt.kE)(e.maxWidth)||!(0,dt.kE)(e.minWidth)||s>=e.minWidth&&s<=e.maxWidth))}function o(t,i){const{playerOrientationTargeting:e}=t.protoLineItem;switch(e){case l.ProtoPlayerOrientationTargetingEnum.Landscape:if(i.playerOrientation===Vt.Portrait)return!1;break;case l.ProtoPlayerOrientationTargetingEnum.Portrait:if(i.playerOrientation===Vt.Landscape)return!1}return!0}function a(t,i){var e;const s=null===(e=t.protoLineItem.adBreakSettings)||void 0===e?void 0:e.adPodTargeting;if(!s)return!0;if(!i.adBreakState.isAdPodBreak)return!0;const n=i.adBreakState.adPodSlotIndex;let r=!0;switch(s.adSlotTargetingType){case l.ProtoLineItemAdSlotTargetingTypeEnum.Interval:(n<s.adSlotPositions[0]||n>s.adSlotPositions[1])&&(r=!1);break;case l.ProtoLineItemAdSlotTargetingTypeEnum.SpecificSlots:-1===s.adSlotPositions.indexOf(n)&&(r=!1)}return s.targetingType===l.ProtoLineItemTargetingTypeEnum.Except&&(r=!r),r}function c(t,i){if((0,f.BZ)(i.items)&&Array.isArray(t)){const e=(0,f.tN)(t,i.items).length;return i.choiceCriteria===l.ProtoChoiceCriteriaEnum.Only?e>0:0===e}const e=(0,f.d3)(t,i.items);return i.choiceCriteria===l.ProtoChoiceCriteriaEnum.Only?e:!e}function u(t,i,e,s){return t.some((t=>function(t,i,e,s){for(let n=0;n<t.filters.length;n++){const r=t.filters[n],h=e?r.items:r.hashedItemsIds,o=r.hashedItemsIds,a=i.filter((t=>h.includes(t))).length,c=s.filter((t=>o.includes(t))).length,u=d(r.type,a,h),p=d(r.type,c,o);switch(r.level){case l.ProtoContextualTargetingLevelEnum.Media:if(!u)return!1;break;case l.ProtoContextualTargetingLevelEnum.Page:if(!p)return!1;break;case l.ProtoContextualTargetingLevelEnum.Both:if(!u||!p)return!1}}return!0}(t,i,e,s)))}function d(t,i,e){switch(t){case l.ProtoLineItemContextualTargetingEnum.IncludeAny:if(0===i)return!1;break;case l.ProtoLineItemContextualTargetingEnum.IncludeAll:if(i!==e.length)return!1;break;case l.ProtoLineItemContextualTargetingEnum.ExcludeAny:if(i>0)return!1;break;case l.ProtoLineItemContextualTargetingEnum.ExcludeAll:if(i===e.length)return!1}return!0}t.isLineItemTargetingAllowed=function(t,c){return e(t,c)&&i(t,c)&&s(t,c)&&n(t,c)&&a(t,c)&&r(t,c)&&h(t,c)&&o(t,c)},t.isAllowedBySound=i,t.isAllowedByViewability=e,t.isAllowedByAdBreakType=s,t.isAllowedByMediaTargeting=n,t.isAllowedByContextualTargeting=r,t.isAllowedByPlayerSizeTargeting=h,t.isAllowedByPlayerOrientationTargeting=o,t.isAllowedByPodTargeting=a,t.isAllowedRegardingDuration=function(t,i){return!t||0===i||t<=i},t.isDimensionsAllowedForNonLinearBanner=function(t,i,e,s){if(!vi(t,null==i?void 0:i.nonLinearRequestType))return!0;const n=Math.ceil((0,xi.Tc)(s.height,$t.NON_LINEAR_MAX_HEIGHT_PERCENT));return!(!e||(null==e?void 0:e.width)>s.width||(null==e?void 0:e.height)>n)}}(ih||(ih={}));class nh{constructor(t){this.jA=t}registerBiddingInformation(t){this.jA.registerBiddingInformation(t)}registerWinningInformation(t){return this.jA.registerWinningInformation(t)}registerPreBidFromBid(t,i){this.jA.registerPreBidFromBid(t,i)}registerImpression(t,i){this.jA.registerImpression(t,i)}registerPostBid(t,i){this.jA.registerPostBid(t,i)}getCallingYoScore(t){return this.jA.getCallingYoScore(t)}getWinningYoScore(t,i){return this.jA.getWinningYoScore(t,i)}getImpressionYoScore(t,i){return this.jA.getImpressionYoScore(t,i)}FA(t,i){const e=t.getAdDuration(),s=i.adBreakState.sessionMaxAdDuration;return ih.isAllowedRegardingDuration(e,s)}VA(t,i){const e=t.getAdDuration(),s=i.adBreakState.remainingAdDuration;return ih.isAllowedRegardingDuration(e,s)}$A(t,i){const e=t.settings.adManagerLineItem.protoLineItem;return ih.isDimensionsAllowedForNonLinearBanner(e.adType,e.nonlinearLineItemSettings,t.settings.dimensions,i)}NA(t,i,e){return e.canCall(t.settings.adManagerLineItem,i.adOpportunity.id)&&ih.isLineItemTargetingAllowed(t.settings.adManagerLineItem,i)&&this.FA(t,i)&&this.VA(t,i)&&this.$A(t,i)}}class rh extends nh{constructor(t,i,e,s,n,r){super(t),this.UA=e,this.HA=s,this.qA=n,this.zA=r}getBestLineItem(t,i){const e=i.currentState||i.predictedState;if(!e)return;const s=this.WA(t);return s?{state:e,lineItemList:this.GA(s,t)}:void 0}getCallableLineItems(t,i){const e=i.currentState||i.predictedState;return t.filter((t=>{if(t.aggregators.size>0)return!1;const i=[Wn.IMPRESSION],s=this.HA.getAllBidsForLineItem(t.protoLineItem.advertiserLineItemId,i);return!(!fi(t.protoLineItem.creativeType)&&(s.length>0||t.callers.size>0)&&!t.protoLineItem.forceCallingInEveryAO)&&this.zA.canCall(t,e.adOpportunity.id)})).filter((t=>!Zn.getInstance().isLineItemPlatformCapped({advertiserLineItemId:t.protoLineItem.advertiserLineItemId,publisherLineItemId:t.protoLineItem.publisherLineItemId}))).filter((t=>ih.isLineItemTargetingAllowed(t,e))).filter((t=>this.JA(t,e)))}isBidTargetingAllowed(t,i,e){return this.NA(t,i,e)}isBidTargetingAllowedEverInSession(t,i){return this.FA(t,i)}JA(t,i){if(fi(t.protoLineItem.creativeType))return!0;if(t.protoLineItem.forceCallingInEveryAO)return!0;const e=this.HA.getBidsExceptStatus([Wn.STARTED,Wn.IMPRESSION]).filter((t=>this.isBidTargetingAllowed(t,i,this.qA))),s=t.protoLineItem.floorPrice||t.protoLineItem.customCpm,n=this.getCallingYoScore(t.protoLineItem.advertiserLineItemId),r=this.UA.callingLineItems,h=[...e.map((t=>t.getPrice()))],o=[...r.map((t=>this.getCallingYoScore(t.protoLineItem.advertiserLineItemId)))];for(let t=0;t<h.length;t++)if(s<h[t])return!1;for(let t=0;t<o.length;t++)if(n<o[t])return!1;return!0}WA(t){let i=t;return t.some((t=>fi(t.protoLineItem.creativeType)))&&(i=i.filter((t=>fi(t.protoLineItem.creativeType)))),this.QA(i)[0]}QA(t=[]){return t.sort(((t,i)=>this.getCallingYoScore(i.protoLineItem.advertiserLineItemId)-this.getCallingYoScore(t.protoLineItem.advertiserLineItemId)))}GA(t,i){const{creativeType:e}=t.protoLineItem;return fi(e)?this.QA(i.filter((t=>e===t.protoLineItem.creativeType))):[t]}}class hh extends nh{getBestBid(t,i,e){return this.YA(t,i,e)}getBetterBid(t,i){const e=t.settings.adManagerLineItem.protoLineItem.advertiserLineItemId,s=t.settings.id,n=i.settings.adManagerLineItem.protoLineItem.advertiserLineItemId,r=i.settings.id;return this.getImpressionYoScore(e,s)>this.getImpressionYoScore(n,r)?t:i}YA(t,i,e){return[...t].filter((t=>this.NA(t,i,e))).sort(((t,i)=>{const e=t.settings.adManagerLineItem.protoLineItem.advertiserLineItemId,s=t.settings.id,n=i.settings.adManagerLineItem.protoLineItem.advertiserLineItemId,r=i.settings.id;return this.getImpressionYoScore(n,r)-this.getImpressionYoScore(e,s)}))[0]}}class oh extends nh{constructor(){super(...arguments),this.ZA=(t,i,e)=>{const s=[],n=[];for(const r of t){this.NA(r,i.currentState||i.predictedState,e)?s.push(r):n.push(r)}return{allowedBidList:s,notAllowedBidList:n}}}selectBestBid(t,i,e){const s=this.ZA(t,i,e),{allowedBidList:n,notAllowedBidList:r}=s,h=i.currentState||i.predictedState,o=this.KA(n),a=r.map((t=>({bid:t,lossReason:this.tI(t,h)}))),c=n.filter((t=>t!==o)).map((t=>({bid:t,lossReason:l.ProtoAuctionLossReasonEnum.CompetitorPriority})));return{state:h,selectedBid:o,unselectedBidList:[...a,...c]}}isBetterBid(t,i){const e=t.settings.adManagerLineItem.protoLineItem.advertiserLineItemId,s=t.settings.id,n=i.settings.adManagerLineItem.protoLineItem.advertiserLineItemId,r=i.settings.id;return this.getWinningYoScore(e,s)>this.getWinningYoScore(n,r)}KA(t){if((0,f.BZ)(t))return[...t].sort(((t,i)=>{const e=t.settings.adManagerLineItem.protoLineItem.advertiserLineItemId,s=t.settings.id,n=i.settings.adManagerLineItem.protoLineItem.advertiserLineItemId,r=i.settings.id;return this.getWinningYoScore(n,r)-this.getWinningYoScore(e,s)}))[0]}tI(t,i){return this.VA(t,i)?l.ProtoAuctionLossReasonEnum.AdOpportunityEnd:l.ProtoAuctionLossReasonEnum.TargetingMismatch}}!function(t){t[t.ON_STARTED=0]="ON_STARTED",t[t.ON_END=1]="ON_END"}(eh||(eh={}));class ah{constructor(t){this.zt=t,this.iI=new It.x,this.eI=[],this.sI=!1,this.nI=!1,this.Pf=[]}get onAuctionMechanismEnded(){return this.iI.asObservable()}startNewAuction(t){this.hI=t.callingState,this.nI=t.waitForNewReadyBid,this.oI(),this.aI(),this.cI(),this.uI()}cancelAuction(){this.oI()}updateState(t){if(this.hI=t,0===this.eI.length)return;const i=this.zt.adCallingPool.callingLineItems.map((t=>t.protoLineItem.advertiserLineItemId)),e=this.zt.adCallerYo.getCallableLineItems(this.zt.lineItems,this.hI.stateSettings).map((t=>t.protoLineItem.advertiserLineItemId));this.eI=this.eI.filter((t=>t.isAdCalled||(0,f.d3)(t.lineItemId,e)||(0,f.d3)(t.lineItemId,i))),this.uI()}onNothingToWin(){0!==this.eI.length&&this.eI.every((t=>!0===t.isAdCalled))&&this.uI()}onNothingToCall(){0!==this.eI.length&&(this.dI(),this.uI())}dI(){const t=this.zt.adCallingPool.callingLineItems.map((t=>t.protoLineItem.advertiserLineItemId));this.eI=this.eI.filter((i=>!0===i.isAdCalled||!1===i.isAdCalled&&(0,f.d3)(i.lineItemId,t)))}pI(){this.oI(),this.iI.next()}cI(){this.Pf.push(this.zt.adBidPool.getBidPoolBidEvents(ki.ON_BID_READY).subscribe((t=>{this.sI=!0,this.uI()})),this.zt.adBidPool.getBidPoolBidEvents(ki.ON_BID_LOADING_CONSUMED).subscribe((t=>{this.uI()})),this.zt.adCallingPool.getAdCallingPoolEvents(eh.ON_END).subscribe((t=>{this.mI(t),this.uI()})))}mI(t){this.eI.forEach((i=>{t.some((t=>t.protoLineItem.advertiserLineItemId===i.lineItemId))&&(i.isAdCalled=!0)}))}gI(){(0,jt.i)(this.Pf)}uI(){this.nI&&!this.sI||(0!==this.eI.length?this.eI.every((t=>!0===t.isAdCalled))&&this.vI()&&this.pI():this.pI())}vI(){const t=this.yI(this.zt.adBidPool.getBidsByStatus([Wn.READY]));if(!t)return!1;const i=this.zt.adWinnerYo.selectBestBid(this.zt.adBidPool.getBidsByStatus([Wn.IDLE]),this.hI.stateSettings,this.zt.impressionCapsService),e=[...this.zt.adBidPool.getBidsByStatus([Wn.LOADING])];i.selectedBid&&e.push(i.selectedBid);const s=this.yI(e);if(!s)return!0;return this.zt.adWinnerYo.getWinningYoScore(t.settings.adManagerLineItem.protoLineItem.advertiserLineItemId,t.settings.id)>=this.zt.adWinnerYo.getWinningYoScore(s.settings.adManagerLineItem.protoLineItem.advertiserLineItemId,s.settings.id)}yI(t){if(t&&0!==t.length)return t.reduce(((t,i)=>this.zt.adWinnerYo.getWinningYoScore(t.settings.adManagerLineItem.protoLineItem.advertiserLineItemId,t.settings.id)>this.zt.adWinnerYo.getWinningYoScore(i.settings.adManagerLineItem.protoLineItem.advertiserLineItemId,i.settings.id)?t:i))}oI(){this.eI=[],this.sI=!1,this.gI()}aI(){this.bI(this.hI.stateSettings),this.xI(this.hI.stateSettings),this.wI()}wI(){this.zt.adCallingPool.callingLineItems.forEach((t=>{this._I(t)}))}xI(t){const i=this.SI(),e=this.zt.adCallerYo.getCallableLineItems(i,t),s=e.filter((t=>t.protoLineItem.forceCallingInEveryAO)),n=this.AI(e,t);if(!n)return void this.II(s);this.kI()>this.zt.adCallerYo.getCallingYoScore(n.protoLineItem.advertiserLineItemId)?this.II(s):(this._I(n),s.filter((t=>t!==n)).forEach((t=>{this._I(t)})))}bI(t){const i=this.CI();this.zt.adCallerYo.getCallableLineItems(i,t).forEach((t=>{this._I(t)}))}SI(){return this.zt.lineItems.filter((t=>!fi(t.protoLineItem.creativeType)))}CI(){return this.zt.lineItems.filter((t=>fi(t.protoLineItem.creativeType)))}AI(t,i){const e=this.zt.adCallerYo.getBestLineItem(t,i);if(e&&(0,f.BZ)(e.lineItemList))return e.lineItemList[0]}kI(){const t=this.zt.adBidPool.getBidsByStatus([Wn.READY]),i=this.yI(t);return i?this.zt.adWinnerYo.getWinningYoScore(i.settings.adManagerLineItem.protoLineItem.advertiserLineItemId,i.settings.id):0}_I(t){this.eI.some((i=>i.lineItemId===t.protoLineItem.advertiserLineItemId))||this.eI.push({isAdCalled:!1,lineItemId:t.protoLineItem.advertiserLineItemId})}II(t){t.forEach((t=>{this._I(t)}))}}!function(t){t.ShortCircuitEnd="short",t.TimeoutEnd="timeout",t.Prefetch="prefetched"}(sh||(sh={}));class ch{constructor(t,i){this.Bm=t,this.TI=null,this.MI=new It.x,this.iI=new It.x,this.EI=null,this.BI={inPrefetchMode:!1,startTime:0,prefetchEnded:!1},this.OI={id:"",auctionEnded:!1},this.LI=new ah({lineItems:i.lineItems,impressionCapsService:i.impressionCapsService,requestCapsService:i.requestCapsService,yoScoreManager:i.yoScoreManager,adCallerYo:i.adCallerYo,adWinnerYo:i.adWinnerYo,adCallingPool:i.adCallingPool,adBidPool:i.adBidPool}),this.RI()}get onAuctionStopCalling(){return this.iI.asObservable()}get onAuctionEnd(){return this.MI.asObservable()}updateState(t){this.LI.updateState(t)}cancelAuction(){this.BI.inPrefetchMode=!1,this.LI.cancelAuction(),this.DI()}startPrefetch(t){this.DI(),this.BI={inPrefetchMode:!0,startTime:Date.now(),prefetchEnded:!1},this.LI.startNewAuction({callingState:t,waitForNewReadyBid:!0})}startAuction(t,i,e=3e3){if(0===e)return void this.pI();if(this.OI.id===i)return void(this.OI.auctionEnded&&this.pI());this.TI=Date.now(),this.OI={auctionEnded:!1,id:i},this.DI();let s=e;this.BI.inPrefetchMode?(s-=Date.now()-this.BI.startTime,s<0||this.BI.prefetchEnded?this.pI(sh.Prefetch):this.FI(s)):(this.LI.startNewAuction({callingState:t,waitForNewReadyBid:!1}),this.FI(s)),this.BI.inPrefetchMode=!1}onNothingToWin(){this.LI.onNothingToWin()}onNothingToCall(){this.LI.onNothingToCall()}destroy(){this.VI.unsubscribe(),this.VI=null}RI(){this.VI=this.LI.onAuctionMechanismEnded.subscribe((()=>{this.$I()}))}$I(){this.BI.prefetchEnded=!0,this.iI.next(),this.BI.inPrefetchMode||this.pI(sh.ShortCircuitEnd)}FI(t){this.EI=this.Bm.setTimeout((()=>{this.pI(sh.TimeoutEnd)}),t)}pI(t){null!==this.TI&&(0,dt.$K)(t)&&(this.NI(t,Date.now()-this.TI),this.TI=null),this.OI.auctionEnded=!0,this.cancelAuction(),this.MI.next()}DI(){this.Bm.clearTimeout(this.EI),this.EI=null}NI(t,i){(0,bi.Vm)([99,1])&&(0,s.n)({message:"AuctionManager_end_auction",exception:t,callStack:this.UI(i),level:s.D.INFO},{sendMaxLog:!1,throttle:1e4})}UI(t,i=0){const e=[0,.25,.5,.75,1,1.25,1.5,1.75,2,2.25,2.5,2.75,3,4,5][i];return void 0===e?"over_5s":t<=1e3*e?`${e}`:this.UI(t,i+1)}}class lh{constructor(){this.requestNumber=0}}class uh{constructor(t){this.protoLineItem=t,this.historicalMetrics=new lh,this.callers=new Set,this.aggregators=new Set}}class dh{constructor(t,i){this.parentContainer=t,this._c=i,this.isImaSlot=!1,this.slotsContainer=this._c.createElementByString('<div class= "cnx-ad-bid-slot"></div>'),this.adSlot=this._c.createElementByString('<div class="cnx-ad-slot"></div>'),this.videoSlot=this._c.createElementByString('<video class="cnx-ad-slot cnx-ad-video-slot"></video>'),this.videoSlot.setAttribute("playsinline",""),this.videoSlot.setAttribute("webkit-playsinline",""),this.slotsContainer.appendChild(this.videoSlot),this.slotsContainer.appendChild(this.adSlot),this.parentContainer.appendChild(this.slotsContainer)}destroy(){this.parentContainer.removeChild(this.slotsContainer)}sanitize(){}}class ph extends dh{constructor(){super(...arguments),this.isImaSlot=!0,this.HI=!1,this.qI={imaAdDisplayContainer:void 0,imaAdsLoader:void 0,imaSdk:void 0}}fetchImaDependencies(){return he.fetchImaSdk(window,!0).then((t=>this.zI(t)))}destroy(){this.qI.imaAdsLoader&&this.qI.imaAdsLoader.destroy(),this.qI.imaAdDisplayContainer&&this.qI.imaAdDisplayContainer.destroy(),super.destroy()}sanitize(){this.qI.imaAdsLoader.contentComplete(),super.sanitize()}zI(t){if(this.HI)return this.qI;t.settings.setDisableCustomPlaybackForIOS10Plus(!0);const i=this.WI(t),e=this.GI(t,i);return this.qI={imaSdk:t,imaAdDisplayContainer:i,imaAdsLoader:e},this.HI=!0,this.qI}WI(t){const i=new t.AdDisplayContainer(this.adSlot,this.videoSlot);return i.initialize(),i}GI(t,i){const e=new t.AdsLoader(i);return e.getSettings().setVpaidMode(t.ImaSdkSettings.VpaidMode.INSECURE),e.getSettings().setAutoPlayAdBreaks(!1),e}}class fh{constructor(t){this.settings=t,this.JI=new Set,this.YI=new Set,this.XI=[10,15,20],this.ZI=0}preloadImaSdkSlots(t){he.preloadImaSdk(window);for(let i=1;i<=3;i++){const i=new ph(t,this.settings.globalDomUtilsService);i.fetchImaDependencies(),this.JI.add(i)}}requestAdSlot(t){const i=new dh(t,this.settings.globalDomUtilsService);return this.KI(i),this.tk(),i}requestAdSlotIma(t){let i=this.ik();return i||(i=new ph(t,this.settings.globalDomUtilsService)),this.KI(i),this.tk(),i}destroyAdSlot(t){this.YI.delete(t),t.destroy()}recycleAdSlot(t){this.YI.delete(t),this.ek(t)?(t.sanitize(),this.JI.add(t)):this.destroyAdSlot(t)}ek(t){return t.isImaSlot}ik(){let t=null;return this.JI.forEach((i=>{this.ek(i)&&null===t&&(t=i)})),t}KI(t){this.JI.delete(t),this.YI.add(t)}tk(){const t=this.JI.size+this.YI.size;t===this.XI[this.ZI]&&(this.sk(this.XI[this.ZI]),t===this.XI[this.XI.length-1]&&this.XI.push(this.XI[this.XI.length-1]+20),this.ZI++)}sk(t){(0,s.n)({message:"AdSlotContainerRecycler_slotcount",exception:`${t}`,callStack:"",level:s.D.INFO},{throttle:20})}}class mh{constructor(t){this.nk=new Map,t.forEach((t=>{this.nk.set(t.advertiserLineItemId,Math.random())}))}getCallingYoScore(t){return this.rk(t)}getWinningYoScore(t,i){return this.rk(t)}getImpressionYoScore(t,i){return this.rk(t)}rk(t){return this.nk.get(t)}}var gh;!function(t){t[t.CALLING=0]="CALLING",t[t.WINNING=1]="WINNING",t[t.IMPRESSION=2]="IMPRESSION"}(gh||(gh={}));class vh{constructor(t){this.hk=t}getScore(){return this.ak}ck(){const{successRate:t,cpm:i,priority:e}=this.hk;return this.lk(t)*i+Gi.XY*e}lk(t){let i=0===t?Math.random():t;return i=1,1}}class yh extends vh{constructor(t,i){super(i),this.uk=t,this.hk=i,fi(this.uk)?this.ak=Math.random():this.ak=this.ck()}get metrics(){return this.hk}}class bh extends vh{constructor(t){super(t),this.hk=t,this.ak=this.ck()}get metrics(){return this.hk}}class xh extends vh{constructor(t){super(t),this.hk=t,this.dk=20,this.ak=this.ck(),this.pk=this.fk()}get scoreIncludingDuration(){return this.pk}fk(){const{successRate:t,cpm:i,priority:e,adDuration:s}=this.hk;return this.lk(t)*i/this.mk(s)+Gi.XY*e}mk(t){return(0,dt.r)(t)?t:this.dk}}class wh{constructor(t){this.gk=new Map,this.vk(t)}registerBiddingInformation(t){const{successRate:i,priority:e,bidId:s}=t,n=Yi(t),r=new bh({successRate:i,cpm:n,priority:e}),h=this.gk.get(t.lineItemId);h?h.winningBidYoScoreMap.set(s,r):this.yk("registerBiddingInformation",t.lineItemId)}registerPreBidFromBid(t,i){this.bk(t,i,"registerPreBidFromBid")}registerWinningInformation(t){const{successRate:i,priority:e,adDuration:s,bidId:n}=t,r=Yi(t),h=new xh({successRate:i,cpm:r,priority:e,adDuration:s}),o=this.gk.get(t.lineItemId);o?o.impressionBidYoScoreMap.set(n,h):this.yk("registerWinningInformation",`lineItemId:${t.lineItemId}_bidId:${t.bidId}`)}registerPostBid(t,i){this.bk(t,i,"registerPostBid")}registerImpression(t,i){this.bk(t,i,"registerImpression")}getCallingYoScore(t){const i=this.gk.get(t);return this.rk(i,gh.CALLING)}getWinningYoScore(t,i){const e=this.gk.get(t);return this.rk(e,gh.WINNING,i)}getImpressionYoScore(t,i){const e=this.gk.get(t);return this.rk(e,gh.IMPRESSION,i)}vk(t){t.forEach((t=>{this.xk(t)}))}xk(t){const{floorPrice:i,lineItemPriority:e,successRate:s,advertiserLineItemId:n,creativeType:r}=t,h={cpm:i,priority:e,successRate:s};this.gk.set(n,{callingLineItemYoScore:new yh(r,h),winningBidYoScoreMap:new Map,impressionBidYoScoreMap:new Map})}bk(t,i,e){const s=this.gk.get(t);s?(s.winningBidYoScoreMap.has(i)&&s.winningBidYoScoreMap.delete(i),s.impressionBidYoScoreMap.has(i)&&s.impressionBidYoScoreMap.delete(i)):this.yk(`unregisterBiddingInformation:${e}`,`lineItemId:${t}_bidId:${i}`)}rk(t,i,e){var s,n;if(!(0,dt.$K)(t))return this.yk("getYoScore",`${i}`),0;switch(i){case gh.CALLING:return t.callingLineItemYoScore.getScore();case gh.WINNING:return null===(s=t.winningBidYoScoreMap.get(e))||void 0===s?void 0:s.getScore();case gh.IMPRESSION:return null===(n=t.impressionBidYoScoreMap.get(e))||void 0===n?void 0:n.getScore();default:return 0}}yk(t,i=""){(0,s.n)({message:t,level:s.D.INFO,callStack:`YoScoreManager_${t}`,exception:i})}}class _h{constructor(t,i){this.jA=i?new mh(t):new wh(t)}registerBiddingInformation(t){this.jA.registerBiddingInformation&&this.jA.registerBiddingInformation(t)}registerPreBidFromBid(t,i){this.jA.registerPreBidFromBid&&this.jA.registerPreBidFromBid(t,i)}registerWinningInformation(t){this.jA.registerWinningInformation&&this.jA.registerWinningInformation(t)}registerPostBid(t,i){this.jA.registerPostBid&&this.jA.registerPostBid(t,i)}registerImpression(t,i){this.jA.registerImpression&&this.jA.registerImpression(t,i)}getCallingYoScore(t){return this.jA.getCallingYoScore(t)}getWinningYoScore(t,i){return this.jA.getWinningYoScore(t,i)}getImpressionYoScore(t,i){return this.jA.getImpressionYoScore(t,i)}}class Sh{constructor(t,i){this.aa=t,this.HA=i,this.wk=new Map}bidIsNotWinnableEverInSession(t){if(!this._k(t))return;const i=[...this.Sk(),t.getPrice()].sort(((t,i)=>i-t)),e=this.Pk(i);this.Ak(t.settings.requestMetadata.data.cnxBidId,e,l.ProtoAuctionLossReasonEnum.TargetingMismatch)}newBidAdded(t,i){this._k(t)&&(i.selectedBid?i.selectedBid!==t?this.Ik(t,i):this.kk(t):this.Ik(t,i))}winBid(t){if(!this._k(t))return;const i=this.Sk(),e=this.Pk(i);this.wk.set(t,e)}onPostBid(t){return this.Ck(t)}onImpression(t){return this.Ck(t)}_k(t){return t.settings.requestMetadata.data.logAuctionInformation}kk(t){const{cnxBidId:i}=t.settings.requestMetadata.data,e=this.Sk(),s=this.Pk(e);this.Ak(i,s,l.ProtoAuctionLossReasonEnum.CompetitorPriority)}Ck(t){const i=this.Tk(t);return this.Mk(t),i}Ik(t,i){var e,s,n,r;const{cnxBidId:h}=t.settings.requestMetadata.data,o=this.Sk(),a=this.Ek(t,i),c=this.Pk(o);(0,dt.$K)(a)?this.Ak(h,c,a):this.Bk("AdManager_AuctionInfoLogging_lossReason_cannot_be_found",t.settings.requestMetadata.data.cnxBidId,null===(r=null===(n=null===(s=null===(e=i.selectedBid)||void 0===e?void 0:e.settings)||void 0===s?void 0:s.requestMetadata)||void 0===n?void 0:n.data)||void 0===r?void 0:r.cnxBidId)}Tk(t){if(this.wk.has(t))return this.wk.get(t);this._k(t)&&this.Bk("AdManager_AuctionInfoLogging_cannot_find_win_bid_snapshot",t.settings.requestMetadata.data.cnxBidId)}Mk(t){this.wk.has(t)&&this.wk.delete(t)}Ek(t,i){var e;return null===(e=i.unselectedBidList.find((i=>i.bid===t)))||void 0===e?void 0:e.lossReason}getGeneralPostbidReason(t){switch(t){case zi.ImaScriptFailure:case zi.ImaObjectNotFound:case zi.ImaManagerInit:case zi.ImaInitSdkError:case zi.AdxOverlayGptScriptLoad:case zi.DisplayIntegratorIframeLoad:return l.ProtoAuctionPostbidReasonEnum.SDKFailure;case zi.VastUnsupportedMedia:case zi.CnxMediaSrcNotSupported:return l.ProtoAuctionPostbidReasonEnum.UnsupportedMedia;case zi.DomainBlocked:case zi.AdaptorInitAdError:case zi.AdaptorStartAdError:case zi.WrapperInitAdError:case zi.WrapperStartAdError:return l.ProtoAuctionPostbidReasonEnum.TargetingMismatch;default:return l.ProtoAuctionPostbidReasonEnum.CreativeError}}Sk(){return this.HA.getAllBids().map((t=>t.getPrice())).sort(((t,i)=>i-t))}Pk(t){const i=t[0]?Ei(t[0]):void 0,e=t[1]?Ei(t[1]):void 0;return i||this.Bk("AdManager_AuctionInfoLogging_highestBidPrice_missing",`${i}`),{bidDensity:t.length,highestObfuscatedBidPrice:i,secondHighestObfuscatedBidPrice:e}}Ak(t,i,e){this.aa.trackAuctionInfoForBid({cnxBidId:t,auctionInformation:i,auctionLossReason:e})}Bk(t,i="",e=""){(0,s.n)({message:t,level:s.D.CRITICAL,callStack:i,exception:e},{throttle:5})}}class Ph{constructor(){this.Lk=[]}canCall(t,i){return this.Lk.every((e=>e.canCall(t,i)))}registerRequestForLineItem(t,i){return this.Lk.forEach((e=>{e.registerRequestForLineItem(t,i)})),this}registerImpressionForLineItem(t,i){return this.Lk.forEach((e=>{e.registerImpressionForLineItem(t,i)})),this}registerCallingValidator(t){return this.Lk.push(t),this}registerCallingValidators(t){return t.forEach((t=>{this.registerCallingValidator(t)})),this}destroy(){this.Lk.forEach((t=>{t.destroy()}))}}class Ah{constructor(){this.Rk=new It.x,this.Dk=new It.x,this.jk={[eh.ON_STARTED]:this.Rk,[eh.ON_END]:this.Dk},this.Vk={[eh.ON_STARTED]:t=>this.Rk.next(t),[eh.ON_END]:t=>this.Dk.next(t)}}getCallingObservable(t){return this.jk[t].asObservable()}triggerEvent(t,i){(0,this.Vk[t])(i)}}class Ih{constructor(){this.$k=[],this.Nk=new Ah}get callingLineItems(){return this.$k}addCallingLineItems(t){this.$k=[...this.callingLineItems,...t],this.Nk.triggerEvent(eh.ON_STARTED,t)}removeCallingLineItems(t){this.$k=this.callingLineItems.filter((i=>!(0,f.d3)(i,t))),this.Nk.triggerEvent(eh.ON_END,t)}getAdCallingPoolEvents(t){return this.Nk.getCallingObservable(t)}}class kh{constructor(){this.Uk=new It.x,this.Hk=new It.x,this.qk=new It.x,this.zk=new It.x,this.Wk=new It.x,this.Gk=new It.x,this.Jk=new It.x,this.Qk={[ki.ON_BID]:this.Uk,[ki.ON_BID_LOADING]:this.Hk,[ki.ON_BID_READY]:this.qk,[ki.ON_BID_STARTED]:this.zk,[ki.ON_BID_LOADING_CONSUMED]:this.Gk,[ki.ON_BID_READY_CONSUMED]:this.Jk},this.Xk={[Wn.IDLE]:t=>{this.Uk.next(t)},[Wn.LOADING]:t=>{this.Hk.next(t)},[Wn.READY]:t=>{this.Gk.next(t),this.qk.next(t)},[Wn.STARTED]:t=>{this.zk.next(t)},[Wn.IMPRESSION]:t=>{this.Wk.next(t)}},this.Zk={[Gn.BID_LOADING_CONSUMED]:t=>{this.Gk.next(t)},[Gn.BID_READY_CONSUMED]:t=>{this.Jk.next(t)},[Gn.BID_INVALIDATED]:(t,i)=>{[Wn.IDLE,Wn.LOADING].includes(i)?this.Gk.next(t):this.Jk.next(t)}}}getBidObservable(t){return this.Qk[t].asObservable()}bidStatusChanged(t,i){(0,this.Xk[i])(t)}bidConsumed(t,i,e){(0,this.Zk[e])(t,i)}}class Ch{constructor(){this.Kk=[],this.tC=new kh,this.iC=[]}getBidPoolBidEvents(t){return this.tC.getBidObservable(t)}addBid(t){this.Kk.push({bid:t,status:Wn.IDLE}),this.tC.bidStatusChanged(t,Wn.IDLE)}getAllBids(){return this.eC(),this.Kk.map((t=>t.bid))}getAllBidsForLineItem(t,i=[]){return this.eC(),this.Kk.filter((t=>!i.includes(t.status))).filter((i=>i.bid.settings.adManagerLineItem.protoLineItem.advertiserLineItemId===t||i.bid.settings.adManagerLineItem.protoLineItem.publisherLineItemId===t)).map((t=>t.bid))}getBidsByStatus(t){return this.eC(),this.Kk.filter((i=>t.includes(i.status))).map((t=>t.bid))}getBidsExceptStatus(t){return this.eC(),this.Kk.filter((i=>!t.includes(i.status))).map((t=>t.bid))}changeBidStatus(t,i){const e=this.sC(t);return e?(e.status=i,this.tC.bidStatusChanged(t,i),!0):(this.nC(t.settings.id)||this.rC("AdBidPool_update_bid_not_found",i),!1)}consumeBid(t,i){const e=this.sC(t);return e?((0,f.sj)(this.Kk,e),this.tC.bidConsumed(e.bid,e.status,i),i===Gn.BID_INVALIDATED&&this.iC.push(t.settings.id),!0):(this.nC(t.settings.id)||this.rC("AdBidPool_consume_bid_not_found",i),!1)}eC(){this.hC().forEach((t=>{this.consumeBid(t.bid,Gn.BID_INVALIDATED)}))}hC(){return this.Kk.filter((t=>{const i=t.bid.createdTimestamp,e=t.bid.settings.adManagerLineItem.protoLineItem.networkExpiryTimeSeconds;return(0,dt.r)(e)&&(0,ut.H8)(i)>=e}))}sC(t){return this.Kk.find((i=>i.bid===t))}nC(t){return this.iC.includes(t)}rC(t,i){(0,s.n)({message:t,exception:i?`${i}`:"",level:s.D.CRITICAL},{sendMaxLog:!1,throttle:2})}}var Th=o(4974);class Mh{constructor(t){this.aC=t,this.cC=!1,this.lC=!1,this.uC=!1}get predictMode(){return this.cC}get adFetchingAllowed(){return this.lC}get impressionsAllowed(){return this.uC}get currentAdPlayerState(){return this.dC}get predictedAdPlayerState(){return this.pC}partialStateUpdate(t){this.dC&&(this.dC=Object.assign(Object.assign({},this.dC),t)),this.pC&&(this.pC=Object.assign(Object.assign({},this.pC),t))}getCurrentAdManagerState(t=!1){let i=this.dC;!this.currentAdPlayerState&&t&&(i=this.pC);const e=this.aC.getContainerStateMap();return this.fC(i,e)}getPredictedAdManagerState(){const t=this.pC,i=this.mC();return this.fC(t,i)}fC(t,i){if(!t)return;const{width:e,height:s,viewability:n}=this.aC.getMainContainerState(),{clickToPlay:r,mediaMetadata:h,sound:o,adBreakState:a,linearAdOpportunity:c,playerOrientation:l}=t;return{width:e,height:s,viewability:n,clickToPlay:r,media:h,sound:!!o,soundValue:o,adContainerState:i,adBreakState:a,adOpportunity:c,playerOrientation:l,page:{insights:Th.k.pageInsights}}}mC(){let t;return this.pC.prefetchStateType===Ii.StartSessionPrefetch?(t=new Map,this.aC.getContainerStateMap().forEach(((i,e)=>{t.set(e,Object.assign(Object.assign({},i),{viewability:!0}))}))):t=this.aC.getContainerStateMap(),t}getCallSettings(){return{maxParallelCalls:$t.PARALLEL_CALLS_DEFAULT,stateSettings:{currentState:this.getCurrentAdManagerState(),predictedState:this.getPredictedAdManagerState()}}}getWinSettings(){return{desiredBitRate:$t.DEFAULT_DESIRED_BITRATE,maxParallelWins:$t.PARALLEL_WINS_DEFAULT,vastViewMode:this.currentAdPlayerState?this.currentAdPlayerState.vastViewMode:this.predictedAdPlayerState.vastViewMode,stateSettings:{currentState:this.getCurrentAdManagerState(),predictedState:this.getPredictedAdManagerState()}}}enableImpression(t){this.cC=!1,this.dC=t,this.pC||(this.pC=this.dC),this.lC=!0}disableImpression(){this.uC=!1,this.lC=!1}enablePredict(t,i){this.dC=null,this.cC=!0,this.pC=t,this.pC.prefetchStateType=i,this.lC=!0}auctionEnd(){this.uC=!0}auctionStopCalling(){this.predictMode&&(this.lC=!1)}}const Eh=30*Ht.s_;class Bh{constructor(){this.gC=null}onAdRemoved(){this.gC=null,this.vC()}pauseViaUserInteraction(){this.gC&&(this.gC.pausedWithUserInteraction=!0)}resumeViaUserInteraction(){this.gC&&(this.gC.pausedWithUserInteraction=!1,this.vC())}yC(t){this.gC={currentAd:t,isPaused:!1,pausedWithUserInteraction:!1,remainingTimeForAdToBePaused:Eh,lastAdPausedStartedTimestamp:void 0},this.vC()}checkPauseAd(t,i){t&&(null===this.gC&&this.yC(t),i?this.bC(t):this.xC(t))}xC(t){this.wC(t)&&(this.gC.isPaused=!0,this.gC.lastAdPausedStartedTimestamp=Date.now(),t.pauseAd(),this.vC(),this._C=setTimeout((()=>{t.stopAd("pauseOutOfView"),this.gC=null,this.vC()}),this.gC.remainingTimeForAdToBePaused))}bC(t){t.settings.adManagerLineItem.protoLineItem.pauseAdOutOfView&&t.impressionStarted&&this.gC.isPaused&&!this.gC.pausedWithUserInteraction&&(this.vC(),this.gC.isPaused=!1,this.gC.remainingTimeForAdToBePaused=this.gC.remainingTimeForAdToBePaused-(Date.now()-this.gC.lastAdPausedStartedTimestamp),t.resumeAd())}vC(){clearTimeout(this._C),this._C=void 0}wC(t){return t.settings.adManagerLineItem.protoLineItem.pauseAdOutOfView&&t.impressionStarted&&!this.gC.isPaused&&!this.gC.pausedWithUserInteraction}}class Oh{constructor(t,i,e){this.SC=t,this.aC=i,this.PC=e,this.es=!1,this.AC=new Bh,this.If=new It.x,this.IC()}get onVpaidEvent(){return this.If.asObservable()}get inImpression(){return this.es}setVastViewMode(t){this.PC=t;const{width:i,height:e}=this.aC.getContainerStateMap().get(this.SC.settings.adManagerLineItem.protoLineItem.adType);this.SC.resizeAd(i,e,t)}getAdVolume(){return this.SC.getAdVolume()}setAdVolume(t,i){if(i){const{adMacroReplacer:e,adManagerState:s}=i;this.kC(t,s,e)}this.SC.setAdVolume(t)}resizeAd(){const{width:t,height:i,viewability:e}=this.aC.getContainerStateMap().get(this.SC.settings.adManagerLineItem.protoLineItem.adType);this.AC.checkPauseAd(this.SC,e),this.SC.resizeAd(t,i,this.PC)}skipAd(){this.SC.setAdVolume(0),this.SC.skipAd()}stopAd(t){this.SC.stopAd(t)}pauseAd(t){this.SC.pauseAd(),t&&this.AC.pauseViaUserInteraction()}resumeAd(t){this.SC.resumeAd(),t&&this.AC.resumeViaUserInteraction()}getMediaSize(){const t=this.SC.getAdMediaSize().width,i=this.SC.getAdMediaSize().height,{widthRatio:e,heightRatio:s}=(0,xi.dO)(t,i);return{width:t,height:i,widthRatio:e,heightRatio:s,adType:this.SC.settings.adManagerLineItem.protoLineItem.adType}}getMetadata(){return{advertiserLineItemId:this.SC.settings.adManagerLineItem.protoLineItem.advertiserLineItemId,publisherLineItemId:this.SC.settings.adManagerLineItem.protoLineItem.publisherLineItemId,adType:this.SC.settings.adManagerLineItem.protoLineItem.adType,duration:this.SC.getAdDuration(),adSkipMode:this.SC.settings.adManagerLineItem.protoLineItem.skipMode,moatTrackingEnabled:this.SC.settings.adManagerLineItem.protoLineItem.moatTrackingEnabled}}destroy(){this.es=!1,this.AC.onAdRemoved(),this.CC.unsubscribe(),this.CC=null}IC(){this.CC=this.SC.onVpaidEvent.subscribe((t=>{t.type===qt.fI.AdImpression&&this.TC(),this.If.next(t)}))}TC(){this.es=!0;const{viewability:t}=this.aC.getContainerStateMap().get(this.SC.settings.adManagerLineItem.protoLineItem.adType);this.AC.checkPauseAd(this.SC,t)}kC(t,i,e){const s=this.SC.getAdVolume();let n=null;0===s&&t>0?n=this.SC.settings.trackers.adUnmute:s>0&&0===t&&(n=this.SC.settings.trackers.adMute);const r=this.SC.settings.adManagerLineItem.protoLineItem;n&&Di.track(n,e,r,i)}}class Lh{constructor(t){this.zt=t,this.MC=!1,this.If=new It.x,this.EC=new It.x,this.Lf=new It.x,this.BC=new It.x,this.Pf=[],this.Yr=t=>{Zn.getInstance().addPlatformCappedLineItemIdList(t,this.HA)},this.Xr=t=>{this.EC.next(t)},this.OC=(t,i,e)=>{const s=t.find((t=>t.protoLineItem.advertiserLineItemId===i));s&&(s.protoLineItem.viewability=e)},this.iP=()=>{var t;null===(t=this.LC)||void 0===t||t.resizeAd(),this.RC()};const i=this.zt.adContainerMap.get(this.DC());this.jC=(0,e.LT)(i),this.zt.app.services.TrackingService.startBidTrackingInterval(),this.VC=this.zt.lineItemList.map((t=>new uh(t))),this.$C(),this.NC(),this.UC(),this.HC()}get onVpaidEvent(){return this.If.asObservable()}get onImpressionRevenueEvent(){return this.EC.asObservable()}get onNoFill(){return this.BC.asObservable()}setAdVolume(t){var i;this.qC.partialStateUpdate({sound:t});const e={adManagerState:this.qC.getCurrentAdManagerState(!0),adMacroReplacer:this.Gx};null===(i=this.LC)||void 0===i||i.setAdVolume(t,e)}setAdViewMode(t){var i;this.qC.partialStateUpdate({vastViewMode:t}),null===(i=this.LC)||void 0===i||i.setVastViewMode(t)}getCurrentAdMetadata(){var t;return null===(t=this.LC)||void 0===t?void 0:t.getMetadata()}getCurrentAdMediaSize(){var t;return null===(t=this.LC)||void 0===t?void 0:t.getMediaSize()}pauseAd(t){var i;null===(i=this.LC)||void 0===i||i.pauseAd(t)}resumeAd(t){var i;null===(i=this.LC)||void 0===i||i.resumeAd(t)}skipAd(){var t;null===(t=this.LC)||void 0===t||t.skipAd()}stopAd(t){var i;null===(i=this.LC)||void 0===i||i.stopAd(t)}setPlayerOrientation(t){this.qC.partialStateUpdate({playerOrientation:t}),this.RC()}enableImpressions(t){this.qC.enableImpression(t),this.aC.forceTriggerUpdateState(),this.zC.allowResetOnTime=!0,this.WC(t),this.GC()}disableImpressions(){this.qC.impressionsAllowed&&(this.JC.stop(),this.QC.stop(),this.qC.disableImpression(),this.LC&&!this.LC.inImpression&&this.zt.app.config.isInApp&&this.LC.stopAd("inApp_disable"))}enablePredict(t,i){switch(this.qC.enablePredict(t,i),i){case Ii.StartSessionPrefetch:this.zC.allowResetOnTime=!1;break;case Ii.MidSessionPrefetch:this.zC.allowResetOnTime=!0}this.GC();const e=this.qC.getCallSettings();this.YC.startPrefetch(e)}isLoadingAds(){return!!this.LC||!!this.XC.isLoadingBids()}getMainContainerState(){return this.aC.getMainContainerState()}getMainContainer(){return this.aC.getMainContainer()}destroy(){var t;this.disableImpressions(),(0,jt.i)(this.Pf),this.QC.destroy(),this.XC.destroy(),this.JC.destroy(),this.ZC.destroy(),this.KC(),null===(t=this.LC)||void 0===t||t.stopAd("adManagerDestroy"),this.tT()}$C(){const t=De.getGlobalContainer().resolve(ts);this.ZC=new or(t),this.qA=new sr,this.zC=new rr,this.iT=new hr,this.zA=(new Ph).registerCallingValidators([this.zC,this.qA,this.iT]),this.Qx=new Bi,this.Gx=new xr(this.zt.app.services.MacrosService,this.zt.app.services.UserManagerService)}NC(){this.eT=new Ih,this.HA=new Ch,this.aC=new ar(this.DC(),this.zt.adContainerMap,this.zt.app.services.ResizeObserver,this.zt.app.services.ViewabilityService),this.Xx=new fh({globalDomUtilsService:this.zt.app.services.GlobalDomUtilsService,recycleAdSlots:!0}),this.qC=new Mh(this.aC);const t=new _h(this.zt.lineItemList,this.zt.app.config.explorationMode),i=new rh(t,this.zt.skipPlayerSettings,this.eT,this.HA,this.qA,this.zA),e=new oh(t);this.sT=new hh(t);const s=De.getGlobalContainer().resolve(ts);this.YC=new ch(s,{lineItems:this.VC,adCallingPool:this.eT,adBidPool:this.HA,impressionCapsService:this.qA,requestCapsService:this.zC,yoScoreManager:t,adCallerYo:i,adWinnerYo:e});const n=new Sh(this.zt.app.services.TrackingService,this.HA);this.QC=new Kn({lineItemList:this.VC,adCallingPool:this.eT,adBidPool:this.HA,auctionInfoLogging:n,adCallerYo:i,adContainerMap:this.zt.adContainerMap,amazonSlotId:this.zt.amazonTamSlotId,app:this.zt.app,isOutstream:this.zt.outstream,schainSettings:this.zt.pbjsSchainSettings,skipAdSettings:this.zt.skipPlayerSettings,trackingService:this.zt.app.services.TrackingService,adMacroReplacer:this.Gx,lineItemServices:{impressionCapsService:this.qA,lineItemServicesTimer:this.ZC,requestCapsService:this.zC},adRequestGatekeeper:this.Qx,adEnforcer:new mr(this.zt.app.config.isMobile,this.jC,this.zt.disableScrollHijackEnforcement),pauseAdWhenFinished:this.zt.pauseAdWhenFinished,loopAdWhenFinished:this.zt.loopAdWhenFinished,os:this.zt.app.config.os.os,adSlotContainerRecycler:this.Xx,callingValidationAggregator:this.zA,auctionManager:this.YC}),this.XC=new th({adBidPool:this.HA,adWinnerYo:e,auctionInfoLogging:n,desiredBitRateForWins:$t.DEFAULT_DESIRED_BITRATE,maxNumberOfWins:$t.MAX_WINS_DEFAULT,trackingService:this.zt.app.services.TrackingService,impressionCapsService:this.qA,impressionCapsTimer:this.ZC,adMacroReplacer:this.Gx,playerId:this.zt.app.config.playerId,auctionManager:this.YC}),this.JC=new yr({adContainer:this.aC,adBidPool:this.HA,adImpressionerYo:this.sT,auctionInfoLogging:n,impressionCapsService:this.qA,impressionCapsTimer:this.ZC,requestCapsService:this.zC,removeBidIfHigherYoScore:$t.REMOVE_BIDS_DEFAULT,trackingService:this.zt.app.services.TrackingService,adRequestGatekeeper:this.Qx,pauseAdWhenFinished:this.zt.pauseAdWhenFinished,loopAdWhenFinished:this.zt.loopAdWhenFinished,adMacroReplacer:this.Gx,explorationMode:this.zt.app.config.explorationMode,playerId:this.zt.app.config.playerId,skipAdSettings:this.zt.skipPlayerSettings})}UC(){this.Pf.push(this.zt.app.services.TrackingService.onLineItemPlatformCapped.subscribe((t=>{this.Yr(t)})),this.zt.app.services.TrackingService.onImpressionRevenue.subscribe((t=>{this.Xr(t)})),this.zt.app.services.TrackingService.onLineItemViewabilityChange.subscribe((([t,i])=>{this.OC(this.VC,t,i)})))}HC(){this.Pf.push(this.YC.onAuctionEnd.subscribe((()=>{this.MI()})),this.YC.onAuctionStopCalling.subscribe((()=>{this.nT()})),this.aC.onContainerStateUpdate.subscribe((()=>{this.iP()})),this.JC.onAdSelected.subscribe((t=>{this.YP(t)})),this.JC.onAdFinished.subscribe((t=>{this.XP()})),this.JC.onMissedImpression.subscribe((t=>{this.Lf.next(t)})))}get onMissedImpression(){return this.Lf.asObservable()}MI(){this.qC.auctionEnd(),this.rT()}nT(){this.qC.predictMode&&this.QC.stop(),this.qC.auctionStopCalling()}YP(t){const{currentAdPlayerState:i,predictedAdPlayerState:e}=this.qC,s=(i||e).vastViewMode;this.LC=new Oh(t,this.aC,s),this.hT(),this.LC.setAdVolume(this.qC.currentAdPlayerState.sound),this.oT(t)}oT(t){var i;this.If.next({type:qt.fI.AdLoaded,payload:null===(i=t.settings.adLoadedPayload)||void 0===i?void 0:i.payload})}XP(){this.tT()}RC(){this.qC.adFetchingAllowed&&this.GC(),this.qC.impressionsAllowed&&this.rT()}GC(){this.MC||(this.MC=!0,this.zt.app.services.UserManagerService.ccpaInfoLogging(this.zt.app.config.playerId));const t=this.qC.getCallSettings();this.QC.call(t);const i=this.qC.getWinSettings();this.XC.win(i)}rT(){(this.qC.currentAdPlayerState||this.qC.predictedAdPlayerState)&&this.qC.currentAdPlayerState&&this.JC.start(this.qC.getCurrentAdManagerState())}hT(){this.aT=this.LC.onVpaidEvent.subscribe((t=>{t.type===qt.fI.AdImpression&&this.LC.setAdVolume(this.qC.currentAdPlayerState.sound),this.If.next(t)}))}tT(){var t;null===(t=this.LC)||void 0===t||t.destroy(),this.LC=null,this.KC()}KC(){var t;null===(t=this.aT)||void 0===t||t.unsubscribe(),this.aT=null}WC(t){const i=[this.qA,this.zC];t.newContent&&i.forEach((t=>{t.resetCapsBasedOnExternalEvent(l.ProtoResetCapTypeEnum.ContentCapping)}))}}class Rh extends Lh{constructor(t){super(t),this.MI=()=>{this.cT()||this.BC.next(),super.MI()};const i=this.aC.getMainContainer();this.Xx.preloadImaSdkSlots(i),this.HA.getBidPoolBidEvents(ki.ON_BID_READY_CONSUMED).subscribe((()=>{this.cT()||this.BC.next()}))}enableImpressions(t){super.enableImpressions(t);const i=this.qC.getCallSettings();this.YC.startAuction(i,t.linearAdOpportunity.id)}disableImpressions(){this.qC.impressionsAllowed&&(this.YC.cancelAuction(),super.disableImpressions())}GC(){const t=this.qC.getCallSettings();this.YC.updateState(t),super.GC()}DC(){return l.ProtoAdType.Video}cT(){if(!(0,f.BZ)(this.HA.getAllBids()))return!1;return!!this.sT.getBestBid(this.HA.getAllBids(),this.qC.getCurrentAdManagerState()||this.qC.getPredictedAdManagerState(),this.qA)}}class Dh extends Lh{DC(){return l.ProtoAdType.Nonlinear}enableImpressions(t){super.enableImpressions(t),this.MI()}}const jh={[l.ProtoAdSlotsEnum.PreRoll]:l.ProtoAdBreakTypeEnum.PreRoll,[l.ProtoAdSlotsEnum.MidRoll]:l.ProtoAdBreakTypeEnum.MidRoll,[l.ProtoAdSlotsEnum.PostRoll]:l.ProtoAdBreakTypeEnum.PostRoll};var Fh,Vh,$h,Nh,Uh;!function(t){t.remainTimeForAdPod=(t,i)=>!(i<=0)&&!(Math.round(i/Ht.s_)>t.remainingAdDuration)}(Fh||(Fh={})),function(t){t.adLoadedPayload=t=>({payload:{adType:t.payload.adType,adSkipMode:t.payload.adSkipMode,adLoadedData:{skipOffset:t.payload.adLoadedData.skipOffset}}}),t.impressionPayload=(t,i)=>{const{adId:e,adVideoUrl:s,creativeId:n,name:r,length:h,imaMetadata:o,moatTrackingEnabled:a}=t.payload.adSourceData,{adType:c,adSkipMode:l,clickThroughUrl:u,customAdData:d,adSourceData:p}=t.payload;return{payload:{adType:c,adSkipMode:l,adSourceData:{moatTrackingEnabled:a,adId:e,length:h,imaMetadata:o,adVideoUrl:s,creativeId:n,name:r},clickThroughUrl:u,customAdData:{ADVERTISER:null==d?void 0:d.ADVERTISER,CAMPAIGN_ID:null==d?void 0:d.CAMPAIGN_ID,CREATIVE_ID:d.CREATIVE_ID},adDuration:p.length,selectedAdSlot:i}}},t.defaultPayload=t=>({payload:{adType:t.payload.adType}})}(Vh||(Vh={}));class Hh{constructor(t,i){this.lT=t,this.uT=i,this.dT=new It.x,this.Pf=[],this.fT=!1;const e=De.getGlobalContainer().resolve(ts);this.sb=new Is(e),this.mT(),this.xx(),this.gT()}get onAdLifeEnding(){return this.dT.asObservable()}isDurationExpired(){return this.fT}destroy(){this.sb.disable(),this.Pf.forEach((t=>t.unsubscribe()))}mT(){this.Pf.push(this.sb.onTimeElapsed.subscribe((()=>{this.sb.stop(),this.fT=!0,this.dT.next()})))}xx(){this.Pf.push(this.lT.subscribe((t=>{switch(t.type){case qt.fI.AdImpression:this.vT(t.payload.adSourceData.length);break;case qt.fI.AdPlaying:this.gT();break;case qt.fI.AdPaused:this.bs();break;case qt.fI.AdStopped:case qt.fI.AdSkipped:case qt.fI.AdError:this.yT();break;case qt.fI.AdVideoFirstQuartile:this.bT()}})))}bs(){this.sb.stop()}gT(){this.sb.start()}vT(t){if(this.xT=Date.now(),t){this.wT=t*Ht.s_;const i=this.wT-this.uT;this._T(i),this.sb.start()}}yT(){this.sb.stop(),this.fT=!1}bT(){if(this.wT)return;const t=Date.now()-this.xT;this.wT=4*t;const i=this.wT-t-this.uT;this._T(i)}_T(t){const i=t<0?0:t;this.sb.reset(i)}}class qh{constructor(t,i){this.Ib=t,this.ST=new It.x,this.PT=Ii.NoPrefetch,this.AT=i===l.ProtoAdPlaybackMode.ScrollToPlay}get prefetchType(){return this.PT}get startSessionPrefetch(){return this.AT}set startSessionPrefetch(t){this.AT=t}get onMidSessionPrefetchReady(){return this.ST.asObservable()}enablePrefetch(t,i,e){this.AT=!1,this.PT=t,null==e||e.enablePredict(i,t)}disablePrefetch(){this.PT=Ii.NoPrefetch}tryPreparingMidSessionPrefetch(t,i){if(!this.IT(t))return;const e=null==t?void 0:t.disableReason;e===Ai.TimeoutBetweenAds&&this.ST.next(Ii.MidSessionPrefetch),e===Ai.InImpression&&this.kT(t,i)&&this.ST.next(Ii.MidSessionPrefetch)}IT(t){return this.PT===Ii.NoPrefetch&&null!==t}kT(t,i){return i&&t.adBreakLength<=$t.MID_SESSION_PREFETCH_MINIMUM_TIME&&!this.Ib}}class zh{constructor(t,i){this.zt={[ci.LINEAR]:{enable:!1,disablePayload:null,usePrefetch:!0},[ci.NONLINEAR]:{enable:!1,disablePayload:null,usePrefetch:!1}},this.ST=new It.x,this.Pf=[],this.CT(t,i)}get onMidSessionPrefetchReady(){return this.ST.asObservable()}getAllLinearityKeys(){return Object.keys(this.zt)}enable(t){this.zt[t].enable=!0,this.zt[t].disablePayload=null}disable(t,i){this.zt[t].enable=!1,this.zt[t].disablePayload=i}getDisablePayload(t){return this.zt[t].disablePayload}setAdManager(t,i){this.zt[t].adManager=i,this.zt[t].usePrefetch&&(this.zt[t].adLifecycleObserver=new Hh(i.onVpaidEvent,$t.MID_SESSION_PREFETCH_MINIMUM_TIME),this.Pf.push(this.zt[t].adLifecycleObserver.onAdLifeEnding.subscribe((()=>{const i=this.getDisablePayload(t),e=this.zt[t].adLifecycleObserver.isDurationExpired();this.zt[t].adPrefetch.tryPreparingMidSessionPrefetch(i,e)}))))}isAdManagerEnable(t){return this.zt[t].enable}getAllAdManagers(){return this.getAllLinearityKeys().map((t=>this.zt[t].adManager))}getAllAvailableAdManagers(){return this.getAllAdManagers().filter((t=>(0,dt.$K)(t)))}getAdManagerByLinearity(t){return this.zt[t].adManager}usePrefetch(t){return this.zt[t].usePrefetch}enablePrefetch(t,i,e,s){this.usePrefetch(t)&&this.zt[t].adPrefetch.enablePrefetch(i,e,s)}startSessionPrefetch(t,i){this.zt[t].adPrefetch.startSessionPrefetch=i}disablePrefetch(t){this.usePrefetch(t)&&this.zt[t].adPrefetch.disablePrefetch()}getPrefetchType(t){if(this.usePrefetch(t))return this.zt[t].adPrefetch.prefetchType}hasStartSessionPrefetch(t){return!!this.usePrefetch(t)&&this.zt[t].adPrefetch.startSessionPrefetch}tryPreparingMidSessionPrefetch(t,i){var e;if(!this.usePrefetch(t))return;const s=(null===(e=this.zt[t].adLifecycleObserver)||void 0===e?void 0:e.isDurationExpired())||!1;this.zt[t].adPrefetch.tryPreparingMidSessionPrefetch(i,s)}destroy(){(0,jt.i)(this.Pf),this.getAllAvailableAdManagers().forEach((t=>t.destroy()))}CT(t,i){this.getAllLinearityKeys().forEach((e=>{this.zt[e].usePrefetch&&(this.zt[e].adPrefetch=new qh(t,i),this.TT(e))}))}TT(t){const i=this.zt[t].adPrefetch;this.Pf.push(i.onMidSessionPrefetchReady.subscribe((i=>{this.ST.next({prefetchType:i,linearity:ci[t]})})))}}class Wh{constructor(t,i,e){this.Be=t,this.wf=i,this.bf=e,this.Pf=[],this.Af=new It.x,this.MT=new It.x,this.ET=new It.x,this.Ef=new It.x,this.BT=new It.x,this.Mf=new It.x,this.jf=new It.x,this.Bf=new It.x,this.Lf=new It.x,this.Jx=new Map,this.OT=!0,this.RT={[ci.LINEAR]:t=>{const i=new Rh(t);this.zt.setAdManager(ci.LINEAR,i)},[ci.NONLINEAR]:t=>{const i=new Dh(t);this.zt.setAdManager(ci.NONLINEAR,i)}},this.DT={mediaMetadata:{},clickToPlay:!1,linearAdOpportunity:new Ti,newContent:!1,sound:0,vastViewMode:qt.zc.Normal,adBreakState:this.bf.getAdBreakState(),playerOrientation:this.wf},this.zt=new zh(this.Be.loopAdWhenFinished,this.Be.adPlaybackMode),this.OT=this.Be.canPrefetch}get onMissedImpression(){return this.Lf.asObservable()}get onLinearNoFill(){return this.Bf.asObservable()}get onAdsEnable(){return this.Af.asObservable()}get onLinearVpaidEvent(){return this.MT.asObservable()}get onNonlinearVpaidEvent(){return this.ET.asObservable()}get onLinearImpressionRevenue(){return this.Ef.asObservable()}get onNonlinearImpressionRevenue(){return this.BT.asObservable()}get onLinearImpressionPrice(){return this.Mf.asObservable()}get onNonlinearImpressionPrice(){return this.jf.asObservable()}getCurrentAdBreakType(){return this.DT.adBreakState.adBreakType}initAd(t,i,e,s,n,r,h){this.jT(r),this.Xf(h),this.zt.getAllLinearityKeys().forEach((t=>{this.FT(ci[t],{sound:n})}))}getAdContainerSize(t){const i=this.Jx.get(t);return{height:(null==i?void 0:i.clientHeight)||0,width:(null==i?void 0:i.clientWidth)||0}}getMainAdContainerWidth(t){var i;return null===(i=this.zt.getAdManagerByLinearity(t))||void 0===i?void 0:i.getMainContainerState().width}getCurrentAdMetadata(t){var i;return null===(i=this.zt.getAdManagerByLinearity(t))||void 0===i?void 0:i.getCurrentAdMetadata()}getCurrentAdMediaSize(t){var i;return null===(i=this.zt.getAdManagerByLinearity(t))||void 0===i?void 0:i.getCurrentAdMediaSize()}isAdInWin(t){const i=this.zt.getAdManagerByLinearity(t);return(null==i?void 0:i.isLoadingAds())||!1}enableAds(t){this.zt.enable(t),this.FT(t),this.Af.next(t)}disableAds(t,i){this.zt.disable(t,i);const e=this.zt.getAdManagerByLinearity(t);e&&(e.disableImpressions(),this.zt.usePrefetch(t)&&this.zt.tryPreparingMidSessionPrefetch(t,i))}setAdVolume(t,i){var e;null===(e=this.zt.getAdManagerByLinearity(t))||void 0===e||e.setAdVolume(i),this.FT(t,{sound:i})}pauseAd(t,i){var e;null===(e=this.zt.getAdManagerByLinearity(t))||void 0===e||e.pauseAd(i)}resumeAd(t,i){var e;null===(e=this.zt.getAdManagerByLinearity(t))||void 0===e||e.resumeAd(i)}skipAd(t){var i;null===(i=this.zt.getAdManagerByLinearity(t))||void 0===i||i.skipAd()}stopAd(t,i){var e;null===(e=this.zt.getAdManagerByLinearity(t))||void 0===e||e.stopAd(i)}onAdStateChange(t,i,e){const s=jh[i];this.VT(t,e,s),s===l.ProtoAdBreakTypeEnum.PreRoll&&(this.OT=!0)}onContentChange(){this.zt.getAllLinearityKeys().forEach((t=>{this.FT(ci[t],{newContent:!0})}))}setMediaRestrictions(t){const i=Object.assign(this.DT.mediaMetadata,t);this.zt.getAllLinearityKeys().forEach((t=>{const e=ci[t];if(this.FT(e,{mediaMetadata:i}),this.zt.usePrefetch(e)&&this.zt.hasStartSessionPrefetch(e)){const t=this.zt.getAdManagerByLinearity(e);this.$T(e,Ii.StartSessionPrefetch,t)}}))}userInteraction(t){this.zt.getAllLinearityKeys().forEach((t=>{this.FT(ci[t],{clickToPlay:!0})}))}setPlayerOrientation(t){this.DT.playerOrientation=t,this.zt.getAllAvailableAdManagers().forEach((i=>i.setPlayerOrientation(t)))}setVastViewMode(t){this.NT({vastViewMode:t})}newLinearAdOpportunity(){const t=ci.LINEAR;this.zt.usePrefetch(t)&&(this.zt.getPrefetchType(t)===Ii.NoPrefetch&&(this.DT.linearAdOpportunity=new Ti),this.FT(t,{linearAdOpportunity:this.DT.linearAdOpportunity}),this.zt.disablePrefetch(t))}updateLinearPodRemainingTime(t){const i=this.DT.adBreakState;Fh.remainTimeForAdPod(i,t)&&this.VT(ci.LINEAR,t,i.adBreakType)}destroy(){try{(0,jt.i)(this.Pf),this.zt.destroy()}catch(t){(0,s.n)({message:"AdManagerBridge_destroy",level:s.D.WARN,exception:t.message,callStack:t.stack})}}jT(t){t.forEach((t=>{this.Jx.set(t.type,t.container)}))}VT(t,i,e){this.FT(t,{adBreakState:this.bf.getAdBreakState({adSlotDuration:i,adBreakType:e})})}FT(t,i){this.NT(i);const e=this.zt.getAdManagerByLinearity(t);if(e&&this.zt.isAdManagerEnable(t)){if(this.zt.usePrefetch(t)){const i=!1;this.zt.startSessionPrefetch(t,i)}e.enableImpressions(this.DT),this.UT()}}NT(t){Object.assign(this.DT,t),this.DT.adBreakState=this.bf.getAdBreakState({adSlotDuration:this.DT.adBreakState.remainingAdDuration,adBreakType:this.DT.adBreakState.adBreakType})}UT(){this.NT({clickToPlay:!1,newContent:!1})}$T(t,i,e){this.OT&&(this.DT.linearAdOpportunity=new Ti,this.zt.enablePrefetch(t,i,this.DT,e))}Xf(t){const i=pi(this.Be.adSourceSettings.lineItems,ci.NONLINEAR),e=pi(this.Be.adSourceSettings.lineItems,ci.LINEAR);(0,f.BZ)(i)&&this.qT(ci.NONLINEAR,i,t),(0,f.BZ)(e)&&this.qT(ci.LINEAR,e,t),this.zT(),this.WT(),this.GT()}GT(){const t=this.zt.getAdManagerByLinearity(ci.LINEAR);this.Pf.push(null==t?void 0:t.onMissedImpression.subscribe((t=>{this.Lf.next(t)})))}qT(t,i,e){const s={lineItemList:i,adBreakHelper:this.bf,adContainerMap:this.Jx,amazonTamSlotId:this.Be.amazonTamSlotId,outstream:this.Be.outstreamPlayer,pbjsSchainSettings:this.Be.prebidJsSupplyChain,skipPlayerSettings:this.Be.skipPlayerSettings,disableScrollHijackEnforcement:!this.Be.adSourceSettings.disableScrollHijackEnforcement,pauseAdWhenFinished:this.Be.pauseAdWhenFinished,loopAdWhenFinished:this.Be.loopAdWhenFinished,app:e};(0,this.RT[t])(s),this.Pf.push(this.zt.onMidSessionPrefetchReady.subscribe((i=>{const{linearity:e,prefetchType:s}=i,n=this.zt.getAdManagerByLinearity(e);this.$T(t,s,n)})))}zT(){const t={[ci.LINEAR]:this.MT,[ci.NONLINEAR]:this.ET};Object.keys(t).forEach((i=>{const e=ci[i];this.JT(e,t[e])}))}JT(t,i){const e=this.zt.getAdManagerByLinearity(t);e&&this.Pf.push(e.onVpaidEvent.subscribe((e=>{var s,n;switch(e.type){case qt.fI.AdLoaded:i.next({type:qt.fI.AdLoaded,payload:Vh.adLoadedPayload(e)});break;case qt.fI.AdImpression:{const r=null===(n=null===(s=this.zt.getAdManagerByLinearity(t))||void 0===s?void 0:s.getCurrentAdMetadata())||void 0===n?void 0:n.adType,h=this.Jx.get(r);i.next({type:qt.fI.AdImpression,payload:Vh.impressionPayload(e,h)});break}case qt.fI.AdVideoStart:case qt.fI.AdError:i.next(e);break;default:i.next({type:e.type,payload:Vh.defaultPayload(e)})}})))}WT(){const t=this.zt.getAdManagerByLinearity(ci.LINEAR),i=this.zt.getAdManagerByLinearity(ci.NONLINEAR);t&&this.Pf.push(t.onImpressionRevenueEvent.subscribe((t=>{this.Ef.next(t),this.Mf.next(t.impressionRevenue)})),t.onNoFill.subscribe((()=>{this.Bf.next()}))),i&&this.Pf.push(i.onImpressionRevenueEvent.subscribe((t=>{this.BT.next(t),this.jf.next(t.impressionRevenue)})))}}function Gh(t,i,e,s){t.style.top=`${function(t,i,e,s,n){let r=i-s.clientY;const h=s.clientY+s.height-i;n.alignTop&&r>t.offsetHeight?r-=t.offsetHeight:!n.alignTop&&h<t.offsetHeight?r-=t.offsetHeight-h:(r+=e,r+t.offsetHeight>s.height&&(r=s.height-t.offsetHeight));return r}(t,i.clientY,i.height,e,s)}px`,t.style.left=`${function(t,i,e,s){const n=s.distanceFromMargin?s.distanceFromMargin:0;let r=Math.ceil(i)-Math.ceil(e.clientX),h=i,o=h+t.offsetWidth;const a=e.clientX+e.width;if(s.alignMiddle){const i=t.offsetWidth/2;r-=Math.ceil(i),h-=i,o-=i}if(s.alignMiddle||s.forceRight)return e.clientX>h?r=0+n:a<o&&(r-=Math.ceil(o)-Math.ceil(a)+n),r;o>a&&(r-=t.offsetWidth);return r}(t,i.clientX,e,s)}px`}!function(t){t[t.PlayButton=0]="PlayButton",t[t.BigPlayButton=1]="BigPlayButton",t[t.VolumeButton=2]="VolumeButton",t[t.VolumeProgress=3]="VolumeProgress",t[t.VolumeControls=4]="VolumeControls",t[t.ExpandButton=5]="ExpandButton",t[t.SettingsButton=6]="SettingsButton",t[t.CaptionButton=7]="CaptionButton",t[t.CaptionComponent=8]="CaptionComponent",t[t.CastButton=9]="CastButton",t[t.ShareButton=10]="ShareButton",t[t.UpNextButton=11]="UpNextButton",t[t.UpNextBox=12]="UpNextBox",t[t.PreviousButton=13]="PreviousButton",t[t.LogoComponent=14]="LogoComponent",t[t.LogoOutstream=15]="LogoOutstream",t[t.MoreButton=16]="MoreButton",t[t.ElapsedTimeLabel=17]="ElapsedTimeLabel",t[t.TotalDurationLabel=18]="TotalDurationLabel",t[t.RemainingDurationLabel=19]="RemainingDurationLabel",t[t.ProgressBar=20]="ProgressBar",t[t.QualityMenu=21]="QualityMenu",t[t.QueStateOverlay=22]="QueStateOverlay",t[t.Loader=23]="Loader",t[t.ContextMenu=24]="ContextMenu",t[t.ElementsSettingsMenu=25]="ElementsSettingsMenu",t[t.CloseButton=26]="CloseButton",t[t.SkipAdButton=27]="SkipAdButton",t[t.AdLoadingScreen=28]="AdLoadingScreen",t[t.CtaButton=29]="CtaButton",t[t.PlayspaceProgressBar=30]="PlayspaceProgressBar",t[t.PlayspaceSettingsMenu=31]="PlayspaceSettingsMenu",t[t.ClickToPlayButton=32]="ClickToPlayButton",t[t.OverlayComponent=33]="OverlayComponent",t[t.SlideTitle=34]="SlideTitle",t[t.SkipAd=35]="SkipAd",t[t.TopTitle=36]="TopTitle",t[t.TopLogo=37]="TopLogo",t[t.TopSlideTitle=38]="TopSlideTitle",t[t.TopStoryTitle=39]="TopStoryTitle",t[t.TextLabel=40]="TextLabel",t[t.LivePoster=41]="LivePoster",t[t.LiveIcon=42]="LiveIcon",t[t.ElementsCaptionMenu=43]="ElementsCaptionMenu"}($h||($h={})),function(t){t[t.Top=1]="Top",t[t.Bottom=2]="Bottom",t[t.Right=4]="Right",t[t.Left=8]="Left",t[t.Middle=16]="Middle"}(Nh||(Nh={}));class Jh extends d._{constructor(t,i,e,s,n){super(),this.mediator=t,this.yr=i,this.Sc=e,this.Jt=n,this.Fc=i.createElementByString(s)}getContainer(){return this.Fc}getCoordinates(t){const i=this.yr.getElementCoordinates(this.Fc);return this.Jt&&t?((t&Nh.Top)===Nh.Top&&(i.clientY-=this.Fc.clientHeight),(t&Nh.Right)===Nh.Right&&(i.clientX+=this.Fc.clientWidth)):i.clientX+=i.width/2,i}showComponent(t=!1){if(!this.Fc||!this.Fc.parentElement)return;const i=(0,e.pv)(this.Fc.parentElement,"cnx-ui-btn")?this.Fc.parentElement:this.Fc;t&&(0,e.GF)(i)?(0,e.Ji)(i):(0,e.Ho)(i)}hideComponent(t=!1){if(!this.Fc||!this.Fc.parentElement)return;const i=(0,e.pv)(this.Fc.parentElement,"cnx-ui-btn")?this.Fc.parentElement:this.Fc;t&&!(0,e.GF)(i)?(0,e.U6)(i,(()=>(0,e.MV)(i))):(0,e.MV)(i)}destroy(){this.Fc.innerHTML="",this.Fc.style.display="none",this.Sc.unregisterAll(this)}}class Qh extends Jh{constructor(){super(...arguments),this.eventList=[at.Z[at.Z.Scroll],at.Z[at.Z.Click]],this.QT=t=>{this.onInteractionHandler(t)},this.onBeforeClick=t=>{t.stopPropagation()},this.onClick=t=>{this.onInteractionHandler(t),this.onClickHandler(t)}}onInteractionHandler(t){t.stopPropagation()}onClickHandler(t){}initComponent(){const t={interactionstart:this.onBeforeClick,interaction:this.QT,click:this.onClick};this.Sc.register(this.Fc,this,this.Sc,t),this.Jt&&(this.subscribe(at.Z[at.Z.Click],this.Sc,(()=>{this.onClickHandler()})),this.relay(at.Z[at.Z.Scroll],this.Sc,this,this.mediator))}destroy(){this.unsubscribeAll(this.Sc),super.destroy()}}class Yh extends Qh{constructor(){super(...arguments),this.onClick=t=>{this.onInteractionHandler(t),this.onClickHandler(),this.addBoomEffect()}}addBoomEffect(){(0,e.cn)(this.Fc,"cnx-boom"),(0,e.Tp)(this.Fc),(0,e.cn)(this.Fc,"cnx-boom-anim");const t=i=>{"transform"===i.propertyName&&((0,e.IV)(this.Fc,"cnx-boom"),(0,e.IV)(this.Fc,"cnx-boom-anim"),this.Fc.removeEventListener("transitionend",t))};this.Fc.addEventListener("transitionend",t)}initComponent(){super.initComponent(),this.Fc.appendChild(this.yr.createElementByString('<cnx class="cnx-boom-elem"></cnx>'))}}class Xh extends Yh{constructor(){super(...arguments),this.eventList=[_t[_t.HoverStart],_t[_t.HoverEnd],...this.eventList],this.onStartHover=()=>{(0,e.cn)(this.Fc,m.Gj.HoverStart),(0,e.cn)(this.Fc,m.Gj.HoverEnd),this.mediator.publish(this,_t[_t.HoverStart])},this.onEndHover=()=>{(0,e.IV)(this.Fc,m.Gj.HoverEnd),this.mediator.publish(this,_t[_t.HoverEnd])}}initComponent(){super.initComponent(),this.Jt?(this.Fc.addEventListener("touchstart",this.onStartHover,{passive:!0}),this.Fc.addEventListener("touchend",this.onEndHover),this.Fc.addEventListener("touchcancel",this.onEndHover)):(this.Fc.addEventListener("mouseenter",this.onStartHover),this.Fc.addEventListener("mouseleave",this.onEndHover))}destroy(){this.Jt?(this.Fc.removeEventListener("touchstart",this.onStartHover),this.Fc.removeEventListener("touchend",this.onEndHover),this.Fc.removeEventListener("touchcancel",this.onEndHover)):(this.Fc.removeEventListener("mouseenter",this.onStartHover),this.Fc.removeEventListener("mouseleave",this.onEndHover)),super.destroy()}onInteractionHandler(t){this.onEndHoverClick()}onEndHoverClick(){(0,e.IV)(this.Fc,m.Gj.HoverEnd),(0,e.IV)(this.Fc,m.Gj.HoverStart)}}!function(t){t[t.Play=0]="Play",t[t.Pause=1]="Pause"}(Uh||(Uh={}));class Zh extends Xh{constructor(t,i,e,s,n){super(t,i,e,s,n),this.YT=!1,this.eventList=[_t[_t.Play],_t[_t.Pause],_t[_t.Replay],_t[_t.StateChanged],...this.eventList],this.XT="Play",this.KT="Pause",this.setState(Uh.Pause)}onClickHandler(){this.X_===Uh.Pause?this.mediator.publish(this,_t[_t.Pause]):this.YT?this.mediator.publish(this,_t[_t.Replay]):this.mediator.publish(this,_t[_t.Play])}tM(){}toggleReplay(t){this.YT=t}setState(t){this.X_!==t&&(this.X_=t,this.tM(),this.mediator.publish(this,_t[_t.StateChanged]))}get tooltip(){return this.X_===Uh.Play?this.XT:this.KT}}class Kh{constructor(t){this.context=t}onClick(){}canTransitionToState(t){return!0}enterState(){this.initState(),this.context.currentState=this}}class to extends Kh{initState(){this.context.$uiContainer.classList.add(m.s_.Playing);const t=this.context.getComponent($h.PlayButton);t&&t.setState(Uh.Pause);const i=this.context.getComponent($h.BigPlayButton);i&&i.setState(Uh.Pause)}exitState(){this.context.$uiContainer.classList.remove(m.s_.Playing)}}class io extends to{constructor(){super(...arguments),this.iM=100}eM(){if(this.elapsedTimeoutId||!this.context.duration)return;const t=Date.now();this.elapsedTimeoutId=setTimeout((()=>{this.context.elapsedTime+=(Date.now()-t)/1e3;const i=this.context.getComponent($h.ProgressBar);i&&i.setProgress((0,xi.dQ)(0,this.context.duration,0,100,this.context.elapsedTime)),this.elapsedTimeoutId=null,this.eM()}),this.iM)}initState(){super.initState(),this.context.duration&&this.eM()}exitState(){super.exitState(),this.context.duration&&(clearTimeout(this.elapsedTimeoutId),this.elapsedTimeoutId=null)}}class eo extends Kh{initState(){this.context.$uiContainer.classList.add(m.s_.Paused);const t=this.context.getComponent($h.PlayButton);t&&t.setState(Uh.Play);const i=this.context.getComponent($h.BigPlayButton);i&&i.setState(Uh.Play)}exitState(){this.context.$uiContainer.classList.remove(m.s_.Paused)}}class so extends eo{initState(){super.initState()}exitState(){super.exitState()}}class no{constructor(t,i){this.sM=t,this.yr=i,this.nM=/\[\[([0-9]+)]]/g,this.hM=[],this.oM=[],this.aM=this.yr.createElementByString(this.cM(this.sM))}lM(t){return`<cnx class="pl_${t}"></cnx>`}cM(t){return t.replace(this.nM,((t,i)=>(this.hM.push(parseInt(i,10)),this.lM(i))))}uM(t,i){return this.oM.some((i=>i.slotName===t))||this.oM.some((t=>t.component===i))?null:this.aM.getElementsByClassName(`pl_${t}`)[0]}getComponentList(){return this.hM}getRenderedDom(){return this.aM}registerSlot(t,i){const e=this.uM(t,i);if(null!==e){const s=i.getContainer();return e.parentNode.replaceChild(s,e),this.oM.push({component:i,slotName:t}),!0}return!1}initComponents(){this.oM.forEach((t=>t.component.initComponent()))}}class ro extends d._{constructor(t,i,e){super(),this.globalDomUtilsService=t,this.templateString=i,this.componentFactory=e,this.dM={},this.pM=new no(i,t),this.addComponents()}addComponents(){this.pM.getComponentList().forEach((t=>{const i=this.componentFactory.createComponent(t,this);this.registerComponent(t,i)}))}registerComponent(t,i){this.pM.registerSlot(t,i),this.dM[t]=i,this.fM(i)}fM(t){t.eventList.forEach((i=>{this.subscribe(i,t,(e=>{i===_t[_t.RebindComponent]&&this.rebindComponentEvents(t),this.handleComponentEvent(i,e,t)}))}))}rebindComponentEvents(t){t&&(this.unsubscribeAll(t),this.fM(t))}getComponent(t){return this.dM[t]}destroy(){Object.keys(this.dM).forEach((t=>{this.dM[t].destroy()}))}}class ho extends ro{constructor(t,i,e,s,n){super(e,s,n),this.mediator=t,this.$container=i,this.$uiContainer=this.pM.getRenderedDom(),i.appendChild(this.$uiContainer),this.pM.initComponents()}changeState(t){const i=this.mM[t];i!==this.currentState&&this.currentState.canTransitionToState(i)&&(this.currentState.exitState(i),i.enterState())}hide(){(0,e.cn)(this.$uiContainer,m.Gj.DisplayNone)}show(){(0,e.IV)(this.$uiContainer,m.Gj.DisplayNone)}destroy(){super.destroy(),this.$uiContainer.parentNode.removeChild(this.$uiContainer)}}class oo{constructor(t,i){this.gM=t,this.yr=i,this.vM=[],this.yM={top:12,bottom:24,margin:4},this.bM=!1}xM(){this.wM=this.yr.getElementCoordinates(this.gM.parentElement)}_M(t,i){t.getElementsByClassName("cnx-tooltip-text")[0].innerHTML=i}SM(t){if(!t||!t.tooltip||this.bM)return;if(this.vM.find((i=>i.component===t)))return;const i=this.yr.createElementByString('<cnx class="cnx-tooltip-holder cnx-color-tt-bg"><cnx class="cnx-tooltip-text cnx-color-tt-text">TEST</cnx></cnx>');this._M(i,t.tooltip),this.xM();const s=t.getCoordinates();let n=!1;const{clientY:r,height:h}=s,{clientY:o,height:a}=this.yr.getElementCoordinates(this.gM);r<=o+a/2-h?s.clientY+=this.yM.top:(s.clientY-=this.yM.bottom,n=!0),this.gM.appendChild(i),Gh(i,s,this.wM,{alignMiddle:!0,alignTop:n,forceRight:!0,distanceFromMargin:this.yM.margin}),(0,e.Tp)(i),(0,e.cn)(i,m.hQ.OpacityInTransition),this.vM.push({component:t,domElement:i})}AM(t){if(!t.tooltip)return;const i=this.vM.find((i=>i.component===t));if(!i)return;const e=i.domElement;this.gM.removeChild(e),this.vM=this.vM.filter((i=>i.component!==t))}IM(t){if(!t.tooltip)return;const i=this.vM.find((t=>t.component===this.kM));i&&this._M(i.domElement,t.tooltip)}CM(){this.kM=null,this.vM.forEach((t=>this.AM(t.component)))}setDistanceValues(t){this.yM=Object.assign(Object.assign({},this.yM),t)}hoverStart(t){this.kM=t,this.SM(t)}hoverEnd(t){this.kM=null,this.AM(t)}stateChanged(t){this.kM===t&&this.IM(t)}disableTooltips(){this.bM=!0,this.CM()}enableTooltips(){this.bM=!1,this.SM(this.kM)}}var ao,co;!function(t){t[t.expand=0]="expand",t[t.collapse=1]="collapse"}(ao||(ao={}));class lo extends Xh{constructor(){super(...arguments),this.eventList=[_t[_t.Expand],_t[_t.Collapse],...this.eventList],this.TM="Full Screen",this.MM="Exit Full Screen"}onClickHandler(){switch(this.X_){case ao.collapse:this.mediator.publish(this,_t[_t.Expand]);break;case ao.expand:this.mediator.publish(this,_t[_t.Collapse]);break;default:this.mediator.publish(this,_t[_t.Expand])}}tM(){this.Fc&&(this.X_===ao.expand?this.Fc.classList.add(m.Gj.Active):this.Fc.classList.remove(m.Gj.Active))}setState(t){this.X_!==t&&(this.X_=t,this.tM())}get tooltip(){return this.X_===ao.expand?this.MM:this.TM}}class uo extends ho{constructor(t,i,e,s,n){super(t,i,e,s,n),this.EM=new oo(this.$uiContainer,e)}handleComponentEvent(t,i,e){let s=e;switch(i.payload&&i.payload.targetComponent&&(s=i.payload.targetComponent),t){case _t[_t.HoverStart]:this.EM.hoverStart(s);break;case _t[_t.HoverEnd]:this.EM.hoverEnd(s);break;case _t[_t.StateChanged]:this.EM.stateChanged(s)}}updateDuration(t,i){if(!(0,e.pv)(this.$uiContainer,m.s6.ShowControls))return;const s=this.getComponent($h.ElapsedTimeLabel),n=this.getComponent($h.TotalDurationLabel),r=this.getComponent($h.ProgressBar);if(s&&s.setTime(t),n&&n.setTime(i),r){const e=0,s=i,n=0,h=100;r.setProgress((0,xi.dQ)(e,s,n,h,t))}}updateVolume(t){}expand(){this.getComponent($h.ExpandButton).setState(ao.expand)}collapse(){this.getComponent($h.ExpandButton).setState(ao.collapse)}}!function(t){t[t.SimpleMenuItem=0]="SimpleMenuItem",t[t.ToggleMenuItem=1]="ToggleMenuItem",t[t.SubmenuMenuItem=2]="SubmenuMenuItem"}(co||(co={}));class po extends Jh{constructor(t,i,s,n,r,h,o,a){super(t,i,s,n,a),this.eventName=r,this.BM=h,this.OM=o,this.LM=[],this.eventList=[_t[_t.RebindComponent],at.Z[at.Z.HoldStart],at.Z[at.Z.HoldEnd],_t[_t.ContextMenuOpen],_t[_t.ContextMenuClose]],this.RM=!1,this.DM=10,this.jM=t=>{this.FM.removeChild(t.target),this.FM.style.width=`${this.Fc.clientWidth}px`},this.close=t=>{t&&(0,bi.Of)(t.target,m.s6.ContextController,this.DM)||!1!==this.isOpen&&(this.RM&&(this.mediator.publish(this,at.Z[at.Z.HoldEnd]),(0,e.IV)(this.OM,m.Gj.OnHold),this.RM=!1),this.isOpen=!1,this.mediator.publish(this,_t[_t.ContextMenuClose]),(0,e.cn)(this.Fc,m.Gj.Invisible),this.Sc.removeGlobalActions(this.Fc),this.closeAllSubmenuItems())},this.close(),this.cacheCoordinates(),this.eventList.push(this.eventName),this.FM=this.Fc.getElementsByClassName(m.Ng.Container)[0],this.VM=this.yr.createElementByString(`<cnx class="${m.Ng.Items}"></cnx>`),this.FM.appendChild(this.VM),(0,e.cn)(this.FM,m.s6.ContextController)}addNewItemsEvent(t){const i=t.filter((t=>!(0,f.d3)(t,this.eventList)));i.length>0&&(this.eventList=[...this.eventList,...i],this.mediator.publish(this,_t[_t.RebindComponent],{payload:this.BM}))}cacheCoordinates(){this.wM=this.yr.getElementCoordinates(this.OM)}positionContextMenu(t){this.cacheCoordinates(),Gh(this.Fc,t,this.wM,{alignMiddle:this.alignMiddle,alignTop:this.alignTop,forceRight:this.forceRight})}$M(t){switch(t.type){case co.SimpleMenuItem:this.close();break;case co.SubmenuMenuItem:this.NM(t)}}sendEvent(t,i){this.mediator.publish(this,t,i)}NM(t){const i=this.Fc.clientWidth;t.isOpen?(t.$menuContainer.addEventListener("transitionend",this.jM),this.VM.style.left="0px",t.$menuContainer.style.left="0px"):(t.$menuContainer.removeEventListener("transitionend",this.jM),this.FM.style.width=2*i+"px",this.FM.appendChild(t.$menuContainer),(0,e.Tp)(this.FM),this.VM.style.left=-i+"px",t.$menuContainer.style.left=-i+"px"),t.isOpen=!t.isOpen}closeAllSubmenuItems(){this.LM.forEach((t=>{t.type===co.SubmenuMenuItem&&t.isOpen&&this.NM(t)}))}buildContextMenu(t){let i=[];this.VM.innerHTML="",this.FM.style.width=`${this.Fc.clientWidth}px`,this.LM.forEach((t=>this.unsubscribeAll(t))),this.LM=t,this.LM.forEach((t=>{i=[...i,...t.eventList],t.eventList.forEach((i=>this.subscribe(i,t,(e=>{this.$M(t),this.sendEvent(i,e)})))),t.initComponent(),this.VM.appendChild(t.getContainer())})),this.addNewItemsEvent(i)}getAnchorCoordinatesTo(t){return null==t?void 0:t.getCoordinates()}open(t,i=!1){i&&(this.RM=i,this.mediator.publish(this,at.Z[at.Z.HoldStart]),(0,e.cn)(this.OM,m.Gj.OnHold)),this.isOpen=!0,this.mediator.publish(this,_t[_t.ContextMenuOpen]),this.positionContextMenu(t);const s={interactionend:this.close};this.Sc.addGlobalActions(this.Fc,s),(0,e.IV)(this.Fc,m.Gj.Invisible)}}class fo extends Qh{constructor(t,i,e,s,n){super(t,i,e,fo.getTemplate(n),s),this.mediator=t,this.Rc=!1,this.type=co.SimpleMenuItem,this.eventList=[],this.event=n.activeEvent,this.name=n.name,n.eventList?this.eventList=n.eventList:this.eventList.push(this.event),this.UM=this.Fc.getElementsByClassName(m.Ng.ItemTitle)[0],this.HM=this.Fc.getElementsByClassName(m.Ng.ItemIcon)[0]}static getTemplate(t){const i=`<cnx class="${m.Ng.ItemIcon}">${t.icon}</cnx>`,e=`<cnx class="${m.Ng.ItemExtra}">${t.label}</cnx>`;return`<cnx class="${m.Ng.ClickOption}">\n                    ${t.icon?i:""}\n                    <cnx class="${m.Ng.ItemTitle}">${t.name}</cnx>\n                    ${t.label?e:""}\n                </cnx>`}onClickHandler(t){this.mediator.publish(this,this.event)}changeItemName(t){this.UM.innerHTML=t}changeItemIcon(t){this.HM.innerHTML=t}get isActive(){return this.Rc}set isActive(t){this.Rc=t,this.Rc?(0,e.cn)(this.Fc,m.Gj.Active,m.iu.AccentColor):(0,e.IV)(this.Fc,m.Gj.Active,m.iu.AccentColor)}}class mo extends po{constructor(t,i,e,s,n,r,h,o,a){super(t,i,e,s,n,r,h,o),this.resizeObserver=a,this.alignMiddle=!0,this.alignTop=!0,this.forceRight=!1,this.qM=[],this.zM=new fo(this,this.yr,this.Sc,this.Jt,{name:"Off",activeEvent:null}),this.WM=[],this.GM=!1}sendEvent(t){this.updateCaptionSelection(t),this.mediator.publish(this,this.eventName,{payload:{event:t?_t[_t.CaptionOn]:_t[_t.CaptionOff],data:t}})}createCaptionsMenu(t){if(this.WM===t)return;0===this.qM.length?this.qM.push(this.zM):this.qM=this.qM.slice(0,1),t.forEach((t=>{this.qM.push(new fo(this,this.yr,this.Sc,this.Jt,{name:t.title,activeEvent:t.file}))}));const i=this.WM.find((t=>{var i;return t.title===(null===(i=this.JM)||void 0===i?void 0:i.name)}));this.JM&&i&&this.updateCaptionSelection(i.file),(0,e.T7)(this.getContainer(),{height:"auto"}),this.WM=t,this.resizeObserver&&!this.GM&&(this.resizeObserver.on(this.getContainer(),(t=>this.YM(t))),this.GM=!0),this.buildContextMenu(this.qM)}initComponent(){}onResize(t){this.cacheCoordinates(),this.isOpen&&this.positionContextMenu(t)}updateCaptionSelection(t){this.qM.forEach((t=>t.isActive=!1));const i=this.WM.find((i=>i.file===t));i?this.JM=this.qM.find((t=>t.name===i.title)):t||(this.JM=this.qM.find((t=>"Off"===t.name))),this.JM&&(this.JM.isActive=!0)}YM(t){t.clientHeight>=188&&(0,e.T7)(t,{height:"188px"}),this.qc||(this.qc=new st(t,{horizontal:!1}),(0,e.cn)(t,m.Gj.HasCustomScrollbar))}}class go extends Xh{constructor(){super(...arguments),this.eventList=[_t[_t.Settings],...this.eventList],this.XM="Settings"}onClickHandler(){this.mediator.publish(this,_t[_t.Settings])}toggleHDFlag(t){t?(0,e.cn)(this.Fc,m.Gj.Active):(0,e.IV)(this.Fc,m.Gj.Active)}get tooltip(){return this.XM}}class vo extends Xh{constructor(t,i,e,s,n,r=!1,h){super(t,i,e,s,h),this.ZM=n,this.isActive=r}onClickHandler(){this.isActive=!this.isActive,this.onStateChange()}get isActive(){return this.X_}set isActive(t){this.X_=t,this.X_?(0,e.cn)(this.Fc,this.ZM):(0,e.IV)(this.Fc,this.ZM)}}class yo extends vo{constructor(){super(...arguments),this.eventList=[_t[_t.CaptionMenu],_t[_t.CaptionOn],_t[_t.CaptionOff],_t[_t.StateChanged],...this.eventList],this.XM="Closed Captions"}onClickHandler(){this.mediator.publish(this,_t[_t.CaptionMenu])}onStateChange(){this.mediator.publish(this,this.isActive?_t[_t.CaptionOn]:_t[_t.CaptionOff]),this.mediator.publish(this,_t[_t.StateChanged])}get tooltip(){return this.XM}}const bo='<cnx class="cnx-icon-button cnx-button-caption cnx-context-controller cnx-ui-btn-hoverable"><cnx class="cnx-btn-container"><cnx class="cnx-caption-off-icon"><svg markup-inline class="cnx-color-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.556 5H3.444C3.163 5 3 5.15 3 5.25v13.5c0 .1.163.25.444.25h17.11c.275 0 .444-.156.444-.25V5.25c0-.094-.17-.25-.444-.25zm0-2C21.9 3 23 4.013 23 5.25v13.5c0 1.238-1.1 2.25-2.444 2.25H3.444C2.088 21 1 19.988 1 18.75V5.25C1 4.013 2.088 3 3.444 3h17.11zM11 11H9.5v-.5h-2v3h2V13H11v1c0 .55-.45 1-1 1H7c-.55 0-1-.45-1-1v-4c0-.55.45-1 1-1h3c.55 0 1 .45 1 1v1zm7 0h-1.5v-.5h-2v3h2V13H18v1c0 .55-.45 1-1 1h-3c-.55 0-1-.45-1-1v-4c0-.55.45-1 1-1h3c.55 0 1 .45 1 1v1z" fill-rule="evenodd"/></svg></cnx><cnx class="cnx-caption-on-icon"><svg markup-inline class="cnx-color-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><g fill="none"><path d="M20.6 3C21.9 3 23 4 23 5.3v13.5c0 1.2-1.1 2.2-2.4 2.2H3.4C2.1 21 1 20 1 18.8V5.3C1 4 2.1 3 3.4 3h17.2z" class="cnx-color-accent"/><path d="M11 11H9.5v-.5h-2v3h2V13H11v1c0 .6-.4 1-1 1H7c-.5 0-1-.4-1-1v-4c0-.5.5-1 1-1h3c.6 0 1 .5 1 1v1zm7 0h-1.5v-.5h-2v3h2V13H18v1c0 .6-.4 1-1 1h-3c-.5 0-1-.4-1-1v-4c0-.5.5-1 1-1h3c.6 0 1 .5 1 1v1z" class="cnx-color-icon"/></g></svg></cnx></cnx></cnx>';class xo extends Qh{constructor(){super(...arguments),this.Td=!1,this.eventList=[_t[_t.Next]]}onClickHandler(){this.mediator.publish(this,_t[_t.Next])}show(){this.Td=!0,this.Fc.classList.add("cnx-fade-in-up-next")}hide(){this.Td=!1,this.Fc.classList.remove("cnx-fade-in-up-next")}isInView(){return this.Td}updateCard(t,i){const e=this.Fc.getElementsByTagName("img")[0];e.setAttribute("src",t),e.style.display="none",e.onload=()=>{e.style.display="block"};this.Fc.getElementsByClassName("cnx-up-next-box-text")[0].innerHTML=(0,dt.QM)(i)?i:""}}class wo extends Jh{constructor(t,i,e,s,n){super(t,i,e,s),this.settings=n,this.eventList=[],this.KM=144,this.tE=36}createLogo(){let t=this.yr.createElement("img");t.onload=()=>{t=this.resizeLogo(t),this.Fc.appendChild(t)},t.src=this.settings.logoUrl,t.alt=""}resizeLogo(t){const i=t.naturalWidth,e=t.naturalHeight;if(!i||!e)return t;if(this.settings.logoPosition===$.ProtoLogoPositionMode.ControlBar)t.style.setProperty("height",`${this.tE}px`,"important"),t.style.setProperty("width",`${this.tE}px`,"important");else{const s=i/e;this.tE*s>this.KM?(t.style.setProperty("width",`${this.KM}px`,"important"),t.style.setProperty("height","auto","important")):(t.style.setProperty("width","auto","important"),t.style.setProperty("height",`${this.tE}px`,"important"))}return t}initComponent(){try{this.createLogo()}catch(t){(0,s.n)({message:"LogoComponent_createLogo",exception:t.message,callStack:t.stack,level:s.D.CRITICAL})}}}class _o extends Jh{constructor(){super(...arguments),this.eventList=[]}initComponent(){this.hide()}show(){(0,e.Ho)(this.Fc)}hide(){(0,e.MV)(this.Fc)}}const So='<cnx class="cnx-ui-loader"><svg class="cnx-color-accent" version="1.1" viewBox="0 0 79 90" xmlns="http://www.w3.org/2000/svg"><polygon points="21 73.322 11 79 11 12 21 17.678" fill="none" stroke-linecap="round" stroke-linejoin="round"/><polygon points="27 70 27 21 38 27.267 38 63.733" fill="transparent" stroke-linecap="round" stroke-linejoin="round"/><polygon points="44 61 44 31 54 36.769 54 55.231" fill="none" stroke-linecap="round" stroke-linejoin="round"/><polygon points="60 51 60 40 70 45.5" fill="none" stroke-linecap="round" stroke-linejoin="round"/></svg></cnx>';var Po=o(7089);class Ao extends po{constructor(){super(...arguments),this.alignMiddle=!1,this.alignTop=!1,this.forceRight=!0}iE(){const t=i.g.version?`V${i.g.version}`:"dev",e=[new fo(this,this.yr,this.Sc,this.Jt,{activeEvent:_t[_t.AboutClick],name:"About Connatix",icon:Po,label:t})];this.buildContextMenu(e)}initComponent(){this.iE()}onResize(){this.cacheCoordinates(),this.close()}}const Io="About Connatix",ko="Closed Captions";var Co=o(9335);class To extends Qh{constructor(t,i,e,s,n){super(t,i,e,To.getTemplate(n),s),this.mediator=t,this.LM=[],this.Rc=!1,this.type=co.SubmenuMenuItem,this.eventList=[],this.isOpen=!1,this.event=n.event,this.eventList.push(this.event),this.eE=new fo(this,i,e,s,{activeEvent:n.event,name:n.name.toUpperCase(),icon:""}),this.$menuContainer=this.yr.createElementByString(`<cnx class="${m.Ng.Items}"></cnx>`),this.sE=this.Fc.getElementsByClassName(m.Ng.ItemExtra)[0]}static getTemplate(t){const i=`<cnx class="${m.Ng.ItemIcon}">${t.icon}</cnx>`;return`<cnx class="${m.Ng.SubmenuOption}">\n                    ${t.icon?i:""}\n                    <cnx class="${m.Ng.ItemTitle}">${t.name}</cnx>\n                    <cnx class="${m.Ng.ItemExtra} ${m.iu.AccentColor}">${t.label?t.label:""}${Co}</cnx>\n                </cnx>`}onClickHandler(t){this.mediator.publish(this,this.event)}handleItemsEvents(t){this.mediator.publish(this,this.event,{payload:t===this.event?void 0:t})}buildContextMenu(t){this.$menuContainer.innerHTML="",this.LM.forEach((t=>this.unsubscribeAll(t))),this.LM=[this.eE,...t],this.LM.forEach((t=>{t.eventList.forEach((i=>this.subscribe(i,t,(()=>this.handleItemsEvents(i))))),t.initComponent(),this.$menuContainer.appendChild(t.getContainer())}))}changeLabel(t){this.sE.innerHTML=`${t}${Co}`}get isActive(){return this.Rc}set isActive(t){this.Rc=t,this.Rc?(0,e.cn)(this.Fc,m.Gj.Active):(0,e.IV)(this.Fc,m.Gj.Active)}}class Mo extends To{constructor(t,i,e,s,n,r,h){super(t,i,e,s,{event:_t[_t.CaptionMenu],name:n,icon:bo,options:[]}),this.mediator=t,this.resizeObserver=h,this.qM=[],this.zM=new fo(this,this.yr,this.Sc,this.Jt,{name:"Off",activeEvent:null}),this.WM=[],this.isActive=r}handleItemsEvents(t){t!==_t[_t.CaptionMenu]&&this.isOpen&&(this.updateSelection(t),(0,e.T7)(this.$menuContainer,{height:"0"}),this.mediator.publish(this,this.event,{payload:{event:t?_t[_t.CaptionOn]:_t[_t.CaptionOff],data:t}}))}createCaptionsMenu(t){0===this.qM.length?this.qM.push(this.zM):this.qM=this.qM.slice(0,1),t.forEach((t=>{this.qM.push(new fo(this,this.yr,this.Sc,this.Jt,{name:t.title,activeEvent:t.file}))}));let i=!1;this.WM.length!==t.length&&(i=!0),this.updateMenu(),this.WM=t;const e=this.WM.find((t=>{var i;return t.title===(null===(i=this.JM)||void 0===i?void 0:i.name)}));this.JM&&e&&this.updateSelection(e.file),this.buildContextMenu(this.qM),this.resizeObserver&&i&&(this.resizeObserver.off(this.$menuContainer,(t=>this.YM(t))),this.resizeObserver.on(this.$menuContainer,(t=>this.YM(t))))}updateSelection(t){this.qM.forEach((t=>t.isActive=!1));const i=this.WM.find((i=>i.file===t));i?this.JM=this.qM.find((t=>t.name===i.title)):t||(this.JM=this.qM.find((t=>"Off"===t.name))),this.JM&&(this.JM.isActive=!0)}updateMenu(){(0,e.T7)(this.$menuContainer,{height:"auto"})}reset(){var t;this.resizeObserver.off(this.$menuContainer,(t=>this.YM(t))),null===(t=this.qc)||void 0===t||t.removeListeners(),this.qc=null,this.WM=[]}YM(t){t.clientHeight>=188&&(0,e.T7)(t,{height:"188px"}),this.qc||(this.qc=new st(t,{horizontal:!1}),(0,e.cn)(t,m.Gj.HasCustomScrollbar))}}class Eo extends po{constructor(t,e,s,n,r,h,o,a,c,l=!0,u){super(t,e,s,n,r,h,o,c),this.alignMiddle=!1,this.alignTop=!1,this.forceRight=!1,this.nE=[new fo(this,this.yr,this.Sc,this.Jt,{activeEvent:_t[_t.AboutClick],name:Io,icon:Po,label:i.g.version?`V${i.g.version}`:"dev"})],this.rE=new Mo(this,this.yr,this.Sc,this.Jt,ko,l,u),this.hE=[this.rE],this.oE=a}aE(){let t=this.nE;this.oE===m.Rq.Lg&&(t=[...this.hE,...this.nE]),this.buildContextMenu(t)}initComponent(){this.aE()}onResize(t,i){this.isOpen&&this.positionContextMenu(t),this.oE!==i?(this.oE=i,this.closeAllSubmenuItems(),this.aE()):this.oE=i}toggleCaptionState(t){this.rE.isActive!==t&&(this.rE.isActive=t)}hideCaptionOption(){this.rE.hideComponent()}showCaptionOption(){this.rE.showComponent()}updateCaptionSelection(t){this.rE.updateSelection(t)}updateMenu(){this.rE.updateMenu()}getAnchorCoordinatesTo(t){let i=Nh.Right;return this.oE!==m.Rq.Xl&&this.oE!==m.Rq.Xxl&&(i|=Nh.Top),t.getCoordinates(i)}createCaptionsMenu(t){this.rE.createCaptionsMenu(t)}reset(){var t;null===(t=this.rE)||void 0===t||t.reset()}}var Bo=o(8852);class Oo extends Jh{constructor(){super(...arguments),this.eventList=[]}initComponent(){this.cE=this.Fc.getElementsByClassName(m.Yk.CaptionContainer)[0]}updateCaptions(t){this.cE.innerHTML=t&&t.text?(0,Bo.f5)(t.text,"<br>"):""}}class Lo extends wo{constructor(){super(...arguments),this.lE="cnx-logo-height",this.uE="cnx-logo-width"}createLogo(){this.Fc.onload=()=>{this.Fc.style.visibility="visible",this.resizeLogo(this.Fc)},this.Fc.style.visibility="hidden",this.Fc.src=this.settings.logoUrl}resizeLogo(t){const i=t.naturalWidth,s=t.naturalHeight;return i&&s?(i>s?(0,e.cn)(t,this.uE):(0,e.cn)(t,this.lE),t):t}}var Ro=o(834),Do=o(1639);class jo extends Jh{constructor(t,i,e,s,n=!1){super(t,i,e,s,n),this.dE=0,this.fE=null,this.mE=0,this.gE=0,this.vE=100,this.cacheDomElements()}cacheDomElements(){this.yE=this.Fc.getElementsByClassName("cnx-progress-fill")[0],this.Qc=this.Fc.getElementsByClassName("cnx-progress-rail")[0]}cacheWidths(){this.dE=this.fixedRailWidth?this.fixedRailWidth:this.Qc.getBoundingClientRect().width,this.fE=this.Qc.getBoundingClientRect().left}updateUi(t){const i=this.getComputedTranslation(t);this.mE=i,this.yE.style.transform=`translateX(${i}px)`}isValidTranslation(){return this.mE>=0&&this.mE<=this.dE}getComputedTranslation(t){return t<0?0:t>this.dE?this.dE:t}setProgress(t){this.cacheWidths();const i=this.getComputedTranslation((0,xi.dQ)(0,100,0,this.dE,t));this.updateUi(i)}disableTransition(){(0,e.cn)(this.Fc,m.Gj.NoTransition)}enableTransition(){(0,e.IV)(this.Fc,m.Gj.NoTransition)}bE(t){this.disableTransition(),this.setProgress(t),(0,e.Tp)(this.yE),this.enableTransition()}forceStartState(){this.bE(this.gE)}forceEndState(){this.bE(this.vE)}initComponent(){this.cacheWidths()}destroy(){super.destroy()}}class Fo extends jo{constructor(t,i,e,s,n=!1){super(t,i,e,s,n),this.xE=0,this.xn=null,this.wE=!1,this.eventList=[_t[_t.DraggingStart],_t[_t.DraggingStopped]],this._E=t=>{this.cacheWidths(),this.SE(this.PE(t)),this.Jt?this.Fc.addEventListener(this.AE,this.IE):this.yr.addEventListenerOnGlobal(this.AE,this.IE),this.onDragStart()},this.IE=t=>{null===this.xn&&(this.wE||(this.wE=!0,this.disableTransition()),this.xn=this.yr.requestAnimationFrameHelper((()=>{const i=this.CE+(this.PE(t)-this.TE);this.isValidTranslation()&&this.ME(i),this.xn=null})))},this.EE=t=>{t.stopPropagation(),this.Jt?this.Fc.removeEventListener(this.AE,this.IE):this.yr.removeEventListenerOnGlobal(this.AE,this.IE),this.wE=!1,this.enableTransition(),this.onDragEnd()},this.AE=n?"touchmove":"mousemove"}cacheDomElements(){super.cacheDomElements(),this.BE=this.Fc.getElementsByClassName("cnx-progress-handle")[0]}cacheWidths(){super.cacheWidths(),this.xE=this.BE.getBoundingClientRect().width/2}updateUi(t){super.updateUi(t);const i=this.getComputedTranslation(t);this.BE.style.transform=`translateX(${i-this.xE}px)`}onDragEnd(){this.mediator.publish(this,_t[_t.DraggingStopped])}onDragStart(){this.mediator.publish(this,_t[_t.DraggingStart])}PE(t){return this.Jt?t.touches.item(0).clientX:t.clientX}SE(t){this.CE=t-this.fE,this.TE=t,this.ME(this.CE)}ME(t){if(this.isValidTranslation()){const i=this.getComputedTranslation(t),e=0,s=this.dE,n=0,r=100;this.updateUi(i),this.onProgressChange((0,xi.dQ)(e,s,n,r,i))}}setProgress(t){super.setProgress(t)}initComponent(){super.initComponent();const t={interactionstart:this._E,interactionend:this.EE};this.Sc.register(this.Fc,this,this.Sc,t)}destroy(){super.destroy()}}class Vo extends Fo{constructor(t,i,e,s,n=!1){super(t,i,e,s,n),this.OE=80,this.fixedRailWidth=this.OE,this.eventList.push(_t[_t.Volume])}onProgressChange(t){this.mediator.publish(this,_t[_t.Volume],{payload:t})}}function $o(t,i,e){const s=e?y[y.Auto]:i.height.toString();t.forEach((t=>t.name.includes(s)?t.isActive=!0:t.isActive=!1));const n=t.find((t=>y[t.event]===y.Auto));if(e){const e=t.find((t=>t.event===i.height.toString()));if(e){const t=`${n.name} (${e.name})`;n.changeItemName(t)}}else n.changeItemName(n.name)}class No extends po{constructor(){super(...arguments),this.alignMiddle=!0,this.alignTop=!0,this.forceRight=!1,this.qM=[],this.LE={height:360,quality:y.Auto},this.RE=!0}sendEvent(t){this.RE=y[t]===y.Auto,this.mediator.publish(this,this.eventName,{payload:{height:this.RE?this.LE.height:parseInt(t,10),quality:this.RE?y.Auto:y.Strict}})}initComponent(){}createQualityMenu(t){this.qM=[],this.jE=t,this.jE.forEach((t=>{this.qM.push(new fo(this,this.yr,this.Sc,this.Jt,{name:`${t.videoHeight}p`,activeEvent:t.videoHeight.toString(),label:t.isHD?"HD":void 0}))})),this.qM.push(new fo(this,this.yr,this.Sc,this.Jt,{name:y[y.Auto],activeEvent:y[y.Auto]})),$o(this.qM,this.LE,this.RE),this.buildContextMenu(this.qM)}onResize(t){this.cacheCoordinates(),this.isOpen&&this.positionContextMenu(t)}updateQuality(t){(0,f.BZ)(this.jE)&&(this.RE=t.quality===y.Auto,this.LE.quality=t.quality,this.LE.height=(0,xi.DE)(t.height,this.jE.map((t=>t.videoHeight))),$o(this.qM,this.LE,this.RE))}}class Uo extends Jh{constructor(){super(...arguments),this.eventList=[]}initComponent(){this.hide()}show(){(0,e.Ho)(this.Fc),(0,e.Tp)(this.Fc),(0,e.cn)(this.Fc,m.Gj.Active)}hide(){(0,e.IV)(this.Fc,m.Gj.Active),(0,e.MV)(this.Fc)}}class Ho extends Xh{constructor(t,i,e,s,n,r,h){super(t,i,e,s,n),this.tooltip=h,this.FE=$h[r],this.eventList.push(this.FE)}onClickHandler(){this.mediator.publish(this,this.FE)}}class qo extends Qh{constructor(t,i,e,s,n,r,h){super(t,i,e,s,n),this.tooltip=h,this.eventList=[],this.FE=$h[r],this.eventList.push(this.FE)}onClickHandler(){this.mediator.publish(this,this.FE)}}class zo{constructor(t,i,e,s){this.yr=t,this.Sc=i,this.Jt=e,this.VE=new Map,Object.keys(s).forEach((t=>this.$E($h[t],s[t])))}getButton(t,i){const{isHoverable:e,template:s,tooltip:n}=this.NE(t);return e?new Ho(i,this.yr,this.Sc,s,this.Jt,t,n):new qo(i,this.yr,this.Sc,s,this.Jt,t,n)}isGeneralComponent(t){return this.VE.has(t)}NE(t){return this.VE.get(t)}$E(t,i){this.VE.set(t,i)}}var Wo=o(1215);function Go(t,i,e=!0){return e?`\n            <cnx class="cnx-icon-button cnx-button-${$h[t].toLowerCase()} cnx-ui-btn-hoverable">\n                <cnx class="cnx-btn-container">\n                    ${i}\n                </cnx>\n            </cnx>\n        `.trim():`<cnx class="cnx-button-${$h[t].toLowerCase()}">${i}</cnx>`}var Jo=o(9040),Qo=o(89);const Yo={[$h[$h.MoreButton]]:{template:Go($h.MoreButton,Qo),tooltip:"More",isHoverable:!0},[$h[$h.CloseButton]]:{template:Go($h.CloseButton,Wo),tooltip:"Close Player",isHoverable:!0},[$h[$h.UpNextButton]]:{template:Go($h.UpNextButton,Jo),tooltip:"Next",isHoverable:!0},[$h[$h.PreviousButton]]:{template:Go($h.PreviousButton,Jo),tooltip:"Previous",isHoverable:!0}};class Xo extends Xh{constructor(){super(...arguments),this.eventList=[_t[_t.SkipAd],...this.eventList],this.UE=-1,this.HE=-1}initComponent(){super.initComponent(),this.hideComponent(),this.qE=this.Fc.getElementsByTagName("cnx-span")[0],this.qE.innerHTML="Ad",this.zE=this.Fc.querySelectorAll(`.${m.Hs.Timer} svg`)[0]}setSecondsUntilSkip(t){this.UE=Math.ceil(t),this.HE=-1,this.UE>0&&(0,e.T7)(this.zE,{"animation-duration":this.UE+"s"})}tickDown(t){const i=this.UE-Math.floor(t);if(i<0||0===this.HE)return;const s=(0,e.pv)(this.Fc,m.Hs.InTimer);this.HE=i,0===this.HE?(s&&(0,e.IV)(this.Fc,m.Hs.InTimer),this.qE.innerHTML="Ad"):(s||(0,e.cn)(this.Fc,m.Hs.InTimer),this.qE.innerHTML=`in ${this.HE}s`)}get tooltip(){}onClickHandler(){0===this.HE&&this.mediator.publish(this,_t[_t.SkipAd])}}var Zo=o(4670);class Ko extends Jh{constructor(){super(...arguments),this.eventList=[]}initComponent(){this.WE=this.Fc.getElementsByClassName(m.mr.BackgroundImg)[0],this.GE=this.Fc.getElementsByClassName(m.mr.Icon)[0],this.GE.innerHTML=Zo,this.JE=this.Fc.getElementsByClassName(m.mr.ButtonContainer)[0];const t=this.Fc.getElementsByClassName(m.mr.Button)[0];this.QE=this.yr.createElementByString(`<a class="${m.mr.Wrapper}" href="#">`),this.QE.target=At.bS.Blank,this.QE.appendChild(t),this.JE.innerHTML="",this.JE.appendChild(this.QE),this.YE=this.Fc.getElementsByClassName(m.mr.InfoContainer)[0],this.XE=this.Fc.getElementsByClassName(m.mr.FallbackContainer)[0],this.ZE=this.Fc.getElementsByClassName(m.mr.SlotCountText)[0]}setBackgroundImg(t){(0,dt.QM)(t)?((0,e.IV)(this.WE,m.Gj.DisplayNone),this.WE.src=t):(0,e.cn)(this.WE,m.Gj.DisplayNone)}setClickUrl(t){if(!(0,dt.QM)(t))return(0,e.Ho)(this.XE),void(0,e.MV)(this.YE);(0,e.Ho)(this.YE),(0,e.MV)(this.XE),this.QE.href=t}setFallbackText(t,i){const e=t||1,s=i||1;this.ZE.innerHTML=`Loading ad ${e}/${s}`}}class ta extends Jh{constructor(){super(...arguments),this.eventList=[]}initComponent(){this.KE=this.Fc.getElementsByTagName("cnx-span")[0]}setTime(t){isNaN(t)||"number"!=typeof t?(0,e.cn)(this.Fc,m.Gj.Invisible):(this.KE.innerHTML=(0,ut.to)(t),(0,e.IV)(this.Fc,m.Gj.Invisible))}}const ia='<cnx class="cnx-ui-progress-label"><cnx-span></cnx-span></cnx>';class ea extends Fo{constructor(t,i,s,n,r=!1){super(t,i,s,n,r),this.tB=!1,this.iB=t=>{(0,e.cn)(this.Fc,m.Gj.HoverEnd),this.tB=!0},this.eB=t=>{const i=this.getComputedTranslation(t.clientX-this.fE);this.sB.style.transform=`translateX(${i}px)`},this.nB=t=>{this.sB.style.transform="translateX(0)",this.tB=!1,this.rB()},this.eventList=this.eventList.concat([_t[_t.Seek],_t[_t.SeekingStart],_t[_t.SeekingStopped]])}onProgressChange(t){this.mediator.publish(this,_t[_t.Seek],{payload:t-.1})}onDragEnd(){super.onDragEnd(),this.mediator.publish(this,_t[_t.SeekingStopped]),this.rB()}onDragStart(){super.onDragStart(),this.mediator.publish(this,_t[_t.SeekingStart])}rB(){this.tB||this.wE||(0,e.IV)(this.Fc,m.Gj.HoverEnd)}initComponent(){super.initComponent(),this.Fc.addEventListener("mousemove",this.eB),this.Fc.addEventListener("mouseenter",this.iB),this.Fc.addEventListener("mouseleave",this.nB),this.sB=this.Fc.getElementsByClassName("cnx-progress-follow")[0]}hide(){(0,e.MV)(this.Fc)}show(){(0,e.Ho)(this.Fc)}destroy(){super.destroy(),this.Fc.removeEventListener("mousemove",this.eB),this.Fc.removeEventListener("mouseenter",this.iB),this.Fc.removeEventListener("mouseleave",this.nB)}}var sa;!function(t){t[t.Mute=0]="Mute",t[t.Unmute=1]="Unmute"}(sa||(sa={}));class na extends Xh{constructor(t,i,e,s,n,r){super(t,i,e,s,r),this.eventList=[_t[_t.Mute],_t[_t.Unmute],_t[_t.StateChanged],...this.eventList],this.hB="Mute",this.oB="Unmute",this.X_=n}onClickHandler(){this.X_===sa.Mute?(this.mediator.publish(this,_t[_t.Unmute]),this.setState(sa.Unmute)):(this.mediator.publish(this,_t[_t.Mute]),this.setState(sa.Mute))}tM(){this.X_===sa.Mute?(0,e.L_)(this.Fc,"cnx-sound-on","cnx-sound-off"):(0,e.L_)(this.Fc,"cnx-sound-off","cnx-sound-on")}get tooltip(){return this.X_===sa.Mute?this.oB:this.hB}initComponent(){super.initComponent(),this.tM()}setState(t){this.X_!==t&&(this.X_=t,this.tM(),this.mediator.publish(this,_t[_t.StateChanged]))}setVolume(t){t>0?this.setState(sa.Unmute):this.setState(sa.Mute)}}class ra extends ro{constructor(t,i,e,s){super(i,e,s),this.mediator=t,this.Fc=this.pM.getRenderedDom()}getContainer(){return this.Fc}initComponent(){this.pM.initComponents()}showComponent(){(0,e.Ho)(this.Fc)}hideComponent(){(0,e.MV)(this.Fc)}}class ha extends ra{constructor(t,i,s,n){super(t,i,s,n),this.aB=null,this.eventList=[_t[_t.Volume],_t[_t.VolumeHoverStart],_t[_t.VolumeHoverStopped],_t[_t.DraggingStopped],_t[_t.DraggingStart],_t[_t.HoverStart],_t[_t.HoverEnd],_t[_t.StateChanged]],this.cB=.2,this.lB=600,this.uB=!1,this.dB=t=>{clearTimeout(this.aB),(0,e.cn)(this.Fc,"cnx-mod-hover"),this.mediator.publish(this,_t[_t.VolumeHoverStart])},this.pB=()=>{this.uB||(null!==this.aB&&clearTimeout(this.aB),this.aB=setTimeout((()=>{(0,e.IV)(this.Fc,"cnx-mod-hover"),this.mediator.publish(this,_t[_t.VolumeHoverStopped])}),this.lB))},this.fB=this.cB,this.mB=this.getComponent($h.VolumeButton),this.gB=this.getComponent($h.VolumeProgress),(0,e.IV)(this.mB.getContainer(),m.Gj.HovarableButton)}handleComponentEvent(t,i,e){let s;switch(t){case _t[_t.Volume]:s=i.payload/100,this.vB(s),this.yB(i.payload);break;case _t[_t.Mute]:s=0,this.setVolumeProgress(0);break;case _t[_t.Unmute]:s=this.fB,this.setVolumeProgress(100*this.fB);break;case _t[_t.DraggingStopped]:this.uB=!1,this.mediator.publish(this,_t[_t.DraggingStopped]),this.pB();break;case _t[_t.DraggingStart]:this.uB=!0,this.mediator.publish(this,_t[_t.DraggingStart]);break;case _t[_t.HoverStart]:this.mediator.publish(this,_t[_t.HoverStart],{payload:{targetComponent:e}});break;case _t[_t.HoverEnd]:this.mediator.publish(this,_t[_t.HoverEnd],{payload:{targetComponent:e}});break;case _t[_t.StateChanged]:this.mediator.publish(this,_t[_t.StateChanged],{payload:{targetComponent:e}})}void 0!==s&&this.bB(s)}vB(t){t<this.cB?this.fB=this.cB:this.fB=t}bB(t){this.mediator.publish(this,_t[_t.Volume],{payload:t})}yB(t){0===t?this.mB.setState(sa.Mute):this.mB.setState(sa.Unmute)}setVolumeProgress(t){this.gB.setProgress(t)}initComponent(){super.initComponent(),this.Fc.addEventListener("mouseenter",this.dB),this.Fc.addEventListener("mouseleave",this.pB)}setVolume(t){const i=100*t;this.yB(i),this.setVolumeProgress(i)}destroy(){super.destroy(),this.Fc.removeEventListener("mouseenter",this.dB),this.Fc.removeEventListener("mouseleave",this.pB)}}const oa=`\n    <cnx class="cnx-volume-container">\n        <cnx class="cnx-ui-btn cnx-volume-btn">\n            [[${$h.VolumeButton}]]\n        </cnx>\n        <cnx class="cnx-volume-bar">\n            [[${$h.VolumeProgress}]]\n        </cnx>\n    </cnx>\n`.trim();var aa=o(2040),ca=o(8808);const la={[$h[$h.ShareButton]]:{template:Go($h.ShareButton,ca),tooltip:"Share",isHoverable:!0},[$h[$h.CastButton]]:{template:Go($h.CastButton,aa),tooltip:"Cast",isHoverable:!0}};var ua=o(1505),da=o(3653);const pa=90*Ht.Y0,fa="This live stream will start shortly";class ma extends Jh{constructor(){super(...arguments),this.eventList=[],this.xB=null}initComponent(){this.wB=this.yr.createElementByString("<img/>"),this.Fc.appendChild(this.wB),this._B=this.Fc.getElementsByTagName("cnx-span")[0],this.SB=this.Fc.getElementsByClassName("cnx-live-message")[0],this.PB=this.Fc.getElementsByClassName("cnx-live-icon")[0]}setPosterSrc(t){(0,dt.QM)(t)&&(this.wB.src=t)}setPosterAltText(t){this.wB.alt=t}setIconToStarting(){this.PB.innerHTML=`${ua}`}setIconToEnded(){this.PB.innerHTML=`${da}`}setMessageToStarting(){this.AB(fa)}setMessageToEnded(){this.AB("This live stream is not currently available. Please check again shortly")}setMessageToNotSupported(){this.AB("Live stream not supported by browser")}handleDelayedStart(t){(0,dt.r)(Date.parse(t))&&(this.IB=new Date(t),this.kB()>0&&(this.CB(),clearInterval(this.xB),this.xB=setInterval((()=>{this.CB()}),Ht.s_*Ht.Y0)))}showMessage(){(0,e.Ho)(this.PB),(0,e.Ho)(this.SB)}hideMessage(){(0,e.MV)(this.PB),(0,e.MV)(this.SB)}show(){(0,e.Ho)(this.Fc),(0,e.cn)(this.Fc,m.Gj.Active)}hide(){(0,e.IV)(this.Fc,m.Gj.Active),(0,e.MV)(this.Fc)}destroy(){super.destroy(),clearInterval(this.xB)}CB(){const t=this.kB();if(t>0){const i=this.TB(t);this.AB(`Live in ${i}`)}else this.AB(fa),clearInterval(this.xB),this.xB=null}kB(){return(Math.max(this.IB.getTime(),Date.now())-Date.now())/Ht.s_}TB(t){const i=t>=pa?Math.round(t/(Ht.Y0*Ht.oG)):Math.ceil(t/Ht.Y0);return`${i} ${t>=pa?"hours":"minute"+(1===i?"":"s")}`}AB(t){this._B.innerHTML=t}}class ga extends Jh{constructor(){super(...arguments),this.eventList=[]}initComponent(){this.hideComponent()}}class va extends class{constructor(t,i,e,s={},n={}){this.yr=t,this.Sc=i,this.Fc=e,this.zt=s,this.MB={[$h.PlayButton]:t=>this.EB(!1,t),[$h.BigPlayButton]:t=>this.EB(!0,t),[$h.VolumeProgress]:t=>new Vo(t,this.yr,this.Sc,'<cnx class="cnx-progress-bar"><cnx class="cnx-progress-rail-container"><cnx class="cnx-progress-rail"></cnx><cnx class="cnx-progress-fill cnx-color-icon"></cnx></cnx><cnx class="cnx-progress-handle cnx-color-icon"></cnx></cnx>'),[$h.ExpandButton]:t=>new lo(t,this.yr,this.Sc,'<cnx class="cnx-icon-button cnx-ui-btn-hoverable"><cnx class="cnx-btn-container"><cnx class="cnx-expand-icon"><svg markup-inline class="cnx-color-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4.6 3H10v2H5v5H3V4.6A1.58 1.58 0 014.6 3zM5 14v5h5v2H4.6A1.58 1.58 0 013 19.4V14h2zM19.4 3A1.58 1.58 0 0121 4.6V10h-2V5h-5V3h5.4zM19 14h2v5.4a1.58 1.58 0 01-1.6 1.6H14v-2h5v-5z" fill-rule="evenodd"/></svg></cnx><cnx class="cnx-collapse-icon"><svg markup-inline class="cnx-color-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill-rule="evenodd"><path d="M16.6 15a1.58 1.58 0 00-1.6 1.6V22h2v-5h5v-2h-5.4zM17 2h-2v5.4A1.58 1.58 0 0016.6 9H22V7h-5V2zM7.4 15A1.58 1.58 0 019 16.6V22H7v-5H2v-2h5.4zM7 2h2v5.4A1.58 1.58 0 017.4 9H2V7h5V2z"/></svg></cnx></cnx></cnx>',this.zt.isMobile),[$h.QualityMenu]:t=>new No(t,this.yr,this.Sc,'<cnx class="cnx-ui-cm cnx-ui-cm-quality"><cnx class="cnx-cm-container"></cnx></cnx>',_t[_t.Quality],$h.QualityMenu,this.Fc,this.zt.isMobile),[$h.Loader]:t=>new Uo(t,this.yr,this.Sc,So),[$h.SkipAdButton]:t=>new Xo(t,this.yr,this.Sc,'<cnx class="cnx-ad-skip-button cnx-ui-btn"><cnx class="cnx-icon-button"><cnx class="cnx-skip-ad-text">Skip&nbsp;<cnx-span></cnx-span></cnx><cnx class="cnx-skip-ad-icon"><svg markup-inline viewBox="0 0 24 24" class="cnx-color-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18 21h3V3h-3v18zM3 21l14-9L3 3v18z" fill-rule="evenodd"/></svg></cnx></cnx><cnx class="cnx-timer-loader"><svg markup-inline xmlns="http://www.w3.org/2000/svg" width="36" height="36"><circle class="cnx-svg-circle-stroke" cx="18" cy="18" r="17"/></svg></cnx></cnx>',this.zt.isMobile),[$h.AdLoadingScreen]:t=>new Ko(t,this.yr,this.Sc,'<cnx class="cnx-pod-loading-screen-container"><img alt="Loading Pods" class="cnx-pod-loading-background"><cnx class="cnx-pod-loading-info"><cnx class="cnx-pod-open-new-icon"></cnx><cnx class="cnx-pod-visit-website-text"><cnx-span>Visit Advertiser website</cnx-span></cnx><cnx class="cnx-pod-read-more-container"><cnx-span class="cnx-pod-read-more-btn">GO TO PAGE</cnx-span></cnx></cnx><cnx class="cnx-pod-loading-fallback"><cnx class="cnx-pod-loading-spinner"></cnx><cnx-span class="cnx-pod-slot-count-text"></cnx-span></cnx></cnx>'),[$h.ElapsedTimeLabel]:t=>new ta(t,this.yr,this.Sc,ia),[$h.TotalDurationLabel]:t=>new ta(t,this.yr,this.Sc,ia),[$h.RemainingDurationLabel]:t=>new ta(t,this.yr,this.Sc,ia),[$h.ProgressBar]:t=>new ea(t,this.yr,this.Sc,'<cnx class="cnx-progress-bar cnx-video-progress"><cnx class="cnx-progress-rail-container"><cnx class="cnx-progress-rail"></cnx><cnx class="cnx-progress-fill cnx-color-accent"></cnx><cnx class="cnx-progress-follow"></cnx></cnx><cnx class="cnx-progress-handle cnx-color-accent"></cnx><cnx class="cnx-progress-hitarea"></cnx></cnx>',this.zt.isMobile),[$h.VolumeButton]:t=>new na(t,this.yr,this.Sc,'<cnx class="cnx-icon-button cnx-ui-btn-hoverable"><cnx class="cnx-btn-container"><cnx class="cnx-unmute-icon"><svg markup-inline class="cnx-color-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M0 7.913v7.913h4.946l5.935 5.045V1.978L4.946 7.913zm16.815 3.957a5.476 5.476 0 00-2.967-4.946v9.9a5.475 5.475 0 002.967-4.945zM13.848 0v2.077a10.39 10.39 0 010 19.585v2.077a12.05 12.05 0 008.9-11.87A12.05 12.05 0 0013.848 0z"/></svg></cnx><cnx class="cnx-mute-icon"><svg markup-inline class="cnx-color-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M11 2L8.25 4.25 11 7zM0 7v9h5l6 5v-6.5L3.85 7zm17 4.5c0-1.965-1.2-3.735-3-4.5v3l2.8 2.8a3.73 3.73 0 00.2-1.3zm3.4 7.45l-1.85-1.85-2.65-2.6-1.9-1.95-3-3-4.15-4.1-4.95-5L1.45 0 0 1.45 17.15 18.6 19 20.4l3.55 3.6L24 22.55zM14 23a11.83 11.83 0 003.65-1.55l-1.25-1.3c-.747.498-1.553.902-2.4 1.2V23zm9-11.5A11.77 11.77 0 0014 0v1.6A10.53 10.53 0 0120 16l1.45 1.45A11.99 11.99 0 0023 11.5z"/></svg></cnx></cnx></cnx>',sa.Mute,this.zt.isMobile)},this.EB=(t,i)=>new Zh(i,this.yr,this.Sc,function(t=!1){return`\n    <cnx class="cnx-icon-button cnx-ui-btn-hoverable ${t?"cnx-button-big-play":""}">\n        <cnx class="cnx-btn-container">\n            <cnx class="cnx-play-icon">${Ro}</cnx>\n            <cnx class="cnx-pause-icon">${Do}</cnx>\n        </cnx>\n    </cnx>\n`.trim()}(t),this.zt.isMobile),this.BB=t=>i=>{const e=this.MB[t];if(e)return e(i)},this.OB=new zo(this.yr,this.Sc,this.zt.isMobile,Object.assign(Object.assign({},Yo),n))}createComponent(t,i){const e=this.BB(t)(i);return e||(this.OB.isGeneralComponent(t)?this.OB.getButton(t,i):void 0)}}{constructor(t,i,e,s,n,r){super(t,i,e,s,la),this.LB=n,this.Tr=r,this.RB={[$h.VolumeControls]:t=>new ha(t,this.yr,oa,this),[$h.SettingsButton]:t=>new go(t,this.yr,this.Sc,'<cnx class="cnx-icon-button cnx-button-settings cnx-context-controller cnx-ui-btn-hoverable"><cnx class="cnx-btn-container"><cnx class="cnx-settings-icon"><svg markup-inline class="cnx-color-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 22 22"><path d="M18.454 5.847l-2.642 1.05-1.03-.784a6.014 6.014 0 00-1.39-.8l-1.205-.488-.404-2.786H10.22l-.404 2.786-1.205.488a6.48 6.48 0 00-1.413.817L6.17 6.9 3.546 5.847l-.783 1.34 2.232 1.727-.16 1.266c-.042.33-.062.59-.062.82s.02.49.062.82l.16 1.266-2.233 1.727.783 1.34 2.642-1.05 1.03.784c.444.338.904.603 1.39.8l1.205.488.404 2.786h1.563l.404-2.786 1.205-.488a6.48 6.48 0 001.413-.817l1.025-.76 2.625 1.043.783-1.34-2.233-1.727.16-1.266c.043-.337.062-.584.062-.82s-.02-.483-.062-.82l-.16-1.266 2.233-1.727-.783-1.34zm.71 6.227l2.32 1.81a.55.55 0 01.132.702l-2.198 3.793c-.132.24-.418.34-.67.24l-2.736-1.096c-.57.427-1.187.8-1.857 1.074l-.418 2.905a.535.535 0 01-.538.46H8.802a.534.534 0 01-.538-.46l-.418-2.905a8.045 8.045 0 01-1.857-1.074l-2.736 1.096a.553.553 0 01-.67-.24L.385 14.584a.553.553 0 01.132-.702l2.32-1.81A8.67 8.67 0 012.758 11a8.67 8.67 0 01.077-1.074l-2.32-1.81a.54.54 0 01-.132-.702l2.198-3.793c.132-.24.418-.34.67-.24L5.99 4.478c.57-.427 1.187-.8 1.857-1.074L8.264.5a.535.535 0 01.538-.46h4.396c.275 0 .506.197.538.46l.418 2.905c.67.274 1.286.636 1.857 1.074l2.736-1.096a.553.553 0 01.67.24l2.198 3.793a.553.553 0 01-.132.702l-2.32 1.81A8.52 8.52 0 0119.242 11a8.52 8.52 0 01-.077 1.074zM11 14.256A3.26 3.26 0 0014.256 11 3.26 3.26 0 0011 7.744 3.26 3.26 0 007.744 11 3.26 3.26 0 0011 14.256zm0-2A1.26 1.26 0 019.744 11 1.26 1.26 0 0111 9.744 1.26 1.26 0 0112.256 11 1.26 1.26 0 0111 12.256z"/></svg></cnx><cnx class="cnx-hd-flag"><svg markup-inline xmlns="http://www.w3.org/2000/svg" viewBox="0 0 17 11"><g fill="none"><rect class="cnx-color-accent" width="17" height="11" rx="2" fill="#09F"/><path class="cnx-color-icon" d="M8 9H6.9V5.9H4.1V9H3V2h1.1v2.9h2.8V2H8v7zm2 0V2h2c.6 0 1.1.2 1.6.4.4.3.8.7 1 1.2.3.5.4 1.1.4 1.7v.4c0 .7-.1 1.2-.4 1.7-.2.5-.6.9-1.1 1.2-.4.3-1 .4-1.6.4H10zm1-6v5h1.2c.6 0 1-.2 1.3-.6.3-.4.5-1 .5-1.7v-.4c0-.7-.2-1.3-.5-1.7-.3-.4-.7-.6-1.3-.6H11z"/></g></svg></cnx></cnx></cnx>',this.zt.isMobile),[$h.CaptionButton]:t=>new yo(t,this.yr,this.Sc,bo,m.Gj.Active,this.zt.closedCaptionDefault,this.zt.isMobile),[$h.UpNextBox]:t=>new xo(t,this.yr,this.Sc,'<cnx class="cnx-up-next-container cnx-hide-on-single-video"><cnx class="cnx-up-next-box"><cnx class="cnx-up-next-box-image"><img></cnx><cnx class="cnx-up-next-box-gradient"></cnx><cnx class="cnx-up-next-box-text"></cnx><cnx class="cnx-up-next-box-button"><cnx class="cnx-up-next-box-button-text">NEXT</cnx></cnx></cnx></cnx>',this.zt.isMobile),[$h.LogoComponent]:t=>{if(!(0,dt.$K)(this.zt.logoUrl)&&!(0,dt.$K)(this.zt.logoPosition))throw new Error("custom logo is undefined");return new wo(t,this.yr,this.Sc,'<cnx class="cnx-logo"></cnx>',{logoUrl:this.zt.logoUrl,logoPosition:this.zt.logoPosition})},[$h.LogoOutstream]:t=>{if(!(0,dt.$K)(this.zt.logoUrl)&&!(0,dt.$K)(this.zt.logoPosition))throw new Error("outstream logo undefined");return new Lo(t,this.yr,this.Sc,'<img class="cnx-home-screen-logo" />',{logoUrl:this.zt.logoUrl})},[$h.LivePoster]:t=>new ma(t,this.yr,this.Sc,'<cnx class="cnx-live-poster cnx-mod-active"><cnx class="cnx-live-broadcast"><cnx class="cnx-live-icon"><svg class="cnx-live-icon-starting" markup-inline viewBox="0 0 44 44" xmlns="http://www.w3.org/2000/svg"><g fill="none"><path d="M22 15.5a6.5 6.5 0 100 13 6.5 6.5 0 000-13z" fill="#FFF"/><path d="M22 18a4 4 0 110 8 4 4 0 010-8z" fill="#FF4047"/><path d="M37.598 7.541c7.955 7.972 8.036 20.846.243 28.918l-.243.248-1.77-1.765c6.985-7 7.062-18.302.233-25.397l-.233-.238 1.77-1.766zm-4.722 5.225c4.34 4.926 4.415 12.803.224 17.831l-.224.262L31 29.206c3.515-3.989 3.583-10.465.203-14.55L31 14.42l1.876-1.653zM6.028 7.541c-7.955 7.972-8.036 20.846-.243 28.918l.243.248 1.77-1.765c-6.985-7-7.062-18.302-.233-25.397l.233-.238-1.77-1.766zm4.722 5.225c-4.34 4.926-4.415 12.803-.224 17.831l.224.262 1.876-1.653c-3.515-3.989-3.583-10.465-.203-14.55l.203-.236-1.876-1.653z" fill="#FFF"/></g></svg> <svg class="cnx-live-icon-ended" markup-inline viewBox="0 0 44 44" xmlns="http://www.w3.org/2000/svg"><g fill="#FFF" fill-rule="evenodd"><rect class="cnx-live-icon-svg-rectangle" transform="rotate(90 22.06 21.43)" x="20.059" y="15.929"/><path d="M37.598 7.541c7.955 7.972 8.036 20.846.243 28.918l-.243.248-1.77-1.765c6.985-7 7.062-18.302.233-25.397l-.233-.238 1.77-1.766zm-4.722 5.225c4.34 4.926 4.415 12.803.224 17.831l-.224.262L31 29.206c3.515-3.989 3.583-10.465.203-14.55L31 14.42l1.876-1.653zM6.028 7.541c-7.955 7.972-8.036 20.846-.243 28.918l.243.248 1.77-1.765c-6.985-7-7.062-18.302-.233-25.397l.233-.238-1.77-1.766zm4.722 5.225c-4.34 4.926-4.415 12.803-.224 17.831l.224.262 1.876-1.653c-3.515-3.989-3.583-10.465-.203-14.55l.203-.236-1.876-1.653z" fill-rule="nonzero" opacity=".5"/></g></svg></cnx><cnx class="cnx-live-message"><cnx-span></cnx-span></cnx></cnx></cnx>'),[$h.LiveIcon]:t=>new ga(t,this.yr,this.Sc,'<cnx class="cnx-ui-live-badge-wrapper cnx-d-md-none"><cnx class="cnx-ui-live-badge"><svg markup-inline xmlns="http://www.w3.org/2000/svg" viewBox="0 0 37 9"><path d="M15.223 9V7.816H11.35V.47H9.868V9h5.356zm3.7 0V.47h-1.477V9h1.477zm6.555 0L28.55.47h-1.63l-2.168 6.674L22.608.47h-1.623L24.043 9h1.436zm10.6 0V7.816h-4.096V5.2h3.504V4.02h-3.504V1.664h4.055V.47H30.5V9h5.578zM3 2a3 3 0 100 6 3 3 0 100-6z" fill="#fff"/><path d="M3 3a2 2 0 110 4 2 2 0 110-4z" fill="#ff4047"/></svg></cnx></cnx>'),[$h.QueStateOverlay]:t=>new _o(t,this.yr,this.Sc,So),[$h.ContextMenu]:t=>new Ao(t,this.yr,this.Sc,'<cnx class="cnx-ui-cm cnx-ui-cm-context"><cnx class="cnx-cm-container"></cnx></cnx>',_t[_t.ContextClick],$h.ContextMenu,this.Fc,this.zt.isMobile),[$h.ElementsSettingsMenu]:t=>new Eo(t,this.yr,this.Sc,'<cnx class="cnx-ui-cm cnx-ui-cm-settings"><cnx class="cnx-cm-container"></cnx></cnx>',_t[_t.SettingsMenu],$h.ElementsSettingsMenu,this.Fc,this.LB,this.zt.isMobile,this.zt.closedCaptionDefault,this.Tr),[$h.ElementsCaptionMenu]:t=>new mo(t,this.yr,this.Sc,'<cnx class="cnx-ui-cm cnx-ui-cm-captions"><cnx class="cnx-cm-container"></cnx></cnx>',_t[_t.CaptionMenu],$h.ElementsCaptionMenu,this.Fc,this.zt.isMobile,this.Tr),[$h.CaptionComponent]:t=>new Oo(t,this.yr,this.Sc,'<cnx class="cnx-captions"><cnx class="cnx-captions-container"><cnx-span class="cnx-captions-text-holder"></cnx-span></cnx></cnx>')},this.DB=t=>i=>{const e=this.RB[t];if(e)return e(i)}}createComponent(t,i){return this.DB(t)(i)||super.createComponent(t,i)}}var ya;!function(t){t.InPod="cnx-ad-in-pod",t.AdMarkerInPodTextContainer="cnx-ad-marker-text",t.AdDurationLabel="cnx-ad-duration",t.AdTitleLabel="cnx-ad-title",t.AdMarkerTitleContainer="cnx-ad-marker-title",t.AdMarkerTitleText="cnx-ad-title-text",t.CardImage="cnx-ad-card-image",t.CardTitle="cnx-ad-card-title",t.AdUiContent="cnx-ui-ad-content"}(ya||(ya={}));class ba extends uo{constructor(t,i,s,n,r,h,o={},a){super(t,r,i,h,a||new va(i,n,r,o)),this.mediator=t,this.globalDomUtilsService=i,this.Vu=s,this.$container=r,this.settings=o,this.mM={[b.PlayingState]:new io(this),[b.PausedState]:new so(this)},this.jB=0,this.xn=null,this.FB=t=>{(0,e.og)(this.$uiContainer,m.s6.UiInView,t)},this.EM.setDistanceValues({top:4,bottom:4}),this.mM[b.PausedState].enterState(),this.VB=this.$container.querySelector(`.${ya.CardImage}`),this.$B=this.$container.querySelector(`.${ya.CardTitle}`),this.NB=this.$container.querySelector(`.${ya.AdMarkerTitleText}`),this.UB=this.$container.querySelector(`.${ya.AdUiContent}`)}handleComponentEvent(t,i,e){switch(super.handleComponentEvent(t,i,e),t){case _t[_t.Volume]:this.mediator.publish(this,_t[_t.Volume],i);break;case _t[_t.Mute]:this.mediator.publish(this,_t[_t.Mute]);break;case _t[_t.Unmute]:this.mediator.publish(this,_t[_t.Unmute]);break;case $h[$h.CloseButton]:this.mediator.publish(this,_t[_t.Close]);break;case _t[_t.Expand]:this.mediator.publish(this,_t[_t.Expand]);break;case _t[_t.Collapse]:this.mediator.publish(this,_t[_t.Collapse]);break;default:this.mediator.publish(this,t,i)}}updateDuration(t){const i=this.getComponent($h.ProgressBar),e=this.getComponent($h.TotalDurationLabel),s=this.getComponent($h.SkipAdButton);!t&&s&&(s.setSecondsUntilSkip(0),s.tickDown(0)),t||!i?(this.elapsedTime=0,this.duration=t,i&&i.setProgress((0,xi.dQ)(0,t,0,100,0)),e&&e.setTime(t),this.HB(this.jB)):i.setProgress(100)}updateVolume(t){const i=this.getComponent($h.VolumeControls),e=this.getComponent($h.VolumeButton);i&&i.setVolume(t),e&&e.setVolume(t)}get elapsedTime(){return this.jB}set elapsedTime(t){this.jB=t,this.HB(this.jB)}showSkipAdButton(t){const i=this.getComponent($h.SkipAdButton);i&&(i.showComponent(),i.setSecondsUntilSkip(t))}hideSkipAdButton(){const t=this.getComponent($h.SkipAdButton);t&&t.hideComponent()}addPodAdMarker(t,i){(0,e.cn)(this.$uiContainer,ya.InPod);(0,f.Sz)(this.$uiContainer.getElementsByClassName(ya.AdMarkerInPodTextContainer)).forEach((e=>{e.innerHTML=`${t+1}/${i}`}))}removeAddPodAdMarker(){(0,e.IV)(this.$uiContainer,ya.InPod)}addDurationAdMarker(){(0,e.cn)(this.$uiContainer,ya.AdDurationLabel)}removeDurationAdMarker(){(0,e.IV)(this.$uiContainer,ya.AdDurationLabel)}HB(t){const i=this.getComponent($h.ElapsedTimeLabel);i&&i.setTime(t);const e=this.getComponent($h.SkipAdButton);e&&e.tickDown(t);const s=this.getComponent($h.RemainingDurationLabel);if(s&&this.duration){const i=this.duration-t;i>=0&&s.setTime(i)}}hideAdLoadingScreen(){const t=this.getComponent($h.AdLoadingScreen);t&&t.hideComponent(),(0,e.IV)(this.$container,m.s6.PodLoadingScreen)}showAdLoadingScreen(t,i,s,n){const r=this.getComponent($h.AdLoadingScreen);r&&(r.showComponent(),r.setBackgroundImg(t),r.setClickUrl(i),r.setFallbackText(s,n),(0,e.cn)(this.$container,m.s6.PodLoadingScreen))}hideAdMarker(){const t=this.$container.querySelector(".cnx-ad-marker");(0,e.MV)(t)}hideProgressBar(){this.getComponent($h.ProgressBar).hideComponent()}setContinueReadingCard(t){this.VB.style.backgroundImage=`url("${t.imageSrc}")`,this.$B.innerText=t.title}addAdMarkerTitle(t){this.NB.innerHTML=t}cardHasData(){return(0,dt.QM)(this.VB.style.backgroundImage)&&(0,dt.QM)(this.$B.innerHTML)}showContinueReadingCard(t){(0,e.cn)(this.$container,m.s6.AdShowCard),null===this.xn&&(this.xn=this.globalDomUtilsService.requestAnimationFrameHelper((()=>{this.xn=null,(0,e.T7)(t,{height:`${this.UB.clientHeight}px`})})))}hideContinueReadingCard(t){(0,e.IV)(this.$container,m.s6.AdShowCard),(0,e.aQ)(t,"height")}showAdMarkerTitle(){(0,e.cn)(this.$uiContainer,ya.AdTitleLabel)}hideAdMarkerTitle(){(0,e.IV)(this.$uiContainer,ya.AdTitleLabel)}show(){super.show(),this.Vu.on(this.$uiContainer,this.FB,{threshold:.5})}hide(){super.hide();(0,e.og)(this.$uiContainer,m.s6.UiInView,!1),this.Vu.off(this.$uiContainer,this.FB)}expand(){this.getComponent($h.ExpandButton).setState(ao.expand)}collapse(){this.getComponent($h.ExpandButton).setState(ao.collapse)}}var xa=o(3204);class wa{constructor(t){this.showExpandButton=t}get template(){return`\n            <cnx class="cnx-ui cnx-ui-ad">\n                <cnx class="cnx-ui-ad-content ${this.showExpandButton?"cnx-ad-fs":""}">\n                    <cnx class="cnx-ad-marker">\n                        <cnx class="cnx-marker-cnt-first">\n                            <cnx class="cnx-marker-cnt-second">\n                                <cnx class="cnx-ad-marker-svg">${xa}</cnx>\n                                <cnx class="cnx-ad-marker-text">1/1</cnx>\n                            </cnx>\n                            <cnx class="cnx-ad-marker-duration">[[${$h.RemainingDurationLabel}]]</cnx>\n                        </cnx>\n                        <cnx class="cnx-ad-marker-title"><cnx-span class="cnx-ad-title-text"></cnx-span></cnx>\n                    </cnx>\n                    <cnx class="cnx-ad-close-button cnx-ui-btn">[[${$h.CloseButton}]]</cnx>\n                    <cnx class="cnx-ad-buttons">\n                        <cnx class="cnx-ad-play-button cnx-ui-btn">[[${$h.PlayButton}]]</cnx>\n                        <cnx class="cnx-ad-volume-controls">[[${$h.VolumeControls}]]</cnx>\n                        <cnx class="cnx-ad-volume-button cnx-ui-btn">[[${$h.VolumeButton}]]</cnx>\n                    </cnx>\n                    [[${$h.SkipAdButton}]]\n                    ${this.getExpandTemplate()}\n                    <cnx class="cnx-ad-progress-bar">[[${$h.ProgressBar}]]</cnx>\n                </cnx>\n                <cnx class="cnx-ad-card">\n                    <svg class="${ya.CardImage}" viewBox="0 0 16 9" />\n                    <cnx class="cnx-ad-card-text">\n                        <cnx>Continue watching</cnx>\n                        <cnx class="${ya.CardTitle}"></cnx>\n                        <cnx>after the ad</cnx>\n                    </cnx>\n                </cnx>\n                [[${$h.AdLoadingScreen}]]\n            </cnx>\n        `.trim()}getExpandTemplate(){return this.showExpandButton?`<cnx class="cnx-ad-expand-button cnx-ui-btn cnx-hide-on-volume-hover cnx-d-sm-none">[[${$h.ExpandButton}]]</cnx>`:""}}class _a{static getScaledImageUrl(t,i,e,s,n){if(t&&!(0,xi.ON)({width:i,height:e}))return(0,dt.r)(n)&&(i=(0,xi.Tc)(i,n),e=(0,xi.Tc)(e,n)),s.appendParamsToUrl(`${t}${_a.getScaledImageQueryParams(i,e)}`.trim())}static getScaledImageQueryParams(t,i){return(0,xi.ON)({width:t,height:i})?"":`?width=${t}&height=${i}&fit=bounds`}static getSmartCroppedImageUrl(t,i,e,s){return(0,dt.QM)(t)||(t=$s.n.endPoints.base.image),(0,xi.ON)({width:i,height:e})&&(i=140,e=80),s.appendParamsToUrl(`${t}${_a.getSmartCroppedImageQueryParams(i,e)}`)}static getSmartCroppedImageQueryParams(t,i){return(0,xi.ON)({width:t,height:i})?"":`?crop=${t}:${i},smart&width=${t}&height=${i}&format=jpeg&quality=60&fit=crop`}}class Sa extends d._{constructor(t,i,e,s,n,r,h,o,a){super(),this.mediator=t,this.Be=i,this.vf=e,this.yf=s,this.bf=n,this.xf=r,this.gd=h,this.wf=o,this.Vf=a,this.qB=[],this.zB=!1,this.WB=!1,this.es=!1,this.GB=0,this.JB=!0,this.QB=!1,this.YB=!1,this.Pf=[],this.kf=new It.x,this.If=new It.x,this.XB=new It.x,this.ZB=new It.x,this.KB=new It.x}tO(){let t;this.Pf.push(this.Vf.onLinearVpaidEvent.subscribe((i=>{switch(t=!1,i.type){case qt.fI.AdLoaded:this.QB=this.iO(i.payload),this.QB&&(i.payload.payload.adLoadedData.skipOffset=this.Be.skipAdAfter);break;case qt.fI.AdPaused:this.eO.changeState(b.PausedState);break;case qt.fI.AdPlaying:this.eO.changeState(b.PlayingState);break;case qt.fI.AdImpression:this.sO(i.payload);break;case qt.fI.AdSkipped:this.nO(l.ProtoAdClickTypeEnum.AdSkipClick),this.rO(),t=!0;break;case qt.fI.AdStopped:case qt.fI.AdError:if(this.hO())return;this.rO(),t=!0;break;case qt.fI.AdClickThru:this.nO(l.ProtoAdClickTypeEnum.AdClickThrough)}this.JB&&(this.If.next(i),this.oO(i)),this.JB=!0,t&&(this.es=!1,this.eO.changeState(b.PausedState))}))),this.subscribe(_t[_t.Volume],this.eO,(({payload:t})=>{this.setVolume(t),this.nO(l.ProtoAdClickTypeEnum.VolumeClick)})),this.subscribe(_t[_t.Play],this.eO,(()=>{this.nO(l.ProtoAdClickTypeEnum.PlayClick),this.play()})),this.subscribe(_t[_t.Pause],this.eO,(()=>{this.nO(l.ProtoAdClickTypeEnum.PauseClick),this.pause()})),this.subscribe(_t[_t.Expand],this.eO,(()=>{this.nO(l.ProtoAdClickTypeEnum.FullScreenClick),this.KB.next(_t.Expand)})),this.subscribe(_t[_t.Collapse],this.eO,(()=>{this.nO(l.ProtoAdClickTypeEnum.ExitFullScreenClick),this.KB.next(_t.Collapse)})),this.subscribe(_t[_t.Close],this.eO,(()=>{this.ZB.next({type:p.Uh.UserInteraction,payload:{playback:!1}}),this.XB.next({type:_t.Close})})),this.subscribe(_t[_t.Mute],this.eO,(()=>{this.setVolume(0),this.nO(l.ProtoAdClickTypeEnum.MuteClick)})),this.subscribe(_t[_t.Unmute],this.eO,(()=>{this.setVolume(1),this.nO(l.ProtoAdClickTypeEnum.UnmuteClick)})),this.subscribe(_t[_t.SkipAd],this.eO,(()=>this.aO()))}oO(t){switch(t.type){case qt.fI.AdPaused:this.kf.next({type:Nt.PauseLinearEvent});break;case qt.fI.AdPlaying:this.kf.next({type:Nt.ResumeLinearEvent});break;case qt.fI.AdImpression:this.kf.next({type:Nt.ShowLinearEvent,payload:t.payload});break;case qt.fI.AdSkipped:this.kf.next({type:Nt.SkipLinearEvent});break;case qt.fI.AdStopped:this.kf.next({type:Nt.HideLinearEvent});break;case qt.fI.AdError:this.inImpression&&this.kf.next({type:Nt.HideLinearEvent})}}sO(t){var i;this.cO(),this.updateContinueReadingCard(),t.payload.adDuration=null===(i=this.Vf.getCurrentAdMetadata(ci.LINEAR))||void 0===i?void 0:i.duration,t.payload.adDuration||this.zB||this.show(),this.zB=!0,this.es=!0,this.QB&&this.lO(),t.payload.adDuration?this.eO.addDurationAdMarker():this.eO.removeDurationAdMarker(),this.eO.updateDuration(t.payload.adDuration),this.eO.changeState(b.PlayingState),this.uO=t.payload.clickThroughUrl,this.pO(t.payload.selectedAdSlot),this.bf.getTotalNumberOfSlots()>1?this.eO.addPodAdMarker(this.bf.getCurrentSlotIndex(),this.bf.getTotalNumberOfSlots()):this.eO.removeAddPodAdMarker()}fO(t=!1){const i=(e=this.Be,s=this.xf.config,{logoUrl:e.logoUrl,isMobile:s.isMobile,closeButtonMode:e.closeButtonMode,floatingCloseButtonMode:e.floatingSettings.floatingCloseButtonMode,isCloseButton:e.isCloseButton,uiComponentsVisibility:e.uiComponentsVisibility,sharingDestinations:e.sharingDestinations});var e,s;this.eO=new ba(this,this.xf.services.GlobalDomUtilsService,this.xf.services.ViewabilityService,this.xf.services.InteractionService,this.vf,new wa(t).template,i),this.eO.hide()}mO(){this.aC=this.gO(),this.vO(this.aC),this.qB.push(this.aC)}gO(t=""){return this.xf.services.GlobalDomUtilsService.createElementByString(`<div class= "cnx-ad-container cnx-full-height ${t}"></div>`)}vO(t){this.vf.appendChild(t)}lO(){this.eO.showSkipAdButton(this.Be.skipAdAfter)}nO(t){var i;const e=null===(i=this.Vf)||void 0===i?void 0:i.getCurrentAdMetadata(ci.LINEAR);if(!e)return;const{advertiserLineItemId:s,publisherLineItemId:n}=e,r=this.Vf.getCurrentAdBreakType();this.xf.services.TrackingService.trackAdClick({advertiserLineItemId:s,publisherLineItemId:n,adBreakType:r,type:t})}iO(t){var i;if(t.payload.adLoadedData.skipOffset&&t.payload.adLoadedData.skipOffset>=0)return!1;const e=null===(i=this.Vf)||void 0===i?void 0:i.getCurrentAdMetadata(ci.LINEAR);return!!e&&zt(e.duration,this.Be)}pO(t){this.qB.filter((i=>i!==t)).forEach((t=>{(0,e.cn)(t,m.Gj.Hide)}))}rO(){this.qB.forEach((t=>{(0,e.IV)(t,m.Gj.Hide)}))}yO(){this.YB=!1,this.eO.hideAdLoadingScreen()}cO(){this.eO.hideSkipAdButton()}start(t,i=!1){try{this.fO(i),this.mO(),this.setVolume(t),this.tO()}catch(t){(0,s.n)({callStack:t.stack,level:s.D.CRITICAL,exception:t.message,message:"linearAdhandler_start"})}}getVolume(){return this.GB}hide(){(0,e.IV)(this.vf,m.s6.Ad,m.s6.AdOverlayType),this.eO.hide()}show(){var t,i;const s=[m.s6.Ad],n=null===(i=null===(t=this.Vf)||void 0===t?void 0:t.getCurrentAdMetadata(ci.LINEAR))||void 0===i?void 0:i.adType;n===l.ProtoAdType.Overlay&&s.push(m.s6.AdOverlayType),this.bO=n,(0,e.cn)(this.vf,...s),this.eO.show(),this.eO.updateVolume(this.GB),this.yO()}setVolume(t){this.GB=t,this.Vf.setAdVolume(ci.LINEAR,t),this.eO&&this.eO.updateVolume(t),this.ZB.next({type:p.Uh.UserInteraction,payload:{volume:!0}}),this.XB.next({type:_t.Volume,payload:{volume:t}})}resizeAd(t,i){this.inImpression&&(this.updateContinueReadingCard(),this.updateShowAdMarkerTitle())}adStateChange(t,i){this.Vf.onAdStateChange(ci.LINEAR,t,i)}getMainAdContainerWidth(){return this.Vf.getMainAdContainerWidth(ci.LINEAR)}resumeWithoutUserInteraction(){this.inImpression&&this.Vf.resumeAd(ci.LINEAR,!1)}play(){if(!this.inImpression)return;this.Vf.resumeAd(ci.LINEAR,!0),this.ZB.next({type:p.Uh.UserInteraction,payload:{playback:!0}})}xO(t){if((0,Ks.Ph)("cnxShowAdCard",this.xf.config.pageUrl))return!0;let i=!1;if(t.adType===l.ProtoAdType.Video){const e=this.vf.clientWidth*(t.heightRatio/t.widthRatio);i=this.vf.clientHeight-e>=76}return t.adType===l.ProtoAdType.Overlay&&(i=this.vf.clientHeight-t.height>=76),i}updateContinueReadingCard(){const t=this.Vf.getCurrentAdMediaSize(ci.LINEAR);(0,dt.$K)(t)&&(this.xO(t)?this.eO.showContinueReadingCard(this.aC):this.eO.hideContinueReadingCard(this.aC))}updateShowAdMarkerTitle(){this.WB&&this.vf.clientWidth>=320?this.eO.showAdMarkerTitle():this.eO.hideAdMarkerTitle()}setContinueReadingCard(t){this.eO.setContinueReadingCard({imageSrc:_a.getSmartCroppedImageUrl(t.imageSrc,270,150,this.gd),title:t.title})}hideContinueReadingCard(){this.eO.hideContinueReadingCard(this.aC)}setAdMarkerTitle(t){this.eO.addAdMarkerTitle(t),this.WB=!0,this.vf.clientWidth>=320&&this.eO.showAdMarkerTitle()}hideAdMarkerTitle(){this.eO.hideAdMarkerTitle()}pause(){if(!this.inImpression)return;this.Vf.pauseAd(ci.LINEAR,!0),this.ZB.next({type:p.Uh.UserInteraction,payload:{playback:!1}})}stopAd(t){if(!this.inImpression)return;const i=()=>{this.If.next({type:qt.fI.AdStopped,payload:{payload:{adType:l.ProtoAdType.Video}}}),this.kf.next({type:Nt.HideLinearEvent}),this.JB=!1};this.Vf?(i(),this.Vf.stopAd(ci.LINEAR,t)):this.inAdPodLoadingState&&i()}aO(){this.Vf&&this.inImpression?this.Vf.skipAd(ci.LINEAR):this.YB&&(this.If.next({type:qt.fI.AdSkipped}),this.yO())}enterAdPodLoadingState(){this.YB=!0;const{width:t,height:i}=this.Vf.getAdContainerSize(this.bO);this.eO.showAdLoadingScreen(_a.getSmartCroppedImageUrl(this.wO,t,i,this.gd),this.uO,this.bf.getNextSlotIndex(),this.bf.getTotalNumberOfSlots())}setAdLoadingBackgroundUrl(t){this.wO=t}destroy(){var t;this.eO&&this.unsubscribeAll(this.eO),(0,jt.i)(this.Pf),null===(t=this.eO)||void 0===t||t.destroy()}get onVpaidEvent(){return this.If.asObservable()}get onUiComponentEvent(){return this.XB.asObservable()}get onExperienceEvent(){return this.ZB.asObservable()}get onLinearEvent(){return this.kf.asObservable()}get adUserInterface(){return this.eO}get adContainer(){return this.aC}get secondaryAdContainer(){return this.Zf}get firstAdShown(){return this.zB}get inImpression(){return this.es}get adInWin(){return this.Vf.isAdInWin(ci.LINEAR)}get inAdPodLoadingState(){return this.YB}get onFullcreenChange(){return this.KB.asObservable()}}class Pa extends Sa{sO(t){super.sO(t),this.Be.outstreamAdAsContent&&this._O()}hO(){return this.Be.outstreamAdAsContent}_O(){this.eO.hideProgressBar(),this.eO.hideAdMarker(),this.cO()}}class Aa extends class{constructor(t,i,e,s,n,r,h,o){this.Be=t,this.vf=i,this.yf=e,this.bf=s,this.xf=n,this.gd=r,this.wf=h,this.Vf=o,this.Pf=[],this.Rf=new It.x,this.If=new It.x,this.ZB=new It.x,this.qB=[],this.es=!1,this.Sf=qt.zc.Normal,this.SO=!1}tO(){this.Pf.push(this.Vf.onNonlinearVpaidEvent.subscribe((t=>{switch(t.type){case qt.fI.AdImpression:this.sO(t.payload);break;case qt.fI.AdUserClose:this.nO(l.ProtoAdClickTypeEnum.AdUserClose);break;case qt.fI.AdError:this.rO();break;case qt.fI.AdClickThru:this.nO(l.ProtoAdClickTypeEnum.AdClickThrough)}this.If.next(t),this.PO(t)})))}PO(t){switch(t.type){case qt.fI.AdImpression:this.show(),this.Rf.next({type:Ut.ShowNonLinearEvent,payload:t.payload});break;case qt.fI.AdUserClose:this.hide(),this.Rf.next({type:Ut.HideNonLinearEvent,payload:t.payload});break;case qt.fI.AdStopped:this.hide(),this.Rf.next({type:Ut.HideNonLinearEvent});break;case qt.fI.AdError:this.inImpression&&this.Rf.next({type:Ut.HideNonLinearEvent})}}sO(t){this.es=!0,this.pO(t.payload.selectedAdSlot)}mO(){this.aC=this.gO(),this.vO(this.aC),this.qB.push(this.aC)}gO(t=""){return this.xf.services.GlobalDomUtilsService.createElementByString(`<div class= "cnx-non-linear-ad-container cnx-full-height ${t}"></div>`)}vO(t){this.vf.appendChild(t)}nO(t){var i;const e=null===(i=this.Vf)||void 0===i?void 0:i.getCurrentAdMetadata(ci.NONLINEAR);if(!e)return;const{advertiserLineItemId:s,publisherLineItemId:n}=e,r=this.Vf.getCurrentAdBreakType();this.xf.services.TrackingService.trackAdClick({advertiserLineItemId:s,publisherLineItemId:n,adBreakType:r,type:t})}pO(t){this.qB.filter((i=>i!==t)).forEach((t=>{(0,e.cn)(t,m.Gj.Hide)}))}rO(){this.qB.forEach((t=>{(0,e.IV)(t,m.Gj.Hide)}))}AO(){var t;const i=null===(t=this.Vf.getCurrentAdMediaSize(ci.NONLINEAR))||void 0===t?void 0:t.height;if(!(0,dt.r)(i))return!0;const e=this.adContainer.clientHeight,s=(0,xi.Tc)(e,$t.NON_LINEAR_MAX_HEIGHT_PERCENT);return Math.ceil(s)<i}start(){try{this.mO(),this.tO()}catch(t){(0,s.n)({callStack:t.stack,level:s.D.CRITICAL,exception:t.message,message:"nonLinearAdhandler_start"})}}hide(){(0,e.IV)(this.vf,m.s6.AdNonLinear)}show(){(0,e.cn)(this.vf,m.s6.AdNonLinear)}adStateChange(t,i){this.inImpression&&(t===l.ProtoAdSlotsEnum.PreRoll||t===l.ProtoAdSlotsEnum.PostRoll?this.pause():this.resumeWithoutUserInteraction(t),this.Vf.onAdStateChange(ci.NONLINEAR,t,i))}contentPlaybackStateChanged(t){this.SO=t,this.SO||this.pause()}resizeAd(t,i,e){this.inImpression&&this.SO&&(this.AO()?this.pause():this.resumeWithoutUserInteraction(e))}resumeWithoutUserInteraction(t){this.inImpression&&t!==l.ProtoAdSlotsEnum.PreRoll&&t!==l.ProtoAdSlotsEnum.PostRoll&&(this.AO()||(this.show(),this.Vf.resumeAd(ci.NONLINEAR,!1)))}pause(){if(!this.inImpression)return;this.hide();this.Vf.pauseAd(ci.NONLINEAR,!0),this.ZB.next({type:p.Uh.UserInteraction,payload:{playback:!1}})}stopAd(t){if(!this.inImpression)return;const i=()=>{this.If.next({type:qt.fI.AdStopped,payload:{payload:{adType:l.ProtoAdType.Nonlinear}}}),this.Rf.next({type:Ut.HideNonLinearEvent})};this.Vf&&(i(),this.Vf.stopAd(ci.NONLINEAR,t))}destroy(){(0,jt.i)(this.Pf)}get onExperienceEvent(){return this.ZB.asObservable()}get onNonLinearEvent(){return this.Rf.asObservable()}get onVpaidEvent(){return this.If.asObservable()}get adContainer(){return this.aC}get inImpression(){return this.es}get adInWin(){return this.Vf.isAdInWin(ci.NONLINEAR)}}{}class Ia extends Ci{$f(){const t={adSourceSettings:this.Be.lineItemSettings,outstreamPlayer:this.Be.isOutStreamType(),pauseAdWhenFinished:this.Be.pauseAdWhenFinished,loopAdWhenFinished:this.Be.loopAdWhenFinished,skipPlayerSettings:{skipAdAfter:this.Be.skipAdAfter,skipMin:this.Be.skipMin,skippability:this.Be.skippability},adPlaybackMode:this.Be.adPlaybackMode,amazonTamSlotId:this.Be.amazonTamSlotId,prebidJsSupplyChain:this.Be.supplyChainSettings,canPrefetch:this.Be.prefetchOnPreroll};return new Wh(t,this.wf,this.bf)}Hf(){return new Pa(this,this.Be,this.vf,this.yf,this.bf,this.xf,this.gd,this.wf,this.Vf)}Wf(){return new Aa(this.Be,this.vf,this.yf,this.bf,this.xf,this.gd,this.wf,this.Vf)}}class ka{constructor(t,i){this.IO=t,this.kO=i,this.CO=null,this.TO=null,this.MO=0,this.EO=0,this.BO=!1,this.OO=new Map,this.LO=new It.x,this.RO=new It.x,this.DO=new It.x,this.jO=new It.x,this.FO=new It.x,this.VO=new It.x,this.$O=new It.x,this.NO=new It.x,this.UO=new It.x,this.Pf=[],this.HO={inImpression:!1}}start(){this.qO();const{totalAdBreakLength:t}=this.IO.linearAdsControllerData;if(t){const i=De.getGlobalContainer().resolve(ts);this.zO=new Is(i,t),this.OO.set(this.zO,[this.zO.onTimeElapsed.subscribe((()=>{this.RO.next()}))])}}get currentPlayerAdSlot(){return this.CO}get onExperienceControllerStateChange(){return this.UO.asObservable()}get onAdSlotDurationElapsed(){return this.LO.asObservable()}get onAdPodDurationElapsed(){return this.DO.asObservable()}get onAdPodTimeUpdate(){return this.jO.asObservable()}get onAdOpportunity(){return this.FO.asObservable()}get onAdsDisabled(){return this.VO.asObservable()}get onAdsEnabled(){return this.$O.asObservable()}get onTotalAdBreakDurationExpired(){return this.RO.asObservable()}get onMidRollCapped(){return this.NO.asObservable()}contentPlaybackStateChanged(t){var i,e;null===(e=(i=this.kO).contentPlaybackStateChanged)||void 0===e||e.call(i,t)}slideChanged(t){var i,e;null===(e=(i=this.kO).slideChanged)||void 0===e||e.call(i,t)}updateStoryTimeline(t){var i,e;null===(e=(i=this.kO).updateStoryTimeline)||void 0===e||e.call(i,t)}onAdImpression(t,i){this.kO.onAdImpression(t,this.CO,i),this.HO.inImpression=!0,this.WO(),this.GO()}contentChanged(t){this.kO.contentChanged(this.CO,t),this.EO=0}onAdFinished(t,i,e){this.kO.onAdFinished(this.CO,i,e),this.JO=this.YO(this.JO),i||(this.XO=this.YO(this.XO),this.CO===l.ProtoAdSlotsEnum.MidRoll?this.EO++:this.MO++),this.ZO()&&!i&&this.NO.next(),t&&(this.BO=!0),this.HO.inImpression=!1}viewabilityStateChanged(t,i){var e,s;null===(s=(e=this.kO).viewabilityStateChanged)||void 0===s||s.call(e,this.CO,t,i)}onStop(){this.CO=null}onAdStateChange(t,i,e,s){this.kO.onAdStateChange(t,e,s),this.IO.linearAdsControllerData.maxAdSlotDuration=i.maxAdSlotDuration,this.IO.linearAdsControllerData.maxAdPodDuration=i.maxAdPodDuration,s||(t!==l.ProtoAdSlotsEnum.MidRoll&&(this.MO=0),null===t&&this.TO===l.ProtoAdSlotsEnum.MidRoll||(this.BO=!0),this.TO=t,this.CO=t)}canEnableAds(t){const i=this.kO.canEnableAds(this.CO,t);return i.enableAds?this.HO.inImpression?{enableAds:!1,disableReason:Ai.InImpression}:this.CO===l.ProtoAdSlotsEnum.MidRoll&&this.ZO()||this.CO!==l.ProtoAdSlotsEnum.MidRoll&&this.MO>0?{enableAds:!1,disableReason:Ai.Unknown}:{enableAds:!0,disableReason:Ai.Unknown}:i}enableAds(){this.$O.next(),this.zO&&this.zO.start()}disableAds(t,i){const e={disableReason:t,adBreakLength:this.kO.getAdBreakDuration(i)};this.VO.next({payload:e}),this.zO&&!this.HO.inImpression&&this.zO.stop()}getTheoreticalDurationUntilNextOpportuinity(t){return this.CO===l.ProtoAdSlotsEnum.MidRoll&&this.ZO()?-1:this.kO.getDurationUntilNextOpportunity(t)}onAdPlay(){this.XO&&this.XO.start(),this.JO&&this.JO.start(),this.zO&&this.zO.start()}onAdPause(){this.XO&&this.XO.stop(),this.JO&&this.JO.stop(),this.zO&&this.zO.stop()}triggerAdOpportunity(){this.BO&&(this.BO=!1,this.FO.next({payload:{adBreakType:jh[this.CO]}}))}startAds(t){var i,e;null===(e=(i=this.kO).startAds)||void 0===e||e.call(i,this.CO,t)}destroy(){(0,jt.i)(this.Pf),this.zO&&this.zO.disable(),this.JO=this.YO(this.JO),this.XO=this.YO(this.XO),this.kO.destroy()}qO(){this.Pf.push(this.kO.onExperienceControllerStateChange.subscribe((()=>{this.UO.next()}))),this.kO.start()}ZO(){const{numberOfMidRolls:t}=this.IO.linearAdsControllerData;return this.EO>=t&&-1!==t}YO(t){if(t)return t.stop(),(0,jt.i)(this.OO.get(t)),this.OO.delete(t),null}WO(){const{maxAdSlotDuration:t}=this.IO.linearAdsControllerData;if(!t||this.JO)return;const i=De.getGlobalContainer().resolve(ts);this.JO=new Is(i,t),this.JO.start(),this.OO.set(this.JO,[this.JO.onTimeElapsed.subscribe((()=>{this.LO.next()}))])}GO(){const{maxAdPodDuration:t}=this.IO.linearAdsControllerData;if(!t||this.XO)return;const i=De.getGlobalContainer().resolve(ts);this.XO=new Is(i,t),this.XO.start(),this.OO.set(this.XO,[this.XO.onTimeElapsed.subscribe((()=>{this.DO.next()})),this.XO.onTimeUpdate.subscribe((()=>{const t=this.XO.timeRemaining;this.jO.next(t)}))])}}class Ca{constructor(t,i){this.IO=t,this.KO=i,this.VO=new It.x,this.$O=new It.x,this.tL=0,this.UO=new It.x,this.OO=new Map,this.Pf=[],this.HO={inImpression:!1,linearInImpression:!1,inPrePostRoll:!1,contentPaused:!0,linearInOpportunity:!1},this.iL=!1,this.eL=!0}start(){this.qO(),this.initTimer()}get onExperienceControllerStateChange(){return this.UO.asObservable()}initTimer(){const t=De.getGlobalContainer().resolve(ts);this.sL=new Is(t,this.IO.resetNumberOfNonLinearAdsAfter),this.OO.set(this.sL,[this.sL.onTimeElapsed.subscribe((()=>{this.tL=0,this.UO.next()}))])}qO(){this.Pf.push(this.KO.onExperienceControllerStateChange.subscribe((()=>{this.UO.next()}))),this.KO.start()}get onAdsDisabled(){return this.VO.asObservable()}get onAdsEnabled(){return this.$O.asObservable()}onLinearImpressionStateChange(t){this.HO.linearInImpression=t,t?(this.sL.stop(),this.tL=0):(this.sL.reset(),this.sL.start(),this.KO.onLinearAdFinished())}onLinearOpportunityChange(t){this.HO.linearInOpportunity=t}onAdStateChange(t){this.HO.inPrePostRoll=!(t===l.ProtoAdSlotsEnum.MidRoll)}onAdFinished(){this.KO.onAdFinished(),this.HO.inImpression=!1,this.tL++}onAdImpression(){this.HO.inImpression=!0,0===this.tL&&(this.sL.reset(),this.sL.start())}canEnableAds(){return!!this.KO.canEnableAds()&&(!(this.HO.inImpression||this.HO.inPrePostRoll||this.HO.linearInImpression||this.HO.linearInOpportunity&&this.eL||this.HO.contentPaused&&this.iL)&&!(this.tL>=this.IO.numberOfNonlinearAds&&this.IO.numberOfNonlinearAds>0))}viewabilityStateChanged(t){this.iL=t}onLinearNoDemand(){this.eL=!1}enableAds(){this.$O.next()}disableAds(){this.VO.next()}contentPlaybackStateChanged(t){this.HO.contentPaused=!t,this.UO.next()}destroy(){var t;(0,jt.i)(this.Pf),null===(t=this.KO)||void 0===t||t.destroy()}}class Ta{constructor(t,i,e,s,n){var r;this.mediator=t,this.IO=e,this.Pf=[],this.HO={stopped:!1,viewability:!1,forceDisable:!1,zeroDimension:!1,isAppBackgrounded:!1},this.nL=new ka(e,s),this.rL(s),this.viewabilityStateChanged(i),this.onResize(this.IO.playerDimensions.width,this.IO.playerDimensions.height),this.nL.start(),(0,dt.kE)(null===(r=e.nonLinearAdsControllerData)||void 0===r?void 0:r.numberOfNonlinearAds)&&n&&this.hL(e.nonLinearAdsControllerData,n),this.onContentStop()}rL(t){this.Pf.push(this.nL.onAdSlotDurationElapsed.subscribe((()=>{this.mediator.publish(this,Xt)})),this.nL.onAdPodDurationElapsed.subscribe((()=>{this.mediator.publish(this,Zt)})),this.nL.onAdPodTimeUpdate.subscribe((t=>{this.mediator.publish(this,ti,{payload:{remainingTime:t}})})),this.nL.onAdOpportunity.subscribe((t=>{var i;null===(i=this.oL)||void 0===i||i.onLinearOpportunityChange(!0),this.mediator.publish(this,Kt,t)})),this.nL.onAdsDisabled.subscribe((t=>{this.mediator.publish(this,Yt,t)})),this.nL.onAdsEnabled.subscribe((()=>{this.mediator.publish(this,Qt)})),this.nL.onTotalAdBreakDurationExpired.subscribe((()=>{this.mediator.publish(this,Jt)})),this.nL.onMidRollCapped.subscribe((()=>{this.mediator.publish(this,Gt)})),this.nL.onExperienceControllerStateChange.subscribe((()=>{this.aL()})))}hL(t,i){this.oL=new Ca(t,i),this.Pf.push(this.oL.onAdsDisabled.subscribe((()=>{this.mediator.publish(this,ii)})),this.oL.onAdsEnabled.subscribe((()=>{this.mediator.publish(this,ei)})),this.oL.onExperienceControllerStateChange.subscribe((()=>{this.aL()}))),this.oL.start()}slideChanged(t){this.nL.slideChanged(t)}updateStoryTimeline(t){this.nL.updateStoryTimeline(t)}contentPlaybackStateChanged(t){var i;this.nL.contentPlaybackStateChanged(t),null===(i=this.oL)||void 0===i||i.contentPlaybackStateChanged(t)}forceRecheck(){this.aL()}onAdImpression(t,i){var e;switch(i){case ci.LINEAR:this.nL.onAdImpression(t,this.Td);const i=!0;null===(e=this.oL)||void 0===e||e.onLinearImpressionStateChange(i);break;case ci.NONLINEAR:this.oL.onAdImpression()}this.aL()}getTheoreticalDurationUntilNextOpportuinity(){return this.nL.canEnableAds(this.Td).enableAds?0:this.nL.getTheoreticalDurationUntilNextOpportuinity(this.Td)}onAdFinished(t,i,e=!1){var s,n;switch(i){case ci.LINEAR:if(this.nL.onAdFinished(t,e,this.Td),e)this.lL();else{const t=!1;null===(s=this.oL)||void 0===s||s.onLinearImpressionStateChange(t)}break;case ci.NONLINEAR:null===(n=this.oL)||void 0===n||n.onAdFinished()}e||this.aL()}onLinearAdPause(){this.nL.onAdPause()}onLinearAdPlay(){this.nL.onAdPlay()}onContentStop(){this.nL.onStop(),this.HO.stopped=!0,this.aL()}onAdStateChange(t,i,e){var s;null===(s=this.oL)||void 0===s||s.onAdStateChange(t);const n=t===this.nL.currentPlayerAdSlot&&t===l.ProtoAdSlotsEnum.MidRoll;n?this.nL.onAdStateChange(t,i,e,n):(this.nL.onAdStateChange(t,i,e,n),this.uL())}uL(){this.nL.startAds(this.Td),this.HO.stopped=!1,this.aL()}contentChanged(){this.nL.contentChanged(this.Td),this.aL()}viewabilityStateChanged(t,i=!1,e=!1){var s;this.nL.viewabilityStateChanged(t,i),null===(s=this.oL)||void 0===s||s.viewabilityStateChanged(t),this.Td=t,this.IO.viewabilityPolicy===l.ProtoAdViewabilityPolicy.Strict&&(this.HO.viewability=!t),e||this.aL()}setToggleAdsReason({isAppBackgrounded:t}){this.HO.isAppBackgrounded=t,this.aL()}onLinearNoFill(){var t;null===(t=this.oL)||void 0===t||t.onLinearOpportunityChange(!1),this.dL()}onLinearNoDemand(){var t;null===(t=this.oL)||void 0===t||t.onLinearNoDemand(),this.dL()}disableAdvertising(){this.HO.forceDisable=!0,this.aL()}enableAdvertising(){this.HO.forceDisable=!1,this.aL()}get inView(){return this.Td}onResize(t,i){this.HO.zeroDimension=0===t||0===i,this.aL()}destroy(){(0,jt.i)(this.Pf),this.nL.destroy()}aL(){const t=this.pL();t.enableAds?(this.fL(),this.dL()):(this.mL(t.disableReason),this.gL())}fL(){const t=this.nL.canEnableAds(this.Td);t.enableAds?this.lL():this.mL(t.disableReason)}dL(){var t;(null===(t=this.oL)||void 0===t?void 0:t.canEnableAds())?this.vL():this.gL()}gL(){var t;null===(t=this.oL)||void 0===t||t.disableAds()}vL(){var t;null===(t=this.oL)||void 0===t||t.enableAds()}mL(t){this.nL.disableAds(t,this.Td)}pL(){return Object.keys(this.HO).some((t=>this.HO[t]))?{enableAds:!1,disableReason:Ai.Unknown}:{enableAds:!0,disableReason:Ai.Unknown}}lL(){this.nL.triggerAdOpportunity(),this.nL.enableAds()}}var Ma;!function(t){t[t.None=0]="None",t[t.MinTimeBeforeFirstAd=1]="MinTimeBeforeFirstAd",t[t.TimeBetweenAds=2]="TimeBetweenAds"}(Ma||(Ma={}));class Ea{constructor(t){this.IO=t,this.yL=!1,this.bL=!1,this.HO={inTimeout:!1,limitAdsOnMidRoll:!1},this.UO=new It.x}start(){this.HO.limitAdsOnMidRoll=!0;const t=De.getGlobalContainer().resolve(ts);this.xL=new Is(t,this.IO.minTimeBeforeAdBreak),this.xL.onTimeElapsed.subscribe((()=>{this.yL||(this.yL=!0),this.HO.inTimeout=!1,this.bL=!0,this.UO.next()}))}get onExperienceControllerStateChange(){return this.UO.asObservable()}canEnableAds(t,i){if(t===$.ProtoAdSlotsEnum.MidRoll){if(this.HO.limitAdsOnMidRoll)return{enableAds:!1,disableReason:Ai.Unknown};if(this.HO.inTimeout&&i)return{enableAds:!1,disableReason:Ai.TimeoutBetweenAds}}return{enableAds:!0,disableReason:Ai.Unknown}}startAds(t,i){this.wL(t,i)}getAdBreakDuration(t){const i=this._L(t);return i===Ma.MinTimeBeforeFirstAd?this.IO.minTimeBeforeAdBreak:i===Ma.TimeBetweenAds?this.IO.timeBetweenAds:0}getDurationUntilNextOpportunity(){return this.xL.timeRemaining/Ht.s_}onAdImpression(t,i,e){i===$.ProtoAdSlotsEnum.MidRoll&&(this.yL||(this.yL=!0)),this.SL=!e}onAdFinished(t,i,e){this.bL=!1,this.yL&&!this.SL&&e&&!i&&this.wL(t,e)}viewabilityStateChanged(t,i,e){e||this.wL(t,i)}onAdStateChange(t,i,e){const s=this.HO.limitAdsOnMidRoll;this.PL(t,i),s!==this.HO.limitAdsOnMidRoll&&this.UO.next(),e||(t!==$.ProtoAdSlotsEnum.MidRoll&&(this.yL=!1),this.bL=!1)}contentPlaybackStateChanged(t){t?this.xL.start():this.xL.stop()}contentChanged(t,i){this.HO.inTimeout=!1,this.HO.limitAdsOnMidRoll=!0,this.xL.stop(),this.yL=!1,this.bL=!1,this.wL(t,i)}destroy(){this.xL.disable()}wL(t,i){if(t===$.ProtoAdSlotsEnum.MidRoll&&!this.HO.inTimeout&&!this.bL){const t=this._L(i);t===Ma.MinTimeBeforeFirstAd?this.AL():t===Ma.TimeBetweenAds&&this.IL(),this.UO.next()}}IL(){this.HO.inTimeout=!0,this.xL.reset(this.IO.timeBetweenAds)}AL(){this.HO.inTimeout=!0,this.xL.reset(this.IO.minTimeBeforeAdBreak)}_L(t){return!this.yL&&this.IO.minTimeBeforeAdBreak?Ma.MinTimeBeforeFirstAd:this.yL&&this.IO.timeBetweenAds&&t?Ma.TimeBetweenAds:Ma.None}PL(t,i){this.HO.limitAdsOnMidRoll=this.IO.midRollOnlyOnLongContent&&t===$.ProtoAdSlotsEnum.MidRoll&&(!i||i<480)}}class Ba{constructor(t){this.kL=t,this.HO={inTimeoutBetweenNonLinears:!1,inTimeoutBetweenLinearAndNonLinear:!1},this.UO=new It.x,this.Pf=[]}start(){const t=De.getGlobalContainer().resolve(ts);this.CL=new Is(t,this.kL.timeSecondsBetweenNonlinear*Ht.s_),this.TL=new Is(t,this.kL.timeSecondsBetweenLinearAndNonlinear*Ht.s_),this.Pf.push(this.CL.onTimeElapsed.subscribe((()=>{this.HO.inTimeoutBetweenNonLinears=!1,this.UO.next()})),this.TL.onTimeElapsed.subscribe((()=>{this.HO.inTimeoutBetweenLinearAndNonLinear=!1,this.UO.next()})))}get onExperienceControllerStateChange(){return this.UO.asObservable()}canEnableAds(){return!Object.keys(this.HO).some((t=>this.HO[t]))}onAdFinished(){this.kL.timeSecondsBetweenNonlinear&&(this.HO.inTimeoutBetweenNonLinears=!0,this.CL.reset(),this.CL.start())}onLinearAdFinished(){this.kL.timeSecondsBetweenLinearAndNonlinear&&(this.HO.inTimeoutBetweenLinearAndNonLinear=!0,this.TL.reset(),this.TL.start())}destroy(){var t,i;(0,jt.i)(this.Pf),null===(t=this.CL)||void 0===t||t.disable(),null===(i=this.TL)||void 0===i||i.disable()}}class Oa extends Pi{constructor(){super(...arguments),this.af=U,this.cf=m.Rq,this.tf=0,this.EL=9e4}get type(){return this.Dp.playerType}Sp(){return new Ia(this,this.Dp,this.$playerContainer,this.checkFloatingViewability(this.isViewable()),this.yp,this.app,this.gd,this.Np(this.$playerContainer.clientWidth,this.$playerContainer.clientHeight))}generateHTML(){this.$playerWrapper=this.app.services.GlobalDomUtilsService.createElementByString(`<cnx class="${m.sN.PlayerWrapper}"></cnx>`),this.$playerContainer=this.app.services.GlobalDomUtilsService.createElementByString("<cnx class='cnx-video-container'></cnx>"),this.addPlayerSize(),this.$experienceContainer.appendChild(this.$playerWrapper),this.$playerWrapper.appendChild(this.$playerContainer)}addPlayerSize(){this.Dp.playerSize.responsive?(this.$playerWrapper.appendChild(this.Jp()),(0,e.cn)(this.$playerWrapper,m.Ig.Responsive)):(this.setFixedSize(this.$experienceContainer),(0,e.cn)(this.$playerWrapper,m.Ig.Fixed))}setFixedSize(t){(0,e.T7)(t,{width:`${this.Dp.playerSize.fixedWidth}px`,height:`${this.Dp.playerSize.fixedHeight}px`})}Vp(){var t,i;let e;if(this.Dp.nonlinearPlayerSettings){const{timeSecondsBetweenNonlinear:t,timeSecondsBetweenLinearAndNonlinear:i}=this.Dp.nonlinearPlayerSettings;e=new Ba({timeSecondsBetweenLinearAndNonlinear:i,timeSecondsBetweenNonlinear:t})}const s=new Ea({midRollOnlyOnLongContent:this.Dp.midRollOnlyOnLongContent,minTimeBeforeAdBreak:this.Dp.minTimeBeforeFirstAd,timeBetweenAds:this.Dp.timeBetweenAds});return new Ta(this,this.isViewable(),{linearAdsControllerData:{numberOfMidRolls:this.Dp.midRollNumber,maxAdSlotDuration:this.yp.getMaxAdSlotDuration(),maxAdPodDuration:this.yp.getMaxAdPodDuration(),totalAdBreakLength:this.Dp.outstreamSettings?this.Dp.outstreamSettings.totalAdBreakLength:void 0},nonLinearAdsControllerData:{resetNumberOfNonLinearAdsAfter:0!==this.Dp.midRollNumber?this.Dp.timeBetweenAds:this.EL,numberOfNonlinearAds:null===(i=null===(t=this.Dp)||void 0===t?void 0:t.nonlinearPlayerSettings)||void 0===i?void 0:i.numberOfNonlinearAds},viewabilityPolicy:this.Dp.adViewabilityPolicy,playerDimensions:{width:this.$playerContainer.offsetWidth,height:this.$playerContainer.offsetHeight}},s,e)}}class La{constructor(t,i,e,s,n=1200){this.BL=t,this.OL=i,this.LL=e,this.RL=s,this.DL=n,this.jL=null,this.FL=!1,this.VL=()=>{if(this.DI(),!this.FL&&this.OL&&this.OL.linearAdInWin)return this.FL=!0,void this.$L(this.DL);this.BL.startContent()}}destroy(){this.DI()}changeState(t){switch(t){case b.PrerollState:this.FL=!1,this.$L(this.LL);break;case b.PostrollState:this.FL=!1,this.$L(this.RL);break;default:this.jL&&this.DI()}}setPreRollBreak(t){this.LL=t}setPostRollBreak(t){this.RL=t}DI(){clearTimeout(this.jL),this.jL=null}$L(t){this.DI(),this.jL=setTimeout(this.VL,t)}}var Ra=function(t,i,e,s){return new(e||(e=Promise))((function(n,r){function h(t){try{a(s.next(t))}catch(t){r(t)}}function o(t){try{a(s.throw(t))}catch(t){r(t)}}function a(t){var i;t.done?n(t.value):(i=t.value,i instanceof e?i:new e((function(t){t(i)}))).then(h,o)}a((s=s.apply(t,i||[])).next())}))};class Da extends Oa{constructor(){super(...arguments),this.events=Object.assign(Object.assign({},Tt.Km),j),this.NL=new Dt.X(!1),this.UL=!1,this.HL=!0,this.qL=[],this.zL={[b.PlayingState]:()=>{var t;this.pp(l.ProtoAdSlotsEnum.MidRoll);null===(t=this.adHandler)||void 0===t||t.contentPlaybackStateChanged(true),this.bp.contentPlaybackStateChanged(true)},[b.PrerollState]:()=>{this.pp(l.ProtoAdSlotsEnum.PreRoll)},[b.PostrollState]:()=>{this.pp(l.ProtoAdSlotsEnum.PostRoll)},[b.PausedState]:()=>{this.$s===l.ProtoAdSlotsEnum.PreRoll&&this.pp(l.ProtoAdSlotsEnum.MidRoll)},[b.StoppedState]:()=>{this.$s===l.ProtoAdSlotsEnum.PostRoll&&this.Dp.upNextMode!==$.ProtoPlayerUpNextMode.Stop?(this.pp(l.ProtoAdSlotsEnum.MidRoll),this.np()):(this.wp(),this.bp.onContentStop(),this.np())}},this.WL=({payload:t})=>{t===b.PlayingState&&(this.unsubscribe(D.StateChanged,this.BL,this.WL),this.mediator.publish(this,j.VideoStarted,{payload:this.getVideoDetails()}))},this.GL=t=>{const i=this.zL[t];return()=>{var e;if(t!==b.PlayingState){const t=!1;null===(e=this.adHandler)||void 0===e||e.contentPlaybackStateChanged(t),this.bp.contentPlaybackStateChanged(t)}i&&i()}},this.JL=()=>{this.NL.next(!0),this.QL.enterFullScreen().then((()=>{this.BL.enterFullscreen(),this.floatingModule&&this.floatingModule.fullscreenStateChange(!0)})).catch((t=>{(0,s.n)({level:s.D.WARN,message:"BaseVideoExperience_enterFullscreen"})}))},this.Gp=()=>{this.NL.next(!1),this.BL.exitFullscreen(),this.floatingModule&&this.floatingModule.fullscreenStateChange(!1),this.app.services.GlobalDomUtilsService.hasIosFullscreenBehaviour(this.app.config.os.os)&&(this.UL=this.BL.isIosFullscreen=!1,this.pp(this.$s)),this.mediator.publish(this,Tt.Zr.FullscreenChanged,{payload:!1}),super.Gp()},this.Wp=()=>{this.app.services.GlobalDomUtilsService.hasIosFullscreenBehaviour(this.app.config.os.os)&&(this.UL=this.BL.isIosFullscreen=!0,this.bp.onContentStop()),this.mediator.publish(this,Tt.Zr.FullscreenChanged,{payload:!0}),super.Wp()}}start(){const t=Object.create(null,{start:{get:()=>super.start}});return Ra(this,void 0,void 0,(function*(){try{t.start.call(this),this.YL(),this.app.config.isOVPDomain?this.Ai.push(w._.onAdBlockerDetected().subscribe((t=>{t||this.XL()}))):this.XL(),this.ZL(this.BL,this.adHandler),this.tR(),yield this.BL.start(),this.$p(),this.rf(this.BL),this.iR(),this.eR()}catch(t){(0,s.n)({message:"BaseVideoExperience_Start",exception:t.message,callStack:t.stack,level:s.D.CRITICAL})}}))}sR(){const t=this.QL.onFullScreenEnter.subscribe((()=>this.Wp())),i=this.QL.onFullScreenExit.subscribe((()=>this.Gp()));this.qL.push(i,t)}changeVideo(t,i=!1){if(this.adHandler){if(this.adHandler.linearInImpression||this.adHandler.nonLinearInImpression)this.adHandler.stopAd("changeVideo");else{const t=!0;this.Lp(t)}this.adHandler.userInteraction(i)}this.BL.setVideo(t)}play(t=!0){this.adHandler&&this.adHandler.linearInImpression?this.adHandler.play():this.BL.play(t)}pause(t=!0){var i,e;null===(i=this.adHandler)||void 0===i||i.pause(),(null===(e=this.adHandler)||void 0===e?void 0:e.linearInImpression)||this.BL.pause(t)}setNewVolume(t){super.setNewVolume(t),this.BL.volume=t}getVolume(){return this.BL.volume}get currentTime(){return this.BL.currentTime}set currentTime(t){this.BL.currentTime=t}get duration(){return this.BL.duration}getVideoDetails(){let t;return this.BL.getCurrentVideoData((i=>{t=this.nR(i)})),t}getUpNextVideoDetails(){let t;return this.BL.getUpNextVideoData((i=>{t=this.nR(i)})),t}toggleFullscreen(t){(0,dt.$K)(t)||(t=!this.QL.isFullscreen),this.QL.isFullscreen!==t&&(t?this.JL():this.QL.exitFullScreen())}toggleCaptions(){var t;this.BL.toggleCaptions(),this.BL.updateCaptionsMenuUI(null===(t=this.getSubtitles()[0])||void 0===t?void 0:t.file)}showCaptions(t){this.BL.showCaptions(t),this.BL.updateCaptionsMenuUI(t)}getSubtitles(){return this.BL.getSubtitles()}hideCaptions(){this.BL.hideCaptions(),this.BL.updateCaptionsMenuUI()}toggleExpandButton(t){this.BL.toggleExpandButton(t)}getPlaylistId(){return this.Dp.playlistId}getQuality(){return this.BL.getQuality()}setQuality(t){this.BL.setQuality(t)}setAutoQuality(){this.BL.setAutoQuality()}getAvailableQualities(){return this.BL.getAvailableQualities()}destroy(){super.destroy(),this.rR.destroy(),this.BL&&(this.BL.destroy(),this.unsubscribeAll(this.BL)),(0,jt.i)(this.qL),(0,jt.i)(this.Rd)}setPreRollBreak(t){var i;this.Dp.setPreRollBreak(t),null===(i=this.rR)||void 0===i||i.setPreRollBreak(this.Dp.preRollBreak),this.BL.hasPreroll=(0,dt.r)(this.Dp.preRollBreak)}setPostRollBreak(t){var i;this.Dp.setPostRollBreak(t),null===(i=this.rR)||void 0===i||i.setPostRollBreak(this.Dp.postRollBreak),this.BL.hasPostroll=(0,dt.r)(this.Dp.postRollBreak)}nR(t){const{imageMaxHeight:i,ratioHeight:e,ratioWidth:s}=Et,n=i/e*s;return{id:t.id,title:t.title,description:t.description,duration:(0,dt.kE)(t.duration)?t.duration:this.BL.duration,keywords:t.keywords,url:t.clickUrl?this.app.services.MacrosService.setupMacros(t.clickUrl):"",customFields:t.customFields,thumbnail:t.getThumbnailUrl(n,i)}}Xd(){if(this.Sd)return;this.Id||this.Kd();const t=Mt[l.ProtoAdSlotsEnum[this.$s]];this.Sd=!0,this.Pd=!1;const i={adBreakPosition:t};this.$s===l.ProtoAdSlotsEnum.PostRoll&&(this.Cd=!0),this.app.services.EventsStorageService.emitAdBreakStart(i)}Zd(){this.Sd&&(this.Sd=!1,this.app.services.EventsStorageService.emitAdBreakComplete(),this.Cd&&(this.Cd=!1,this.np()))}ep(){this.Pd||(this.Sd&&this.Zd(),this.Id||this.Kd(),this.Pd=!0,this.app.services.EventsStorageService.emitPlay())}sp(){this.Pd&&(this.Pd=!1,this.app.services.EventsStorageService.emitPause())}Kd(){this.Id||(this.Id=!0,this.BL.getCurrentVideoData((({title:t,id:i,sourceItemId:e,keywords:s,duration:n,customFields:r})=>{const h=this.BL.streamFormat,o=e||i;this.app.services.EventsStorageService.emitSessionStart({name:t,keywords:s,mediaId:o,length:n,streamFormat:h,customFieldList:r,feed:"Video"})})))}np(){this.Id&&(this.Id=!1,this.Pd=!1,this.Sd&&this.Zd(),this.app.services.EventsStorageService.emitSessionEnd())}rp(){this.Id&&(this.app.services.EventsStorageService.emitContentComplete(),this.Dp.postRollBreak||this.np())}Op(){const t=this.$s===l.ProtoAdSlotsEnum.PostRoll?this.getUpNextVideoDetails():this.getVideoDetails();t?(this.adHandler.setContinueReadingCard({imageSrc:t.thumbnail,title:t.title}),this.adHandler.setAdMarkerTitle(t.title)):(this.adHandler.hideContinueReadingCard(),this.adHandler.hideAdMarkerTitle()),super.Op(),this.BL.hide()}Wu(t,i=!1){super.Wu(t,i),this.hR&&(this.hR.setSoundVolume(this.BL.volume),this.hR.setViewability(t),this.hR.setIsAppBackgrounded(i))}ks(){super.ks(),this.BL&&this.BL.resize(this.breakPointsHandler.currentBreakpointClass)}handleClose(){this.floatingModule&&this.floatingModule.isInFloating?(this.floatingModule.destroy(),this.pause(!1)):this.QL.isFullscreen?this.QL.exitFullScreen():this.triggerDestroy()}generateHTML(){super.generateHTML(),this.setPlayerMinDimension(),this.oR=this.app.services.GlobalDomUtilsService.createElementByString(`<img class="${m.sN.ImagePlaceholder}">`),this.$playerWrapper.appendChild(this.oR)}setPlayerMinDimension(){this.Dd=142}aR(t){this.adHandler&&this.adHandler.setMediaRestrictions(t)}tR(){this.subscribe(_t[_t.Volume],this.BL,(({payload:{volume:t}})=>{this.adHandler?this.adHandler.setLinearVolume(t):this.ys(t)})),this.subscribe(A,this.BL,(()=>{this.mediator.publish(this,j.NewVideo),this.subscribe(D.StateChanged,this.BL,this.WL),this.BL.getCurrentVideoData((t=>{var i;const e={mediaId:t.id,mediaKeywords:t.keywords,mediaLanguage:t.languageId,mediaInsights:t.insights};this.aR(e),this.app.services.TrackingService.setNewMedia({mediaId:t.id,clickUrl:t.clickUrl,insights:(null===(i=t.insights)||void 0===i?void 0:i.insights)||[],sentimentAnalysis:t.sentimentAnalysis});const s=t.getThumbnailUrl(this.$experienceContainer.clientWidth,this.$experienceContainer.clientHeight);this.adHandler&&this.adHandler.setAdLoadingBackgroundUrl(s),this.cR(s,t.altText),this.mediator.publish(this,D.MediaMetaUpdate,{payload:{title:t.title,description:t.description}})}))})),this.subscribe(D.FirstFramePlayed,this.BL,(()=>{this.app.services.TrackingService.setMediaStart(),this.uf(),this.Kd()})),this.subscribe(D.StateChanged,this.BL,(({payload:t})=>{switch(this.rR.changeState(t),this.lR(t),t){case b.PlayingState:this.mediator.publish(this,Tt.q0.Play,{payload:this.getVideoDetails()}),this.ep();break;case b.PausedState:this.mediator.publish(this,Tt.q0.Pause,{payload:this.getVideoDetails()}),this.app.services.TrackingService.setSessionPlayback(!1),this.sp();break;case b.StoppedState:this.app.services.TrackingService.setSessionPlayback(!1);break;case b.PrerollState:case b.PostrollState:this.app.services.TrackingService.setSessionPlayback(!0),this.Xd();break;case b.HiddenState:this.app.services.TrackingService.setSessionPlayback(!0),this.sp(),this.Xd();break;default:this.app.services.TrackingService.setSessionPlayback(!0)}})),this.floatingModule&&this.subscribe(p.Uh.UserInteraction,this.BL,this.Ud),this.adHandler&&this.subscribe(p.Uh.UserInteraction,this.BL,(({payload:{playback:t}})=>{!1===t&&(this.adHandler.pause(),this.bp.onContentStop()),this.adHandler.userInteraction(t)})),this.subscribe(p.Uh.UserInteraction,this.BL,(({payload:{clickedNext:t,clickedPrev:i}})=>{(t||i)&&this.np()})),this.subscribe(D.ContentQuartiles,this.BL,(({payload:t})=>{let i;switch(this.app.services.TrackingService.trackMediaQuartile(t),t){case l.ProtoQuartilesEnum.First:i=j.VideoCompleted25;break;case l.ProtoQuartilesEnum.Second:i=j.VideoCompleted50;break;case l.ProtoQuartilesEnum.Third:i=j.VideoCompleted75;break;case l.ProtoQuartilesEnum.Fourth:i=j.VideoCompleted100}i&&this.mediator.publish(this,i,{payload:this.getVideoDetails()})})),this.subscribe(D.ContentQuartiles,this.BL,(({payload:t})=>{t===l.ProtoQuartilesEnum.Fourth&&this.rp()})),this.subscribe(_t[_t.OverlayClick],this.BL,(()=>{this.mediator.publish(this,j.PlayerClicked,{payload:this.getVideoDetails()}),this.app.services.TrackingService.trackMediaClick(l.ProtoMediaClickTypeEnum.PauseClick)})),this.subscribe(E,this.BL,(t=>this.mediator.publish(this,Tt.q0.QualityChanged,t))),this.subscribe(P,this.BL,(t=>{this.mediator.publish(this,Tt.q0.PlayError,t),this.app.services.EventsStorageService.emitPlayError()})),this.subscribe(_t[_t.CaptionOn],this.BL,(()=>this.mediator.publish(this,j.SubtitlesVisibilityChanged,{payload:!0}))),this.subscribe(_t[_t.CaptionOff],this.BL,(()=>this.mediator.publish(this,j.SubtitlesVisibilityChanged,{payload:!1}))),this.adHandler&&this.qL.push(this.adHandler.onLinearUiComponentEvent.subscribe((t=>{if(t.type===_t.Volume){const{volume:i}=t.payload;this.ys(i),this.BL.volume=i}})),this.adHandler.onLinearNoFill.subscribe((()=>{var t;null===(t=this.bp)||void 0===t||t.onLinearNoFill()}))),this.subscribe(A,this.BL,(()=>{this.HL?(this.HL=!1,this.Dp.adPlaybackMode===l.ProtoAdPlaybackMode.Autoplay&&this.Dp.playbackMode!==l.ProtoPlayerPlaybackModeEnum.ClickToPlay&&0===this.Dp.preRollBreak&&this.pp(l.ProtoAdSlotsEnum.MidRoll)):this.xp()})),this.Dp.isCloseButton&&this.subscribe(_t[_t.Close],this.BL,(()=>this.handleClose())),this.subscribe(p.Uh.GeneralUserInteraction,this.BL,(({payload:{type:t}})=>{this.app.services.TrackingService.trackMediaClick(t)}))}XL(){this.adHandler&&(this.adHandler.start(this.BL.width,this.BL.height,this.Dp.soundMode===$.ProtoPlayerSoundMode.On?1:0,!1,!0),this.bp.forceRecheck())}lR(t){this.GL(t)()}mp(t){!this.UL&&this.adHandler&&this.adHandler.adStateChange(t,this.yp.getMaxAdSlotDuration())}gp(t){const{duration:i}=this.BL;this.bp.onAdStateChange(t,{maxAdPodDuration:this.yp.getMaxAdPodDuration(),maxAdSlotDuration:this.yp.getMaxAdSlotDuration()},i)}iR(){this.QL=new kt(this.app.services.GlobalDomUtilsService,this.$playerContainer,this.app.config.os.os),this.uR()}uR(){this.sR(),this.subscribe(_t[_t.Expand],this.BL,this.JL),this.subscribe(_t[_t.Collapse],this.BL,(()=>this.QL.exitFullScreen()))}cR(t,i){this.oR.style.display="none",this.oR.onload=()=>{this.oR.style.display="block"},(0,dt.QM)(t)&&this.oR.setAttribute("src",t),this.oR.setAttribute("alt",i)}ZL(t,i){const{preRollBreak:e,postRollBreak:s}=this.Dp;this.rR=new La(t,i,e,s)}eR(){this.hR=new Ot(this,this.Dp.playbackMode),this.subscribe(Bt[Bt.Play],this.hR,(t=>{var i,e;this.BL.play(),(null===(i=this.adHandler)||void 0===i?void 0:i.nonLinearInImpression)&&(null===(e=this.adHandler)||void 0===e||e.play()),t.payload&&(0,dt.kE)(t.payload.volume)&&super.setNewVolume(t.payload.volume)})),this.subscribe(Bt[Bt.Pause],this.hR,(t=>{var i,e;this.BL.pause(),(null===(i=this.adHandler)||void 0===i?void 0:i.nonLinearInImpression)&&(null===(e=this.adHandler)||void 0===e||e.pause()),t.payload&&(0,dt.kE)(t.payload.volume)&&super.setNewVolume(t.payload.volume)})),this.subscribe(p.Uh.UserInteraction,this.BL,(({payload:{playback:t}})=>{(0,dt.$K)(t)&&this.hR.setUserPlayback(t)}));const t=this.BL.canPlay().subscribe((t=>{this.hR.setCanPlay(t)})),i=this.NL.subscribe((t=>{this.hR.setIsFullscreen(t)}));this.qL.push(t,i)}}function ja(t){return t<=0?function(){return Nr}:(0,wr.e)((function(i,e){var s=0;i.subscribe((0,_r.x)(e,(function(i){++s<=t&&(e.next(i),t<=s&&e.complete())})))}))}var Fa,Va;!function(t){t[t.StateChanged=0]="StateChanged",t[t.ContentEnd=1]="ContentEnd",t[t.VideoQueued=2]="VideoQueued"}(Fa||(Fa={}));class $a{constructor(t,i,e,s,n,r=!1,h){this.mediator=t,this.dR=i,this.pR=e,this.fR=s,this.mR=n,this.gR=r,this.vR=h,this.yR=!1,this.bR=!1,this.xR=!1,this.wR=!1,this._R=500,this.SR=new It.x,this.PR=0,this.AR(),this.initListeners()}AR(){this.IR=b.StoppedState,this.kR=b.StoppedState,this.vR&&(this.yR=!0)}TR(){this.MR=this.pR.onVideoEvents.subscribe((t=>{switch(t){case v.Playing:this.ER();break;case v.Error:this.BR();break;case v.Pause:this.OR()}}))}ER(){switch(this.IR){case b.PlayingState:return;case b.PausedState:case b.StoppedState:case b.BufferingState:this.LR(b.PlayingState);break;case b.HiddenState:case b.PrerollState:this.RR()}}BR(){switch(this.IR){case b.BufferingState:case b.PlayingState:this.LR(b.PausedState)}}OR(){switch(this.IR){case b.BufferingState:case b.PlayingState:this.LR(b.PausedState)}}initListeners(){var t,i;this.SR.pipe((t=400,void 0===i&&(i=ze),(0,wr.e)((function(e,s){var n=null,r=null,h=null,o=function(){if(n){n.unsubscribe(),n=null;var t=r;r=null,s.next(t)}};function a(){var e=h+t,r=i.now();if(r<e)return n=this.schedule(void 0,e-r),void s.add(n);o()}e.subscribe((0,_r.x)(s,(function(e){r=e,h=i.now(),n||(n=i.schedule(a,t),s.add(n))}),(function(){o(),s.complete()}),void 0,(function(){r=n=null})))}))),ja(1)).subscribe((t=>{this.DR(t),this.PR=0})),this.TR()}LR(t){this.IR!==t&&(this.kR=this.IR,this.IR=t,this.mediator.publish(this,Fa[Fa.StateChanged],{payload:this.IR}))}jR(t){return this.IR===t}FR(){this.LR(b.PrerollState),this.yR=!0}VR(){this.$R===b.PlayingState?this.NR():this.RR()}HR(){this.LR(b.PostrollState)}qR(){this.$R===b.PausedState?(this.xR=!0,this.stop()):(this.xR=!1,this.mediator.publish(this,Fa[Fa.ContentEnd]))}RR(){this.pR.pause(),this.LR(b.PausedState)}NR(){this.LR(b.BufferingState),this.dR.getCurrentVideoData((()=>{this.jR(b.HiddenState)||this.$R===b.PausedState||this.pR.play()}))}zR(){this.IR!==b.PostrollState&&(this.yR=!1)}resume(){this.kR&&this.LR(this.kR)}play(){this.$R=b.PlayingState,this.jR(b.PlayingState)||this.jR(b.PrerollState)||this.jR(b.PostrollState)||this.jR(b.HiddenState)||(!this.fR||this.yR||this.bR?this.jR(b.StoppedState)&&this.xR?this.qR():this.NR():this.FR())}isInPlayingState(){return this.jR(b.PlayingState)}setVideoQueue(t,i){0===this.SR.observers.length&&this.initListeners(),i?this.PR--:this.PR++;const e=this.dR.getAdjustedVideoIndex(t,this.PR);this.SR.next(e),this.mediator.publish(this,Fa[Fa.VideoQueued],{payload:e})}DR(t){if(this.pR.pause(),this.zR(),this.LR(b.BufferingState),this.GR&&this.GR.isPending)try{this.GR.reject(),this.GR=null}catch(t){this.GR=null}const i=this.dR.setVideo(t);this.GR=new Pt.C,this.GR.resolve(i),this.GR.promise.then((t=>{this.GR=null,this.pR.setSource(t).then((()=>this.play()))}))}set hasPreroll(t){this.fR=t,this.yR=!0}set hasPostroll(t){this.mR=t}pause(t=!1){this.$R=b.PausedState,this.jR(b.PrerollState)||this.jR(b.PostrollState)||this.jR(b.HiddenState)||this.RR()}pauseToggle(){if(this.jR(b.PausedState)||this.jR(b.PlayingState))return this.jR(b.PausedState)&&this.wR?(this.wR=!1,void this.play()):this.jR(b.PlayingState)?(this.wR=!0,void this.pause()):void 0}stop(){this.pR.pause(),this.LR(b.StoppedState)}hide(){this.pR.hide(),this.pR.pause(),this.LR(b.HiddenState)}show(t=!0){this.jR(b.HiddenState)&&(this.pR.show(),this.kR!==b.PostrollState?t&&(this.$R===b.PlayingState?this.NR():this.RR()):this.qR())}handleVideoEnd(){this.mR&&!this.bR?this.HR():this.qR()}onEnterBuffering(){this.jR(b.PlayingState)&&this.LR(b.BufferingState)}onExitBuffering(){this.jR(b.BufferingState)&&(this.$R===b.PlayingState?this.NR():this.RR())}getCurrentState(){return this.IR}replay(){this.pR.currentTime=0,!this.fR||this.bR?this.NR():this.FR()}exitRollBreak(){this.IR!==b.PostrollState?this.VR():this.qR()}onFullScreenChange(t){this.gR&&(this.bR=t,t||setTimeout((()=>{this.$R===b.PlayingState?(this.pause(),this.play()):this.pause()}),this._R))}destroy(){this.MR.unsubscribe()}}!function(t){t.Autoplay="autoplay",t.Autochain="autochain",t.UserInitiated="user initiated"}(Va||(Va={}));class Na{constructor(t){this.streamFormat=Va.Autoplay,this.isMuted=!0,t===l.ProtoPlayerPlaybackModeEnum.ClickToPlay&&(this.streamFormat=Va.UserInitiated)}get streamFormatValue(){return`${this.streamFormat}${this.isMuted?" muted":""}`}}class Ua{constructor(t){this.JR=[],this.JR=t,this.QR(0)}YR(){this.XR(this.ZR).getMetadata()}QR(t){this.ZR=t,this.YR()}XR(t){return this.JR[t]}setAvailableQualitiesForSourceMeta(t,i){t.setAvailableQualities(i)}get nextVideoIndex(){return this.ZR===this.JR.length-1?0:this.ZR+1}get prevVideoIndex(){return 0===this.ZR?this.JR.length-1:this.ZR-1}get currentVideoIndex(){return this.ZR}getCurrentVideoData(t,i){this.XR(this.ZR).getMetadata(t,i)}getVideoData(t,i){this.XR(t).getMetadata(i)}getAdjustedVideoIndex(t,i){return 1===i||-1===i?t:i>0?t+i<this.length?t+i:this.length-1:t+i<0?0:t+i}setVideo(t){return new Promise((i=>{this.XR(t).getMetadata((e=>{this.QR(t),i(e)}))}))}get length(){return this.JR.length}destroy(){this.JR=[]}}var Ha=function(t,i,e,s){return new(e||(e=Promise))((function(n,r){function h(t){try{a(s.next(t))}catch(t){r(t)}}function o(t){try{a(s.throw(t))}catch(t){r(t)}}function a(t){var i;t.done?n(t.value):(i=t.value,i instanceof e?i:new e((function(t){t(i)}))).then(h,o)}a((s=s.apply(t,i||[])).next())}))};const qa={[l.ProtoVideoQuality.High1080p]:{quality:y.Strict,height:1080},[l.ProtoVideoQuality.High720p]:{quality:y.Strict,height:720},[l.ProtoVideoQuality.Medium360p]:{quality:y.Strict,height:360}};class za extends d._{constructor(t,i,e,s,n){super(),this.mediator=t,this.Dp=i,this.xf=e,this.vf=s,this.LB=n,this.KR=!1,this.tD=!0,this.iD=new Dt.X(!1),this.eD(),this.sD(),this.nD(),this.rD=new Na(this.Dp.playbackMode)}set hasPostroll(t){this.hD.hasPostroll=t}set hasPreroll(t){this.hD.hasPreroll=t}start(){return Ha(this,void 0,void 0,(function*(){this.tO()}))}get streamFormat(){return this.rD.streamFormatValue}play(t=!1){t&&(this.mediator.publish(this,p.Uh.UserInteraction,{payload:{playback:!0}}),this.rD.streamFormat=Va.UserInitiated),this.hD.play()}pause(t=!1){t&&this.mediator.publish(this,p.Uh.UserInteraction,{payload:{playback:!1}}),this.hD.pause(t)}setVideo(t,i=!1){this.hD.setVideoQueue(t,i)}show(t=!0){this.hD.show(t)}hide(){this.hD.hide()}get isHidden(){return this.hD.getCurrentState()===b.HiddenState}enterFullscreen(){this.gl=!0,this.oD.expand(),this.hD.onFullScreenChange(!0)}exitFullscreen(){this.gl=!1,this.oD.collapse(),this.hD.onFullScreenChange(!1)}resize(t){this.oD.onResize(t)}get width(){return this.pR.width}get height(){return this.pR.height}get volume(){return this.pR.volume}set volume(t){this.pR.volume=t,this.oD.updateVolume(t),this.rD.isMuted=t<=0}getCurrentVideoData(t){return this.dR.getCurrentVideoData(t)}getVideoData(t,i){return this.dR.getVideoData(t,i)}getUpNextVideoData(t){return this.dR.getVideoData(this.dR.nextVideoIndex,t)}get isIosFullscreen(){return this.pR.isIosFullscreen}set isIosFullscreen(t){this.pR.isIosFullscreen=t}get currentTime(){return this.pR.currentTime}set currentTime(t){this.pR.currentTime=t}get duration(){return this.pR.duration}toggleCaptions(){this.pR.hasSubtitles()&&(this.pR.toggleCaptions(),this.oD.toggleCaptionState(!0),this.mediator.publish(this,_t[_t.CaptionOn]))}showCaptions(t){this.pR.hasSubtitles()&&(this.pR.showCaptions(t),this.oD.toggleCaptionState(!0),this.mediator.publish(this,_t[_t.CaptionOn]))}updateCaptionsMenuUI(t){this.oD.updateDefaultCaptions(t)}getSubtitles(){return this.pR.getSubtitles()}hideCaptions(){this.pR.hideCaptions(),this.oD.toggleCaptionState(!1),this.mediator.publish(this,_t[_t.CaptionOff])}toggleExpandButton(t){this.oD.toggleExpandButtonDisplay(t)}getQuality(){let t;return this.dR.getCurrentVideoData((i=>{t=i.getClosestSourceQuality(this.pR.currentQualitySettings.height).videoHeight})),t}setQuality(t){this.dR.getCurrentVideoData((i=>{const e=i.getClosestSourceQuality(t);this.pR.setQuality({height:e.videoHeight,quality:y.Strict})}))}setAutoQuality(){this.pR.setQuality({height:this.pR.height,quality:y.Auto})}getAvailableQualities(){let t=[];return this.dR.getCurrentVideoData((i=>{t=i.getAvailableQualities().map((t=>t.videoHeight))})),t}stop(){this.hD&&this.hD.stop()}resume(){this.hD&&this.hD.resume()}startContent(){this.hD.exitRollBreak()}destroy(){this.oD.destroy(),this.dR.destroy(),this.pR.destroy(),this.hD.destroy()}canPlay(){return this.iD.asObservable()}aD(){return new Promise(((t,i)=>{try{this.dR.getCurrentVideoData((i=>Ha(this,void 0,void 0,(function*(){yield this.pR.setSource(i),this.oD.updateCurrentVideo(i),this.cD(i,this.pR.currentQualitySettings),t()}))),(()=>i(new Error("getCurrentVideoData fail callback"))))}catch(t){i(t)}}))}lD(){this.subscribe(Fa[Fa.StateChanged],this.hD,(({payload:t})=>{this.oD.changeState(t),this.mediator.publish(this,D.StateChanged,{payload:t})})),this.subscribe(Fa[Fa.ContentEnd],this.hD,(()=>{this.dD()})),this.subscribe(Fa[Fa.VideoQueued],this.hD,(({payload:t})=>{this.mediator.publish(this,D.VideoQueued,{payload:{videoIndex:t}})}))}pD(){this.subscribe(_t[_t.Play],this.oD,(()=>{if(this.tD&&this.Dp.playbackMode===l.ProtoPlayerPlaybackModeEnum.ClickToPlay){const t=this.Dp.soundMode===l.ProtoPlayerSoundMode.On?1:0;this.volume=t,this.mediator.publish(this,_t[_t.Volume],{payload:{volume:t}})}this.tD=!1,this.mediator.publish(this,p.Uh.UserInteraction,{payload:{playback:!0}}),this.play()})),this.subscribe(_t[_t.Volume],this.oD,(({payload:t})=>{this.pR.volume=t,this.rD.isMuted=t<=0,this.mediator.publish(this,p.Uh.UserInteraction,{payload:{volume:!0}}),this.mediator.publish(this,_t[_t.Volume],{payload:{volume:t}})})),this.subscribe(_t[_t.Pause],this.oD,(()=>{this.mediator.publish(this,p.Uh.UserInteraction,{payload:{playback:!1}});this.pause(!0)})),this.subscribe(_t[_t.Seek],this.oD,(({payload:t})=>{this.fD=t})),this.subscribe(_t[_t.SeekingStart],this.oD,(()=>{this.hD.pauseToggle()})),this.subscribe(_t[_t.SeekingStopped],this.oD,(()=>{this.pR.forceCurrentTime(this.fD),this.hD.pauseToggle()})),this.subscribe(_t[_t.OverlayClick],this.oD,(()=>{this.dR.getCurrentVideoData((t=>{(0,dt.QM)(t.clickUrl)?(this.Dp.disableClickUrl||(this.xf.services.MacrosService.setVideoTime(this.pR.currentTime),this.xf.services.GlobalDomUtilsService.open(this.xf.services.MacrosService.setupMacros(t.clickUrl),At.bS.Blank)),this.mediator.publish(this,p.Uh.GeneralUserInteraction,{payload:{type:l.ProtoMediaClickTypeEnum.UrlClick}})):this.hD.pauseToggle(),this.mediator.publish(this,_t[_t.OverlayClick])}))})),this.subscribe(_t[_t.Expand],this.oD,(()=>{this.mediator.publish(this,_t[_t.Expand])})),this.subscribe(_t[_t.Collapse],this.oD,(()=>{this.mediator.publish(this,_t[_t.Collapse])})),this.subscribe(_t[_t.Quality],this.oD,(({payload:t})=>{this.pR.setQuality(t)})),this.subscribe(_t[_t.Close],this.oD,(()=>{this.mediator.publish(this,p.Uh.UserInteraction,{payload:{playback:!1,isFullscreenClose:this.gl}}),this.mediator.publish(this,_t[_t.Close])})),this.subscribe(_t[_t.CaptionOn],this.oD,(({payload:t})=>{this.showCaptions(t)})),this.subscribe(_t[_t.CaptionOff],this.oD,(()=>{this.hideCaptions()})),this.subscribe(_t[_t.CaptionOn],this.pR,(()=>{this.oD.toggleCaptionState(!0)})),this.subscribe(_t[_t.CaptionOff],this.pR,(()=>{this.oD.toggleCaptionState(!1)})),this.subscribe(_t[_t.CaptionUpdate],this.pR,(({payload:t})=>{this.oD.updateCaptions(t)})),this.subscribe(p.Uh.UserInteraction,this.oD,(()=>{this.mediator.publish(this,_t[p.Uh.UserInteraction],{payload:{videoIndex:this.dR.currentVideoIndex}})})),this.relay(p.Uh.GeneralUserInteraction,this.oD,this,this.mediator)}zR(t=!0){t&&(this.oD.closeAllMenus(),this.oD.resetCaptionsMenu(),this.dR.getCurrentVideoData((t=>{var i;if(this.mD(t),this.oD.updateCurrentVideo(t),this.cD(t,this.pR.currentQualitySettings),this.Dp.closedCaptionDefault&&t.subtitles){const e=null===(i=t.getDefaultSubtitle())||void 0===i?void 0:i.file;setTimeout((()=>{this.showCaptions(e),this.oD.updateDefaultCaptions(e)}),0)}else this.hideCaptions(),this.oD.updateDefaultCaptions()})),this.oD.updateCaptions()),this.mediator.publish(this,A,{payload:{videoIndex:this.dR.currentVideoIndex}}),this.KR=!1,this.gD()}tO(){this.pD(),this.vD(),this.yD(),this.bD()}xD(){return{logoPosition:this.Dp.logoPosition,logoUrl:this.Dp.logoUrl,isMobile:this.xf.config.isMobile,hasUpNext:this.Dp.upNextMode===$.ProtoPlayerUpNextMode.Next,accentColor:this.Dp.accentColor||m.QO.Connatix,iconsColor:this.Dp.iconsColor||m.QO.Icons,tooltipBackgroundColor:this.Dp.tooltipBackgroundColor||m.QO.Connatix,tooltipTextColor:this.Dp.tooltipTextColor||m.QO.Icons,closeButtonMode:this.Dp.closeButtonMode,floatingCloseButtonMode:this.Dp.floatingSettings.floatingCloseButtonMode,isCloseButton:this.Dp.isCloseButton,uiComponentsVisibility:this.Dp.uiComponentsVisibility,sharingDestinations:this.Dp.sharingDestinations,closedCaptionDefault:this.Dp.closedCaptionDefault,alwaysDisplayControls:this.Dp.alwaysDisplayControls,os:this.xf.config.os.os,sdkVersion:this.xf.config.sdkVersion}}nD(){const t={browser:this.xf.config.browser.browserType,os:this.xf.config.os.os,osVersion:this.xf.config.os.osVersion},i=this.Dp.soundMode===l.ProtoPlayerSoundMode.On&&this.Dp.playbackMode!==l.ProtoPlayerPlaybackModeEnum.ClickToPlay?1:0;this.wD=qa[this.Dp.videoQuality],this._D(t,i),this.subscribe(O,this.pR,(({payload:{qualityList:t,videoMeta:i}})=>{this.dR.setAvailableQualitiesForSourceMeta(i,t),this.oD.updateCurrentVideo(i)})),this.subscribe(I,this.pR,(()=>{this.hD.onEnterBuffering()})),this.subscribe(k,this.pR,(()=>{this.hD.onExitBuffering()}))}cD(t,i){const e=t.getAvailableQualities();(0,f.BZ)(e)&&this.oD.updateQuality(t,i)}mD(t){this.xf.services.MacrosService.setVideoDuration(t.duration),this.xf.services.MacrosService.setVideoTitle(t.title),this.xf.services.MacrosService.setVideoDescription(t.description),this.xf.services.MacrosService.setVideoUrl(t.clickUrl),this.xf.services.MacrosService.setVideoId(t.id)}sD(){this.dR=new Ua(this.Dp.playlist),1===this.dR.length&&this.oD.togglePlaylistControls(!1)}eD(){const t=this.xD();this.SD(t),this.oD.updateVolume(this.Dp.soundMode===l.ProtoPlayerSoundMode.On?1:0)}vD(){this.relay(P,this.pR,this,this.mediator),this.subscribe(A,this.pR,(()=>{this.zR()}))}yD(){this.subscribe(v.Timeupdate,this.pR,(({payload:t})=>{this.oD.updateDuration(this.pR.currentTime,this.pR.duration),this.xf.services.MacrosService.setVideoTime(this.pR.currentTime),!this.KR&&t&&(this.KR=!0,this.mediator.publish(this,D.FirstFramePlayed)),this.pR.currentTime!==this.PD&&this.AD(t),this.PD=this.pR.currentTime})),this.subscribe(v.Ended,this.pR,(()=>{this.hD.handleVideoEnd()}))}bD(){this.subscribe(B,this.pR,(({payload:t})=>{this.dR.getCurrentVideoData((i=>{this.cD(i,t)}))})),this.subscribe(E,this.pR,(({payload:t})=>{this.dR.getCurrentVideoData((i=>{const e=i.getAvailableQualities();if((0,f.BZ)(e)){const e=i.getClosestSourceQuality(t);this.wD={quality:y.Strict,height:e.videoHeight},this.mediator.publish(this,E,{payload:e.videoHeight})}}))}))}}const Wa=(t,i,e)=>{ic(e);const s=function(t,i){const e=Ja(t),s=Ja(i),n=e.pop(),r=s.pop(),h=Za(e,s);return 0!==h?h:n&&r?Za(n.split("."),r.split(".")):n||r?n?-1:1:0}(t,i);return Ka[e].includes(s)},Ga=/^[v^~<>=]*?(\d+)(?:\.([x*]|\d+)(?:\.([x*]|\d+)(?:\.([x*]|\d+))?(?:-([\da-z\-]+(?:\.[\da-z\-]+)*))?(?:\+[\da-z\-]+(?:\.[\da-z\-]+)*)?)?)?$/i,Ja=t=>{if("string"!=typeof t)throw new TypeError("Invalid argument expected string");const i=t.match(Ga);if(!i)throw new Error(`Invalid argument not valid semver ('${t}' received)`);return i.shift(),i},Qa=t=>"*"===t||"x"===t||"X"===t,Ya=t=>{const i=parseInt(t,10);return isNaN(i)?t:i},Xa=(t,i)=>{if(Qa(t)||Qa(i))return 0;const[e,s]=((t,i)=>typeof t!=typeof i?[String(t),String(i)]:[t,i])(Ya(t),Ya(i));return e>s?1:e<s?-1:0},Za=(t,i)=>{for(let e=0;e<Math.max(t.length,i.length);e++){const s=Xa(t[e]||0,i[e]||0);if(0!==s)return s}return 0},Ka={">":[1],">=":[0,1],"=":[0],"<=":[-1,0],"<":[-1]},tc=Object.keys(Ka),ic=t=>{if("string"!=typeof t)throw new TypeError("Invalid operator type, expected string but got "+typeof t);if(-1===tc.indexOf(t))throw new Error(`Invalid operator, expected one of ${tc.join("|")}`)};var ec;!function(t){t.shouldUseExternalViewabilityService=function(t){return Wa(t,"3.0.0","<")},t.showAndroidExpandButton=function(t){return Wa(t,"3.2.0",">=")}}(ec||(ec={}));class sc{constructor(t,i=!1){this.zt=t,this.ID=i,this.logoGeneralPosition={top:[$.ProtoLogoPositionMode.TopLeft,$.ProtoLogoPositionMode.TopRight],bottom:[$.ProtoLogoPositionMode.BottomLeft,$.ProtoLogoPositionMode.BottomRight],center:[$.ProtoLogoPositionMode.Center],controlbar:[$.ProtoLogoPositionMode.ControlBar]},this.kD=(t,i="")=>`<cnx class="cnx-ui-btn ${i}">[[${t}]]</cnx>`}CD(t){if(t.indexOf(this.zt.logoPosition)>-1){if(this.zt.logoPosition===$.ProtoLogoPositionMode.ControlBar)return`<cnx class="cnx-ui-btn cnx-d-sm-none cnx-d-md-none cnx-hide-on-volume-hover">[[${$h.LogoComponent}]]</cnx>`;if(this.zt.logoPosition===$.ProtoLogoPositionMode.TopLeft)return`<cnx class="cnx-logo-bar cnx-logo-top-left">[[${$h.LogoComponent}]]</cnx>`;if(!1===this.ID||this.zt.logoPosition!==$.ProtoLogoPositionMode.BottomLeft)return`<cnx class="cnx-logo-bar">[[${$h.LogoComponent}]]</cnx>`}return""}get TD(){return this.zt.uiComponentsVisibility.casting?this.kD($h.CastButton):""}get MD(){return(0,f.BZ)(this.zt.sharingDestinations)?this.kD($h.ShareButton):""}ED(t){return this.BD()?this.kD($h.ExpandButton,t):""}BD(){return!1!==this.zt.uiComponentsVisibility.expandButton&&(!this.zt.isInApp||this.zt.os!==St.M.Android||!!(0,dt.QM)(this.zt.sdkVersion)&&ec.showAndroidExpandButton(this.zt.sdkVersion))}OD(){return this.zt.isInApp?"":`<cnx class="cnx-ui-btn cnx-d-md-none">[[${$h.SettingsButton}]]</cnx>`}get LD(){return this.zt.uiComponentsVisibility.muteWatermark?'<cnx class="cnx-mute-watermark"><cnx><svg markup-inline class="cnx-color-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M11 2L8.25 4.25 11 7zM0 7v9h5l6 5v-6.5L3.85 7zm17 4.5c0-1.965-1.2-3.735-3-4.5v3l2.8 2.8a3.73 3.73 0 00.2-1.3zm3.4 7.45l-1.85-1.85-2.65-2.6-1.9-1.95-3-3-4.15-4.1-4.95-5L1.45 0 0 1.45 17.15 18.6 19 20.4l3.55 3.6L24 22.55zM14 23a11.83 11.83 0 003.65-1.55l-1.25-1.3c-.747.498-1.553.902-2.4 1.2V23zm9-11.5A11.77 11.77 0 0014 0v1.6A10.53 10.53 0 0120 16l1.45 1.45A11.99 11.99 0 0023 11.5z"/></svg></cnx></cnx>':""}get RD(){return this.zt.isCloseButton?`<cnx class="cnx-ui-btn cnx-d-sm-none cnx-close-button">[[${$h.CloseButton}]]</cnx>`:""}get DD(){return this.zt.hasUpNext?`[[${$h.UpNextBox}]]`:""}get jD(){return this.ID?`[[${$h.LivePoster}]]`:""}FD(t){return t===$.ProtoLogoPositionMode.TopRight&&this.zt.closeButtonMode?"":this.zt.logoPosition===t?"logo-right":""}VD(){return this.zt.closeButtonMode===l.ProtoPlayerCloseButtonMode.AlwaysOn}get $D(){return this.VD()?"":this.RD}get ND(){return this.VD()?this.RD:""}get UD(){return`\n            <cnx class="cnx-ui-gradient-top"></cnx>\n            [[${$h.QueStateOverlay}]]\n            <cnx class="cnx-ui-head cnx-d-sm-none cnx-ui-bar cnx-lock-bar-on-hover ${this.FD($.ProtoLogoPositionMode.TopRight)}">\n                <cnx class="cnx-ui-head-buttons">\n                    ${this.TD}\n                    ${this.MD}\n                    ${this.$D}\n                </cnx>\n                ${this.CD(this.logoGeneralPosition.top)}\n            </cnx>\n            <cnx class="cnx-ui-spacer cnx-d-sm-none"></cnx>\n            <cnx class="cnx-ui-content cnx-ui-bar cnx-center-align"><cnx class="cnx-ui-btn">[[${$h.BigPlayButton}]]</cnx></cnx>\n            <cnx class="cnx-ui-spacer cnx-d-sm-none"></cnx>\n            <cnx class="cnx-ui-content cnx-ui-bar cnx-d-sm-none cnx-ui-wattermark ${this.FD($.ProtoLogoPositionMode.BottomRight)}">\n                ${this.LD}\n                ${this.DD}\n                ${this.CD(this.logoGeneralPosition.bottom)}\n                [[${$h.CaptionComponent}]]\n            </cnx>\n            <cnx class="cnx-ui-progress cnx-ui-bar cnx-d-sm-none">\n                ${this.qD}\n                <cnx class="cnx-ui-progress-bar">[[${$h.ProgressBar}]]</cnx>\n                ${this.zD}\n            </cnx>\n            <cnx class="cnx-ui-buttons cnx-ui-bar cnx-lock-bar-on-hover">\n                <cnx class="cnx-ui-btn cnx-hide-on-single-video">[[${$h.PreviousButton}]]</cnx>\n                <cnx class="cnx-ui-btn">[[${$h.PlayButton}]]</cnx>\n                <cnx class="cnx-ui-btn cnx-hide-on-single-video">[[${$h.UpNextButton}]]</cnx>\n                <cnx class="cnx-d-sm-none cnx-d-md-none">[[${$h.VolumeControls}]]</cnx>\n                <cnx class="cnx-ui-btn cnx-d-sm-none cnx-d-lg-none cnx-d-xl-none">[[${$h.VolumeButton}]]</cnx>\n                <cnx class="cnx-ui-spacer cnx-d-sm-none"></cnx>\n                <cnx class="cnx-ui-btn cnx-d-sm-none cnx-d-md-none cnx-hide-on-volume-hover">[[${$h.CaptionButton}]]</cnx>\n                ${this.OD()}\n                ${this.ED("cnx-d-sm-none cnx-hide-on-volume-hover")}\n                ${this.CD(this.logoGeneralPosition.controlbar)}\n            </cnx>\n            <cnx class="cnx-ui-gradient-bottom"></cnx>\n    `.trim()}get WD(){return`\n            [[${$h.QueStateOverlay}]]\n            <cnx class="cnx-ui-head cnx-d-sm-none cnx-ui-bar ${this.FD($.ProtoLogoPositionMode.TopRight)}">\n                <cnx class="cnx-ui-head-buttons">\n                    ${this.TD}\n                    ${this.MD}\n                    <cnx class="cnx-ui-btn ${m.s6.ContextController}">[[${$h.MoreButton}]]</cnx>\n                    ${this.$D}\n                </cnx>\n                ${this.CD(this.logoGeneralPosition.top)}\n            </cnx>\n            <cnx class="cnx-ui-spacer cnx-d-sm-none"></cnx>\n            <cnx class="cnx-ui-content cnx-ui-bar cnx-center-align">\n                <cnx class="cnx-ui-btn">[[${$h.BigPlayButton}]]</cnx>\n            </cnx>\n            <cnx class="cnx-ui-content-mobile cnx-ui-bar cnx-vertical-align">\n                <cnx class="cnx-ui-spacer"></cnx>\n                <cnx class="cnx-ui-btn cnx-hide-on-single-video">[[${$h.PreviousButton}]]</cnx>\n                <cnx class="cnx-ui-spacer"></cnx>\n                <cnx class="cnx-ui-btn">[[${$h.PlayButton}]]</cnx>\n                <cnx class="cnx-ui-spacer"></cnx>\n                <cnx class="cnx-ui-btn cnx-hide-on-single-video">[[${$h.UpNextButton}]]</cnx>\n                <cnx class="cnx-ui-spacer"></cnx>\n            </cnx>\n            <cnx class="cnx-ui-spacer cnx-d-sm-none"></cnx>\n            <cnx class="cnx-ui-content cnx-ui-bar cnx-d-sm-none cnx-ui-wattermark">\n                ${this.LD}\n                ${this.DD}\n            </cnx>\n            <cnx class="cnx-mobile-captions-bar cnx-ui-bar ">\n                [[${$h.CaptionComponent}]]\n            </cnx>\n            <cnx class="cnx-ui-buttons cnx-ui-bar cnx-d-sm-none ">\n                <cnx class="cnx-ui-btn">[[${$h.VolumeButton}]]</cnx>\n                <cnx class="cnx-ui-progress cnx-ui-bar cnx-d-sm-none">\n                    ${this.GD()}\n                    <cnx class="cnx-ui-progress-bar">[[${$h.ProgressBar}]]</cnx>\n                </cnx>\n                <cnx class="cnx-ui-btn cnx-d-md-none cnx-d-lg-none">[[${$h.CaptionButton}]]</cnx>\n                ${this.OD()}\n                ${this.ED()}\n                ${this.CD(this.logoGeneralPosition.controlbar)}\n                ${this.JD}\n            </cnx>\n        `.trim()}get template(){const t=this.zt.isMobile?m.s6.Mobile:"",i=this.zt.isMobile?this.WD:this.UD;return`<cnx class="cnx-ui cnx-ui-video ${this.QD} ${t}">\n                    ${this.jD}\n                    ${this.ND}\n                    ${i}\n                    [[${$h.QualityMenu}]]\n                    [[${$h.ContextMenu}]]\n                    [[${$h.ElementsSettingsMenu}]]\n                    [[${$h.ElementsCaptionMenu}]]\n                    [[${$h.Loader}]]\n                </cnx>`.trim()}get qD(){const t=this.GD();return(0,dt.QM)(t)?t:`<cnx class="cnx-ui-progress-label cnx-d-md-none"><cnx-span>[[${$h.ElapsedTimeLabel}]]</cnx-span></cnx>`}GD(){return this.ID?`[[${$h.LiveIcon}]]`:""}get zD(){return this.ID?'<cnx class="cnx-ui-progress-label-live cnx-d-md-none"></cnx>':`<cnx class="cnx-ui-progress-label cnx-d-md-none"><cnx-span>[[${$h.TotalDurationLabel}]]</cnx-span></cnx>`}get JD(){return this.ID&&this.zt.logoPosition===$.ProtoLogoPositionMode.BottomRight?`<cnx class="cnx-live-bottom-logo">[[${$h.LogoComponent}]]</cnx>`:""}get QD(){return this.ID?"cnx-live":""}}class nc extends to{onClick(){this.context.mediator.publish(this.context,_t[_t.OverlayClick])}initState(){super.initState(),this.context.overlayModule.showUiControls()}exitState(){super.exitState()}}class rc extends eo{onClick(){}initState(){super.initState(),this.context.overlayModule.disableMouseMove(),this.context.overlayModule.disableHover(),this.context.overlayModule.removeOverlayClickEvents(),this.context.overlayModule.showUiControls(!1)}exitState(){super.exitState(),this.context.overlayModule.enableMouseMove(),this.context.overlayModule.addOverlayClickEvents(),this.context.overlayModule.enableHover()}}class hc extends d._{constructor(t,i,s,n,r,h=!1){super(),this.mediator=t,this.gM=i,this.YD=s,this.XD=n,this.Sc=r,this.Jt=h,this.ZD=!1,this.KD=3e3,this.tj=!1,this.ij=t=>{"margin-top"!==t.propertyName&&"margin"!==t.propertyName&&"margin-bottom"!==t.propertyName||this.mediator.publish(this,_t[_t.UIShowStart])},this.ej=t=>{"margin-top"!==t.propertyName&&"margin"!==t.propertyName&&"margin-bottom"!==t.propertyName||this.mediator.publish(this,_t[_t.UIEndShowHide])},this.nj=()=>{this.YD&&(this.YD.show(),(0,e.Tp)(this.gM)),(0,e.pv)(this.gM,m.s_.Paused)||this.showUiControls()},this.rj=()=>{this.hj(this.KD)},this.oj=()=>{this.Jt&&this.ZD?this.showUiControls():this.mediator.publish(this,_t[_t.OverlayClick])},this.uu=t=>{"transform"===t.propertyName&&(this.YD&&this.YD.hide(),this.gM.removeEventListener("transitionend",this.uu))},this.aj=()=>{this.showUiControls()},this.addOverlayClickEvents=()=>{this.unsubscribe(at.Z[at.Z.Click],this.Sc,this.oj),this.subscribe(at.Z[at.Z.Click],this.Sc,this.oj)},this.removeOverlayClickEvents=()=>{this.unsubscribe(at.Z[at.Z.Click],this.Sc,this.oj)},this.enableMouseMove=()=>{this.XD||this.Jt||this.gM.addEventListener("mousemove",this.aj)},this.disableMouseMove=()=>{this.Jt||this.gM.removeEventListener("mousemove",this.aj)},this.enableHover=()=>{this.XD||(this.Jt?this.gM.addEventListener("touchstart",this.nj,{passive:!0}):(this.gM.addEventListener("mouseenter",this.nj),this.gM.addEventListener("mouseleave",this.rj)))},this.disableHover=()=>{this.Jt?this.gM.removeEventListener("touchstart",this.nj):(this.gM.removeEventListener("mouseenter",this.nj),this.gM.removeEventListener("mouseleave",this.rj)),clearTimeout(this.cj)},i.addEventListener("transitionend",this.ej),i.addEventListener("transitionstart",this.ij),this.Jt||this.lj(i)}lj(t){const i=t.getElementsByClassName("cnx-lock-bar-on-hover");(0,f.Sz)(i).forEach((t=>{t.addEventListener("mouseenter",(()=>{this.uiSticky=!0})),t.addEventListener("mouseleave",(()=>{this.uiSticky=!1}))}))}hj(t){clearTimeout(this.cj),this.cj=setTimeout((()=>{this.hideUiControls()}),t)}showUiControls(t=!0){if(t&&!this.XD&&this.hj(this.KD),this.Jt){const t=(0,e.pv)(this.gM,m.s6.ShowControls);this.ZD=!t}!0!==this.uj&&(this.uj=!0,this.gM.removeEventListener("transitionend",this.uu),(0,e.cn)(this.gM,m.s6.ShowControls),this.YD&&this.YD.show())}hideUiControls(){!1===this.uj||this.tj||(this.uj=!1,this.mediator.publish(this,_t[_t.UIHideStart]),this.YD&&this.gM.addEventListener("transitionend",this.uu),(0,e.IV)(this.gM,m.s6.ShowControls))}start(){this.Sc.register(this.gM,this,this.Sc),this.relay(at.Z[at.Z.Scroll],this.Sc,this,this.mediator),this.enableHover(),this.addOverlayClickEvents()}destroy(){this.disableHover(),this.disableMouseMove(),this.unsubscribeAll(this.Sc),this.Sc.unregisterAll(this),clearTimeout(this.cj)}set uiSticky(t){this.tj=t,!1!==t||this.XD||this.hj(this.KD)}}class oc{constructor(t){this.dj=t}pj(t){return this.dj.filter((i=>t.instance!==i.instance))}mj(t){return this.dj.find((({name:i})=>t===i))}gj(t){t.forEach((({instance:t})=>{t.isOpen&&t.close()}))}toggleContextMenu(t,i={}){const e=this.mj(t);if(e.instance.isOpen)return e.instance.close(),!1;{const{targetCoordinates:t,holdPause:s}=i,n=t||e.instance.getAnchorCoordinatesTo(e.linkedComponent);return e.instance.open(n,s),this.gj(this.pj(e)),!0}}isAnyContextMenuOpen(){return!!this.dj.find((({instance:t})=>t.isOpen))}closeContextMenu(t){const i=this.mj(t).instance;i.isOpen&&i.close()}closeAllContextMenus(){this.gj(this.dj)}}class ac extends Kh{onClick(){}initState(){this.context.$uiContainer.classList.add(m.s_.Loading);const t=this.context.getComponent($h.Loader);t&&t.show()}exitState(){this.context.$uiContainer.classList.remove(m.s_.Loading);const t=this.context.getComponent($h.Loader);t&&t.hide()}}class cc extends rc{initState(){super.initState(),this.context.overlayModule.hideUiControls()}exitState(){super.exitState()}}class lc extends Kh{onClick(){}initState(){(0,e.MV)(this.context.$uiContainer)}exitState(){(0,e.Ho)(this.context.$uiContainer)}}class uc extends Kh{onClick(){}initState(){this.context.$uiContainer.classList.add(m.s_.Preroll);this.context.getComponent($h.QueStateOverlay).show();const t=this.context.getComponent($h.UpNextBox);t&&t.hide()}exitState(){this.context.$uiContainer.classList.remove(m.s_.Preroll);this.context.getComponent($h.QueStateOverlay).hide()}}class dc extends uo{constructor(t,i,e,s,n,r,h={},o,a){super(t,n,i,r,new va(i,e,n,h,a,s)),this.interactionService=e,this.settings=h,this.appId=o,this.mM={[b.PlayingState]:new nc(this),[b.PausedState]:new rc(this),[b.BufferingState]:new ac(this),[b.StoppedState]:new cc(this),[b.HiddenState]:new lc(this),[b.PrerollState]:new uc(this),[b.PostrollState]:new uc(this)},this.vj=0,this.yj=null,this.bj=2e3,this.xj=t=>{if(this.LB===m.Rq.Sm)return;t.preventDefault();if(!this.getComponent($h.ContextMenu))return;clearTimeout(this.yj),this.wj.closeAllContextMenus();const i={targetCoordinates:{clientX:t.pageX,clientY:t.pageY,height:0,width:0}};this.wj.toggleContextMenu($h.ContextMenu,i),this.yj=setTimeout((()=>{this.wj.closeContextMenu($h.ContextMenu)}),this.bj)},this._j=()=>{this.EM.disableTooltips()},this.Sj=()=>{this.EM.enableTooltips()},this.oj=()=>{this.wj.isAnyContextMenuOpen()?this.wj.closeAllContextMenus():this.currentState.onClick()},this.Pj=()=>{this.wj.closeAllContextMenus()},this.Aj=t=>{t.preventDefault()},this.LB=a}Ij(){const t=`id_${this.appId}`;this.$uiContainer.id=t;const i=`\n            #${t} .${m.iu.Icons} {\n                fill: ${this.settings.iconsColor};\n                background-color: ${this.settings.iconsColor};\n            }\n            #${t} .${m.iu.AccentColor} {\n                fill: ${this.settings.accentColor};\n                background-color: ${this.settings.accentColor};\n                color: ${this.settings.accentColor};\n                stroke: ${this.settings.accentColor};\n            }\n            #${t} svg.${m.iu.AccentColor} {\n                fill: ${this.settings.accentColor}!important;\n                background-color: ${this.settings.accentColor};\n                color: ${this.settings.accentColor};\n                stroke: ${this.settings.accentColor};\n            }\n            #${t} .${m.iu.TooltipText} {\n                color: ${this.settings.tooltipTextColor};\n            }\n            #${t} .${m.iu.TooltipBackground} {\n                background-color: ${this.settings.tooltipBackgroundColor};\n            }\n            @keyframes ${t}-bar {\n                1% {\n                  fill: transparent; transform: scaleY(1)\n                }\n                30% {fill: ${this.settings.accentColor}; transform: scaleY(1.1)}\n                60% {fill: transparent; transform: scaleY(1)}\n                100% {fill: transparent; transform: scaleY(1)}\n            }\n\n            #${t} .cnx-ui-loader polygon {\n                animation-name: ${t}-bar;\n            }\n        `.trim();this.globalDomUtilsService.addCssString(i)}kj(){const t=[],i=this.getComponent($h.ElementsSettingsMenu);i&&t.push({instance:i,linkedComponent:this.getComponent($h.MoreButton),name:$h.ElementsSettingsMenu});const e=this.getComponent($h.QualityMenu);e&&t.push({instance:e,linkedComponent:this.getComponent($h.SettingsButton),name:$h.QualityMenu});const s=this.getComponent($h.ContextMenu);s&&t.push({instance:s,name:$h.ContextMenu});const n=this.getComponent($h.ElementsCaptionMenu);n&&t.push({instance:n,linkedComponent:this.getComponent($h.CaptionButton),name:$h.ElementsCaptionMenu}),this.wj=new oc(t)}Cj(){this.overlayModule=new hc(this,this.$uiContainer,this.getComponent($h.ProgressBar),this.settings.alwaysDisplayControls,this.interactionService,this.settings.isMobile),this.subscribe(_t[_t.OverlayClick],this.overlayModule,this.oj),this.subscribe(_t[_t.UIHideStart],this.overlayModule,this.Pj),this.subscribe(_t[_t.UIShowStart],this.overlayModule,this._j),this.subscribe(_t[_t.UIEndShowHide],this.overlayModule,this.Sj),this.subscribe(at.Z[at.Z.Scroll],this.overlayModule,(()=>{this.Tj(at.Z[at.Z.Scroll])})),this.overlayModule.start()}Mj(t){this.LB!==m.Rq.Lg&&t||this.Ej.forEach((i=>{t?(0,e.cn)(i,m.Gj.Invisible):(0,e.IV)(i,m.Gj.Invisible)}))}Bj(t){t?(0,e.cn)(this.$uiContainer,m.s6.Muted):(0,e.IV)(this.$uiContainer,m.s6.Muted)}Oj(t){const i=this.getComponent($h.CaptionButton),e=this.getComponent($h.ElementsSettingsMenu);t?(i&&i.showComponent(),e&&e.showCaptionOption()):(i&&i.hideComponent(),e&&e.hideCaptionOption())}handleComponentEvent(t,i,e){switch(super.handleComponentEvent(t,i,e),this.Tj(t),t){case _t[_t.DraggingStart]:this.overlayModule.uiSticky=!0;break;case _t[_t.DraggingStopped]:this.overlayModule.uiSticky=!1;break;case $h[$h.UpNextButton]:this.mediator.publish(this,_t[_t.Next],i);break;case $h[$h.PreviousButton]:this.mediator.publish(this,_t[_t.Prev],i);break;case _t[_t.Seek]:const e=0,s=100,n=0,r=this.vj;this.mediator.publish(this,_t[_t.Seek],{payload:(0,xi.dQ)(e,s,n,r,i.payload)});break;case _t[_t.Mute]:this.Bj(!0),this.mediator.publish(this,_t[_t.Volume],{payload:0});break;case _t[_t.Unmute]:this.Bj(!1),this.mediator.publish(this,_t[_t.Volume],{payload:1});break;case _t[_t.Volume]:this.Bj(!i.payload),this.mediator.publish(this,_t[_t.Volume],i);break;case _t[_t.VolumeHoverStart]:this.Mj(!0);break;case _t[_t.VolumeHoverStopped]:this.Mj(!1);break;case _t[_t.Settings]:this.wj.toggleContextMenu($h.QualityMenu);break;case _t[_t.Quality]:i.payload&&this.mediator.publish(this,_t[_t.Quality],{payload:i.payload});break;case $h[$h.MoreButton]:this.wj.toggleContextMenu($h.ElementsSettingsMenu);break;case $h[$h.CloseButton]:this.mediator.publish(this,_t[_t.Close]);break;case _t[_t.AboutClick]:this.globalDomUtilsService.open(Js.br,At.bS.Blank);break;case _t[_t.ContextMenuClose]:this.overlayModule.uiSticky=!1;break;case _t[_t.ContextMenuOpen]:this.overlayModule.uiSticky=!0;break;case _t[_t.CaptionMenu]:if(i.payload)this.mediator.publish(this,i.payload.event,{payload:i.payload.data}),this.isCaptionMenuInsideSettings()&&this.wj.toggleContextMenu($h.ElementsSettingsMenu);else{if(this.isCaptionMenuInsideSettings()){const t=this.getComponent($h.ElementsSettingsMenu);return void(null==t||t.updateMenu())}this.wj.toggleContextMenu($h.ElementsCaptionMenu)}break;default:this.mediator.publish(this,t,i)}}Tj(t){let i;switch(t){case at.Z[at.Z.Scroll]:i=l.ProtoMediaClickTypeEnum.ScrollClick;break;case _t[_t.Volume]:i=l.ProtoMediaClickTypeEnum.VolumeClick;break;case $h[$h.PlayButton]:case $h[$h.BigPlayButton]:case $h[$h.ClickToPlayButton]:case _t[_t.Play]:i=l.ProtoMediaClickTypeEnum.PlayClick;break;case _t[_t.Pause]:i=l.ProtoMediaClickTypeEnum.PauseClick;break;case $h[$h.UpNextButton]:i=l.ProtoMediaClickTypeEnum.NextClick;break;case _t[_t.Prev]:case $h[$h.PreviousButton]:i=l.ProtoMediaClickTypeEnum.PreviousClick;break;case _t[_t.Mute]:i=l.ProtoMediaClickTypeEnum.MuteClick;break;case _t[_t.Unmute]:i=l.ProtoMediaClickTypeEnum.UnmuteClick;break;case _t[_t.Close]:case $h[$h.CloseButton]:i=l.ProtoMediaClickTypeEnum.CloseClick;break;case _t[_t.CaptionOff]:case _t[_t.CaptionOn]:i=l.ProtoMediaClickTypeEnum.SubtitleClick;break;case _t[_t.Expand]:i=l.ProtoMediaClickTypeEnum.FullScreenClick;break;case _t[_t.Collapse]:i=l.ProtoMediaClickTypeEnum.ExitFullScreenClick}void 0!==i&&this.mediator.publish(this,p.Uh.GeneralUserInteraction,{payload:{mediaClick:!0,type:i}})}updateUpNextBox(t,i){const e=this.getComponent($h.UpNextBox);e&&e.updateCard(t,i)}updateVolume(t){this.Bj(!t);const i=this.getComponent($h.VolumeButton),e=this.getComponent($h.VolumeControls);e?e.setVolume(t):i&&i.setState(t>0?sa.Unmute:sa.Mute)}updateDuration(t,i){super.updateDuration(t,i),this.vj=i;const e=this.getComponent($h.UpNextBox);e&&(i-t<=5?e.isInView()||e.show():e.isInView()&&e.hide())}updateCaptions(t){const i=this.getComponent($h.CaptionComponent);i&&i.updateCaptions(t)}updateDefaultCaptions(t){const i=this.isCaptionMenuInsideSettings()?this.getComponent($h.ElementsSettingsMenu):this.getComponent($h.ElementsCaptionMenu);null==i||i.updateCaptionSelection(t)}toggleCaptionState(t){const i=this.getComponent($h.CaptionButton),e=this.getComponent($h.ElementsSettingsMenu);i&&i.isActive!==t&&(i.isActive=t),e&&e.toggleCaptionState(t)}updateQuality(t,i){const e=this.getComponent($h.SettingsButton),s=t.getClosestSourceQuality(i.height).isHD;e&&e.toggleHDFlag(s);const n=this.getComponent($h.QualityMenu);n&&n.updateQuality(i)}changeState(t){super.changeState(t)}onResize(t){this.LB=t;const i=this.getComponent($h.QualityMenu),e=this.getComponent($h.SettingsButton);i&&e&&i.onResize(e.getCoordinates());const s=this.getComponent($h.ContextMenu);s&&s.onResize();const n=this.getComponent($h.ElementsCaptionMenu),r=this.getComponent($h.CaptionButton);if(n&&n.onResize(r.getCoordinates()),this.settings.isMobile){const t=this.getComponent($h.ElementsSettingsMenu),i=this.getComponent($h.MoreButton);t&&i&&t.onResize(t.getAnchorCoordinatesTo(i),this.LB)}}updateCurrentVideo(t){const i=t.getAvailableQualities(),e=this.getComponent($h.QualityMenu);e&&e.createQualityMenu(i);const s=t.getThumbnailUrl(this.$uiContainer.clientWidth,this.$uiContainer.clientHeight);if(this.mediator.publish(this,R,{payload:{thumbnailUrl:s}}),this.Oj(!!t.subtitles),t.subtitles)if(this.isCaptionMenuInsideSettings()){const i=this.getComponent($h.ElementsSettingsMenu);i&&i.createCaptionsMenu(t.subtitles)}else{const i=this.getComponent($h.ElementsCaptionMenu);i&&i.createCaptionsMenu(t.subtitles)}}togglePlaylistControls(t){const i=this.$uiContainer.getElementsByClassName(m.Gj.HideOnSingleVideo);(0,f.Sz)(i).forEach((i=>{t?(0,e.Ho)(i):(0,e.MV)(i)}))}toggleExpandButtonDisplay(t){const i=this.getComponent($h.ExpandButton);i&&(t?i.showComponent():i.hideComponent())}start(){try{this.Cj(),this.kj(),this.Lj(),this.$container.addEventListener("mousedown",this.Aj),this.Ej=(0,f.Sz)(this.$uiContainer.getElementsByClassName(m.Gj.HideOnVolumeHover)),this.settings.isMobile||this.$uiContainer.addEventListener("contextmenu",this.xj),this.Ij()}catch(t){(0,s.n)({message:"BaseUiContent_start",exception:t.message,callStack:t.stack,level:s.D.CRITICAL})}}destroy(){super.destroy(),this.$container.removeEventListener("mousedown",this.Aj)}closeAllMenus(){this.wj.closeAllContextMenus()}resetCaptionsMenu(){if(this.isCaptionMenuInsideSettings()){const t=this.getComponent($h.ElementsSettingsMenu);t&&t.reset()}}isCaptionMenuInsideSettings(){return this.settings.isMobile&&this.LB===m.Rq.Lg}}class pc extends cc{initState(){super.initState();const t=this.context.getComponent($h.BigPlayButton);t&&t.toggleReplay(!0)}exitState(){super.exitState();const t=this.context.getComponent($h.BigPlayButton);t&&t.toggleReplay(!1)}}class fc extends dc{constructor(){super(...arguments),this.Rj={[b.ReplayState]:new pc(this)}}start(){this.mM=Object.assign(Object.assign({},this.mM),this.Rj),super.start()}Lj(){this.mM[b.StoppedState].enterState()}}class mc{constructor(t){this.Dj=[{id:x.H264,extension:"mp4",type:"video/mp4"},{id:x.Hevc,extension:"mp4",type:"video/mp4"}],this.sc=this.Dj.find((i=>i.id===t))}get type(){const t=this.sc.codecs?`codecs=${this.sc.codecs}`:"";return`${this.sc.type}; ${t}`}get id(){return this.sc.id}}class gc{constructor(t,i){this.Wl=t,this.Al=i,this.jj={quality:y.Auto,height:360},this.resizeObserverBinded=!1,this.Fj=new It.x,this.Vj=new Dt.X(this.jj),this.$j=30,this.ru=()=>{const t=this.Al.clientHeight;if(this.Nj(t)&&this.currentQualitySettings.quality===y.Auto){const i={height:t,quality:y.Auto};this.setCurrentQualitySettings(i),this.Vj.next(i)}}}setCurrentQualitySettings(t){this.jj.quality=t.quality,this.jj.height!==t.height&&(this.jj.height=t.height,this.Fj.next())}Nj(t){return!this.jj.height||t/this.jj.height*100-100>this.$j}addResizeObserver(){this.resizeObserverBinded=!0,this.Wl.on(this.Al,this.ru)}removeResizeObserver(){this.resizeObserverBinded=!1,this.Wl.off(this.Al,this.ru)}setQuality(t){t.quality===y.Auto?this.resizeObserverBinded||(this.setCurrentQualitySettings({height:t.height,quality:t.quality}),this.addResizeObserver(),this.ru()):(this.resizeObserverBinded&&this.removeResizeObserver(),this.setCurrentQualitySettings(t)),this.Vj.next(this.jj)}get currentQualitySettings(){return this.jj}get onQualityChange(){return this.Fj.asObservable()}get onCurrentQuality(){return this.Vj.asObservable()}destroy(){this.removeResizeObserver()}}class vc{constructor(t,i){this._c=t,this.cb=i,this.Uj=new It.x,this.Fj=new It.x,this.Vj=new It.x,this.onTrackLoaded=this.Uj.asObservable(),this.onQualityChange=this.Fj.asObservable(),this.onCurrentQuality=this.Vj.asObservable(),this.Hj=()=>{this.Uj.next()}}qj(t){this.zj=t}Wj(t){this.cb.innerHTML="",t.forEach((t=>{this.cb.appendChild(t)}))}Jj(){return this.Qj}Yj(t){var i;if(null===(i=this.Qj)||void 0===i||i.remove(),this.Qj=null,this.zj&&this.zj.subtitles&&t){this.cb.childNodes.forEach((t=>{"track"===t.nodeName.toLowerCase()&&t.remove()}));const i=this._c.createElement("track");i.src=t.file,i.srclang=t.code,i.label=t.title,i.kind="subtitle",i.default=!0,i.addEventListener("load",this.Hj,!1),i.addEventListener("loaded",this.Hj,!1),this.cb.appendChild(i),this.Qj=i}}}var yc,bc,xc;!function(t){t[t.MP4=0]="MP4",t[t.HLS=1]="HLS"}(yc||(yc={}));class wc extends vc{constructor(t,i,e,s,n={},r){super(t,s),this.Wl=i,this.vf=e,this.wD=r,this.qL=[],this.Xj=null,this.Zj=10.13,this.handlerType=yc.MP4,this.Kj=this.tF(n)}start(){try{this.iF=new gc(this.Wl,this.vf),this.Tl(),this.setQuality(this.wD)}catch(t){(0,s.n)({message:"Mp4SourceHandler_start",exception:t.message,callStack:t.stack,level:s.D.CRITICAL})}}onQualityChanged(){return this.attachMedia()}setSource(t,i=!1){this.qj(t),this.eF(this.sF(),i)}setQuality(t){this.iF.setQuality(t)}get currentQualitySettings(){return this.iF.currentQualitySettings}attachMedia(){return new Promise((t=>{this.nF(),t()}))}detachMedia(){this.cb.removeAttribute("src"),this.eF(null)}destroy(){this.iF.destroy(),(0,jt.i)(this.qL)}updateSubtitleTrackSource(t){this.Yj(t)}Tl(){const t=this.iF.onCurrentQuality.subscribe((t=>this.Vj.next(t))),i=this.iF.onQualityChange.subscribe((()=>this.rF(this.iF.currentQualitySettings.height)));this.qL.push(t,i)}rF(t){this.eF(this.sF()),this.Fj.next(t)}hF(t){this.Wj(t),this.cb.load()}sF(){return[...this.oF(),...this.Jj()?[this.Jj()]:[]]}oF(){if(!this.cb||!this.zj)return[];const t=[];return this.zj.getSources(this.iF.currentQualitySettings.height,this.Kj).forEach((i=>{const e=this._c.createElement("source");e.src=i.src,e.type=i.type,t.push(e)})),t}nF(){this.Xj&&(this.hF(this.Xj),this.Xj=null)}eF(t,i=!1){this.Xj=t,i&&this.nF()}tF(t){let i;switch(t.os){case St.M.Ios:i=[x.Hevc,x.H264];break;case St.M.Mac:i=t.osVersion>this.Zj&&t.browser===At.lI.Safari?[x.Hevc,x.H264]:[x.H264];break;default:i=[x.H264]}return i.map((t=>new mc(t)))}}!function(t){t.UnexpectedError="unexpectedError",t.BufferingError="bufferingError",t.FragBuffered="fragBuffered",t.ManifestLoaded="manifestLoaded",t.LevelSwitching="levelSwitching",t.StreamEnded="streamEnded"}(bc||(bc={})),function(t){t.Http="http",t.Https="https"}(xc||(xc={}));const _c={enableWorker:!1,capLevelToPlayerSize:!0,cnxRenderWindow:window,maxBufferSize:5e6,maxBufferLength:5,maxMaxBufferLength:10,liveBackBufferLength:0};class Sc extends vc{constructor(t,i,e,s,n,r,h,o){super(t,i),this.ob=e,this.aF=s,this.wD=n,this.cF=r,this.gd=h,this.lF=o,this.uF=new It.x,this.onHlsEvent=this.uF.asObservable(),this.ub=[],this.dF=y.Auto,this.pF=320,this.fF=!1,this.mF=!1,this.gF=!1,this.handlerType=yc.HLS,this.vF=new Dt.X(0),this.yF=!1,this.gb=()=>{this.mb.off(this.ob.Events.MEDIA_ATTACHED,this.gb);const t=this.bF(this.xF);this.mb.loadSource(t),this.mb.once(this.ob.Events.MANIFEST_PARSED,this.vb)},this.vb=()=>{this.mb.off(this.ob.Events.MANIFEST_PARSED,this.vb),this.mb.on(this.ob.Events.LEVEL_SWITCHING,this.wF),this.mb.on(this.ob.Events.LEVEL_SWITCHED,this._F),this.mb.on(this.ob.Events.FRAG_BUFFERED,this.SF),this.mb.on(this.ob.Events.FRAG_LOADING,this.PF),this.mb.on(this.ob.Events.FRAG_LOADED,this.AF),this.mb.on(this.ob.Events.BUFFER_APPENDING,this.IF),this.mb.on(this.ob.Events.BUFFER_APPENDED,this.kF),this.mb.on(this.ob.Events.BUFFER_EOS,this.CF),this.xF=null,this.yb(),this.TF(),this.MF(),this.EF.resolve()},this.BF=()=>{this.xF=null,this.cb.removeEventListener(v.LoadedMetadata,this.BF),this.OF.resolve()},this.TF=()=>{const t=this.ub.map((t=>({videoHeight:t.height,isHD:t.height>=720,label:t.level.toString()})));this.uF.next({type:bc.ManifestLoaded,payload:{qualityList:t}})},this.SF=()=>{this.uF.next({type:bc.FragBuffered})},this.PF=()=>{this.fF=!0},this.AF=()=>{this.fF=!1},this.IF=()=>{this.mF=!0},this.kF=()=>{this.mF=!1},this.CF=()=>{this.uF.next({type:bc.StreamEnded})},this.pb=(t,i)=>{if(i.details===this.ob.ErrorDetails.BUFFER_STALLED_ERROR&&(this.fF||this.mF?this.uF.next({type:bc.BufferingError}):(this.gF||(this.shouldRecoverMediaError()&&this.mb.recoverMediaError(),this.cb.play().then((()=>{this.gF=!1})).catch((()=>{this.gF=!1}))),this.gF=!0)),i.fatal)switch(i.type){case this.ob.ErrorTypes.NETWORK_ERROR:if(i.details===this.ob.ErrorDetails.MANIFEST_PARSING_ERROR)return void this.LF("hls_network_error_manifest_parsing_error_FATAL");if(i.details===this.ob.ErrorDetails.MANIFEST_LOAD_ERROR)return void this.uF.next({type:bc.UnexpectedError});if(i.details===this.ob.ErrorDetails.LEVEL_LOAD_ERROR&&this.vF.next(this.vF.value+1),this.yF)return this.CF(),void(this.yF=!1);this.mb.startLoad();break;case this.ob.ErrorTypes.MEDIA_ERROR:this.mb.recoverMediaError();break;default:this.LF("hls_unexpected_error_FATAL",`type_${i.type}_details_${i.details}`)}else i.type===this.ob.ErrorTypes.MEDIA_ERROR&&i.details===this.ob.ErrorDetails.BUFFER_APPENDING_ERROR&&this.LF("hls_media_error_buffer_appending_error"),i.type===this.ob.ErrorTypes.NETWORK_ERROR&&i.details===this.ob.ErrorDetails.MANIFEST_PARSING_ERROR&&this.LF("hls_network_error_manifest_parsing_error")},this.RF=()=>{this.LF("hls_video_tag_error",`code_${this.cb.error.code}_message_${this.cb.error.message}`)},this._F=(t,i)=>{this.pF=this.ub.find((t=>t.level===i.level)).height,this.Fj.next(this.currentQualitySettings.height),this.Vj.next(this.currentQualitySettings)},this.wF=()=>{this.uF.next({type:bc.LevelSwitching})},this.ob.isSupported()&&(this.mb=this.DF(),this.cF&&(this.mb.autoLevelCapping=1)),this.pF=this.wD.height,this.dF=this.wD.quality}start(){}get liveSyncPosition(){if(this.mb)return this.mb.liveSyncPosition}setSource(t,i=!1){this.jF=t.id,this.qj(t),this.xF=t,i&&this.attachMedia()}attachMedia(){return!this.mb&&this.ob.isSupported()&&(this.mb=this.DF()),new Promise((t=>{if(this.mb?this.mb.on(this.ob.Events.ERROR,this.pb):this.cb.addEventListener(v.Error,this.RF),this.initLiveStreamRetry(),this.xF){const i=this.Jj()?[this.Jj()]:[];this.Wj(i),this.mb?this.FF().then((()=>{t()})):this.VF().then((()=>{t()}))}else t()}))}detachMedia(){this.ub=[],this.mb?(this.mb.detachMedia(),this.destroy()):(this.cb.removeAttribute("src"),this.cb.removeEventListener(v.LoadedMetadata,this.BF),this.cb.removeEventListener(v.Error,this.RF))}setQuality(t){this.dF=t.quality,this.pF=t.height,this.mb&&this.MF(),this.Fj.next(this.currentQualitySettings.height),this.Vj.next(this.currentQualitySettings)}get currentQualitySettings(){return{quality:this.dF,height:this.pF}}onQualityChanged(){return new Promise((()=>{}))}shouldRecoverMediaError(){return!this.lF}destroy(){this.mb?(this.$F(),this.mb.destroy(),this.mb=null):(this.cb.removeEventListener(v.LoadedMetadata,this.BF),this.cb.removeEventListener(v.Error,this.RF))}updateSubtitleTrackSource(t){this.Yj(t)}FF(){return this.EF=new Pt.C,this.mb.attachMedia(this.cb),this.mb.once(this.ob.Events.MEDIA_ATTACHED,this.gb),this.EF.promise}VF(){return this.OF=new Pt.C,this.cb.src=this.bF(this.xF),this.cb.addEventListener(v.LoadedMetadata,this.BF),this.OF.promise}$F(){this.mb.off(this.ob.Events.MEDIA_ATTACHED,this.gb),this.mb.off(this.ob.Events.MANIFEST_PARSED,this.vb),this.mb.off(this.ob.Events.ERROR,this.pb),this.mb.off(this.ob.Events.LEVEL_SWITCHING,this.wF),this.mb.off(this.ob.Events.LEVEL_SWITCHED,this._F),this.mb.off(this.ob.Events.FRAG_BUFFERED,this.SF),this.mb.off(this.ob.Events.FRAG_LOADING,this.PF),this.mb.off(this.ob.Events.FRAG_LOADED,this.AF),this.mb.off(this.ob.Events.BUFFER_APPENDING,this.IF),this.mb.off(this.ob.Events.BUFFER_APPENDED,this.kF),this.mb.off(this.ob.Events.BUFFER_EOS,this.CF)}yb(){this.mb.levels.forEach(((t,i)=>{this.cF&&i>1||this.ub.find((({height:i})=>i===t.height))||this.ub.push({level:i,height:t.height})}))}LF(t,i){(0,s.n)({message:t,exception:this.jF,level:s.D.WARN,callStack:i}),this.uF.next({type:bc.UnexpectedError})}MF(){if(this.dF===y.Auto)this.mb.currentLevel=-1;else try{this.mb.currentLevel=this.ub.find((t=>t.height===this.pF)).level}catch(t){(0,s.n)({message:"HlsSourceHandler_quality_not_present_in_hls_manifest",exception:t.message,callStack:t.stack,level:s.D.CRITICAL})}}bF(t){try{const i=t.getHlsSource(),e=(0,bi.bx)(i);return e&&e.protocol?this.gd.appendParamsToUrl(i):this.gd.appendParamsToUrl(`${this.aF}:${i}`)}catch(t){(0,s.n)({exception:t.message,message:"HlsSourceHandler_undefined_sourceMeta",level:s.D.CRITICAL,callStack:t.stack},{throttle:5,sendMaxLog:!1})}}DF(){return new this.ob(Object.assign(Object.assign({},_c),{cnxRenderWindow:this._c.global}))}initLiveStreamRetry(){var t;null===(t=this.NF)||void 0===t||t.unsubscribe(),this.NF=this.vF.pipe(function(t){for(var i,e,s=[],n=1;n<arguments.length;n++)s[n-1]=arguments[n];var r=null!==(i=Hr(s))&&void 0!==i?i:ze,h=null!==(e=s[0])&&void 0!==e?e:null,o=s[1]||1/0;return(0,wr.e)((function(i,e){var s=[],n=!1,a=function(t){var i=t.buffer;t.subs.unsubscribe(),(0,Ne.P)(s,t),e.next(i),n&&c()},c=function(){if(s){var i=new Fe.w0;e.add(i);var n={buffer:[],subs:i};s.push(n),jr(i,r,(function(){return a(n)}),t)}};null!==h&&h>=0?jr(e,r,c,h,!0):n=!0,c();var l=(0,_r.x)(e,(function(t){var i,e,n=s.slice();try{for(var r=(0,je.XA)(n),h=r.next();!h.done;h=r.next()){var c=h.value,l=c.buffer;l.push(t),o<=l.length&&a(c)}}catch(t){i={error:t}}finally{try{h&&!h.done&&(e=r.return)&&e.call(r)}finally{if(i)throw i.error}}}),(function(){for(;null==s?void 0:s.length;)e.next(s.shift().buffer);null==l||l.unsubscribe(),e.complete(),e.unsubscribe()}),void 0,(function(){return s=null}));i.subscribe(l)}))}(5e3),(0,Yr.h)((t=>t.length<3))).subscribe((()=>{this.yF=!0,this.vF.next(0)}))}}var Pc;!function(t){t.Disabled="disabled",t.Hidden="hidden",t.Showing="showing"}(Pc||(Pc={}));class Ac{constructor(t,i,n,r){this.cb=t,this.Eb=i,this.xf=r,this.UF=!1,this.HF=!1,this.qF=Pc.Hidden,this.Bb=!1,this.zF=new It.x,this.WF=!1,this.JF=t=>{let i=!1;switch(t.type){case v.Play:if(!this.Bb&&this.xf.config.isInAppAndroid)return void this.pause();this.UF=!0;break;case v.Playing:clearTimeout(this.QF),this.xf.config.os.os===St.M.Ios&&this.WF&&((0,e.UR)(this.cb),this.WF=!1),this.YF(),this.zF.next({type:t.type});break;case v.Timeupdate:this.ZF()&&(i=this.KF(t.type)),this.zF.next({type:t.type,payload:{payload:this.UF,isCorruptedCurrentTime:i}});break;case v.Ended:this.zF.next({type:t.type,payload:{isCorruptedCurrentTime:i}});break;case v.Seeked:i=this.KF(t.type),this.zF.next({type:t.type,payload:{isCorruptedCurrentTime:i}});break;case v.Error:clearTimeout(this.QF);const s=this.cb.error?this.cb.error.message:"";this.zF.next({type:t.type,payload:{payload:s}});break;case v.LoadedMetadata:this.HF=!0,(0,dt.kE)(this.tV)&&(this.currentTime=this.tV,this.tV=null),this.zF.next({type:t.type});break;case v.Pause:clearTimeout(this.QF),this.zF.next({type:t.type});break;default:this.zF.next({type:t.type})}},this.play=()=>{this.Bb=!0,clearTimeout(this.QF),this.QF=setTimeout((()=>{this.zF.next({type:v.Error,payload:{payload:"play_timeout"}})}),25e3),this.cb.play().catch((t=>{(0,s.n)({message:"ContentPlayer_play_promise_catch",exception:t,level:s.D.INFO})}))},this.pause=()=>{clearTimeout(this.QF),this.cb.pause(),this.UF=!1,this.Bb=!1},this.volume=n,this.Tl()}get videoEvents(){return this.zF.asObservable()}Tl(){this.Eb.forEach((t=>{this.cb.addEventListener(t,this.JF)}))}KF(t){return this.xf.config.os.os===St.M.Ios&&this.cb.currentTime>this.cb.duration&&((0,e.UR)(this.cb),(0,s.n)({message:"ContentPlayer__CorruptedCurrentTime",callStack:`Event type: ${t}`,level:s.D.WARN},{throttle:10}),!0)}ZF(){return this.cb.currentTime-this.cb.duration>.1}YF(){this.cb.textTracks&&0!==this.cb.textTracks.length&&Object.keys(this.cb.textTracks).forEach((t=>{this.qF===this.cb.textTracks[t].mode&&(this.cb.textTracks[t].mode=this.qF===Pc.Hidden?Pc.Disabled:Pc.Hidden),this.cb.textTracks[t].mode=this.qF}))}setUnfreeze(){this.WF=!0}set poster(t){(0,dt.QM)(t)&&(this.cb.poster=t)}get poster(){return this.cb.poster}get volume(){return this.$l}set volume(t){this.$l=t<=1?t:t/100,this.cb.volume=this.$l,(0,e.Q1)(this.cb,this.$l)}get currentTime(){return this.cb.currentTime}set currentTime(t){this.HF?this.cb.currentTime=t:this.tV=t}get duration(){return this.cb.duration}get playing(){return this.UF}destroy(){this.Eb.forEach((t=>{this.cb.removeEventListener(t,this.JF)}))}setTrackModes(t){this.qF=t,this.YF()}setMetaLoaded(t){this.HF=t}setCrossOriginAttribute(){this.cb.getAttribute("crossorigin")||this.cb.setAttribute("crossorigin","anonymous")}setPoster(t){this.poster=t.getThumbnailUrl(this.cb.clientWidth,this.cb.clientHeight)}getCurrentTrack(){return this.cb.textTracks&&0!==this.cb.textTracks.length?this.cb.textTracks[0]:null}}const Ic={height:0,quality:y.Auto};var kc=function(t,i,e,s){return new(e||(e=Promise))((function(n,r){function h(t){try{a(s.next(t))}catch(t){r(t)}}function o(t){try{a(s.throw(t))}catch(t){r(t)}}function a(t){var i;t.done?n(t.value):(i=t.value,i instanceof e?i:new e((function(t){t(i)}))).then(h,o)}a((s=s.apply(t,i||[])).next())}))};class Cc extends d._{constructor(t,i,e,s,n,r,h={},o,a){super(),this.mediator=t,this.xf=i,this._c=e,this.vf=s,this.Wl=n,this.iV=r,this.sc=h,this.vR=o,this.wD=a,this.eV=!0,this.UL=!1,this.sV=!1,this.jb=new It.x,this.vd=.01,this.qL=[],this.nV=t=>{var i;const e={[bc.LevelSwitching]:C,[bc.StreamEnded]:T,[bc.FragBuffered]:k,[bc.BufferingError]:I}[t.type];if((0,dt.QM)(e))this.mediator.publish(this,e);else{if(t.type===bc.UnexpectedError)return this.sV=!0,void this.rV();if(t.type===bc.ManifestLoaded){const e=null===(i=t.payload)||void 0===i?void 0:i.qualityList;this.mediator.publish(this,O,{payload:{qualityList:e,videoMeta:this.hV}}),this.aV.setMetaLoaded(!0)}}},this.cV=()=>{let t;this.currentTrack.activeCues&&this.currentTrack.activeCues.length>0&&(t=this.currentTrack.activeCues[0]),this.mediator.publish(this,_t[_t.CaptionUpdate],{payload:t})},this.Hj=()=>{this.currentTrack&&(this.currentTrack.mode=this.lV?Pc.Hidden:Pc.Disabled,this.currentTrack.oncuechange=this.cV)},this.uV(),this.dV.appendChild(this.cb),this.vf.appendChild(this.dV),this.wD=this.wD||Ic,this.pV=new wc(e,this.Wl,this.vf,this.cb,this.sc,this.wD),this.xf.config.os.os===St.M.Ios&&this.xf.services.ViewabilityService.on(this.cb,((t,i)=>{!i&&t||this.aV.setUnfreeze()}),{threshold:this.vd})}initHlsSourceHandler(t){const i=this._c.isHttpsProtocolUsed()?xc.Https:xc.Http,e=(0,dt.QM)(this.xf.config.bundleID);this.qb=new Sc(this._c,this.cb,t,i,this.wD,e,this.xf.services.UrlSuffixerService,this.xf.config.browser.browserType===At.lI.Safari)}fV(){return kc(this,void 0,void 0,(function*(){if(this.qb)return!0;const t=yield Hn();return t&&t.isSupported()||(i=this.cb,(0,dt.QM)(i.canPlayType("application/vnd.apple.mpegurl")))?(this.initHlsSourceHandler(t),this.mV(),this.gV(),!0):(this.eV=!1,(0,s.n)({message:"Hls_not_supported",level:s.D.INFO}),!1);var i}))}get onVideoEvents(){return this.jb.asObservable()}start(){try{this.Eb=Object.values(v),this.aV=new Ac(this.cb,this.Eb,this.iV,this.xf),this.vV(),this.mV(),this.yV()}catch(t){(0,s.n)({message:"VideoHandler_start",exception:t.message,callStack:t.stack,level:s.D.CRITICAL})}}rV(){this.bV=this.currentTime,this.setSource(this.hV,!0,!0),this.xV.attachMedia().then((()=>{this.aV.play()})).catch((t=>{this.sV=!1,this.jb.next(v.Error),(0,s.n)({message:"VideoHandler_hls_error_attach_media",exception:t.message,callStack:t.callStack,level:s.D.CRITICAL})}))}gV(){this.qL.push(this.qb.onHlsEvent.subscribe((t=>this.nV(t))))}vV(){this.wV(this.pV)}mV(){this.qb&&this.wV(this.qb)}wV(t){t.start(),this._V(t)}yV(){this.aV.videoEvents.subscribe((t=>{if(t.payload&&t.payload.isCorruptedCurrentTime)this.xV.handlerType===yc.HLS&&this.rV();else{if(t.type===v.Canplay&&this.vR&&(this.currentTime=this.vR,this.vR=null),this.jb.next(t.type),this.sV&&(this.sV=!1,t.type===v.Playing&&(this.aV.currentTime=this.bV)),t.type===v.Error)return(0,s.n)({message:"VideoHandler_play_error_event",exception:t.payload.payload,level:s.D.WARN}),void this.mediator.publish(this,P,t.payload);this.mediator.publish(this,t.type,t.payload)}}))}_V(t){this.qL.push(t.onTrackLoaded.subscribe((()=>this.Hj())),t.onQualityChange.subscribe((t=>this.onQualityChanged(t))),t.onCurrentQuality.subscribe((t=>{this.mediator.publish(this,B,{payload:t})})))}SV(t,i=!1){return kc(this,void 0,void 0,(function*(){if(i)this.PV();else{if(t){if(yield this.fV())return void(this.xV=this.qb)}this.PV()}}))}get width(){return this.dV.getBoundingClientRect().width}get height(){return this.dV.getBoundingClientRect().height}get currentTime(){return this.aV.currentTime}set currentTime(t){this.aV.currentTime=t}forceCurrentTime(t){this.aV.currentTime=t,this.vR=t}get duration(){return this.aV.duration}get volume(){return this.aV.volume}set volume(t){this.aV.volume=t}get playing(){return this.aV.playing}get isIosFullscreen(){return this.UL}set isIosFullscreen(t){this.UL=t,this.UL&&this.lV?this.AV():this.kV()}get currentQualitySettings(){var t;return null===(t=this.xV)||void 0===t?void 0:t.currentQualitySettings}hide(){(0,e.cn)(this.dV,m.pT)}show(){(0,e.IV)(this.dV,m.pT)}setSource(t,i=!1,e=!1){return kc(this,void 0,void 0,(function*(){try{this.hV=t,this.xV&&this.xV.detachMedia();const s=(0,dt.QM)(t.hlsFilePath);return yield this.SV(s,e),t&&t.subtitles&&this.aV.setCrossOriginAttribute(),this.aV.setPoster(t),this.aV.setTrackModes(this.lV?Pc.Hidden:Pc.Disabled),i&&this.aV.setMetaLoaded(!1),this.xV.setSource(t,!0),void this.mediator.publish(this,A)}catch(t){return void(0,s.n)({message:"VideoHandler_set_video_source",exception:t.message,callStack:t.stack,level:s.D.CRITICAL})}}))}setQuality(t){this.xV.setQuality(t)}pause(){this.aV.pause(),this.jb.next(v.Pause)}play(){var t;return this.CV=new Pt.C,null===(t=this.xV)||void 0===t||t.attachMedia().then((()=>{this.aV.play()})).catch((t=>{this.jb.next(v.Error),(0,s.n)({message:"VideoHandler_public_play_attach_media_error",exception:t.message,callStack:t.callStack,level:s.D.CRITICAL})})),this.CV.promise}hasSubtitles(){return(0,f.BZ)(this.hV.subtitles)}getSubtitles(){return this.hV.subtitles}toggleCaptions(){this.xV.updateSubtitleTrackSource(this.hV.getDefaultSubtitle()),this.lV=!0,this.aV.setTrackModes(Pc.Hidden)}showCaptions(t){this.xV.updateSubtitleTrackSource(this.hV.subtitles.find((i=>i.file===t))),this.lV=!0,this.aV.setTrackModes(Pc.Hidden)}hideCaptions(){this.xV.updateSubtitleTrackSource(),this.lV=!1,this.aV.setTrackModes(Pc.Disabled),this.mediator.publish(this,_t[_t.CaptionUpdate])}destroy(){this.xV.destroy(),this.dV.parentNode.removeChild(this.dV)}uV(){this.dV=this._c.createElementByString('<cnx class="cnx-video-wrapper"></cnx>'),this.cb=this._c.createElementByString('<video class="cnx-video-tag"></video>'),this.sc.os===St.M.Ios&&(this.cb.setAttribute("playsinline",""),this.cb.setAttribute("webkit-playsinline",""))}PV(){this.xV=this.pV,this.xV.setQuality({quality:y.Auto,height:0})}onQualityChanged(t){const i=this.aV.playing;this.vR=this.currentTime,i&&this.xV.onQualityChanged&&this.xV.onQualityChanged().then((()=>{this.aV.setMetaLoaded(!1),this.aV.play()})),this.mediator.publish(this,E,{payload:t})}get currentTrack(){return this.aV.getCurrentTrack()}AV(){this.currentTrack&&(this.currentTrack.oncuechange=null,this.mediator.publish(this,_t[_t.CaptionUpdate]),this.currentTrack.mode=Pc.Showing)}kV(){if(this.currentTrack){switch(this.currentTrack.mode){case Pc.Showing:case Pc.Hidden:this.lV=!0;break;case Pc.Disabled:this.lV=!1}this.mediator.publish(this,this.lV?_t[_t.CaptionOn]:_t[_t.CaptionOff])}this.Hj()}}var Tc=function(t,i,e,s){return new(e||(e=Promise))((function(n,r){function h(t){try{a(s.next(t))}catch(t){r(t)}}function o(t){try{a(s.throw(t))}catch(t){r(t)}}function a(t){var i;t.done?n(t.value):(i=t.value,i instanceof e?i:new e((function(t){t(i)}))).then(h,o)}a((s=s.apply(t,i||[])).next())}))};const Mc=168,Ec=91;class Bc extends za{constructor(){super(...arguments),this.TV=!1,this.Ny=l.ProtoQuartilesEnum.Start,this.EV=new Map}start(){const t=Object.create(null,{start:{get:()=>super.start}});return Tc(this,void 0,void 0,(function*(){t.start.call(this),this.iD.next(!0),this.pR.start();try{yield this.aD()}catch(t){}finally{this.lD()}}))}getCurrentVideoIndex(){return this.dR.currentVideoIndex}getPlaylistLenght(){return this.dR.length}SD(t){t=Object.assign(Object.assign({},t),{isInApp:(0,dt.QM)(this.xf.config.bundleID)});const i=new sc(t,!1);this.oD=new fc(this,this.xf.services.GlobalDomUtilsService,this.xf.services.InteractionService,this.xf.services.ResizeObserver,this.vf,i.template,t,this.xf.config.appId,this.LB),this.oD.start()}AD(t){this.Dp.upNextMode===$.ProtoPlayerUpNextMode.Next&&this.pR.duration-this.pR.currentTime<=6&&!this.TV&&(this.TV=!0,this.dR.getVideoData(this.dR.nextVideoIndex,(t=>{const i=t.getThumbnailUrl(Mc,Ec);this.oD.updateUpNextBox(i,t.description)}))),this.BV(this.pR.currentTime,this.pR.duration)}gD(){this.TV=!1,this.Ny=l.ProtoQuartilesEnum.Start}dD(){switch(this.Dp.upNextMode){case $.ProtoPlayerUpNextMode.Loop:this.OV();break;case $.ProtoPlayerUpNextMode.Next:this.LV(),this.rD.streamFormat=Va.Autochain;break;case $.ProtoPlayerUpNextMode.Stop:this.hD.stop(),this.oD.changeState(b.ReplayState)}}lD(){const{preRollBreak:t,postRollBreak:i}=this.Dp,e=(0,dt.r)(t),s=(0,dt.r)(i);this.hD=new $a(this,this.dR,this.pR,e,s,this.xf.config.os.os===St.M.Ios,this.Dp.videoPosition),super.lD()}pD(){super.pD(),this.subscribe(_t[_t.Replay],this.oD,(()=>{this.mediator.publish(this,p.Uh.UserInteraction,{payload:{playback:!0}}),this.OV()})),this.subscribe(_t[_t.Next],this.oD,(()=>{this.mediator.publish(this,p.Uh.UserInteraction,{payload:{playback:!0,clickedNext:!0}}),this.LV(),this.rD.streamFormat=Va.UserInitiated})),this.subscribe(_t[_t.Prev],this.oD,(()=>{this.mediator.publish(this,p.Uh.UserInteraction,{payload:{playback:!0,clickedPrev:!0}}),this.RV()}))}_D(t,i){this.pR=new Cc(this,this.xf,this.xf.services.GlobalDomUtilsService,this.vf,this.xf.services.ResizeObserver,i,t,this.Dp.videoPosition,this.wD)}DV(t,i){return i&&t?Math.floor((0,xi.dQ)(0,i,0,4,t)):l.ProtoQuartilesEnum.Start}BV(t,i){const e=this.DV(t,i);e>l.ProtoQuartilesEnum.Start&&e!==this.Ny&&(this.EV.get(e)||(this.mediator.publish(this,D.ContentQuartiles,{payload:e}),this.EV.set(e,!0)),this.Ny=e)}RV(){this.setVideo(this.dR.prevVideoIndex,!0),this.rD.streamFormat=Va.UserInitiated}LV(){this.setVideo(this.dR.nextVideoIndex)}zR(t=!0){super.zR(t),this.EV.clear()}OV(){this.hD.replay(),this.zR(!1)}}var Oc=function(t,i,e,s){return new(e||(e=Promise))((function(n,r){function h(t){try{a(s.next(t))}catch(t){r(t)}}function o(t){try{a(s.throw(t))}catch(t){r(t)}}function a(t){var i;t.done?n(t.value):(i=t.value,i instanceof e?i:new e((function(t){t(i)}))).then(h,o)}a((s=s.apply(t,i||[])).next())}))};class Lc extends Da{constructor(){super(...arguments),this.jV=!0}start(){const t=Object.create(null,{start:{get:()=>super.start}});return Oc(this,void 0,void 0,(function*(){try{t.start.call(this),this.FV()}catch(t){(0,s.n)({message:"VideoExperience_start",exception:t.message,callStack:t.stack,level:s.D.CRITICAL})}}))}nextVideo(){let t=this.BL.getCurrentVideoIndex();t+1>=this.BL.getPlaylistLenght()?this.changeVideo(0,!1):this.changeVideo(++t,!1)}prevVideo(){let t=this.BL.getCurrentVideoIndex();0!==t?this.changeVideo(--t,!1):this.changeVideo(this.BL.getPlaylistLenght()-1,!1)}getVideoIndex(){return this.BL.getCurrentVideoIndex()}setVideoIndex(t){t>=this.BL.getPlaylistLenght()||!(0,dt.r)(t+1)?console.error("The index provided is out of bounds! Please provide a valid video index!"):this.BL.setVideo(t)}destroy(){this.unsubscribeAll(this.VV),super.destroy()}setVideoPosition(t){t>this.duration||!(0,dt.r)(t)&&0!==t?console.error("The timestamp provided is out of bounds! Please provide a valid timestamp!"):this.currentTime=t}Rp(){this.yp.isInAdPod()?this.jp((()=>{super.Rp(),this.bp.onAdFinished(this.adHandler.linearInImpression,ci.LINEAR,this.yp.isInAdPod());this.BL.show(!0)})):(super.Rp(),this.BL.show(this.jV),this.jV=!0)}ks(){super.ks(),this.$V&&this.NV(),this.VV&&this.VV.onResize(this.$experienceContainer.clientWidth)}generateHTML(){super.generateHTML(),this.Dp.gallery&&this.UV()}YL(){this.BL=new Bc(this,this.Dp,this.app,this.$playerContainer,this.breakPointsHandler.currentBreakpointClass)}NV(){this.Dp.gallery.orientation===$.ProtoGalleryOrientationEnum.Landscape&&(0,e.T7)(this.$V,{height:`${this.$playerWrapper.clientHeight}px`})}UV(){this.$V=this.app.services.GlobalDomUtilsService.createElementByString('<cnx class="cnx-g-container"></cnx>'),this.$experienceContainer.appendChild(this.$V);const t=this.Dp.gallery.orientation===$.ProtoGalleryOrientationEnum.Landscape?m.s6.GalleryLandscape:m.s6.GalleryPortrait;(0,e.cn)(this.$experienceContainer,t)}FV(){this.Dp.gallery&&(this.VV=new xt(this,this.app.services.ResizeObserver,this.app.services.GlobalDomUtilsService,this.app.services.InteractionService,this.$V,this.app.config.device,this.Dp.gallery.style,this.Dp.gallery.orientation,this.Dp.playlist),this.subscribe(D.ChangeVideo,this.VV,(({payload:{videoIndex:t}})=>{this.jV=!this.BL.isHidden,this.yp.endPod(),this.changeVideo(t,!0),this.BL.getVideoData(t,(t=>{this.mediator.publish(this,j.GalleryCardClicked,{payload:this.nR(t)}),this.app.services.TrackingService.trackMediaClick(l.ProtoMediaClickTypeEnum.GalleryClick)})),this.np()})),this.subscribe(A,this.BL,(({payload:{videoIndex:t}})=>{this.VV.setCurrentIndex(t)})),this.subscribe(D.VideoQueued,this.BL,(({payload:{videoIndex:t}})=>{this.VV.setCurrentIndex(t)})),this.subscribe(at.Z[at.Z.Scroll],this.VV,(()=>{this.app.services.TrackingService.trackMediaClick(l.ProtoMediaClickTypeEnum.ScrollClick)})),this.VV.start(),this.VV.onResize(this.$experienceContainer.clientWidth))}}class Rc{constructor(){this.Pf={}}on(t,i){if(this.Pf[t]=this.Pf[t]||[],!(0,dt.mf)(i))throw new Error(`${t} event callback is not a function`);return this.Pf[t].push(i),()=>this.Pf[t]=this.Pf[t].filter((t=>t!==i))}once(t,i){const e=this.on(t,(t=>{try{i(t)}catch(t){}e()}))}remove(t,i){this.Pf[t]&&(this.Pf[t]=this.Pf[t].filter((t=>t!==i)))}removeAll(){this.Pf={}}trigger(t,i){this.Pf[t]&&this.Pf[t].forEach((t=>{try{t(i)}catch(t){}}))}}class Dc extends class{constructor(t){this.experience=t,this.HV=(t,i)=>this.fa.on(t,i),this.qV=(t,i)=>{this.fa.remove(t,i)},this.zV=()=>{this.fa.removeAll()},this.WV=(t,i)=>{this.fa.once(t,i)},this.GV=()=>this.experience.isViewable(),this.JV=t=>{this.experience.setViewableThreshold(t)},this.QV=()=>{this.experience.play()},this.YV=()=>{this.experience.pause()},this.XV=()=>this.experience.getVolume(),this.ZV=t=>{this.experience.setVolume(t)},this.Ru=()=>{this.experience.triggerDestroy()},this.KV=()=>{this.experience.disableAdvertising()},this.t$=()=>{this.experience.enableAdvertising()},this.i$=()=>{this.experience.enableFloatingMode()},this.e$=()=>{this.experience.disableFloatingMode()},this.s$=()=>this.experience.isFloatingModeEnabled(),this.Du=t=>{this.experience.setFloatingSettings(t)},this.n$=t=>{this.experience.setCustomMacros(t)},this.r$=t=>{this.experience.setAmpUserConsent(t)},this.fa=new Rc}trigger(t,i){this.fa.trigger(t,i)}setDestroyed(){this.trigger(Tt.Km.Removed)}getApiMethods(){return{on:this.HV,remove:this.qV,removeAll:this.zV,once:this.WV,isViewable:this.GV,setViewableThreshold:this.JV,play:this.QV,pause:this.YV,getVolume:this.XV,setVolume:this.ZV,disableAdvertising:this.KV,enableAdvertising:this.t$,enableFloatingMode:this.i$,disableFloatingMode:this.e$,isFloatingModeEnabled:this.s$,setFloatingSettings:this.Du,setMacros:this.n$,setAmpUserConsent:this.r$,destroy:this.Ru}}}{constructor(){super(...arguments),this.h$=()=>this.experience.type,this.wv=()=>this.experience.getSize(),this.o$=(t,i)=>{this.experience.setSize(t,i)}}getApiMethods(){return Object.assign(Object.assign({},super.getApiMethods()),{getPlayerType:this.h$,getSize:this.wv,setSize:this.o$})}}class jc extends Dc{constructor(t){super(t),this.experience=t,this.a$=()=>this.experience.getVideoDetails(),this.c$=()=>this.experience.getPlaylistId(),this.l$=()=>this.experience.currentTime,this.u$=t=>{this.experience.setVideoPosition(t)},this.d$=()=>this.experience.duration,this.p$=t=>{this.experience.toggleFullscreen(t)},this.f$=t=>{t?this.experience.toggleCaptions():this.experience.hideCaptions()},this.m$=()=>this.experience.getSubtitles(),this.g$=t=>{t&&t.file?this.experience.showCaptions(t.file):this.experience.hideCaptions()},this.v$=t=>{this.experience.toggleExpandButton(t)},this.y$=()=>this.experience.getQuality(),this.b$=t=>{this.experience.setQuality(t)},this.x$=()=>{this.experience.setAutoQuality()},this.w$=()=>this.experience.getAvailableQualities(),this._$=()=>{this.experience.nextVideo()},this.S$=()=>{this.experience.prevVideo()},this.P$=t=>{this.experience.setPreRollBreak(t)},this.A$=t=>{this.experience.setPostRollBreak(t)},this.I$=()=>this.experience.getVideoIndex(),this.C$=t=>{this.experience.setVideoIndex(t)}}getApiMethods(){return Object.assign(Object.assign({},super.getApiMethods()),{getVideoDetails:this.a$,getVideoCurrentPosition:this.l$,setVideoPosition:this.u$,getVideoDuration:this.d$,toggleFullscreen:this.p$,toggleSubtitles:this.f$,getSubtitles:this.m$,setSubtitle:this.g$,toggleFullscreenButton:this.v$,getPlaylistId:this.c$,getQuality:this.y$,setQuality:this.b$,setAutoQuality:this.x$,getAvailableQualities:this.w$,nextVideo:this._$,prevVideo:this.S$,setPreRollBreak:this.P$,setPostRollBreak:this.A$,getVideoIndex:this.I$,setVideoIndex:this.C$})}}class Fc extends ho{constructor(t,i,e,s,n={},r){super(t,i,e,r,new va(e,s,i,n)),this.mediator=t,this.$container=i,this.mM={},this.$uiContainer.style.backgroundColor=`${n.backgroundColor}`}handleComponentEvent(t){switch(t){case $h[$h.CloseButton]:this.mediator.publish(this,_t[_t.Close]);break;case _t[_t.Expand]:this.mediator.publish(this,_t[_t.Expand]);break;case _t[_t.Collapse]:this.mediator.publish(this,_t[_t.Collapse])}}}class Vc extends sc{FD(t){switch(t){case $.ProtoLogoPositionMode.BottomLeft:return"ui-home-screen-logo-bottom-left";case $.ProtoLogoPositionMode.BottomRight:return"ui-home-screen-logo-bottom-right";case $.ProtoLogoPositionMode.TopLeft:return"ui-home-screen-logo-top-left";case $.ProtoLogoPositionMode.TopRight:return this.zt.isCloseButton?"ui-home-screen-logo-top-left":"ui-home-screen-logo-top-right";case $.ProtoLogoPositionMode.Center:return"ui-home-screen-logo-center";default:return}}CD(){return`<cnx class="cnx-logo-bar ${this.FD(this.zt.logoPosition)}">[[${$h.LogoOutstream}]]</cnx>`}get template(){var t,i;return`\n        <cnx class="cnx-ui cnx-ui-home-screen">\n        ${this.CD()}\n            <cnx class="cnx-ui-bar">\n                <cnx class="cnx-ui-head-buttons">\n                    ${this.$D}\n                </cnx>\n                ${this.ND}\n            </cnx>\n          ${(null===(i=null===(t=this.zt)||void 0===t?void 0:t.uiComponentsVisibility)||void 0===i?void 0:i.expandButton)?`<cnx class="cnx-ad-expand-button cnx-ui-btn">[[${$h.ExpandButton}]]</cnx>`:""}\n        </cnx>`.trim()}}class $c extends Ia{constructor(){super(...arguments),this.T$=[],this.enterFullScreen=()=>{this.QL.enterFullScreen().then().catch((t=>{(0,s.n)({level:s.D.WARN,message:"OutstreamAdHandler_enterFullscreen"})}))},this.exitFullscreen=()=>{this.QL.exitFullScreen()},this.Gp=()=>{this.mediator.publish(this,Tt.Zr.FullscreenChanged,{payload:!1}),this.mediator.publish(this,_t[_t.Collapse],{payload:!1}),this.xf.services.InteractionService.enableScrollEvent(),this.xf.services.EventsStorageService.emitOnExitFullscreen(),this.linearAdUserInterface.collapse(),this.setVastViewMode(qt.zc.Normal)},this.Wp=()=>{this.mediator.publish(this,Tt.Zr.FullscreenChanged,{payload:!0}),this.mediator.publish(this,_t[_t.Expand],{payload:!1}),this.xf.services.InteractionService.disableScrollEvent(),this.xf.services.EventsStorageService.emitOnEnterFullscreen(),this.linearAdUserInterface.expand(),this.setVastViewMode(qt.zc.Fullscreen)}}initFullScreen(){this.QL=new kt(this.xf.services.GlobalDomUtilsService,this.Qf.parentElement,this.xf.config.os.os),this.uR()}uR(){this.T$.push(this.onFullcreenChange.subscribe((t=>{t===_t.Expand?this.enterFullScreen():this.exitFullscreen()}))),this.sR()}sR(){const t=this.QL.onFullScreenEnter.subscribe((()=>this.Wp())),i=this.QL.onFullScreenExit.subscribe((()=>this.Gp()));this.T$.push(i,t)}destroy(){super.destroy(),(0,jt.i)(this.T$)}xO(){return!1}}var Nc=function(t,i,e,s){return new(e||(e=Promise))((function(n,r){function h(t){try{a(s.next(t))}catch(t){r(t)}}function o(t){try{a(s.throw(t))}catch(t){r(t)}}function a(t){var i;t.done?n(t.value):(i=t.value,i instanceof e?i:new e((function(t){t(i)}))).then(h,o)}a((s=s.apply(t,i||[])).next())}))};class Uc extends Oa{constructor(){super(...arguments),this.events=Object.assign(Object.assign({},Tt.Km),F),this.M$=!1,this.E$=!1,this.B$=!1,this.O$=t=>{"max-height"===t.propertyName&&(this.$experienceContainer.removeEventListener("transitionend",this.O$),this.handleClose())}}Sp(){return new $c(this,this.Dp,this.$playerContainer,this.checkFloatingViewability(this.isViewable()),this.yp,this.app,this.gd,Vt.None)}L$(){this.adHandler&&this.adHandler.linearInImpression?this.M$=!0:this.R$()}R$(){this.adHandler&&this.unsubscribeAll(this.adHandler),this.bp.onContentStop(),this.Dp.outstreamSettings.endAdBreakPolicy===$.ProtoOutstreamEndAdBreakPolicyEnum.Hide&&this.D$(!0),this.mediator.publish(this,F.AdCycleComplete)}j$(){const t={logoPosition:this.Dp.logoPosition,logoUrl:this.Dp.logoUrl,isCloseButton:this.Dp.isCloseButton,closeButtonMode:this.Dp.closeButtonMode,backgroundColor:this.Dp.outstreamSettings.houseScreenBackgroundColor,uiComponentsVisibility:{expandButton:this.Dp.uiComponentsVisibility.expandButton&&this.app.config.os.os!==St.M.Ios}},i=new Vc(t).template;this.F$=new Fc(this,this.$playerContainer,this.app.services.GlobalDomUtilsService,this.app.services.InteractionService,t,i),this.subscribe(_t[_t.Close],this.F$,(()=>{this.handleClose()})),this.subscribe(_t[_t.Expand],this.F$,(()=>{this.adHandler.enterFullScreen()})),this.subscribe(_t[_t.Collapse],this.F$,(()=>{this.adHandler.exitFullscreen()}))}V$(){this.B$&&((0,e.IV)(this.$experienceContainer,m.s6.Collapsed),this.mediator.publish(this,F.Collapsed,{payload:!1}),this.B$=!1,this.dp())}D$(t=!1){if(!this.B$){if(t){const t=setTimeout((()=>{this.$experienceContainer.removeEventListener("transitionend",this.O$),this.handleClose()}),1e3);this.$experienceContainer.addEventListener("transitionend",(i=>{clearTimeout(t),this.O$(i)}))}(0,e.cn)(this.$experienceContainer,m.s6.Collapsed),this.mediator.publish(this,F.Collapsed,{payload:!0}),this.B$=!0,this.up()}}$$(){this.$experienceContainer.style.maxHeight=`${this.$playerContainer.clientHeight}px`}N$(){this.F$&&this.F$.hide()}U$(){this.F$&&this.F$.show()}handleClose(){this.triggerDestroy()}ks(){super.ks(),this.$$()}Lp(t=!1){super.Lp(t),this.M$&&this.R$()}Wu(t,i=!1){super.Wu(t,i),!this.E$&&t&&(this.E$=!0,this.H$())}Rp(){this.yp.isInAdPod()?this.jp((()=>{this.bp.onAdFinished(this.adHandler.linearInImpression,ci.LINEAR,this.yp.isInAdPod()),super.Rp(),this.U$(),this.yp.setNewBreak($.ProtoAdSlotsEnum.MidRoll)})):(super.Rp(),this.yp.setNewBreak($.ProtoAdSlotsEnum.MidRoll),this.U$())}Op(){super.Op(),this.N$()}addPlayerSize(){super.addPlayerSize(),this.Dp.playerSize.responsive?this.$playerWrapper.appendChild(this.Jp()):this.setFixedSize(this.$playerWrapper)}qp(){}H$(){var t;if(this.Dp.adPlaybackMode===$.ProtoAdPlaybackMode.ScrollToPlay&&!this.E$)return;this.pp($.ProtoAdSlotsEnum.MidRoll);null===(t=this.adHandler)||void 0===t||t.contentPlaybackStateChanged(true),this.bp.contentPlaybackStateChanged(true)}vp(){this.op(yi.I.Standalone)}q$(){}start(){const t=Object.create(null,{start:{get:()=>super.start}});var i,n;return Nc(this,void 0,void 0,(function*(){try{t.start.call(this),this.$p(),this.adHandler?(this.adHandler.start(this.$playerContainer.clientWidth,this.$playerContainer.clientHeight,this.Dp.soundMode===$.ProtoPlayerSoundMode.On?1:0,this.Dp.uiComponentsVisibility.expandButton&&this.app.config.os.os!==St.M.Ios,!1),this.adHandler.initFullScreen(),this.bp.forceRecheck(),null===(i=this.adHandler)||void 0===i||i.onVpaidEvent.subscribe((t=>{t.type===qt.fI.AdImpression&&this.V$()})),null===(n=this.adHandler)||void 0===n||n.onLinearUiComponentEvent.subscribe((t=>{switch(t.type){case _t.Volume:const{volume:i}=t.payload;this.ys(i);break;case _t.Expand:this.expand();break;case _t.Collapse:this.collapse()}}))):this.D$(),this.H$(),this.subscribe(Gt,this.bp,(()=>{this.L$()})),this.subscribe(Jt,this.bp,(()=>{this.L$()})),this.Dp.outstreamSettings.initialRendering===$.ProtoOutstreamInitialRenderingEnum.ExpandWithAd&&(this.D$(),(0,e.Tp)(this.$playerContainer)),(0,e.cn)(this.$experienceContainer,m.Gj.Collapsable),this.$$(),this.Dp.outstreamAdAsContent||this.j$()}catch(t){(0,s.n)({message:"Outsream_start",exception:t.message,callStack:t.stack,level:s.D.CRITICAL})}}))}getVolume(){if(this.adHandler)return this.adHandler.getLinearVolume()}get currentTime(){return 0}get duration(){return 0}destroy(){super.destroy(),this.F$&&this.F$.destroy()}expand(){var t;null===(t=this.F$)||void 0===t||t.getComponent($h.ExpandButton).setState(ao.expand)}collapse(){var t;null===(t=this.F$)||void 0===t||t.getComponent($h.ExpandButton).setState(ao.collapse)}}class Hc extends $a{play(){if(this.z$)return this.$R=b.PlayingState,this.z$=!1,void this.FR();super.play()}pause(t=!1){this.jR(b.LiveStreamEnded)||this.jR(b.LiveStreamStarting)||this.jR(b.LiveStreamStopped)||(t&&(this.z$=!0),super.pause())}endOfStream(){this.pause(),this.handleVideoEnd()}enterLiveNotSupported(){this.LR(b.LiveStreamNotSupported)}enterLiveStreamStopped(){this.LR(b.LiveStreamStopped)}AR(){this.IR=b.LiveStreamStarting,this.kR=b.LiveStreamStarting}qR(){this.LR(b.LiveStreamEnded)}RR(){this.pR.pause(),this.LR(b.LiveStreamStopped)}}class qc extends Kh{initState(){const t=this.context.getComponent($h.LivePoster);t.setMessageToStarting(),t.show(),this.context.overlayModule.removeOverlayClickEvents(),this.context.overlayModule.disableHover()}exitState(){this.context.getComponent($h.LivePoster).hide(),this.context.setFullProgressBarUI(),this.context.overlayModule.addOverlayClickEvents(),this.context.overlayModule.enableHover()}}class zc extends Kh{initState(){const t=this.context.getComponent($h.LivePoster);this.context.$uiContainer.classList.add(m.s_.LiveEnded),t.setIconToEnded(),t.setMessageToEnded(),t.show();const i=this.context.getComponent($h.LiveIcon);null==i||i.hideComponent(),this.context.overlayModule.removeOverlayClickEvents(),this.context.overlayModule.disableHover()}exitState(){}}class Wc extends rc{initState(){super.initState();const t=this.context.getComponent($h.LivePoster);t.hideMessage(),t.show();const i=this.context.getComponent($h.LiveIcon);null==i||i.showComponent()}exitState(){super.exitState();const t=this.context.getComponent($h.LivePoster);t.hide(),t.showMessage()}}class Gc extends Kh{initState(){const t=this.context.getComponent($h.LivePoster);(0,e.cn)(this.context.$uiContainer,m.s_.LiveEnded),t.setMessageToNotSupported(),t.show(),this.context.overlayModule.hideUiControls(),this.context.overlayModule.destroy()}exitState(){}}class Jc extends dc{constructor(){super(...arguments),this.W$={[b.LiveStreamStarting]:new qc(this),[b.LiveStreamEnded]:new zc(this),[b.LiveStreamStopped]:new Wc(this),[b.LiveStreamNotSupported]:new Gc(this)}}start(){this.mM=Object.assign(Object.assign({},this.mM),this.W$),super.start()}onResize(t){super.onResize(t),this.setFullProgressBarUI()}updateDuration(){this.setFullProgressBarUI()}setFullProgressBarUI(){const t=this.getComponent($h.ProgressBar);t&&t.setProgress(100)}Lj(){this.mM[b.LiveStreamStarting].enterState()}updateCurrentVideo(t){super.updateCurrentVideo(t);const i=this.getComponent($h.LivePoster);if(i){const e=t.getThumbnailUrl(this.$uiContainer.clientWidth,this.$uiContainer.clientHeight);i.setPosterSrc(e),i.setPosterAltText(t.altText),(0,dt.QM)(t.startDate)&&i.handleDelayedStart(t.startDate)}}}class Qc extends Cc{play(){const t=this.xV.liveSyncPosition;return t&&(this.aV.currentTime=t),super.play()}endOfStream(){this.xV.detachMedia()}get hlsSupported(){return this.eV}rV(){this.CV&&this.CV.isPending&&this.CV.reject(),this.xV.detachMedia(),this.mediator.publish(this,M)}initHlsSourceHandler(t){super.initHlsSourceHandler(t)}}var Yc=function(t,i,e,s){return new(e||(e=Promise))((function(n,r){function h(t){try{a(s.next(t))}catch(t){r(t)}}function o(t){try{a(s.throw(t))}catch(t){r(t)}}function a(t){var i;t.done?n(t.value):(i=t.value,i instanceof e?i:new e((function(t){t(i)}))).then(h,o)}a((s=s.apply(t,i||[])).next())}))};class Xc extends za{constructor(){super(...arguments),this.J$=!1,this.Q$=()=>{this.dR.getCurrentVideoData((()=>{this.pR.onVideoEvents.pipe((0,Yr.h)((t=>t===v.Playing&&!this.J$)),ja(1),Zr((()=>this.J$=!0))).subscribe((()=>{this.hD.enterLiveStreamStopped(),this.pR.pause(),this.iD.next(!0)})),this.pR.play().catch((()=>{}))})),this.pR.play()},this.Y$=()=>{this.hD.endOfStream(),this.pR.endOfStream()}}start(){const t=Object.create(null,{start:{get:()=>super.start}});return Yc(this,void 0,void 0,(function*(){t.start.call(this),this.X$(),this.Z$(),this.lD(),this.pR.hlsSupported?(this.pR.start(),this.aD().then((()=>{this.Q$()}))):this.hD.enterLiveNotSupported()}))}destroy(){this.K$(),this.iN(),super.destroy()}X$(){this.subscribe(T,this.pR,this.Y$),this.subscribe(C,this.pR,(()=>{this.hD.onEnterBuffering()}))}Z$(){this.relay(R,this.oD,this,this.mediator)}SD(t){const i=new sc(t,!0);this.oD=new Jc(this,this.xf.services.GlobalDomUtilsService,this.xf.services.InteractionService,this.xf.services.ResizeObserver,this.vf,i.template,t,this.xf.config.appId,this.LB),this.oD.start()}AD(t){this.eN(t)}gD(){}dD(){}lD(){const{preRollBreak:t,postRollBreak:i}=this.Dp,e=(0,dt.r)(t),s=(0,dt.r)(i);this.hD=new Hc(this,this.dR,this.pR,e,s,this.xf.config.os.os===St.M.Ios,this.Dp.videoPosition),super.lD()}nD(){super.nD(),this.subscribe(M,this.pR,(()=>{clearTimeout(this.nN),this.nN=setTimeout(this.Q$,10*Ht.s_)}))}_D(t,i){this.pR=new Qc(this,this.xf,this.xf.services.GlobalDomUtilsService,this.vf,this.xf.services.ResizeObserver,i,t,this.Dp.videoPosition)}eN(t){this.K$(),t&&(this.rN=setInterval((()=>{this.hD.isInPlayingState()&&(this.Y$(),this.K$())}),10*Ht.s_))}K$(){this.rN&&(clearInterval(this.rN),this.rN=null)}iN(){this.nN&&(clearInterval(this.nN),this.nN=null)}}var Zc,Kc,tl=function(t,i,e,s){return new(e||(e=Promise))((function(n,r){function h(t){try{a(s.next(t))}catch(t){r(t)}}function o(t){try{a(s.throw(t))}catch(t){r(t)}}function a(t){var i;t.done?n(t.value):(i=t.value,i instanceof e?i:new e((function(t){t(i)}))).then(h,o)}a((s=s.apply(t,i||[])).next())}))};class il extends Da{start(){const t=Object.create(null,{start:{get:()=>super.start}});return tl(this,void 0,void 0,(function*(){try{t.start.call(this)}catch(t){(0,s.n)({message:"LiveExperience_start",exception:t.message,callStack:t.stack,level:s.D.CRITICAL})}}))}YL(){this.BL=new Xc(this,this.Dp,this.app,this.$playerContainer,this.breakPointsHandler.currentBreakpointClass)}Rp(){this.yp.isInAdPod()?this.jp((()=>{super.Rp(),this.bp.onAdFinished(this.adHandler.linearInImpression,ci.LINEAR,this.yp.isInAdPod()),this.BL.show(true)})):(super.Rp(),this.BL.show(true))}tR(){super.tR(),this.subscribe(R,this.BL,(({payload:{thumbnailUrl:t}})=>{this.adHandler&&this.adHandler.setAdLoadingBackgroundUrl(t)}))}}class el extends Dc{}class sl extends S{constructor(){super(...arguments),this.Ca="cnx-el"}createExperience(t,i){t.isInStreamType()?(this.experience=new Lc(this,i,this.app.services.UrlSuffixerService),this.experienceApi=new jc(this.experience)):t.isLiveType()?(this.experience=new il(this,i,this.app.services.UrlSuffixerService),this.experienceApi=new jc(this.experience)):(this.experience=new Uc(this,i,this.app.services.UrlSuffixerService),this.experienceApi=new el(this.experience))}isSupportedBreakpoint(t){return!0}subscribeToEvents(){super.subscribeToEvents(),this.playerModel.html&&this.subscribe(D.MediaMetaUpdate,this.experience,(({payload:{title:t,description:i}})=>{this.updateMacroContent(this.macroElements.title,t),this.updateMacroContent(this.macroElements.description,i)}))}getApiMethods(){return this.experienceApi.getApiMethods()}}class nl{constructor(){this.hN=[],this.oN=0,this.aN=!1,this.cN=t=>{this.hN.forEach((i=>{t&&t!==i.element||this.lN(i,this.oN)}))}}uN(t){let i=this.hN.find((i=>i.element===t));return i||(i={element:t,list:[],cachedPercentInView:0},this.hN.push(i)),i.list}lN(t,i){t.list.forEach((t=>{!t.callbackSent&&t.threshold<=i?(t.callbackSent=!0,t.timeout=(0,bi.ld)(t.callback,t.callbackDelay,!0,this.aN)):t.callbackSent&&t.threshold>i&&(t.callbackSent=!1,clearTimeout(t.timeout),t.timeout=(0,bi.ld)(t.callback,0,!1,this.aN))}))}on(t,i,e){this.uN(t).push({threshold:e.threshold,callbackSent:!1,callbackDelay:e.callbackDelay,timeout:null,callback:i}),this.cN()}off(t,i){const e=this.hN.find((i=>i.element===t));if(e){for(let t=e.list.length;t--;)e.list[t].callback===i&&e.list.splice(t,1);0===e.list.length&&this.hN.splice(this.hN.indexOf(e))}}check(t={threshold:.1}){return this.oN>=t.threshold}triggerRecheck(t){this.cN(t)}dN(t){this.aN=t}setViewableThreshold(t){this.oN=t,this.triggerRecheck()}getIsTabInFocus(){return!0}subscribe(t,i){}destroy(){for(let t=this.hN.length;t--;){const i=this.hN[t];for(let t=i.list.length;t--;)clearTimeout(i.list[t].timeout),this.off(i.element,i.list[t].callback)}}}!function(t){t[t.none=0]="none",t[t.friendly=1]="friendly",t[t.safe=2]="safe"}(Zc||(Zc={}));class rl{constructor(t,i,e=!1){this.$e=t,this.pN=i,this.hN=[],this.fN=Zc.none,this.mN={intersectionObserver:!1,fallbackImplementation:!1},this.gN=null,this.vN=[0,.01,.1,.2,.5],this.yN=250,this.bN=!1,this.xN=t=>{this.bN=t,this.cN(),_.S.pageFocus=t},this.cN=()=>{this.hN.forEach((t=>{const i=this.oN(t.element);this.onViewHandle(t,i)}))},this.wN=()=>{null===this.gN&&(this.gN=setTimeout((()=>{this.cN(),clearTimeout(this.gN),this.gN=null}),this.yN))},this._N(e),this.SN(),this.PN()}PN(){this.pN.on(this.xN),_.S.pageFocus=this.pN.isDocumentVisible()}_N(t){this.$e.IntersectionObserver&&!t?this.mN.intersectionObserver=!0:this.mN.fallbackImplementation=!0,this.$e.self!==this.$e.top?(this.AN=this.IN(this.$e),null!==this.AN?this.fN=Zc.friendly:this.fN=Zc.safe):this.AN=this.$e.frameElement}IN(t){let i;try{if(i=t.parent,i===this.$e.top)return t.frameElement}catch(t){return null}return this.IN(i)}SN(){this.mN.intersectionObserver?this.kN=new this.$e.IntersectionObserver(this.onObserverEnter.bind(this),{root:null,rootMargin:"0px",threshold:this.vN}):(this.$e.addEventListener("scroll",this.wN),this.$e.addEventListener("load",this.cN),this.$e.addEventListener("resize",this.cN))}CN(t){return this.hN.find((i=>i.element===t))}oN(t){if(this.fN===Zc.safe){const i=this.CN(t);return i?i.cachedPercentInView:0}let i=1;const e=t.getBoundingClientRect(),s={bottomRatio:e.bottom/e.height,topRatio:(this.$e.top.innerHeight-e.top)/e.height,leftRatio:(this.$e.top.innerWidth-e.left)/e.width,rightRatio:e.right/e.width};return Object.keys(s).forEach((t=>{s[t]<=0&&(i=0),s[t]>0&&s[t]<1&&(i*=s[t])})),i}onObserverEnter(t){t.forEach((t=>{this.hN.filter((i=>i.element===t.target)).forEach((i=>{this.onViewHandle(i,t.intersectionRatio)}))}))}onViewHandle(t,i){t.cachedPercentInView=i,t.list.forEach((t=>{!t.callbackSent&&t.threshold<=i&&this.bN?(t.callbackSent=!0,t.timeout=(0,bi.ld)(t.callback,t.callbackDelay,!0)):t.callbackSent&&(t.threshold>i||!this.bN)&&(t.callbackSent=!1,clearTimeout(t.timeout),t.timeout=(0,bi.ld)(t.callback,0,!1))}))}on(t,i,e={}){let s=!1;if(this.mN.fallbackImplementation)if(this.fN===Zc.friendly&&t.ownerDocument.defaultView!==this.$e.top)t=this.AN;else if(this.fN===Zc.safe)return void(0,bi.ld)(i,0,!1);let n=this.hN.find((i=>i.element===t));n?s=!0:(n={element:t,list:[],cachedPercentInView:0},this.hN.push(n)),n.list.push({threshold:e.threshold,callbackSent:!1,callbackDelay:e.callbackDelay,timeout:null,callback:i}),this.mN.intersectionObserver?(s&&this.kN.unobserve(t),this.kN.observe(t)):this.mN.fallbackImplementation&&this.cN()}off(t,i){const e=this.hN.find((i=>i.element===t));if(e){let s=e.list.length;for(;s;)s--,e.list[s].callback===i&&e.list.splice(s,1);0===e.list.length&&(this.kN&&this.kN.unobserve(t),this.hN.splice(this.hN.indexOf(e),1))}}check(t={threshold:.1}){if(!t.element)return!1;let i=t.element;return this.fN===Zc.friendly&&(i=this.AN),this.oN(i)>=t.threshold&&this.bN}triggerRecheck(t){this.mN.fallbackImplementation&&t&&this.hN.forEach((i=>{if(i.element===t){const t=this.oN(i.element);this.onViewHandle(i,t)}}))}setViewableThreshold(t){}getIsTabInFocus(){return this.bN}subscribe(t,i){}destroy(){this.$e.removeEventListener("scroll",this.wN),this.$e.removeEventListener("load",this.cN),this.$e.removeEventListener("resize",this.cN);[].slice.call(this.hN).forEach((t=>{[].slice.call(t.list).forEach((i=>{this.off(t.element,i.callback),this.$e.clearTimeout(i.timeout)}))})),this.pN.off(this.xN),clearTimeout(this.gN)}}function hl(t){return(0,dt.as)(t)&&"[object RegExp]"!==Object.prototype.toString.call(t)&&"[object Date]"!==Object.prototype.toString.call(t)}function ol(t){return hl(t)?al({},t):t}function al(t,i){return function(t,i){const e={};return hl(t)&&Object.keys(t).forEach((i=>{e[i]=ol(t[i])})),Object.keys(i).forEach((s=>{hl(i[s])&&t[s]?e[s]=al(t[s],i[s]):e[s]=ol(i[s])})),e}(t,i)}!function(t){t[t.Normal=0]="Normal",t[t.Buzzfeed=1]="Buzzfeed"}(Kc||(Kc={}));class cl{constructor(t=0){this.TN=t,this.MN=16,this.EN=9}getHeightByRatio(t){return Math.round(t/this.MN*this.EN)+this.TN}}class ll{constructor(t,i,e={}){this.floatingMode=(0,dt.$K)(e.mode)?e.mode:t.floatingMode,(0,f.BZ)(e.devices)?this.floatingDeviceMode=e.devices:this.floatingDeviceMode=(0,f.BZ)(t.floatingDeviceMode)?t.floatingDeviceMode:[l.ProtoDeviceType.Desktop],(0,dt.$K)(e.closeButton)?this.floatingCloseButtonMode=e.closeButton:(0,dt.$K)(t.floatingCloseButtonMode)?this.floatingCloseButtonMode=t.floatingCloseButtonMode:this.floatingCloseButtonMode=l.ProtoPlayerCloseButtonMode.OnHover,this.floatingPosition=(0,dt.$K)(e.fixedPosition)?e.fixedPosition:t.floatingFixedPosition,this.floatingScrollPosition=(0,dt.$K)(e.scrollPosition)?e.scrollPosition:t.floatingScrollPosition,this.floatingWidth=(0,dt.$K)(e.floatingWidth)?e.floatingWidth:t.floatingWidth||400,this.floatingGutterX=(0,dt.$K)(e.floatingGutterX)?e.floatingGutterX:t.floatingGutterX,this.floatingGutterY=(0,dt.$K)(e.floatingGutterY)?e.floatingGutterY:t.floatingGutterY,this.pageElement=(0,dt.$K)(e.floatingPageElement)?e.floatingPageElement:t.floatingPageElement,this.appendLocation=(0,dt.$K)(e.floatingAppendLocation)?e.floatingAppendLocation:t.floatingAppendLocation,this.floatingYAxisPadding=(0,dt.$K)(e.floatingYAxisPadding)?e.floatingYAxisPadding:t.floatingYAxisPadding,this.setScrollPosition(this.floatingScrollPosition),this.BN=new cl(i)}setScrollPosition(t){this.LN=t===l.ProtoPositionMode.BottomLeft||t===l.ProtoPositionMode.TopLeft,this.RN=t===l.ProtoPositionMode.BottomRight||t===l.ProtoPositionMode.TopRight,this.DN=t===l.ProtoPositionMode.TopLeft||t===l.ProtoPositionMode.TopRight,this.jN=t===l.ProtoPositionMode.BottomRight||t===l.ProtoPositionMode.BottomLeft}get isPositionedLeft(){return this.LN}get isPositionedRight(){return this.RN}get isPositionedTop(){return this.DN}get isPositionedBottom(){return this.jN}set isPositionedLeft(t){this.LN=t}set isPositionedRight(t){this.RN=t}set isPositionedBottom(t){this.jN=t}set isPositionedTop(t){this.DN=t}set width(t){this.floatingWidth=t}set gutterX(t){this.floatingGutterX=t}set gutterY(t){this.floatingGutterY=t}get width(){return this.floatingWidth}getHeight(t){return`${this.BN.getHeightByRatio(t)}px`}}class ul{constructor(t){this.jE=[],this.Kf=t.id,this.FN=t.title,this.Ku=t.altText,this.VN=t.description,this.$N=t.imageUrl,this.Xj=t.sources,this.Ab=t.clickUrl||"",this.UN=t.hlsFilePath||"",this.HN=t.liveStreamFilePath||"",this.qN=t.liveStramStartDate||"",this.Xj&&this.Xj.forEach((t=>{this.jE.push({label:L[t.quality],videoHeight:t.quality,isHD:t.quality>=720})}))}get id(){return this.Kf}get title(){return this.FN}get altText(){return(0,dt.$K)(this.Ku)?this.Ku:""}get description(){return this.VN}get clickUrl(){return this.Ab}getSources(t){return[{src:this.Xj.find((i=>i.quality===this.getClosestSourceQuality(t).videoHeight)).file,type:new mc(x.H264).type}]}getHlsSource(){return this.HN||this.UN}getAvailableQualities(){return this.jE.sort(((t,i)=>t.videoHeight-i.videoHeight))}getThumbnailUrl(){return this.$N}get hlsFilePath(){return this.HN||this.UN}getClosestSourceQuality(t){let i;const e=(0,xi.DE)(t,this.jE.map((t=>t.videoHeight)));return this.jE.forEach((t=>{t.videoHeight===e&&(i=t)})),i}setAvailableQualities(t){this.jE=t}get startDate(){return this.qN}getDefaultSubtitle(){return null}}class dl{constructor(t){this.zN=new ul(t)}getMetadata(t){t&&t(this.zN)}setAvailableQualities(t){this.zN.setAvailableQualities(t)}}var pl=o(5732),fl=function(t,i,e,s){return new(e||(e=Promise))((function(n,r){function h(t){try{a(s.next(t))}catch(t){r(t)}}function o(t){try{a(s.throw(t))}catch(t){r(t)}}function a(t){var i;t.done?n(t.value):(i=t.value,i instanceof e?i:new e((function(t){t(i)}))).then(h,o)}a((s=s.apply(t,i||[])).next())}))};class ml{constructor(t,i,e){this.WN=!1,this.GN=[],this.JN=[],this.QN=!1,this.Kf=t,this.YN=i,this.XN=e}getMetadata(t,i){this.WN?t&&t(this.zN):this.ZN(t,i)}setAvailableQualities(t){this.zN.setAvailableQualities(t)}ZN(t,i){t&&this.GN.push(t),i&&this.JN.push(i),this.QN||(this.QN=!0,this.KN().then((t=>fl(this,void 0,void 0,(function*(){const i=yield Th.k.loadInsights({id:this.Kf,versionId:this.YN,insightsInputType:pl.i.Video});this.QN=!1,this.WN=!0,this.zN=this.tU(t,i.insights,i.sentimentAnalysis),this.GN.forEach((t=>t(this.zN))),this.GN=[]})))).catch((()=>{this.QN=!1,this.JN.forEach((t=>t()))})))}}class gl{constructor(t,i,e,n,r,h,o){if(this.Kf=t,this.XN=i,this.gd=n,this.iU=o,this.eU=[],this.sU=[],this.nU=[],this.rU=[],this.hU={insights:[],insightsFallback:!1},this.jE=[],this.FN=e.title,this.Ku=e.altText,this.VN=e.description,this.Ab=e.clickUrl,this.eU=e.keywordList,this.oU=e.languageId,this.sU=e.trackList,this.sU&&this.sU.length>0){this.sU.forEach((t=>{t.file=this.gd.appendParamsToUrl(this.aU($s.n.endPoints.base.video,t.file))}));const t=this.sU.findIndex((t=>t.title.indexOf("English")>-1));if(t>-1){const i=this.sU.splice(t,1);this.sU.unshift(...i)}}this.cU=e.thumbnail,this.vj=e.duration,this.rU=e.customFields,this.UN=e.hlsFilePath,this.uU=e.sourceItemId,(0,f.BZ)(r)?(this.hU.insightsFallback=!1,this.hU.insights=r):(this.hU.insightsFallback=!0,this.hU.insights=e.videoIndexes),Array.isArray(r)&&r.length!==e.videoIndexes.length&&(0,s.n)({message:"VideoSourceMeta_insights_mismatch",exception:`media:${this.Kf}, revision:${h}`,callStack:`insights:${r} videoIndexes:${e.videoIndexes}`,level:s.D.WARN},{sendMaxLog:!1}),(0,f.BZ)(e.renditionList)&&(this.nU=this.dU(e.renditionList),this.pU(e.renditionList))}dU(t){return t.sort(((t,i)=>t.height-i.height))}setAvailableQualities(t){this.jE=t}pU(t){(0,f.qy)("height",t).forEach(((t,i)=>{this.jE.push({videoHeight:t.height,label:`${t.height}p`,isHD:t.height>=720})}))}fU(t,i){return this.nU.find((e=>e.codec===t&&e.height===i))}aU(t,i){let e=`${t}${this.Kf}/`;return(0,dt.QM)(this.XN)?e+=`${this.XN}/${i}`:e+=i,e}mU(t,i){const e=(0,xi.DE)(t,this.jE.map((t=>t.videoHeight)));return this.fU(i,e)}get hlsFilePath(){return this.UN}getAvailableQualities(){return this.jE}getClosestSourceQuality(t){let i;const e=(0,xi.DE)(t,this.jE.map((t=>t.videoHeight)));return this.jE.forEach((t=>{t.videoHeight===e&&(i=t)})),i}getSources(t,i){const e=[];return i.forEach((i=>{const s=this.mU(t,i.id);(0,f.BZ)(e)||s&&e.push({src:this.gd.appendParamsToUrl(this.aU($s.n.endPoints.base.video,s.file)),type:i.type})})),e}getHlsSource(){return this.aU($s.n.endPoints.base.video,this.UN)}getThumbnailUrl(t,i){const e=this.aU($s.n.endPoints.base.image,this.cU);return _a.getSmartCroppedImageUrl(e,t,i,this.gd)}getDefaultSubtitle(){const t=this.sU.find((t=>t.title.indexOf("English")>-1));return t||this.sU[0]}get title(){return this.FN}get altText(){return(0,dt.$K)(this.Ku)?this.Ku:""}get description(){return this.VN}get clickUrl(){return this.Ab}get keywords(){return this.eU}get languageId(){return this.oU}get sourceItemId(){return this.uU}get subtitles(){return(0,f.BZ)(this.sU)?this.sU:void 0}get spriteSheet(){return this.gU}get duration(){return this.vj}get id(){return this.Kf}get customFields(){return this.rU}get insights(){return this.hU}get sentimentAnalysis(){return this.iU}}var vl=o(7593);class yl extends ml{constructor(t,i,e,s){super(t,i,e),this.gd=s,this.vU=new vl.t(l.ProtoMediaMetadataResponse,"VideoSourceWrapper")}KN(){let t=`${$s.n.endPoints.base.metadata}${this.Kf}/`;return(0,dt.QM)(this.XN)?t+=`${this.XN}/${this.YN}_media.bin`:t+=`${this.YN}_media.bin`,this.vU.fetchMetadata(this.gd.appendParamsToUrl(t))}tU(t,i,e){return new gl(this.Kf,this.XN,t,this.gd,i,this.YN,e)}}class bl{constructor(t,i){this.jE=[],this.Kf=t,this.Ku=i.altText,this.UN=i.outputUrl,this.cU=i.thumbnailUrl,this.yU=i.name,this.bU=i.startDate}getSources(t,i){return null}setAvailableQualities(t){this.jE=t}get hlsFilePath(){return this.UN}getAvailableQualities(){return this.jE}getClosestSourceQuality(t){let i;const e=(0,xi.DE)(t,this.jE.map((t=>t.videoHeight)));return this.jE.forEach((t=>{t.videoHeight===e&&(i=t)})),i}getHlsSource(){return this.UN}getThumbnailUrl(t,i){return this.cU}get id(){return this.Kf}get altText(){return(0,dt.$K)(this.Ku)?this.Ku:""}get title(){return this.yU}get startDate(){return this.bU}getDefaultSubtitle(){return null}}class xl extends ml{constructor(){super(...arguments),this.vU=new vl.t(l.ProtoLiveMediaMetadataResponse,"LiveVideoSourceWrapper")}KN(){const t=`${$s.n.endPoints.base.metadata}${this.Kf}/${this.YN}_liveStream.bin`;return this.vU.fetchMetadata(t)}tU(t){return new bl(this.Kf,t)}}class wl extends class{constructor(t,i,e,n,r,h,o,a,c,u,d,p=0){if(this.global=t,this.targetContainer=i,this.xU=e,this.Vc=n,this.secondLevelDomain=r,this.apiConfig=h,this.isServerlessMode=o,this.supplyChainSettings=a,this.isSeoTraffic=c,this.gd=u,this.videoPosition=d,this.sharingDestinations=[],this.disableAdvertising=!1,this.adBreaks=[],this.disableClickUrl=!1,this.moatTrackingEnabled=!1,this.pauseAdWhenFinished=!1,this.loopAdWhenFinished=!1,this.adsMustBeSkippableIfLongerThan=Gi.f3,(0,dt.QM)(e.initializationSettingsJson))try{const t=JSON.parse(e.initializationSettingsJson);this.apiConfig=al(this.apiConfig,t)}catch(t){(0,s.n)({message:"invalid_init_json",exception:t.message,callStack:t.callStack,level:s.D.CRITICAL})}if((this.apiConfig.playerMode===Kc.Buzzfeed||this.apiConfig.settings.pauseAdWhenFinished)&&(this.pauseAdWhenFinished=!0),this.wU(this.xU.lineItems),this.soundMode=(0,dt.$K)(this.apiConfig.settings.defaultSoundMode)?this.apiConfig.settings.defaultSoundMode:e.soundMode,this.playbackMode=(0,dt.$K)(this.apiConfig.settings.playbackMode)?this.apiConfig.settings.playbackMode:e.playbackMode,this.playbackMode===l.ProtoPlayerPlaybackModeEnum.ClickToPlay||this.soundMode===l.ProtoPlayerSoundMode.Mute||(0,bi.we)()||(this.soundMode=l.ProtoPlayerSoundMode.Mute),this.html=e.html,this.css=e.css,this.floatingSettings=new ll(e,p,this.apiConfig.settings.customization.floating),e.logoResource||(0,dt.QM)(this.apiConfig.settings.customization.logoUrl)){let t=`${$s.n.endPoints.base.image}${e.playerId}/${e.logoResource}`;t=this.gd.appendParamsToUrl(t),this.logoUrl=(0,dt.QM)(this.apiConfig.settings.customization.logoUrl)?this.apiConfig.settings.customization.logoUrl:t}const f=e.amazonTamSlotId;(0,dt.QM)(f)&&(this.amazonTamSlotId=f),(0,dt.$K)(this.apiConfig.settings.advertising.macros)&&(this.externalMacros=this.apiConfig.settings.advertising.macros),(0,dt.$K)(this.apiConfig.settings.disableAdvertising)&&(this.disableAdvertising=this.apiConfig.settings.disableAdvertising),this.midRollNumber=(0,dt.$K)(this.apiConfig.settings.advertising.maxNumberOfMidRolls)?this.apiConfig.settings.advertising.maxNumberOfMidRolls:e.midRollNumber,this.adViewabilityPolicy=e.adViewabilityPolicy,this.preRollBreak=((0,dt.$K)(this.apiConfig.settings.advertising.preRollBreak)?(0,ut.qe)(this.apiConfig.settings.advertising.preRollBreak,500):e.preRollBreak)*Ht.s_,this.postRollBreak=((0,dt.$K)(this.apiConfig.settings.advertising.postRollBreak)?(0,ut.qe)(this.apiConfig.settings.advertising.postRollBreak,500):e.postRollBreak)*Ht.s_,this.playerId=e.playerId,this.floatingSettings.floatingMode===l.ProtoPlayerFloatingMode.Always?this.closeButtonMode=this.floatingSettings.floatingCloseButtonMode:this.closeButtonMode=(0,dt.$K)(this.apiConfig.settings.customization.closeButtonMode)?this.apiConfig.settings.customization.closeButtonMode:e.closeButtonMode,this.isCloseButton=!!this.closeButtonMode||!!this.floatingSettings.floatingCloseButtonMode,this.uiComponentsVisibility={casting:!1,expandButton:(0,dt.$K)(this.apiConfig.settings.customization.showExpandButton)?this.apiConfig.settings.customization.showExpandButton:e.expandButton},this.sharingDestinations=void 0,this.adPlaybackMode=e.adPlaybackMode,(0,dt.$K)(this.apiConfig.settings.disableClickUrl)&&(this.disableClickUrl=this.apiConfig.settings.disableClickUrl);const{skippability:m,skipAdAfter:g,skipMin:v}=h.settings.advertising.skipAdSettings||{};this.skipAdAfter=(0,dt.$K)(g)?g:e.skipAdAfter,this.skippability=(0,dt.$K)(m)?m:e.skippability,this.skipMin=(0,dt.$K)(v)?v:e.skipMin;const{disableTracking:y}=h.settings._connatixInternals;(y||o||this.isSeoTraffic)&&(this.disableTracking=!0),this.sessionId=this.xU.sessionId}setPreRollBreak(t){this.preRollBreak=this._U(this.preRollBreak,t)}setPostRollBreak(t){this.postRollBreak=this._U(this.postRollBreak,t)}_U(t,i){const e=(0,ut.w4)(i);return null===e?t:e}SU(){this.PU(),this.AU();let t=[...this.IU(),...this.kU()];t=this.CU(t),t=this.TU(t),t=this.MU(t);const i=(0,dt.$K)(this.apiConfig.settings.rendering.scrollHijackingProtection)?this.apiConfig.settings.rendering.scrollHijackingProtection:this.xU.scrollHijackingProtection;this.lineItemSettings={lineItems:t,disableScrollHijackEnforcement:i},this.EU(this.lineItemSettings)}BU(t){return t*Ht.s_}OU(t,i){i.adTag=(0,dt.$K)(t.url)?t.url:i.adTag,i.requestCap=(0,dt.$K)(t.contentRequestCap)?t.contentRequestCap:i.requestCap,i.impressionCap=(0,dt.$K)(t.contentImpressionCap)?t.contentImpressionCap:i.impressionCap,i.viewability=(0,dt.$K)(t.viewability)?t.viewability:i.viewability,i.sound=(0,dt.$K)(t.sound)?t.sound:i.sound,i.ignoreFilledRequests=(0,dt.$K)(t.ignoreFilledRequests)?t.ignoreFilledRequests:i.ignoreFilledRequests,i.headerBidderBids=(0,dt.$K)(t.headerBidderBids)?t.headerBidderBids:i.headerBidderBids,i.prebidJsBidParamsJSONString=(0,dt.$K)(t.prebidJsBidParamsJSONString)?t.prebidJsBidParamsJSONString:i.prebidJsBidParamsJSONString,i.headerBidderTimeout=(0,dt.$K)(t.headerBidderTimeout)?t.headerBidderTimeout:i.headerBidderTimeout,i.resetRequestsCapTime=(0,dt.$K)(t.resetRequestsCapTime)?t.resetRequestsCapTime:i.resetRequestsCapTime,i.resetImpressionsCapTime=(0,dt.$K)(t.resetImpressionsCapTime)?t.resetImpressionsCapTime:i.resetImpressionsCapTime,i.resetCapType=(0,dt.$K)(t.resetCapType)?t.resetCapType:i.resetCapType,i.timeBetweenRequests=(0,dt.$K)(t.timeBetweenRequests)?t.timeBetweenRequests:i.timeBetweenRequests,i.skipMode=(0,dt.$K)(t.skipMode)?t.skipMode:i.skipMode,i.floorPrice=(0,dt.$K)(t.floorPrice)?t.floorPrice:i.floorPrice,i.adBreakSettings=(0,dt.$K)(t.adBreakSettings)?t.adBreakSettings:i.adBreakSettings,i.pauseAdOutOfView=(0,dt.$K)(t.pauseAdOutOfView)?t.pauseAdOutOfView:i.pauseAdOutOfView,i.nonlinearLineItemSettings=(0,dt.$K)(t.nonlinearLineItemSettings)?this.LU(t.nonlinearLineItemSettings):i.nonlinearLineItemSettings,i.adType=(0,dt.$K)(t.nonlinearLineItemSettings)?l.ProtoAdType.Nonlinear:i.adType}LU(t){const i={nonLinearRequestType:t.nonLinearRequestType?t.nonLinearRequestType:l.ProtoNonlinearRequestType.Banner,nonLinearAdTimeSeconds:t.nonLinearAdTimeSeconds?t.nonLinearAdTimeSeconds:15};return i.nonLinearAdTimeSeconds<15&&(i.nonLinearAdTimeSeconds=15),i.nonLinearAdTimeSeconds>180&&(i.nonLinearAdTimeSeconds=180),i}PU(){this.RU(this.apiConfig.settings.advertising.preRollBreak,l.ProtoAdBreakTypeEnum.PreRoll),this.RU(this.apiConfig.settings.advertising.postRollBreak,l.ProtoAdBreakTypeEnum.PostRoll),this.RU(this.apiConfig.settings.advertising.maxNumberOfMidRolls,l.ProtoAdBreakTypeEnum.MidRoll)}RU(t,i){const e=this.DU(this.apiConfig.settings.advertising.adBreaks,i),s=this.DU(this.xU.adBreaks,i),n={maxAdPodDuration:0,maxAdSlotDuration:0,numberOfAdSlots:1,types:[i]};e?this.adBreaks.push(e):!(0,dt.$K)(t)||e||s?!e&&s&&this.adBreaks.push(s):this.adBreaks.push(n)}DU(t,i){if(!t)return;let e;return t.forEach((t=>{t.types.includes(i)&&(e=Object.assign({},t),e.types=[i])})),e}TU(t){const{adBreaks:i}=this;let e=t;const s=[];return i.forEach((t=>{t.types.forEach((i=>s.push(Object.assign(Object.assign({},t),{types:[i]}))))})),s.forEach((t=>{e=this.removeCompatibleLineItems(t,e)})),t.filter((t=>!e.includes(t)))}MU(t){return t.filter((t=>t.adType!==l.ProtoAdType.Nonlinear))}removeCompatibleLineItems(t,i){const e=t.types[0],s=t.numberOfAdSlots>1?l.ProtoLineItemAdBreakTypeEnum.AdPod:l.ProtoLineItemAdBreakTypeEnum.SingleAd;return i.filter((t=>!t.adBreakSettings.adBreakTargeting.some((t=>t.adRollType===e&&(t.adBreakTypeEnum===l.ProtoLineItemAdBreakTypeEnum.All||t.adBreakTypeEnum===s)))))}wU(t){t.forEach((t=>{t.adBreakSettings||this.jU(t),this.FU(t)}))}jU(t){t.adBreakSettings={adBreakTargeting:[{adRollType:l.ProtoAdBreakTypeEnum.PreRoll,adBreakTypeEnum:l.ProtoLineItemAdBreakTypeEnum.All},{adRollType:l.ProtoAdBreakTypeEnum.MidRoll,adBreakTypeEnum:l.ProtoLineItemAdBreakTypeEnum.All},{adRollType:l.ProtoAdBreakTypeEnum.PostRoll,adBreakTypeEnum:l.ProtoLineItemAdBreakTypeEnum.All}]}}FU(t){0===t.requestCap&&(t.requestCap=20)}AU(){this.adBreaks.forEach((t=>{t.maxAdSlotDuration=this.BU(t.maxAdSlotDuration),t.maxAdPodDuration=this.BU(t.maxAdPodDuration),t.numberOfAdSlots<=1?t.maxAdPodDuration=0:t.maxAdSlotDuration>t.maxAdPodDuration&&(t.maxAdSlotDuration=t.maxAdPodDuration)}))}VU(t,i){const e=Object.assign({},i);return this.OU(t,e),(0,dt.$K)(t.externalMediaFile)&&(e.externalMediaFile=t.externalMediaFile),(0,dt.$K)(t.externalHlsFile)&&(e.externalHlsFile=t.externalHlsFile),e.customCpm=t.cpm,e}IU(){const t=[];if(!(0,f.BZ)(this.apiConfig.settings.advertising.lineItems))return[];const i=this.xU.lineItems.filter((t=>t.creativeType===l.ProtoCreativeTypeEnum.External));return this.apiConfig.settings.advertising.lineItems.forEach((e=>{if(this.FU(e),this.isServerlessMode){const i=this.$U(),s=this.VU(e,i);t.push(s)}else i.forEach((i=>{if(e.id===i.advertiserLineItemId&&(e.url||e.headerBidderBids||e.prebidJsBidParamsJSONString||e.externalMediaFile||e.externalHlsFile)){const s=this.VU(e,i);t.push(s)}}))})),t}kU(){return!0===this.apiConfig.settings.advertising.blockConnatixDemand?[]:this.xU.lineItems.filter((t=>t.creativeType!==l.ProtoCreativeTypeEnum.External))}CU(t){return t.forEach((t=>{t.creativeType===l.ProtoCreativeTypeEnum.External&&(t.headerBidderBids&&"[]"!==t.headerBidderBids||(0,dt.QM)(t.prebidJsBidParamsJSONString)?t.creativeType=l.ProtoCreativeTypeEnum.HeaderBidder:t.externalMediaFile||t.externalHlsFile?t.creativeType=l.ProtoCreativeTypeEnum.MediaFile:t.creativeType=l.ProtoCreativeTypeEnum.ThirdParty)})),t}$U(){return l.ProtoLineItem.toObject(l.ProtoLineItem.fromObject({}),{defaults:!0,arrays:!0,objects:!0})}EU(t){this.moatTrackingEnabled=t.lineItems.some((t=>t.moatTrackingEnabled))}}{constructor(t,i,e,n,r,h,o,a,c,u,d){var p;super(t,i,e,n,r,h,o,a,d,c,u),this.global=t,this.targetContainer=i,this.xU=e,this.gd=c,this.videoPosition=u,this.playlist=[],this.outstreamAdAsContent=!1,this.alwaysDisplayControls=this.apiConfig.settings.customization.alwaysDisplayControls,this.playerSize=this.NU(),this.midRollOnlyOnLongContent=(0,dt.$K)(this.apiConfig.settings.advertising.midRollOnlyOnLongContent)?this.apiConfig.settings.advertising.midRollOnlyOnLongContent:e.midRollOnlyOnLongContent,this.uiComponentsVisibility.muteWatermark=(0,dt.$K)(this.apiConfig.settings.customization.showMuteWatermark)?this.apiConfig.settings.customization.showMuteWatermark:e.muteWatermark,this.displayAdCountdown=(0,dt.$K)(this.apiConfig.settings.customization.displayAdCountdown)?this.apiConfig.settings.customization.displayAdCountdown:e.displayAdCountdown,this.playlistId=e.playlistId,this.accentColor=(0,dt.QM)(this.apiConfig.settings.customization.accentColor)?this.apiConfig.settings.customization.accentColor:e.accentColor,this.iconsColor=(0,dt.QM)(this.apiConfig.settings.customization.iconsColor)?this.apiConfig.settings.customization.iconsColor:e.iconsColor,this.tooltipTextColor=(0,dt.QM)(this.apiConfig.settings.customization.tooltipTextColor)?this.apiConfig.settings.customization.tooltipTextColor:e.tooltipTextColor,this.tooltipBackgroundColor=(0,dt.QM)(this.apiConfig.settings.customization.tooltipBackgroundColor)?this.apiConfig.settings.customization.tooltipBackgroundColor:e.tooltipBackgroundColor,this.prefetchOnPreroll=(0,dt.$K)(this.apiConfig.settings.advertising.prefetchOnPreroll)?this.apiConfig.settings.advertising.prefetchOnPreroll:e.prefetchOnPreroll,this.minTimeBeforeFirstAd=((0,dt.$K)(this.apiConfig.settings.advertising.timeBeforeFirstAd)?this.apiConfig.settings.advertising.timeBeforeFirstAd:e.minTimeBeforeFirstAd)*Ht.s_,this.timeBetweenAds=((0,dt.$K)(this.apiConfig.settings.advertising.timeBetweenAds)?this.apiConfig.settings.advertising.timeBetweenAds:e.timeBetweenAds)*Ht.s_,this.upNextMode=(0,dt.$K)(this.apiConfig.settings.nextVideoMode)?this.apiConfig.settings.nextVideoMode:e.upNextMode,this.closedCaptionDefault=(0,dt.$K)(this.apiConfig.settings.customization.closedCaptionDefault)?this.apiConfig.settings.customization.closedCaptionDefault:e.closedCaption,this.logoPosition=(0,dt.$K)(this.apiConfig.settings.customization.logoPosition)?this.apiConfig.settings.customization.logoPosition:e.logoPosition,this.playerType=e.playerType,this.playerType!==$.ProtoElementsTypeEnum.OutStream||!this.apiConfig.settings.outstreamAdAsContent&&this.apiConfig.playerMode!==Kc.Buzzfeed||(this.outstreamAdAsContent=!0);if(((0,dt.$K)(this.apiConfig.settings.outstreamSettings.endAdBreakPolicy)?this.apiConfig.settings.outstreamSettings.endAdBreakPolicy===$.ProtoOutstreamEndAdBreakPolicyEnum.Loop:e.outstreamEndAdBreakPolicy===$.ProtoOutstreamEndAdBreakPolicyEnum.Loop)&&(this.outstreamAdAsContent=!0,this.loopAdWhenFinished=!0),(0,dt.r)(this.minTimeBeforeFirstAd)||this.apiConfig.playerMode===Kc.Buzzfeed||this.outstreamAdAsContent||(this.minTimeBeforeFirstAd=10),(0,dt.QM)(this.apiConfig._appSettings.bundleID)&&!this.isInApp()&&(0,s.n)({message:"Elements_PlayerModel_bundle_id_for_non_in_app",level:s.D.CRITICAL}),!(0,dt.QM)(this.apiConfig._appSettings.bundleID)&&this.isInApp()&&(0,s.n)({message:"Elements_PlayerModel_bundle_id_missing_for_in_app",level:s.D.CRITICAL}),this.videoQuality=(0,dt.$K)(this.xU.videoQuality)?this.xU.videoQuality:$.ProtoVideoQuality.Auto,!(0,f.BZ)(this.apiConfig.settings.playlist)||(0,dt.QM)(this.apiConfig.mediaId)||(0,f.BZ)(this.apiConfig.mediaIdList)?e.playlist.length>0&&e.playlist.forEach((({mediaId:t,revisionNumber:i,mediaContentVersionId:e,insightsRevisionNumber:n})=>{if(this.xU.playerType===$.ProtoElementsTypeEnum.Live)this.playlist.push(new xl(t,i,e)),Th.k.markAsUnavailable(t);else{const r=i===n;this.playlist.push(new yl(t,i,e,this.gd)),r?Th.k.loadInsights({id:t,versionId:i,insightsInputType:pl.i.Video}):(Th.k.markAsUnavailable(t),(0,dt.kE)(i)&&(0,dt.kE)(n)&&(0,s.n)({message:"ElementsPlayerModel_InsightsRevisionNumberMismatch",exception:`media:${t}, revisionNumber:${i}, insightsRevisionNumber:${n}`,level:s.D.WARN},{sendMaxLog:!1}))}})):this.apiConfig.settings.playlist.forEach((t=>{(0,dt.QM)(t.liveStreamFilePath)&&(this.playerType=$.ProtoElementsTypeEnum.Live,this.playbackMode=$.ProtoPlayerPlaybackModeEnum.ClickToPlay),this.playlist.push(new dl(t))})),this.isOutStreamType()){const t=(0,dt.$K)(this.apiConfig.settings.outstreamSettings.initialRendering)?this.apiConfig.settings.outstreamSettings.initialRendering:e.outstreamInitialRendering,i=(0,dt.QM)(this.apiConfig.settings.outstreamSettings.houseScreenColor)?this.apiConfig.settings.outstreamSettings.houseScreenColor:e.outstreamHouseBackgroundColor,s=((0,dt.$K)(this.apiConfig.settings.outstreamSettings.totalAdBreakLength)?this.apiConfig.settings.outstreamSettings.totalAdBreakLength:e.outstreamTotalAdBreakLength)*Ht.s_,n=(0,dt.$K)(this.apiConfig.settings.outstreamSettings.endAdBreakPolicy)?this.apiConfig.settings.outstreamSettings.endAdBreakPolicy:e.outstreamEndAdBreakPolicy;this.outstreamSettings={initialRendering:t,houseScreenBackgroundColor:i,totalAdBreakLength:s,endAdBreakPolicy:n}}((0,dt.$K)(this.apiConfig.settings.gallery.style)&&this.apiConfig.settings.gallery.style!==$.ProtoGalleryStyleMode.None||!(0,dt.$K)(this.apiConfig.settings.gallery.style)&&e.galleryStyle!==$.ProtoGalleryStyleMode.None)&&this.floatingSettings.floatingMode!==$.ProtoPlayerFloatingMode.Always&&(this.gallery={style:(0,dt.$K)(this.apiConfig.settings.gallery.style)?this.apiConfig.settings.gallery.style:e.galleryStyle,orientation:this.UU()}),this.nonlinearPlayerSettings=(null===(p=this.apiConfig.settings.advertising)||void 0===p?void 0:p.nonlinearPlayerSettings)?this.HU(this.apiConfig.settings.advertising.nonlinearPlayerSettings):this.xU.nonlinearPlayerSettings,this.SU(),this.nonlinearPlayerSettings||(this.lineItemSettings.lineItems=this.lineItemSettings.lineItems.filter((t=>t.adType!==l.ProtoAdType.Nonlinear)))}HU(t){const i={numberOfNonlinearAds:t.numberOfNonlinearAds?t.numberOfNonlinearAds:0,timeSecondsBetweenNonlinear:t.timeSecondsBetweenNonlinear?t.timeSecondsBetweenNonlinear:5,timeSecondsBetweenLinearAndNonlinear:t.timeSecondsBetweenLinearAndNonlinear?t.timeSecondsBetweenLinearAndNonlinear:0};i.numberOfNonlinearAds<0&&(i.numberOfNonlinearAds=0),i.numberOfNonlinearAds>10&&(i.numberOfNonlinearAds=10);i.timeSecondsBetweenNonlinear<1&&(i.timeSecondsBetweenNonlinear=1),i.timeSecondsBetweenNonlinear>180&&(i.timeSecondsBetweenNonlinear=180);return i.timeSecondsBetweenLinearAndNonlinear<0&&(i.timeSecondsBetweenLinearAndNonlinear=0),i.timeSecondsBetweenLinearAndNonlinear>180&&(i.timeSecondsBetweenLinearAndNonlinear=180),i}get urlSuffixerService(){return this.gd}isInApp(){return(0,f.d3)(this.playerType,[$.ProtoElementsTypeEnum.InStreamInApp])}isInStreamType(){return(0,f.d3)(this.playerType,[$.ProtoElementsTypeEnum.InStream,$.ProtoElementsTypeEnum.InStreamInApp])}isOutStreamType(){return(0,f.d3)(this.playerType,[$.ProtoElementsTypeEnum.OutStream])}isLiveType(){return(0,f.d3)(this.playerType,[$.ProtoElementsTypeEnum.Live])}BU(t){return this.outstreamAdAsContent?0:super.BU(t)}MU(t){return t.filter((t=>this.playerType===$.ProtoElementsTypeEnum.InStream||this.playerType===$.ProtoElementsTypeEnum.InStreamInApp||t.adType!==l.ProtoAdType.Nonlinear))}NU(){return{responsive:(0,dt.$K)(this.apiConfig.settings.customization.responsive)?this.apiConfig.settings.customization.responsive:this.xU.responsive,ratioWidth:(0,dt.$K)(this.apiConfig.settings.customization.ratioWidth)?this.apiConfig.settings.customization.ratioWidth:this.xU.ratioWidth,ratioHeight:(0,dt.$K)(this.apiConfig.settings.customization.ratioHeight)?this.apiConfig.settings.customization.ratioHeight:this.xU.ratioHeight,fixedWidth:(0,dt.$K)(this.apiConfig.settings.customization.fixedWidth)?this.apiConfig.settings.customization.fixedWidth:this.xU.fixedWidth,fixedHeight:(0,dt.$K)(this.apiConfig.settings.customization.fixedHeight)?this.apiConfig.settings.customization.fixedHeight:this.xU.fixedHeight}}UU(){return this.Vc===l.ProtoDeviceType.Smartphone||this.Vc===l.ProtoDeviceType.Tablet?$.ProtoGalleryOrientationEnum.Portrait:this.apiConfig.settings.gallery.orientation?this.apiConfig.settings.gallery.orientation:this.xU.galleryOrientation}}const _l=Object.assign(Object.assign(Object.assign({},Tt.Km),j),F),Sl={PlaybackModeEnum:{AutoPlay:l.ProtoPlayerPlaybackModeEnum.Autoplay,ScrollToPlay:l.ProtoPlayerPlaybackModeEnum.ScrollToPlay,ClickToPlay:l.ProtoPlayerPlaybackModeEnum.ClickToPlay},DefaultSoundModeEnum:{On:l.ProtoPlayerSoundMode.On,Off:l.ProtoPlayerSoundMode.Mute,OnHover:l.ProtoPlayerSoundMode.Hover},InsertPositionEnum:{WithinContainer:l.ProtoPlayerInsertMode.WithinContainer,BeforeContainer:l.ProtoPlayerInsertMode.BeforeContainer,AfterContainer:l.ProtoPlayerInsertMode.AfterContainer,ReplaceContainer:l.ProtoPlayerInsertMode.ReplaceContainer,HideContainer:l.ProtoPlayerInsertMode.HideContainer},CloseButtonModeEnum:{Off:l.ProtoPlayerCloseButtonMode.Off,On:l.ProtoPlayerCloseButtonMode.OnHover,OnAfterFirstAd:l.ProtoPlayerCloseButtonMode.OnHoverAfterFirstAd,OnHover:l.ProtoPlayerCloseButtonMode.OnHover,OnHoverAfterFirstAd:l.ProtoPlayerCloseButtonMode.OnHoverAfterFirstAd,AlwaysOn:l.ProtoPlayerCloseButtonMode.AlwaysOn},QualityEnum:L,LineItemExcludedSlotsEnum:{PreRoll:l.ProtoAdSlotsEnum.PreRoll,MidRoll:l.ProtoAdSlotsEnum.MidRoll,PostRoll:l.ProtoAdSlotsEnum.PostRoll},ErrorTypesEnum:{SetupError:Tt.n9.SetupError,NoPlayer:Tt.n9.NoPlayer},FloatingModeEnum:{Off:l.ProtoPlayerFloatingMode.Off,OnPageLoad:l.ProtoPlayerFloatingMode.OnPageLoad,AfterInView:l.ProtoPlayerFloatingMode.AfterInView,Always:l.ProtoPlayerFloatingMode.Always},FloatingDevicesEnum:{Desktop:l.ProtoDeviceType.Desktop,Smartphone:l.ProtoDeviceType.Smartphone,Tablet:l.ProtoDeviceType.Tablet,Other:l.ProtoDeviceType.GameConsole},FloatingFixedPositionModeEnum:{Page:l.ProtoFloatingFixedPositionMode.Page,Element:l.ProtoFloatingFixedPositionMode.Element},FloatingScrollPositionEnum:{BottomRight:l.ProtoPositionMode.BottomRight,BottomLeft:l.ProtoPositionMode.BottomLeft,TopRight:l.ProtoPositionMode.TopRight,TopLeft:l.ProtoPositionMode.TopLeft},FloatingStatesEnum:{Float:Rt.Float,Embed:Rt.Embed},FloatingAppendLocationEnum:{Above:l.ProtoFloatingAppendLocationEnum.Above,Below:l.ProtoFloatingAppendLocationEnum.Below,Within:l.ProtoFloatingAppendLocationEnum.Within},ImplementationTypeEnum:{Amp:l.ProtoImplementationType.Amp,Web:l.ProtoImplementationType.Web}},Pl=Object.assign(Object.assign({},Sl),{NextVideoModeEnum:{Next:$.ProtoPlayerUpNextMode.Next,Loop:$.ProtoPlayerUpNextMode.Loop,Stop:$.ProtoPlayerUpNextMode.Stop},LogoPositionEnum:{None:$.ProtoLogoPositionMode.None,ControlBar:$.ProtoLogoPositionMode.ControlBar,BottomRight:$.ProtoLogoPositionMode.BottomRight,BottomLeft:$.ProtoLogoPositionMode.BottomLeft,TopRight:$.ProtoLogoPositionMode.TopRight,TopLeft:$.ProtoLogoPositionMode.TopLeft},PlayerTypesEnum:{InStream:$.ProtoElementsTypeEnum.InStream,OutStream:$.ProtoElementsTypeEnum.OutStream,InStreamInApp:$.ProtoElementsTypeEnum.InStream,Live:$.ProtoElementsTypeEnum.Live},GalleryStyleModeEnum:{None:$.ProtoGalleryStyleMode.None,Detailed:$.ProtoGalleryStyleMode.Detailed,Visual:$.ProtoGalleryStyleMode.Visual},GalleryOrientationEnum:{Landscape:$.ProtoGalleryOrientationEnum.Landscape,Portrait:$.ProtoGalleryOrientationEnum.Portrait},InitialRenderingEnum:{ExpandWithAd:$.ProtoOutstreamInitialRenderingEnum.ExpandWithAd,FullyRendered:$.ProtoOutstreamInitialRenderingEnum.FullyRendered},EndAdBreakPolicyEnum:{Hide:$.ProtoOutstreamEndAdBreakPolicyEnum.Hide,HouseScreen:$.ProtoOutstreamEndAdBreakPolicyEnum.HouseScreen,Loop:$.ProtoOutstreamEndAdBreakPolicyEnum.Loop}});function Al(t,i){const e=t.toObject({},{defaults:!0,arrays:!0,objects:!0}),s=function(t){return t.toObject({},{defaults:!0,arrays:!0,objects:!0})}(i);return e.players.push(s),e.browser=l.Browser.toObject(l.Browser.fromObject({}),{defaults:!0,arrays:!0,objects:!0}),e.geoLocation=l.GeoLocation.toObject(l.GeoLocation.fromObject({}),{defaults:!0,arrays:!0,objects:!0}),e}var Il=o(3344),kl=o(7382);class Cl extends nl{constructor(t,i){super(),this.$e=t;try{this.fa=new Rc,this.Yo()}catch(t){(0,s.n)({message:"omid_verification_client_error",exception:t.message,callStack:t.callStack,level:i?s.D.CRITICAL:s.D.INFO})}}subscribe(t,i){return this.fa.on(t,i)}Yo(){const t=kl.$.getVerificationClient(this.$e);if(!t)throw new Error("omid_verification_client_not_found");if(this.qU=new t,!this.qU.isSupported())throw new Error("omid_not_implemented");this.zU(),this.tO()}zU(){this.qU.registerSessionObserver((t=>{t&&t.type===Il._f.sessionError&&(0,s.n)({message:"omid_verification_client_session_error",exception:t.data.message,level:s.D.WARN})}))}tO(){this.qU.addEventListener(Il._f.geometryChange,(t=>{try{const{percentageInView:i,reasons:e}=t.data.adView,s=[Il.li.backgrounded,Il.li.notFound].some((t=>e.includes(t)));this.dN(s);const n=i/100;this.setViewableThreshold(n),this.fa.trigger(Tt.rl.OmidViewabilityThreshold,n)}catch(t){(0,s.n)({message:"omid_verification_client_geometry_change_error",exception:t.message,callStack:t.callStack,level:s.D.CRITICAL},{throttle:1})}}))}}const Tl=`cnx-player-css-${i.g.version}`;class Ml extends u.a{ue(){return{id:Tl,src:$s.n.endPoints.assets.css.elements}}getDelegateHandler(){return{getCurrentPlaybackTime:()=>{if(!this.renderer)return 0;const t=this.renderer.getApiMethods();return t.getPlayerType()===$.ProtoElementsTypeEnum.OutStream?0:t.getVideoCurrentPosition()},getCurrentVolume:()=>this.renderer.getApiMethods().getVolume()}}getRendererInstance(t,i,e,s){return new sl(this,t,i,e,s)}getViewabilityService(t,i){return this.externalAttributes.settings.useExternalViewabilityService?new nl:this.pi?new Cl(window,this.gi):new rl(t.global,i,t.isOutStreamType())}getPlayerResponse(t,e){return new Promise(((e,s)=>{qs.n.sendProtoRequest({ProtoResponse:$.ProtoElementsResponse,ProtoRequest:$.ProtoElementsRequest,requestData:t,endpoint:$s.n.endPoints.api.pls,withCredentials:!0,queryParams:Object.assign({[Js.Fk]:i.g.version},tn.f.getCidKeyValueObject()),logError:!0}).then((t=>{this.setApiHostUrl(t.apiHostUrl),window.parent.connatixDummy&&(0,Ks.Ph)("connatixDummy",this.pageUrl)&&(t.players[0]=Object.assign(Object.assign({},t.players[0]),window.parent.connatixDummy)),e(t)})).catch((t=>{s(t)}))}))}getPlayerModel(t,i,e,n){const r=new wl(t.insertWindow?t.insertWindow:this.GLOBAL,t.insertContainer,i.players[n],i.browser.device,i.secondLevelDomain,this.externalAttributes,this.isServerlessMode,i.supplyChain,e,this.queryParams.cnxVideoPosition,i.isSeoTraffic||this.queryParams.cnxIsSeoTraffic);return 0===r.playlist.length?((0,s.n)({message:"ElementsLoader_no_playlist_items",level:s.D.CRITICAL}),null):r}getApiConfigEnums(){return Pl}getApiConfigEvents(){return _l}getSpecificRequestData(){const t={localTimestamp:(0,ut.x8)()};this.queryParams.cnxMediaId?t.forceMediaIdList=[this.queryParams.cnxMediaId]:this.externalAttributes.mediaIdList?t.forceMediaIdList=this.externalAttributes.mediaIdList:this.externalAttributes.mediaId&&(t.forceMediaIdList=[this.externalAttributes.mediaId]),this.queryParams.cnxPlaylistId?t.forcePlaylistId=this.queryParams.cnxPlaylistId:this.externalAttributes.playlistId&&!(0,f.BZ)(this.externalAttributes.settings.playlist)&&(t.forcePlaylistId=this.externalAttributes.playlistId);const i=this.externalAttributes.settings.forceSourceItemId;return(0,dt.QM)(i)&&(t.forceSourceItemId=i),t}Ti(){super.Ti(),this.externalAttributes.settings.gallery={},this.externalAttributes.settings.outstreamSettings={}}WU(t){t.forEach((t=>{t.ratioWidth=16,t.ratioHeight=9}))}defaultInitFromProto(){const t=Al($.ProtoElementsResponse,$.ProtoElements);return this.WU(t.players),t}}var El=o(3121);class Bl{constructor(t=!1){this._debugLogging=t,this.GU="eventEmitted",this.fa=new Rc}subscribe(t){return this.fa.on(this.GU,t)}unsubscribe(t){this.fa.remove(this.GU,t)}emitSessionStart(t){const i={videoMetadata:t};this.JU({metadata:i,name:El.Z.SessionStart})}emitContentComplete(){this.JU({name:El.Z.ContentComplete})}emitSessionEnd(){this.JU({name:El.Z.SessionEnd})}emitPlay(){this.JU({name:El.Z.Play})}emitPause(){this.JU({name:El.Z.Pause})}emitAdPlay(){this.JU({name:El.Z.AdPlay})}emitAdPause(){this.JU({name:El.Z.AdPause})}emitAdPlaying(t){const i={adType:t};this.JU({name:El.Z.AdPlaying,metadata:i})}emitAdPaused(t){const i={adType:t};this.JU({name:El.Z.AdPaused,metadata:i})}emitAdImpression(t,i,e){const s={adMetadata:t,customAdMetadata:i,adType:e};this.JU({metadata:s,name:El.Z.AdImpression})}emitAdComplete(t){const i={adType:t};this.JU({name:El.Z.AdComplete,metadata:i})}emitAdStopped(t){const i={adType:t};this.JU({name:El.Z.AdStopped,metadata:i})}emitAdBreakStart(t){const i={adBreakMetadata:t};this.JU({metadata:i,name:El.Z.AdBreakStart})}emitAdBreakComplete(t){const i={adType:t};this.JU({name:El.Z.AdBreakComplete,metadata:i})}emitPlayerResized(t){const i={playerDimensionsMetadata:t};this.JU({metadata:i,name:El.Z.PlayerResized})}emitOnEnterFullscreen(){this.JU({name:El.Z.OnEnterFullscreen})}emitOnExitFullscreen(){this.JU({name:El.Z.OnExitFullscreen})}emitOnPlayerCollapsed(){this.JU({name:El.Z.PlayerCollapsed})}emitOnPlayerExpanded(){this.JU({name:El.Z.PlayerExpanded})}emitAdError(t){const i={adType:t};this.JU({name:El.Z.AdError,metadata:i})}emitPlayError(){this.JU({name:El.Z.PlayError})}emitRenderError(){this.JU({name:El.Z.RenderError})}emitAdClickThru(t){const i={adType:t};this.JU({name:El.Z.AdClickThru,metadata:i})}emitAdInteraction(t){const i={adType:t};this.JU({name:El.Z.AdInteraction,metadata:i})}emitAdVideoStart(t,i){const e={adVideoStartMetadata:t,adType:i};this.JU({metadata:e,name:El.Z.AdVideoStart})}emitAdLoaded(t,i){const e={adLoadedMetadata:t,adType:i};this.JU({metadata:e,name:El.Z.AdLoaded})}emitAdStateChange(t,i){const e={adStateChangedMetadata:t,adType:i};this.JU({metadata:e,name:El.Z.AdStateChange})}emitAdVideoFirstQuartile(t){const i={adType:t};this.JU({name:El.Z.AdVideoFirstQuartile,metadata:i})}emitAdVideoMidpoint(t){const i={adType:t};this.JU({name:El.Z.AdVideoMidpoint,metadata:i})}emitAdVideoThirdQuartile(t){const i={adType:t};this.JU({name:El.Z.AdVideoThirdQuartile,metadata:i})}emitAdVideoComplete(t){const i={adType:t};this.JU({name:El.Z.AdVideoComplete,metadata:i})}emitVolumeChange(t){this.JU({name:El.Z.VolumeChange,metadata:{volume:t}})}emitAdVolumeChange(t){const i={adType:t};this.JU({name:El.Z.AdVolumeChange,metadata:i})}emitAdSkipped(t){const i={adType:t};this.JU({name:El.Z.AdSkipped,metadata:i})}JU(t){var i;(null===(i=null==t?void 0:t.metadata)||void 0===i?void 0:i.adType)!==l.ProtoAdType.Nonlinear&&(this._debugLogging&&console.log("Connatix Player Elements debugging: ",t),this.fa.trigger(this.GU,t))}destroy(){this.JU({name:El.Z.Destroy}),this.fa.removeAll()}}var Ol=o(1730);const Ll=window.parent,Rl=[],Dl=(0,e.bZ)(Js.ym,window.document.currentScript);tn.f.customerId=Dl,window.addEventListener("unload",(function(t){Rl.forEach((t=>t.destroy()))}));const jl=(0,bi.pE)(Ll).topFrame;Ol.e.abServiceType=Ol.j.ElementsABService;const Fl=(t,i)=>i.AMP_CONTEXT_DATA||t.settings.implementationType===l.ProtoImplementationType.Amp,Vl=function(t,i,n,r,h,o,a){var c,l;const u=Fl(t,Ll),d=new Ml(n,Ll,r,u,h,o,a);Rl.push(d);const p=function(){const n={id:Tl,src:$s.n.endPoints.assets.css.elements};(0,bi.Up)((()=>function(t){return new Promise(((i,s)=>{if((0,e.rI)(t.id,jl))return i();(0,e.NS)(t,jl.document.head,jl,(()=>i()),(t=>s(t)))}))}(n))).catch((t=>{throw(0,s.n)({message:"Prerender_Elements_Loader_add_css_link",exception:t.message,callStack:t.stack,level:s.D.INFO},{throttle:1e3}),t})).then((()=>{try{(0,e.Nb)(Ll),d.updateQueryParams(),d.loadScriptTag(t,i)?d.insertRenderer():(0,s.n)({message:"Prerender_Elements_main_no_script_tag",level:s.D.INFO},{throttle:1e3})}catch(t){(0,s.n)({message:"Prerender_Elements_main_insertRenderer",exception:t.message,callStack:t.stack,level:s.D.INFO},{throttle:1e3})}})).catch((()=>{}))};r?(d.setInappPageUrl(null===(c=null==t?void 0:t._appSettings)||void 0===c?void 0:c.appPageURL),p()):d.findPageUrl(Ll,null===(l=null==t?void 0:t.settings)||void 0===l?void 0:l.ampUrl).then((()=>p())).catch((t=>{(0,s.n)({message:"Prerender_Elements_main_init",exception:t.message,callStack:t.stack,level:s.D.INFO},{throttle:1e3}),d.registerApiError()}))};try{!function(){if((0,bi.oC)())return void(0,s.n)({message:"Prerender_Elements_main_IE_check",level:s.D.INFO},{throttle:1e3});if(!r)return;$s.n.bundleDomain=r;const i=n[r],e=r===t.elements;let h=[];Ll[i]&&(h=Ll[i].cmd),Ll[i]=function(){const t={};return t[i]=function(t){var i;t.settings=t.settings||{},t._appSettings=t._appSettings||{},t._appSettings.cmp=t._appSettings.cmp||{},t._appSettings.tcf=t._appSettings.tcf||{},t.settings.customization=t.settings.customization||{},t.settings.rendering=t.settings.rendering||{},t.settings.advertising=t.settings.advertising||{},t.settings.outstreamSettings=t.settings.outstreamSettings||{},t.settings.gallery=t.settings.gallery||{},t.settings._connatixInternals=t.settings._connatixInternals||{},t.settings.plugins=t.settings.plugins||{},t.settings.advertising.skipAdSettings=t.settings.advertising.skipAdSettings||{};return["602660809","com.thomsonreuters.reuters","12345","com.cnx.androidsdkapp"].includes(null===(i=null==t?void 0:t._appSettings)||void 0===i?void 0:i.bundleID)&&(0,s.n)({level:s.D.INFO,message:"CNX_REUTERS_APPSETTINGS",exception:JSON.stringify(t._appSettings)}),t=(t=>{var i,e,s;const n=Object.assign({},t),r=null===(i=n._appSettings)||void 0===i?void 0:i.cmp;((0,dt.QM)(null===(e=n._appSettings)||void 0===e?void 0:e.gdprConsentString)||(0,dt.QM)(null===(s=n._appSettings)||void 0===s?void 0:s.gdprParsedVendorString))&&(n._appSettings.cmp={consentString:(0,dt.QM)(null==r?void 0:r.consentString)?r.consentString:n._appSettings.gdprConsentString,parsedVendorConsents:(0,dt.QM)(null==r?void 0:r.parsedVendorConsents)?r.parsedVendorConsents:n._appSettings.gdprParsedVendorString});const h=Object.assign({},(0,Bo.EQ)(Object.assign({},n._appSettings.cmp))),o=Object.assign({},(0,Bo.EQ)(Object.assign({},n._appSettings.tcf))),{usPrivacyString:a,deviceID:c,appPageURL:l}=(0,Bo.EQ)({usPrivacyString:n._appSettings.usPrivacyString,deviceID:n._appSettings.deviceID,appPageURL:n._appSettings.appPageURL});return n._appSettings=Object.assign(Object.assign({},n._appSettings),{cmp:h,tcf:o,usPrivacyString:a,deviceID:c,appPageURL:l}),n})(t),{render:function(i,n){try{const s=(0,dt.QM)(t._appSettings.bundleID),r=(0,dt.QM)(t._appSettings.sdkVersion);r&&(t.settings.useExternalViewabilityService=ec.shouldUseExternalViewabilityService(t._appSettings.sdkVersion));const h=((t,i)=>{const{settings:{plugins:e}}=t,{cmp:s,tcf:n,usPrivacyString:r,deviceID:h}=t._appSettings,o=Fl(t,Ll);return{UserManagerService:new c.x(jl,i,o,{cmp:s,tcf:n,usPrivacyString:r,deviceID:h}),EventsStorageService:new Bl(e._debugLogging)}})(t,s);Vl(t,i,h,s,r,e,n)}catch(t){(0,s.n)({message:"Prerender_Elements_main_initPlayer",exception:t.message,callStack:t.stack,level:s.D.INFO},{throttle:1e3})}}}},t[i].cmd={push:function(t){try{t()}catch(t){(0,s.n)({message:"Prerender_Elements_main_push_callback",level:s.D.INFO,callStack:t.stack,exception:t.message},{throttle:1e3})}}},t[i].configEnums=Pl,t[i].configEvents=_l,t[i]}(),h.forEach((t=>{try{t()}catch(t){(0,s.n)({message:"Prerender_Elements_main_commands_callback",exception:t.message,callStack:t.stack,level:s.D.INFO},{throttle:1e3})}}))}()}catch(t){(0,s.n)({message:"Prerender_Elements_main",exception:t.message,callStack:t.stack,level:s.D.INFO},{throttle:1e3})}})(),a=o.O(a)})();